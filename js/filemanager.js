angular.module("fileManagerApp",["ui.bootstrap.modal","ui.bootstrap.tpls","ngFileUpload","ngResource","ngCookies","angularMoment","mailerlite.httpPrefix"]).config(["$httpProvider",function(a){a.defaults.headers.common["X-MailerLite-Account"]=X_MAILER_ACCOUNT,a.defaults.headers.common["X-MailerLite-Token"]=X_MAILER_TOKEN}]).run(["amMoment",function(a){a.changeLocale(TRANSLATES_LOCALE)}]).run(["$rootScope",function(a){a.translateCategory="filemanager"}]),angular.module("fileManagerApp").controller("filemanagerController",["$scope","$window","$http","$cookies","$timeout","$modal","fileManagerService","fileManager","foldersResource","imagesResource","Upload",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){b?i.get({id:b.id},function(a){b.count=a.count}):j.count(function(b){a.allCount=b.count||0})}function m(b,c){b.checked!=c&&(b.checked=!!c,a.totalChecked=a.totalChecked+(c?1:-1))}function n(){var b=0,c=a.uploadImages?a.uploadImages.length:0,d=a.uploadedImages?a.uploadedImages.length:0;c+d>0&&(b=d/(c+d)*100,b=Math.round(100*b)/100),a.uploadProgress=b}var o=function(){var a=window.localStorage;return a||(a={getItem:function(a){return a&&this.hasOwnProperty(a)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(a){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[a])},setItem:function(a,b){a&&(document.cookie=escape(a)+"="+escape(b)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(a){a&&this.hasOwnProperty(a)&&(document.cookie=escape(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(a){return new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},a.length=(document.cookie.match(/\=/g)||a).length),a}();a.allCount=0,l(),a.totalChecked=0,function(){function b(b,c){b["order_by["+a.sort.current.sortKey+"]"]=a.sort.current.sortOrder,a.search.value&&(b.search=a.search.value),a.data.activeFolder&&a.data.activeFolder.id&&(b["filters[image_folder_id]"]=a.data.activeFolder.id),j.query(b,c)}function d(){a.images=[],o=!1,a.checkAll=!1,a.totalChecked=0,n=0}function g(c){var d=[];if(a.checkAll){var e={};e.offset=0,e.limit=100,function a(){b(e,function(b){if(!b.length)return c(d);b.forEach(function(a){d.push(a)}),e.offset+=e.limit,a()})}()}else a.images.forEach(function(a){a.checked&&d.push(a)}),c(d)}function k(c){var d=[];if(a.checkAll){var e={};e.offset=0,e.limit=100,function a(){b(e,function(b){if(!b.length)return c(d);b.forEach(function(a){d.push(a.id)}),e.offset+=e.limit,a()})}()}else a.images.forEach(function(a){a.checked&&d.push(a.id)}),c(d)}var n=0,o=!1;a.loadPage=function(c){if(a.imagesLoading||o)return!1;a.imagesLoading=!0;var d={};d.offset=n,d.limit=18,n+=18,b(d,function(b){b.length||(o=!0),a.checkAll&&b.forEach(function(a){m(a,!0)}),a.images=a.images.concat(b),a.imagesLoading=!1,"function"==typeof c&&e(c)})},a.triggerScroll=0,a.reload=function(){d(),a.triggerScroll++},a.$watch("sort.current",function(b){b&&(d(),a.triggerScroll++)}),a.$watch("search.value",function(b){void 0!==b&&(d(),a.triggerScroll++)}),a.$watch("data.activeFolder.id",function(b){d(),a.triggerScroll++}),a.selectChecked=function(){g(function(b){if(b.length>20){f.open({templateUrl:h.path+"modals/confirm_select.html",controller:"confirmModalController",resolve:{count:function(){return b.length}}}).result.then(function(){a.deactivate(b)})}else a.deactivate(b)})},a.moveToFolder=function(b){a.checkAll&&(a.imagesLoading=!0,a.images=[]),k(function(c){a.imagesLoading=!0,a.images=[],i.move({id:b.id},{images:c},function(c){a.imagesLoading=!1,l(),a.data.activeFolder&&l(a.data.activeFolder),l(b),a.data.activeFolder=b},function(c){a.imagesLoading=!1,l(),a.data.activeFolder&&l(a.data.activeFolder),l(b),a.data.activeFolder=b})})},a.removeFromFolder=function(){f.open({templateUrl:h.path+"modals/delete_from_folder.html",controller:"confirmModalController",resolve:{count:function(){return a.checkAll?-1:a.totalChecked}}}).result.then(function(b){a.checkAll&&(a.imagesLoading=!0,a.images=[]),k(function(b){i.move({id:0},{images:b},function(c){if(a.checkAll)a.imagesLoading=!1,a.reload();else{for(var d=a.images.length-1;d>=0;d--)-1!==b.indexOf(a.images[d].id)&&a.images.splice(d,1);a.triggerScroll++}a.totalChecked=0,a.data.activeFolder&&l(a.data.activeFolder)},function(b){a.checkAll&&(a.imagesLoading=!1,a.reload()),a.data.activeFolder&&l(a.data.activeFolder)})})})},a.removeChecked=function(){f.open({templateUrl:h.path+"modals/delete.html",controller:"confirmModalController",resolve:{count:function(){return a.checkAll?-1:a.totalChecked}}}).result.then(function(b){a.checkAll&&(a.imagesLoading=!0,a.images=[]),k(function(b){c({method:"DELETE",url:CLIENT_API_BASE_URL+"/master/images",data:{images:b},headers:{"Content-Type":"application/json"}}).success(function(c){if(a.checkAll)a.imagesLoading=!1,a.reload();else{for(var d=a.images.length-1;d>=0;d--)-1!==b.indexOf(a.images[d].id)&&a.images.splice(d,1);a.triggerScroll++}a.totalChecked=0,l(),i.query(function(b){a.data.folders=b})}).error(function(b){a.checkAll&&(a.imagesLoading=!1,a.reload()),l(),i.query(function(b){a.data.folders=b})})})})}}(),function(){var b,c=!1,d=function(a){var b=window.event||a;16==(b.which||b.keyCode)&&(c=!0,angular.element("body").css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}))},e=function(a){var b=window.event||a;16==(b.which||b.keyCode)&&(c=!1,angular.element("body").css({"-webkit-touch-callout":"auto","-webkit-user-select":"auto","-khtml-user-select":"auto","-moz-user-select":"auto","-ms-user-select":"auto","user-select":"auto"}))};document.addEventListener("keydown",d,!1),document.addEventListener("keyup",e,!1),window.removeFileManagerListeners=function(){document.removeEventListener("keydown",d,!1),document.removeEventListener("keyup",e,!1)},a.toggleCheck=function(d){var e=!d.checked,f=a.images.indexOf(d);if(a.checkAll=!1,c&&void 0!==b)for(var g=Math.min(f,b);g<=Math.max(f,b);g++)m(a.images[g],e);else m(d,e);b=f},a.checkAll=!1,a.toggleCheckAll=function(){a.checkAll=!a.checkAll,a.images.forEach(function(b){m(b,a.checkAll)})}}(),a.data={},a.data.activeFolder=null,a.data.folders=i.query();var p=!1;a.deactivate=function(a){if(p)return!1;window.removeFileManagerListeners(),p=!0,g.deactivate(a)},a.showMode=function(){var b=function(b){a.showMode.active!==b&&(a.showMode.active=b,o.setItem("mailerlite:filemanager:mode",b),a.reload())};return b.active=o.getItem("mailerlite:filemanager:mode")||"grid",b}(),a.search=function(){var b=function(){a.search.value=a.search.input};return b.reset=function(){b.value="",b.input=""},b}(),a.initSort=function(b){a.sortOptions=b,a.sort=function(){var b=function(b){o.setItem("mailerlite:filemanager:sort",a.sortOptions.indexOf(b)),a.sort.current=b};return b.current=a.sortOptions[parseInt(o.getItem("mailerlite:filemanager:sort"),10)||0],b}()},a.uploadImages=[],a.uploadedImages=[],a.showUploadBox=!1,a.upload=function(b){if(a.uploadImages=b.concat(a.uploadImages),b&&b.length){a.showUploadBox=!0;for(var c=[],d=0;d<b.length;d++){var e=b[d];k.upload({url:CLIENT_API_BASE_URL+"/master/images",file:e,fileFormDataName:"image"}).progress(function(a){var b=parseInt(100*a.loaded/a.total);a.config.file.progress=b}).success(function(d,e,f,g){var h=a.uploadImages.indexOf(g.file);a.uploadImages.splice(h,1),a.uploadedImages.unshift(d),c.push(d.id),b.length===c.length&&(a.data.activeFolder?i.move({id:a.data.activeFolder.id},{images:c},function(b){l(),l(a.data.activeFolder),a.reload()},function(b){a.reload()}):(l(),a.reload()))}).error(function(b,c,d,e){var f=a.uploadImages.indexOf(e.file);a.uploadImages.splice(f,1)})}}},a.google_drive_enabled=!1,"https:"===window.location.protocol&&-1!==["app.mailerlite.com","app.e-mailer.lt","pranciskusdev.e-mailer.lt","dariusdev.e-mailer.lt","mailerlite.com","e-mailer.lt"].indexOf(window.location.hostname)&&(a.google_drive_enabled=!0),a.developerKey="AIzaSyBziz7u0MstLcUwUW-iK5t_SmDubZS6_MQ",a.clientId="368239243372-d8av7jtm5ei08tjumnvl9gh46vem4u9o.apps.googleusercontent.com",a.scope="https://www.googleapis.com/auth/drive.readonly",a.appId="368239243372",a.pickerApiLoaded=!1,a.authApiLoaded=!1,a.oauthToken="",function(){var a=document.createElement("script");a.type="text/javascript",a.src="https://apis.google.com/js/api.js?onload=onApiLoad",document.body.appendChild(a)}(),b.onApiLoad=function(){b.gapi.load("auth2",a.onAuthApiLoad),b.gapi.load("picker",a.onPickerApiLoad)},a.onAuthApiLoad=function(){a.authApiLoaded=!0},a.onPickerApiLoad=function(){a.pickerApiLoaded=!0,a.createPicker()},a.handleAuthResult=function(b){b&&!b.error&&(a.oauthToken=b.access_token,a.createPicker())},a.createPicker=function(){if(a.pickerApiLoaded&&a.oauthToken&&a.authApiLoaded){var c=new b.google.picker.View(b.google.picker.ViewId.DOCS);c.setMimeTypes("image/png,image/jpeg,image/jpg,image/bmp,image/gif");(new b.google.picker.PickerBuilder).enableFeature(b.google.picker.Feature.NAV_HIDDEN).enableFeature(b.google.picker.Feature.MULTISELECT_ENABLED).setAppId(a.appId).setOAuthToken(a.oauthToken).addView(c).addView(new b.google.picker.DocsUploadView).setCallback(a.pickerCallback).build().setVisible(!0)}},a.pickerCallback=function(c){if(c[b.google.picker.Response.ACTION]==b.google.picker.Action.PICKED){var d=[];c[b.google.picker.Response.DOCUMENTS].forEach(function(a){d.push("https://www.googleapis.com/drive/v3/files/"+a[b.google.picker.Document.ID]+"?alt=media")}),a.uploadFromUrl(d,{Authorization:"Bearer "+a.oauthToken})}},a.importGoogleDrive=function(){a.pickerApiLoaded&&(a.authApiLoaded&&a.oauthToken?a.createPicker():b.gapi.auth2.authorize({client_id:a.clientId,scope:a.scope,immediate:!1},a.handleAuthResult))},a.importUrl=function(){f.open({templateUrl:h.path+"modals/import_url.html",controller:"importUrlModalController"}).result.then(function(b){a.uploadFromUrl(b)})},a.retryUploadFromUrl=function(b){var c=a.uploadedImages.filter(function(a){return a.url===b&&a.failed});if(c.length>0){var d=a.uploadedImages.indexOf(c[0]);a.uploadedImages.splice(d,1)}a.uploadFromUrl(b)},a.uploadFromUrl=function(b,c){if("string"==typeof b){var d=[];d.push(b),b=d}a.showUploadBox=!0,a.uploadImages=a.uploadImages||[],b.forEach(function(b){var c={url:b,progress:100};a.uploadImages.unshift(c)}),a.makeUpload(c,[])},a.makeUpload=function(b,c){if(0===a.uploadImages.length)a.data.activeFolder?i.move({id:a.data.activeFolder.id},{images:c},function(b){l(),l(a.data.activeFolder),a.reload()},function(b){a.reload()}):(l(),a.reload());else{var d=a.uploadImages[0];a.makeUploadUrl(d,c,b)}},a.makeUploadUrl=function(b,d,e){var f={url:b.url};e&&(f.headers=e),c.post(CLIENT_API_BASE_URL+"/master/images/url",f).then(function(c){var f=a.uploadImages.indexOf(b);a.uploadedImages.unshift(c.data),a.uploadImages.splice(f,1),d.push(c.id),a.makeUpload(e,d)},function(c){if(e&&e["User-Agent"]||!/wp-content|cdn\.shopify/.test(b.url)){var f=a.uploadImages.indexOf(b);b.failed=!0,b.failed_message=500!==c.status&&c.data.error?c.data.error.message:"",a.uploadedImages.unshift(b),a.uploadImages.splice(f,1),a.makeUpload(e,d)}else e=e||{},e["User-Agent"]="ml",a.makeUploadUrl(b,d,e)})},a.importGiphy=function(){f.open({templateUrl:h.path+"modals/import_giphy.html",size:"lg",controller:"importGiphyModalController"}).result.then(function(b){var c=[];Object.keys(b).forEach(function(a){c.push(b[a])}),a.uploadFromUrl(c)})},a.importUnsplash=function(){f.open({templateUrl:h.path+"modals/import_unsplash.html",size:"lg",controller:"importUnsplashModalController"}).result.then(function(b){var c=[];Object.keys(b).forEach(function(a){c.push(b[a])}),a.uploadFromUrl(c)})},a.$watchCollection("uploadImages",n),a.$watchCollection("uploadedImages",n)}]),angular.module("fileManagerApp").controller("foldersController",["$scope","$cookies","$timeout","foldersResource",function(a,b,c,d){"use strict";a.editFolder=null,a.create=function(b,e){var f=d.save({title:b},function(){a.data.folders.push(f),a.editFolder=f,c(function(){if(e&&e.target){var a=e.target,b=$(a).parents(".file-dropdown").find("ul"),c=b[0].scrollHeight;b.scrollTop(c)}})})},a.choose=function(b){a.data.activeFolder=b},a.edit=function(b){b.oldTitle=b.title,a.editFolder=b},a.remove=function(b){a.data.activeFolder===b&&a.choose(null),b.id&&b.$remove();var c=a.data.folders.indexOf(b);a.data.folders.splice(c,1)},a.save=function(b){b.$update().then(function(){a.editFolder=null})},a.cancel=function(b){b.oldTitle?(b.title=b.oldTitle,delete b.oldTitle,a.editFolder=null):(a.remove(b),a.editFolder=null)},$(document).keydown(function(b){27===b.keyCode&&a.editFolder&&a.$apply(function(){a.cancel(a.editFolder)})})}]),angular.module("fileManagerApp").controller("importUrlModalController",["$scope","$modalInstance",function(a,b){a.data={},a.data.url="",a.ok=function(c){if(a.error=!1,!c)return void(a.error=!0);b.close(c)},a.cancel=function(){b.dismiss("cancel")}}]).controller("importGiphyModalController",["$scope","$http","$modalInstance",function(a,b,c){a.data=void 0,a.loading=!0,a.limit=20,a.count=0,a.apiKey="6Z390l8UreruCcLH2hstrgGUXhKm0Kx5";var d={},e="https://api.giphy.com/v1/gifs/trending?api_key="+a.apiKey,f=e;a.ok=function(){a.error=!1,a.atLeastOneSelected()&&c.close(d)},a.atLeastOneSelected=function(){return Object.keys(d).length>0},a.toggleCheck=function(a){void 0===a.checked?a.checked=!0:a.checked=!a.checked,a.checked?d[a.id]=a.images.original.url:delete d[a.id]},a.cancel=function(){c.dismiss("cancel")},a.load=function(b){a.loading=!0,a.downloadGifs(a.count,b)},a.downloadGifs=function(c,d){a.search.value&&0!==a.search.value.length&&(d=f+"&offset="+c),d||(d=e+"&limit="+a.limit+"&offset="+c),b({method:"GET",url:d,headers:{"X-MailerLite-Account":void 0,"X-MailerLite-Token":void 0}}).then(function(b){a.data?(a.data.data=a.data.data.concat(b.data.data),a.data.pagination.offset=b.data.pagination.offset,a.data.meta=b.data.meta,a.data.pagination.count=a.count+b.data.pagination.count):a.data=b.data,a.count=a.data.pagination.count,a.loading=!1,a.error=!1},function(b){a.error=!0})},a.ifGifsLeft=function(){return!(!a.data||!a.data.pagination)&&a.data.pagination.total_count-(a.count+a.data.pagination.offset)},a.search=function(){a.search.value=a.search.input;var b="";a.search.value&&a.search.value.length>0&&(b="https://api.giphy.com/v1/gifs/search?q="+encodeURI(a.search.value)+"&api_key="+a.apiKey+"&limit="+a.limit),f!=b&&(f=b,a.data=void 0,d={},a.count=0,a.load(b))}}]).controller("importUnsplashModalController",["$scope","$http","$modalInstance",function(a,b,c){a.data=void 0,a.loading=!0,a.limit=20,a.page=1,a.accessKey="ebde4534c7f7f6786aeb09a7ce6a205f56c9f64ce6e274e14357d0d172d8bb4c";var d={},e="https://api.unsplash.com/photos?client_id="+a.accessKey,f="https://api.unsplash.com/search/photos?client_id="+a.accessKey,g=f;a.ok=function(){if(a.error=!1,a.atLeastOneSelected()){var e=Object.keys(d).length;Object.keys(d).forEach(function(f){b.get(d[f]+"?client_id="+a.accessKey).success(function(a){e--,d[f]=a.url,0==e&&c.close(d)}).error(function(){e--,delete d[f],0==e&&c.close(d)})})}},a.atLeastOneSelected=function(){return Object.keys(d).length>0},a.toggleCheck=function(a){void 0===a.checked?a.checked=!0:a.checked=!a.checked,a.checked?d[a.id]=a.links.download_location:delete d[a.id]},a.cancel=function(){c.dismiss("cancel")},a.load=function(b){a.loading=!0,a.downloadImages(a.page,b)},a.downloadImages=function(c,d){a.search.value&&0!==a.search.value.length&&(d=g+"&page="+c),d||(d=e+"&per_page="+a.limit+"&page="+c),b({method:"GET",url:d,headers:{"X-MailerLite-Account":void 0,"X-MailerLite-Token":void 0}}).then(function(b){b.data.results&&(b.data=b.data.results),a.data?a.data=a.data.concat(b.data):a.data=b.data,a.page+=1,a.loading=!1,a.error=!1},function(b){a.error=!0})},a.ifImagesLeft=function(){return!(!a.data||!a.data.length)&&a.data.length%a.limit==0},a.search=function(){a.search.value=a.search.input;var b="";a.search.value&&a.search.value.length>0&&(b=f+"&query="+encodeURI(a.search.value)+"&per_page="+a.limit),g!=b&&(g=b,a.data=void 0,d={},a.page=1,a.load(b))}}]).controller("previewLightboxModalController",["$scope","$modalInstance","data",function(a,b,c){a.data=c,a.select=function(a){b.close(a)},a.close=function(){b.dismiss()}}]).controller("confirmModalController",["$scope","$modalInstance","count",function(a,b,c){a.count=c,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("fileManagerApp").directive("fmInfiniteScroll",["$timeout",function(a){return function(b,c,d){function e(){return c[0].scrollTop+c[0].offsetHeight>=c[0].scrollHeight-400}function f(){e()&&b.loadPage(f)}c.bind("scroll",f),b.$watch("triggerScroll",function(){a(f)})}}]),angular.module("fileManagerApp").directive("focusOnLoad",["$timeout",function(a){return function(b,c,d){a(function(){a(function(){$(c).focus()})})}}]).directive("focusOnTrue",["$timeout",function(a){return function(b,c,d){b.$watch(d.focusOnTrue,function(b){b&&a(function(){$(c).focus()})})}}]).directive("selectOnTrue",["$timeout",function(a){return function(b,c,d){b.$watch(d.focusOnTrue,function(b){b&&a(function(){$(c).select()})})}}]),angular.module("fileManagerApp").directive("mlFileManager",["$timeout","fileManagerService",function(a,b){return{link:function(a,c,d,e){$(c).on("click",function(){b.activate({mode:"copy"})})}}}]),angular.module("fileManagerApp").directive("mlFileManagerEmbed",[function(){"use strict";return{restrict:"E",controller:"filemanagerController",templateUrl:"/assets/plugins/filemanager/views/layout.html",link:function(a,b,c){a.embed=!angular.isDefined(c.embed)||"true"==c.embed,a.showCopy=!!angular.isDefined(c.showCopy)&&"true"==c.showCopy}}}]),angular.module("fileManagerApp").directive("mlFileManagerSelect",["$timeout","fileManagerService",function(a,b){return{scope:{onSelect:"&mlFileManagerSelect"},link:function(a,c,d,e){$(c).on("click",function(){b.activate({mode:"select"},function(b){a.onSelect&&b&&a.onSelect({$file:b})})})}}}]),angular.module("fileManagerApp").directive("mlFileManagerSelectMultiple",["$timeout","fileManagerService",function(a,b){return{scope:{onSelect:"&mlFileManagerSelectMultiple"},link:function(a,c,d,e){$(c).on("click",function(){b.activate({mode:"select",multiple:!0},function(b){a.onSelect&&b&&a.onSelect({$files:b})})})}}}]),angular.module("fileManagerApp").directive("previewLightbox",["$modal","$timeout","fileManager","fileManagerService",function(a,b,c,d){return{scope:{image:"=previewLightbox",callback:"&previewLightboxCallback",mode:"=",hasFlash:"=",embed:"=",showCopy:"="},link:function(b,d,e,f){$(d).click(function(d){d.preventDefault(),a.open({templateUrl:c.path+"modals/preview_lightbox.html",controller:"previewLightboxModalController",size:"lg",resolve:{data:function(){return{image:b.image,mode:b.mode||"copy",hasFlash:b.hasFlash,embed:b.embed&&!0,showCopy:b.showCopy||!1}}}}).result.then(function(a){b.callback()})})}}}]),angular.module("fileManagerApp").filter("fileSize",function(){return function(a,b){var c=b?1e3:1024;if(Math.abs(a)<c)return a+" B";var d=b?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],e=-1;do{a/=c,++e}while(Math.abs(a)>=c&&e<d.length-1);return a.toFixed(1)+" "+d[e]}}),angular.module("fileManagerApp").filter("replace",function(){return function(a,b,c){return a.replace(b,c)}}),angular.module("fileManagerApp").filter("string2date",function(){return function(a){return new Date(a.replace(" ","T"))}}),angular.module("fileManagerApp").factory("foldersResource",["$resource",function(a){return a(CLIENT_API_BASE_URL+"/master/images/folders/:id",{id:"@id"},{update:{method:"PUT"},move:{url:CLIENT_API_BASE_URL+"/master/images/folders/:id/move",method:"PUT"}})}]),angular.module("fileManagerApp").factory("imagesResource",["$resource",function(a){return a(CLIENT_API_BASE_URL+"/master/images/:id",{id:"@id"},{update:{method:"PUT"},count:{method:"GET",url:CLIENT_API_BASE_URL+"/master/images/count"},remove:{method:"DELETE",headers:{"Content-Type":"application/json"},transformRequest:function(a,b){return b=angular.extend(b,{"Content-Type":"application/json"}),angular.toJson(a)}}})}]),angular.module("fileManagerApp").provider("fileManager",function(){var a=this;return a.path="/assets/plugins/filemanager/views/",{setPath:function(b){a.path=b},$get:function(){return{path:a.path}}}}),angular.module("fileManagerApp").factory("fileManagerService",["$animate","$timeout","$q","$http","$document","$compile","$controller","$rootScope","fileManager",function(a,b,c,d,e,f,g,h,i){function j(b,c){return q=c,n.then(function(c){if(c=c.data,!o){if(o=angular.element(c),0===o.length)throw new Error("The template contains no elements; you need to wrap text nodes");m=h.$new(),b=b||{},m.mode=b.mode||"copy",m.multiple=b.multiple||!1,b.$scope=m;g("filemanagerController",b);return o=f(c)(m),a.enter(o,p)}})}function k(b){if(!o)return c.when();q&&q(b);var d=function(){m.$destroy(),m=null,o.remove(),o=null},e=a.leave(o,d);e&&e.then&&e.then(d)}function l(){return!!o}var m,n,o,p=angular.element(document.body);n=d.get(i.path+"layout.html",{cache:!0});var q;return{activate:j,deactivate:k,active:l}}]);