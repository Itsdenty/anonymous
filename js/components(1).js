"use strict";!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.React=b()}(this,function(){function a(a){for(var b=arguments.length-1,c="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);E(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",c)}function b(a){return function(){return a}}function c(a,b,c){this.props=a,this.context=b,this.refs=F,this.updater=c||H}function d(){}function e(a,b,c){this.props=a,this.context=b,this.refs=F,this.updater=c||H}function f(a,b,c){var d=void 0,e={},f=null,g=null;if(null!=b)for(d in void 0!==b.ref&&(g=b.ref),void 0!==b.key&&(f=""+b.key),b)J.call(b,d)&&!K.hasOwnProperty(d)&&(e[d]=b[d]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var i=Array(h),j=0;j<h;j++)i[j]=arguments[j+2];e.children=i}if(a&&a.defaultProps)for(d in h=a.defaultProps)void 0===e[d]&&(e[d]=h[d]);return{$$typeof:u,type:a,key:f,ref:g,props:e,_owner:I.current}}function g(a){return"object"==typeof a&&null!==a&&a.$$typeof===u}function h(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function i(a,b,c,d){if(M.length){var e=M.pop();return e.result=a,e.keyPrefix=b,e.func=c,e.context=d,e.count=0,e}return{result:a,keyPrefix:b,func:c,context:d,count:0}}function j(a){a.result=null,a.keyPrefix=null,a.func=null,a.context=null,a.count=0,10>M.length&&M.push(a)}function k(b,c,d,e){var f=typeof b;"undefined"!==f&&"boolean"!==f||(b=null);var g=!1;if(null===b)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(b.$$typeof){case u:case v:g=!0}}if(g)return d(e,b,""===c?"."+l(b,0):c),1;if(g=0,c=""===c?".":c+":",Array.isArray(b))for(var h=0;h<b.length;h++){f=b[h];var i=c+l(f,h);g+=k(f,i,d,e)}else if(null===b||void 0===b?i=null:(i=D&&b[D]||b["@@iterator"],i="function"==typeof i?i:null),"function"==typeof i)for(b=i.call(b),h=0;!(f=b.next()).done;)f=f.value,i=c+l(f,h++),g+=k(f,i,d,e);else"object"===f&&(d=""+b,a("31","[object Object]"===d?"object with keys {"+Object.keys(b).join(", ")+"}":d,""));return g}function l(a,b){return"object"==typeof a&&null!==a&&null!=a.key?h(a.key):b.toString(36)}function m(a,b,c){a.func.call(a.context,b,a.count++)}function n(a,b,c){var d=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++),Array.isArray(a)?o(a,d,c,G.thatReturnsArgument):null!=a&&(g(a)&&(b=e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(L,"$&/")+"/")+c,a={$$typeof:u,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}),d.push(a))}function o(a,b,c,d,e){var f="";null!=c&&(f=(""+c).replace(L,"$&/")+"/"),b=i(b,f,d,e),null==a||k(a,"",n,b),j(b)}var p=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},c)).join("")}catch(a){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");for(var c,d=Object(a),e=1;e<arguments.length;e++){var f=Object(arguments[e]);for(var g in f)q.call(f,g)&&(d[g]=f[g]);if(p){c=p(f);for(var h=0;h<c.length;h++)r.call(f,c[h])&&(d[c[h]]=f[c[h]])}}return d},t="function"==typeof Symbol&&Symbol.for,u=t?Symbol.for("react.element"):60103,v=t?Symbol.for("react.portal"):60106,w=t?Symbol.for("react.fragment"):60107,x=t?Symbol.for("react.strict_mode"):60108,y=t?Symbol.for("react.profiler"):60114,z=t?Symbol.for("react.provider"):60109,A=t?Symbol.for("react.context"):60110,B=t?Symbol.for("react.async_mode"):60111,C=t?Symbol.for("react.forward_ref"):60112;t&&Symbol.for("react.timeout");var D="function"==typeof Symbol&&Symbol.iterator,E=function(a,b,c,d,e,f,g,h){if(!a){if(void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=[c,d,e,f,g,h],j=0;a=Error(b.replace(/%s/g,function(){return i[j++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}},F={};t=function(){},t.thatReturns=b,t.thatReturnsFalse=b(!1),t.thatReturnsTrue=b(!0),t.thatReturnsNull=b(null),t.thatReturnsThis=function(){return this},t.thatReturnsArgument=function(a){return a};var G=t,H={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}};c.prototype.isReactComponent={},c.prototype.setState=function(b,c){"object"!=typeof b&&"function"!=typeof b&&null!=b&&a("85"),this.updater.enqueueSetState(this,b,c,"setState")},c.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")},d.prototype=c.prototype,t=e.prototype=new d,t.constructor=e,s(t,c.prototype),t.isPureReactComponent=!0;var I={current:null},J=Object.prototype.hasOwnProperty,K={key:!0,ref:!0,__self:!0,__source:!0},L=/\/+/g,M=[];return w={Children:{map:function(a,b,c){if(null==a)return a;var d=[];return o(a,d,null,b,c),d},forEach:function(a,b,c){if(null==a)return a;b=i(null,null,b,c),null==a||k(a,"",m,b),j(b)},count:function(a){return null==a?0:k(a,"",G.thatReturnsNull,null)},toArray:function(a){var b=[];return o(a,b,null,G.thatReturnsArgument),b},only:function(b){return g(b)||a("143"),b}},createRef:function(){return{current:null}},Component:c,PureComponent:e,createContext:function(a,b){return void 0===b&&(b=null),a={$$typeof:A,_calculateChangedBits:b,_defaultValue:a,_currentValue:a,_currentValue2:a,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null},a.Provider={$$typeof:z,_context:a},a.Consumer=a},forwardRef:function(a){return{$$typeof:C,render:a}},Fragment:w,StrictMode:x,unstable_AsyncMode:B,unstable_Profiler:y,createElement:f,cloneElement:function(b,c,d){(null===b||void 0===b)&&a("267",b);var e=void 0,f=s({},b.props),g=b.key,h=b.ref,i=b._owner;if(null!=c){void 0!==c.ref&&(h=c.ref,i=I.current),void 0!==c.key&&(g=""+c.key);var j=void 0;b.type&&b.type.defaultProps&&(j=b.type.defaultProps);for(e in c)J.call(c,e)&&!K.hasOwnProperty(e)&&(f[e]=void 0===c[e]&&void 0!==j?j[e]:c[e])}if(1===(e=arguments.length-2))f.children=d;else if(1<e){j=Array(e);for(var k=0;k<e;k++)j[k]=arguments[k+2];f.children=j}return{$$typeof:u,type:b.type,key:g,ref:h,props:f,_owner:i}},createFactory:function(a){var b=f.bind(null,a);return b.type=a,b},isValidElement:g,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:I,assign:s}},x={default:w},w=w||x,w.default?w.default:w}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("react")):"function"==typeof define&&define.amd?define(["react"],b):a.ReactDOM=b(a.React)}(this,function(a){function b(a){for(var b=arguments.length-1,c="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=0;d<b;d++)c+="&args[]="+encodeURIComponent(arguments[d+1]);zd(!1,"Minified React error #"+a+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",c)}function c(){if(Dd)for(var a in Ed){var c=Ed[a],e=Dd.indexOf(a);if(-1<e||b("96",a),!Fd[e]){c.extractEvents||b("97",a),Fd[e]=c,e=c.eventTypes;for(var f in e){var g=void 0,h=e[f],i=c,j=f;Gd.hasOwnProperty(j)&&b("99",j),Gd[j]=h;var k=h.phasedRegistrationNames;if(k){for(g in k)k.hasOwnProperty(g)&&d(k[g],i,j);g=!0}else h.registrationName?(d(h.registrationName,i,j),g=!0):g=!1;g||b("98",f,a)}}}}function d(a,c,d){Hd[a]&&b("100",a),Hd[a]=c,Id[a]=c.eventTypes[d].dependencies}function e(a){Dd&&b("101"),Dd=Array.prototype.slice.call(a),c()}function f(a){var d,e=!1;for(d in a)if(a.hasOwnProperty(d)){var f=a[d];Ed.hasOwnProperty(d)&&Ed[d]===f||(Ed[d]&&b("102",d),Ed[d]=f,e=!0)}e&&c()}function g(a){return function(){return a}}function h(a,b,c,d){b=a.type||"unknown-event",a.currentTarget=Od(d),Bd.invokeGuardedCallbackAndCatchFirstError(b,c,void 0,a),a.currentTarget=null}function i(a,c){return null==c&&b("30"),null==a?c:Array.isArray(a)?Array.isArray(c)?(a.push.apply(a,c),a):(a.push(c),a):Array.isArray(c)?[a].concat(c):[a,c]}function j(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function k(a,c){var d=a.stateNode;if(!d)return null;var e=Md(d);if(!e)return null;d=e[c];a:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(e=!e.disabled)||(a=a.type,e=!("button"===a||"input"===a||"select"===a||"textarea"===a)),a=!e;break a;default:a=!1}return a?null:(d&&"function"!=typeof d&&b("231",c,typeof d),d)}function l(a,c){null!==a&&(Pd=i(Pd,a)),a=Pd,Pd=null,a&&(c?j(a,Rd):j(a,Sd),Pd&&b("95"),Bd.rethrowCaughtError())}function m(a,b,c,d){for(var e=null,f=0;f<Fd.length;f++){var g=Fd[f];g&&(g=g.extractEvents(a,b,c,d))&&(e=i(e,g))}l(e,!1)}function n(a,b){b[Wd]=a}function o(a){if(a[Wd])return a[Wd];for(;!a[Wd];){if(!a.parentNode)return null;a=a.parentNode}return a=a[Wd],5===a.tag||6===a.tag?a:null}function p(a){if(5===a.tag||6===a.tag)return a.stateNode;b("33")}function q(a){return a[Xd]||null}function r(a,b){a[Xd]=b}function s(a){do{a=a.return}while(a&&5!==a.tag);return a||null}function t(a,b,c){for(var d=[];a;)d.push(a),a=s(a);for(a=d.length;0<a--;)b(d[a],"captured",c);for(a=0;a<d.length;a++)b(d[a],"bubbled",c)}function u(a,b,c){(b=k(a,c.dispatchConfig.phasedRegistrationNames[b]))&&(c._dispatchListeners=i(c._dispatchListeners,b),c._dispatchInstances=i(c._dispatchInstances,a))}function v(a){a&&a.dispatchConfig.phasedRegistrationNames&&t(a._targetInst,u,a)}function w(a){if(a&&a.dispatchConfig.phasedRegistrationNames){var b=a._targetInst;b=b?s(b):null,t(b,u,a)}}function x(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=k(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=i(c._dispatchListeners,b),c._dispatchInstances=i(c._dispatchInstances,a))}function y(a){a&&a.dispatchConfig.registrationName&&x(a._targetInst,null,a)}function z(a){j(a,v)}function A(a,b,c,d){if(c&&d)a:{for(var e=c,f=d,g=0,h=e;h;h=s(h))g++;h=0;for(var i=f;i;i=s(i))h++;for(;0<g-h;)e=s(e),g--;for(;0<h-g;)f=s(f),h--;for(;g--;){if(e===f||e===f.alternate)break a;e=s(e),f=s(f)}e=null}else e=null;for(f=e,e=[];c&&c!==f&&(null===(g=c.alternate)||g!==f);)e.push(c),c=s(c);for(c=[];d&&d!==f&&(null===(g=d.alternate)||g!==f);)c.push(d),d=s(d);for(d=0;d<e.length;d++)x(e[d],"bubbled",a);for(a=c.length;0<a--;)x(c[a],"captured",b)}function B(a,b){var c={};return c[a.toLowerCase()]=b.toLowerCase(),c["Webkit"+a]="webkit"+b,c["Moz"+a]="moz"+b,c["ms"+a]="MS"+b,c["O"+a]="o"+b.toLowerCase(),c}function C(a){if(be[a])return be[a];if(!ae[a])return a;var b,c=ae[a];for(b in c)if(c.hasOwnProperty(b)&&b in ce)return be[a]=c[b];return a}function D(){return!ie&&_d.canUseDOM&&(ie="textContent"in document.documentElement?"textContent":"innerText"),ie}function E(){if(je._fallbackText)return je._fallbackText;var a,b,c=je._startText,d=c.length,e=F(),f=e.length;for(a=0;a<d&&c[a]===e[a];a++);var g=d-a;for(b=1;b<=g&&c[d-b]===e[f-b];b++);return je._fallbackText=e.slice(a,1<b?1-b:void 0),je._fallbackText}function F(){return"value"in je._root?je._root.value:je._root[D()]}function G(a,b,c,d){this.dispatchConfig=a,this._targetInst=b,this.nativeEvent=c,a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);return this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?Ld.thatReturnsTrue:Ld.thatReturnsFalse,this.isPropagationStopped=Ld.thatReturnsFalse,this}function H(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();return this.call(e,a,b,c,d),e}return new this(a,b,c,d)}function I(a){a instanceof this||b("223"),a.destructor(),10>this.eventPool.length&&this.eventPool.push(a)}function J(a){a.eventPool=[],a.getPooled=H,a.release=I}function K(a,b){switch(a){case"keyup":return-1!==pe.indexOf(b.keyCode);case"keydown":return 229!==b.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function L(a){return a=a.detail,"object"==typeof a&&"data"in a?a.data:null}function M(a,b){switch(a){case"compositionend":return L(b);case"keypress":return 32!==b.which?null:(we=!0,ue);case"textInput":return a=b.data,a===ue&&we?null:a;default:return null}}function N(a,b){if(xe)return"compositionend"===a||!qe&&K(a,b)?(a=E(),je._root=null,je._startText=null,je._fallbackText=null,xe=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return te?null:b.data;default:return null}}function O(a){if(a=Nd(a)){ze&&"function"==typeof ze.restoreControlledState||b("194");var c=Md(a.stateNode);ze.restoreControlledState(a.stateNode,a.type,c)}}function P(a){Ae?Be?Be.push(a):Be=[a]:Ae=a}function Q(){return null!==Ae||null!==Be}function R(){if(Ae){var a=Ae,b=Be;if(Be=Ae=null,O(a),b)for(a=0;a<b.length;a++)O(b[a])}}function S(a,b){if(He)return a(b);He=!0;try{return Ee(a,b)}finally{He=!1,Q()&&(Ge(),R())}}function T(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Ie[a.type]:"textarea"===b}function U(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),3===a.nodeType?a.parentNode:a}function V(a,b){return!(!_d.canUseDOM||b&&!("addEventListener"in document))&&(a="on"+a,b=a in document,b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"==typeof b[a]),b)}function W(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function X(a){var b=W(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&void 0!==c&&"function"==typeof c.get&&"function"==typeof c.set){var e=c.get,f=c.set;return Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a,f.call(this,a)}}),Object.defineProperty(a,b,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null,delete a[b]}}}}function Y(a){a._valueTracker||(a._valueTracker=X(a))}function Z(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue(),d="";return a&&(d=W(a)?a.checked?"true":"false":a.value),(a=d)!==c&&(b.setValue(a),!0)}function $(a){return null===a||void 0===a?null:(a=Ve&&a[Ve]||a["@@iterator"],"function"==typeof a?a:null)}function _(a){var b=a.type;if("function"==typeof b)return b.displayName||b.name;if("string"==typeof b)return b;switch(b){case Se:return"AsyncMode";case Re:return"Context.Consumer";case Ne:return"ReactFragment";case Me:return"ReactPortal";case Pe:return"Profiler("+a.pendingProps.id+")";case Qe:return"Context.Provider";case Oe:return"StrictMode";case Ue:return"Timeout"}if("object"==typeof b&&null!==b)switch(b.$$typeof){case Te:return a=b.render.displayName||b.render.name||"",""!==a?"ForwardRef("+a+")":"ForwardRef"}return null}function aa(a){var b="";do{a:switch(a.tag){case 0:case 1:case 2:case 5:var c=a._debugOwner,d=a._debugSource,e=_(a),f=null;c&&(f=_(c)),c=d,e="\n    in "+(e||"Unknown")+(c?" (at "+c.fileName.replace(/^.*[\\\/]/,"")+":"+c.lineNumber+")":f?" (created by "+f+")":"");break a;default:e=""}b+=e,a=a.return}while(a);return b}function ba(a){return!!Ye.hasOwnProperty(a)||!Xe.hasOwnProperty(a)&&(We.test(a)?Ye[a]=!0:(Xe[a]=!0,!1))}function ca(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return!d&&(null!==c?!c.acceptsBooleans:"data-"!==(a=a.toLowerCase().slice(0,5))&&"aria-"!==a);default:return!1}}function da(a,b,c,d){if(null===b||void 0===b||ca(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function ea(a,b,c,d,e){this.acceptsBooleans=2===b||3===b||4===b,this.attributeName=d,this.attributeNamespace=e,this.mustUseProperty=c,this.propertyName=a,this.type=b}function fa(a,b,c,d){var e=Ze.hasOwnProperty(b)?Ze[b]:null;(null!==e?0===e.type:!d&&(2<b.length&&("o"===b[0]||"O"===b[0])&&("n"===b[1]||"N"===b[1])))||(da(b,c,e,d)&&(c=null),d||null===e?ba(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3!==e.type&&"":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function ga(a,b){var c=b.checked;return ke({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function ha(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=ma(null!=b.value?b.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function ia(a,b){null!=(b=b.checked)&&fa(a,"checked",b,!1)}function ja(a,b){ia(a,b);var c=ma(b.value);null!=c&&("number"===b.type?(0===c&&""===a.value||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c)),b.hasOwnProperty("value")?la(a,b.type,c):b.hasOwnProperty("defaultValue")&&la(a,b.type,ma(b.defaultValue)),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function ka(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){b=""+a._wrapperState.initialValue;var d=a.value;c||b===d||(a.value=b),a.defaultValue=b}c=a.name,""!==c&&(a.name=""),a.defaultChecked=!a.defaultChecked,a.defaultChecked=!a.defaultChecked,""!==c&&(a.name=c)}function la(a,b,c){"number"===b&&a.ownerDocument.activeElement===a||(null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}function ma(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function na(a,b,c){return a=G.getPooled(af.change,a,b,c),a.type="change",P(c),z(a),a}function oa(a){l(a,!1)}function pa(a){if(Z(p(a)))return a}function qa(a,b){if("change"===a)return b}function ra(){bf&&(bf.detachEvent("onpropertychange",sa),cf=bf=null)}function sa(a){"value"===a.propertyName&&pa(cf)&&(a=na(cf,a,U(a)),S(oa,a))}function ta(a,b,c){"focus"===a?(ra(),bf=b,cf=c,bf.attachEvent("onpropertychange",sa)):"blur"===a&&ra()}function ua(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return pa(cf)}function va(a,b){if("click"===a)return pa(b)}function wa(a,b){if("input"===a||"change"===a)return pa(b)}function xa(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):!!(a=gf[a])&&!!b[a]}function ya(a){return xa}function za(a,b){return a===b?0!==a||0!==b||1/a==1/b:a!==a&&b!==b}function Aa(a){var b=a;if(a.alternate)for(;b.return;)b=b.return;else{if(0!=(2&b.effectTag))return 1;for(;b.return;)if(b=b.return,0!=(2&b.effectTag))return 1}return 3===b.tag?2:3}function Ba(a){2!==Aa(a)&&b("188")}function Ca(a){var c=a.alternate;if(!c)return c=Aa(a),3===c&&b("188"),1===c?null:a;for(var d=a,e=c;;){var f=d.return,g=f?f.alternate:null;if(!f||!g)break;if(f.child===g.child){for(var h=f.child;h;){if(h===d)return Ba(f),a;if(h===e)return Ba(f),c;h=h.sibling}b("188")}if(d.return!==e.return)d=f,e=g;else{h=!1;for(var i=f.child;i;){if(i===d){h=!0,d=f,e=g;break}if(i===e){h=!0,e=f,d=g;break}i=i.sibling}if(!h){for(i=g.child;i;){if(i===d){h=!0,d=g,e=f;break}if(i===e){h=!0,e=g,d=f;break}i=i.sibling}h||b("189")}}d.alternate!==e&&b("190")}return 3!==d.tag&&b("188"),d.stateNode.current===d?a:c}function Da(a){if(!(a=Ca(a)))return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}function Ea(a){if(!(a=Ca(a)))return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child&&4!==b.tag)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}}return null}function Fa(a){var b=a.keyCode;return"charCode"in a?0===(a=a.charCode)&&13===b&&(a=13):a=b,10===a&&(a=13),32<=a||13===a?a:0}function Ga(a,b){var c=a[0];a=a[1];var d="on"+(a[0].toUpperCase()+a.slice(1));b={phasedRegistrationNames:{bubbled:d,captured:d+"Capture"},dependencies:[c],isInteractive:b},Af[a]=b,Bf[c]=b}function Ha(a){var b=a.targetInst;do{if(!b){a.ancestors.push(b);break}var c;for(c=b;c.return;)c=c.return;if(!(c=3!==c.tag?null:c.stateNode.containerInfo))break;a.ancestors.push(b),b=o(c)}while(b);for(c=0;c<a.ancestors.length;c++)b=a.ancestors[c],m(a.topLevelType,b,a.nativeEvent,U(a.nativeEvent))}function Ia(a){Ff=!!a}function Ja(a,b){if(!b)return null;var c=(Df(a)?La:Ma).bind(null,a);b.addEventListener(a,c,!1)}function Ka(a,b){if(!b)return null;var c=(Df(a)?La:Ma).bind(null,a);b.addEventListener(a,c,!0)}function La(a,b){Fe(Ma,a,b)}function Ma(a,b){if(Ff){var c=U(b);if(c=o(c),null===c||"number"!=typeof c.tag||2===Aa(c)||(c=null),Ef.length){var d=Ef.pop();d.topLevelType=a,d.nativeEvent=b,d.targetInst=c,a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{S(Ha,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>Ef.length&&Ef.push(a)}}}function Na(a){return Object.prototype.hasOwnProperty.call(a,Jf)||(a[Jf]=If++,Hf[a[Jf]]={}),Hf[a[Jf]]}function Oa(a,b){return!(!a||!b)&&(a===b||!Kf(a)&&(Kf(b)?Oa(a,b.parentNode):"contains"in a?a.contains(b):!!a.compareDocumentPosition&&!!(16&a.compareDocumentPosition(b))))}function Pa(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Qa(a,b){var c=Pa(a);a=0;for(var d;c;){if(3===c.nodeType){if(d=a+c.textContent.length,a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Pa(c)}}function Ra(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function Sa(a,b){if(Rf||null==Of||Of!==mf())return null;var c=Of;return"selectionStart"in c&&Ra(c)?c={start:c.selectionStart,end:c.selectionEnd}:window.getSelection?(c=window.getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}):c=void 0,Qf&&of(Qf,c)?null:(Qf=c,a=G.getPooled(Nf.select,Pf,a,b),a.type="select",a.target=Of,z(a),a)}function Ta(b){var c="";return a.Children.forEach(b,function(a){null==a||"string"!=typeof a&&"number"!=typeof a||(c+=a)}),c}function Ua(a,b){return a=ke({children:void 0},b),(b=Ta(b.children))&&(a.children=b),a}function Va(a,b,c,d){if(a=a.options,b){b={};for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{for(c=""+c,b=null,e=0;e<a.length;e++){if(a[e].value===c)return a[e].selected=!0,void(d&&(a[e].defaultSelected=!0));null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Wa(a,b){var c=b.value;a._wrapperState={initialValue:null!=c?c:b.defaultValue,wasMultiple:!!b.multiple}}function Xa(a,c){return null!=c.dangerouslySetInnerHTML&&b("91"),ke({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Ya(a,c){var d=c.value;null==d&&(d=c.defaultValue,c=c.children,null!=c&&(null!=d&&b("92"),Array.isArray(c)&&(1>=c.length||b("93"),c=c[0]),d=""+c),null==d&&(d="")),a._wrapperState={initialValue:""+d}}function Za(a,b){var c=b.value;null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&(a.defaultValue=c)),null!=b.defaultValue&&(a.defaultValue=b.defaultValue)}function $a(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?$a(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function ab(a,b,c){a=a.style;for(var d in b)if(b.hasOwnProperty(d)){c=0===d.indexOf("--");var e=d,f=b[d];e=null==f||"boolean"==typeof f||""===f?"":c||"number"!=typeof f||0===f||rg.hasOwnProperty(e)&&rg[e]?(""+f).trim():f+"px","float"===d&&(d="cssFloat"),c?a.setProperty(d,e):a[d]=e}}function bb(a,c,d){c&&(tg[a]&&(null!=c.children||null!=c.dangerouslySetInnerHTML)&&b("137",a,d()),null!=c.dangerouslySetInnerHTML&&(null!=c.children&&b("60"),"object"==typeof c.dangerouslySetInnerHTML&&"__html"in c.dangerouslySetInnerHTML||b("61")),null!=c.style&&"object"!=typeof c.style&&b("62",d()))}function cb(a,b){if(-1===a.indexOf("-"))return"string"==typeof b.is;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function db(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Na(a);b=Id[b];for(var d=0;d<b.length;d++){var e=b[d];if(!c.hasOwnProperty(e)||!c[e]){switch(e){case"scroll":Ka("scroll",a);break;case"focus":case"blur":Ka("focus",a),Ka("blur",a),c.blur=!0,c.focus=!0;break;case"cancel":case"close":V(e,!0)&&Ka(e,a);break;case"invalid":case"submit":case"reset":break;default:-1===he.indexOf(e)&&Ja(e,a)}c[e]=!0}}}function eb(a,b,c,d){return c=9===c.nodeType?c:c.ownerDocument,"http://www.w3.org/1999/xhtml"===d&&(d=$a(a)),"http://www.w3.org/1999/xhtml"===d?"script"===a?(a=c.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):a="string"==typeof b.is?c.createElement(a,{is:b.is}):c.createElement(a):a=c.createElementNS(d,a),a}function fb(a,b){return(9===b.nodeType?b:b.ownerDocument).createTextNode(a)}function gb(a,b,c,d){var e=cb(b,c);switch(b){case"iframe":case"object":Ja("load",a);var f=c;break;case"video":case"audio":for(f=0;f<he.length;f++)Ja(he[f],a);f=c;break;case"source":Ja("error",a),f=c;break;case"img":case"image":case"link":Ja("error",a),Ja("load",a),f=c;break;case"form":Ja("reset",a),Ja("submit",a),f=c;break;case"details":Ja("toggle",a),f=c;break;case"input":ha(a,c),f=ga(a,c),Ja("invalid",a),db(d,"onChange");break;case"option":f=Ua(a,c);break;case"select":Wa(a,c),f=ke({},c,{value:void 0}),Ja("invalid",a),db(d,"onChange");break;case"textarea":Ya(a,c),f=Xa(a,c),Ja("invalid",a),db(d,"onChange");break;default:f=c}bb(b,f,ug);var g,h=f;for(g in h)if(h.hasOwnProperty(g)){var i=h[g];"style"===g?ab(a,i,ug):"dangerouslySetInnerHTML"===g?null!=(i=i?i.__html:void 0)&&pg(a,i):"children"===g?"string"==typeof i?("textarea"!==b||""!==i)&&qg(a,i):"number"==typeof i&&qg(a,""+i):"suppressContentEditableWarning"!==g&&"suppressHydrationWarning"!==g&&"autoFocus"!==g&&(Hd.hasOwnProperty(g)?null!=i&&db(d,g):null!=i&&fa(a,g,i,e))}switch(b){case"input":Y(a),ka(a,c,!1);break;case"textarea":Y(a),c=a.textContent,c===a._wrapperState.initialValue&&(a.value=c);break;case"option":null!=c.value&&a.setAttribute("value",c.value);break;case"select":a.multiple=!!c.multiple,b=c.value,null!=b?Va(a,!!c.multiple,b,!1):null!=c.defaultValue&&Va(a,!!c.multiple,c.defaultValue,!0);break;default:"function"==typeof f.onClick&&(a.onclick=Ld)}}function hb(a,b,c,d,e){var f=null;switch(b){case"input":c=ga(a,c),d=ga(a,d),f=[];break;case"option":c=Ua(a,c),d=Ua(a,d),f=[];break;case"select":c=ke({},c,{value:void 0}),d=ke({},d,{value:void 0}),f=[];break;case"textarea":c=Xa(a,c),d=Xa(a,d),f=[];break;default:"function"!=typeof c.onClick&&"function"==typeof d.onClick&&(a.onclick=Ld)}bb(b,d,ug),b=a=void 0;var g=null;for(a in c)if(!d.hasOwnProperty(a)&&c.hasOwnProperty(a)&&null!=c[a])if("style"===a){var h=c[a];for(b in h)h.hasOwnProperty(b)&&(g||(g={}),g[b]="")}else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Hd.hasOwnProperty(a)?f||(f=[]):(f=f||[]).push(a,null));for(a in d){var i=d[a];if(h=null!=c?c[a]:void 0,d.hasOwnProperty(a)&&i!==h&&(null!=i||null!=h))if("style"===a)if(h){for(b in h)!h.hasOwnProperty(b)||i&&i.hasOwnProperty(b)||(g||(g={}),g[b]="");for(b in i)i.hasOwnProperty(b)&&h[b]!==i[b]&&(g||(g={}),g[b]=i[b])}else g||(f||(f=[]),f.push(a,g)),g=i;else"dangerouslySetInnerHTML"===a?(i=i?i.__html:void 0,h=h?h.__html:void 0,null!=i&&h!==i&&(f=f||[]).push(a,""+i)):"children"===a?h===i||"string"!=typeof i&&"number"!=typeof i||(f=f||[]).push(a,""+i):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(Hd.hasOwnProperty(a)?(null!=i&&db(e,a),f||h===i||(f=[])):(f=f||[]).push(a,i))}return g&&(f=f||[]).push("style",g),f}function ib(a,b,c,d,e){"input"===c&&"radio"===e.type&&null!=e.name&&ia(a,e),cb(c,d),d=cb(c,e);for(var f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];"style"===g?ab(a,h,ug):"dangerouslySetInnerHTML"===g?pg(a,h):"children"===g?qg(a,h):fa(a,g,h,d)}switch(c){case"input":ja(a,e);break;case"textarea":Za(a,e);break;case"select":a._wrapperState.initialValue=void 0,b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,c=e.value,null!=c?Va(a,!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?Va(a,!!e.multiple,e.defaultValue,!0):Va(a,!!e.multiple,e.multiple?[]:"",!1))}}function jb(a,b,c,d,e){switch(b){case"iframe":case"object":Ja("load",a);break;case"video":case"audio":for(d=0;d<he.length;d++)Ja(he[d],a);break;case"source":Ja("error",a);break;case"img":case"image":case"link":Ja("error",a),Ja("load",a);break;case"form":Ja("reset",a),Ja("submit",a);break;case"details":Ja("toggle",a);break;case"input":ha(a,c),Ja("invalid",a),db(e,"onChange");break;case"select":Wa(a,c),Ja("invalid",a),db(e,"onChange");break;case"textarea":Ya(a,c),Ja("invalid",a),db(e,"onChange")}bb(b,c,ug),d=null;for(var f in c)if(c.hasOwnProperty(f)){var g=c[f];"children"===f?"string"==typeof g?a.textContent!==g&&(d=["children",g]):"number"==typeof g&&a.textContent!==""+g&&(d=["children",""+g]):Hd.hasOwnProperty(f)&&null!=g&&db(e,f)}switch(b){case"input":Y(a),ka(a,c,!0);break;case"textarea":Y(a),b=a.textContent,b===a._wrapperState.initialValue&&(a.value=b);break;case"select":case"option":break;default:"function"==typeof c.onClick&&(a.onclick=Ld)}return d}function kb(a,b){return a.nodeValue!==b}function lb(a,b){switch(a){case"button":case"input":case"select":case"textarea":return!!b.autoFocus}return!1}function mb(a,b){return"textarea"===a||"string"==typeof b.children||"number"==typeof b.children||"object"==typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&"string"==typeof b.dangerouslySetInnerHTML.__html}function nb(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function ob(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a}function pb(a){return{current:a}}function qb(a,b){0>Lg||(a.current=Kg[Lg],Kg[Lg]=null,Lg--)}function rb(a,b,c){Lg++,Kg[Lg]=a.current,a.current=b}function sb(a){return ub(a)?Og:Mg.current}function tb(a,b){var c=a.type.contextTypes;if(!c)return Tf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e,f={};for(e in c)f[e]=b[e];return d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=f),f}function ub(a){return 2===a.tag&&null!=a.type.childContextTypes}function vb(a){ub(a)&&(qb(Ng,a),qb(Mg,a))}function wb(a){qb(Ng,a),qb(Mg,a)}function xb(a,c,d){Mg.current!==Tf&&b("168"),rb(Mg,c,a),rb(Ng,d,a)}function yb(a,c){var d=a.stateNode,e=a.type.childContextTypes;if("function"!=typeof d.getChildContext)return c;d=d.getChildContext()
;for(var f in d)f in e||b("108",_(a)||"Unknown",f);return ke({},c,d)}function zb(a){if(!ub(a))return!1;var b=a.stateNode;return b=b&&b.__reactInternalMemoizedMergedChildContext||Tf,Og=Mg.current,rb(Mg,b,a),rb(Ng,Ng.current,a),!0}function Ab(a,c){var d=a.stateNode;if(d||b("169"),c){var e=yb(a,Og);d.__reactInternalMemoizedMergedChildContext=e,qb(Ng,a),qb(Mg,a),rb(Mg,e,a)}else qb(Ng,a);rb(Ng,c,a)}function Bb(a,b,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=b,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Cb(a,b,c){var d=a.alternate;return null===d?(d=new Bb(a.tag,b,a.key,a.mode),d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=b,d.effectTag=0,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null),d.expirationTime=c,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function Db(a,c,d){var e=a.type,f=a.key;if(a=a.props,"function"==typeof e)var g=e.prototype&&e.prototype.isReactComponent?2:0;else if("string"==typeof e)g=5;else switch(e){case Ne:return Eb(a.children,c,d,f);case Se:g=11,c|=3;break;case Oe:g=11,c|=2;break;case Pe:return e=new Bb(15,a,f,4|c),e.type=Pe,e.expirationTime=d,e;case Ue:g=16,c|=2;break;default:a:{switch("object"==typeof e&&null!==e?e.$$typeof:null){case Qe:g=13;break a;case Re:g=12;break a;case Te:g=14;break a;default:b("130",null==e?e:typeof e,"")}g=void 0}}return c=new Bb(g,a,f,c),c.type=e,c.expirationTime=d,c}function Eb(a,b,c,d){return a=new Bb(10,a,d,b),a.expirationTime=c,a}function Fb(a,b,c){return a=new Bb(6,a,null,b),a.expirationTime=c,a}function Gb(a,b,c){return b=new Bb(4,null!==a.children?a.children:[],a.key,b),b.expirationTime=c,b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},b}function Hb(a,b,c){return b=new Bb(3,null,null,b?3:0),a={current:b,containerInfo:a,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:c,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},b.stateNode=a}function Ib(a){return function(b){try{return a(b)}catch(a){}}}function Jb(a){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);Pg=Ib(function(a){return b.onCommitFiberRoot(c,a)}),Qg=Ib(function(a){return b.onCommitFiberUnmount(c,a)})}catch(a){}return!0}function Kb(a){"function"==typeof Pg&&Pg(a)}function Lb(a){"function"==typeof Qg&&Qg(a)}function Mb(a){return{expirationTime:0,baseState:a,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Nb(a){return{expirationTime:a.expirationTime,baseState:a.baseState,firstUpdate:a.firstUpdate,lastUpdate:a.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ob(a){return{expirationTime:a,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Pb(a,b,c){null===a.lastUpdate?a.firstUpdate=a.lastUpdate=b:(a.lastUpdate.next=b,a.lastUpdate=b),(0===a.expirationTime||a.expirationTime>c)&&(a.expirationTime=c)}function Qb(a,b,c){var d=a.alternate;if(null===d){var e=a.updateQueue,f=null;null===e&&(e=a.updateQueue=Mb(a.memoizedState))}else e=a.updateQueue,f=d.updateQueue,null===e?null===f?(e=a.updateQueue=Mb(a.memoizedState),f=d.updateQueue=Mb(d.memoizedState)):e=a.updateQueue=Nb(f):null===f&&(f=d.updateQueue=Nb(e));null===f||e===f?Pb(e,b,c):null===e.lastUpdate||null===f.lastUpdate?(Pb(e,b,c),Pb(f,b,c)):(Pb(e,b,c),f.lastUpdate=b)}function Rb(a,b,c){var d=a.updateQueue;d=null===d?a.updateQueue=Mb(a.memoizedState):Sb(a,d),null===d.lastCapturedUpdate?d.firstCapturedUpdate=d.lastCapturedUpdate=b:(d.lastCapturedUpdate.next=b,d.lastCapturedUpdate=b),(0===d.expirationTime||d.expirationTime>c)&&(d.expirationTime=c)}function Sb(a,b){var c=a.alternate;return null!==c&&b===c.updateQueue&&(b=a.updateQueue=Nb(b)),b}function Tb(a,b,c,d,e,f){switch(c.tag){case 1:return a=c.payload,"function"==typeof a?a.call(f,d,e):a;case 3:a.effectTag=-1025&a.effectTag|64;case 0:if(a=c.payload,null===(e="function"==typeof a?a.call(f,d,e):a)||void 0===e)break;return ke({},d,e);case 2:Rg=!0}return d}function Ub(a,b,c,d,e){if(Rg=!1,!(0===b.expirationTime||b.expirationTime>e)){b=Sb(a,b);for(var f=b.baseState,g=null,h=0,i=b.firstUpdate,j=f;null!==i;){var k=i.expirationTime;k>e?(null===g&&(g=i,f=j),(0===h||h>k)&&(h=k)):(j=Tb(a,b,i,j,c,d),null!==i.callback&&(a.effectTag|=32,i.nextEffect=null,null===b.lastEffect?b.firstEffect=b.lastEffect=i:(b.lastEffect.nextEffect=i,b.lastEffect=i))),i=i.next}for(k=null,i=b.firstCapturedUpdate;null!==i;){var l=i.expirationTime;l>e?(null===k&&(k=i,null===g&&(f=j)),(0===h||h>l)&&(h=l)):(j=Tb(a,b,i,j,c,d),null!==i.callback&&(a.effectTag|=32,i.nextEffect=null,null===b.lastCapturedEffect?b.firstCapturedEffect=b.lastCapturedEffect=i:(b.lastCapturedEffect.nextEffect=i,b.lastCapturedEffect=i))),i=i.next}null===g&&(b.lastUpdate=null),null===k?b.lastCapturedUpdate=null:a.effectTag|=32,null===g&&null===k&&(f=j),b.baseState=f,b.firstUpdate=g,b.firstCapturedUpdate=k,b.expirationTime=h,a.memoizedState=j}}function Vb(a,c){"function"!=typeof a&&b("191",a),a.call(c)}function Wb(a,b,c,d){for(null!==b.firstCapturedUpdate&&(null!==b.lastUpdate&&(b.lastUpdate.next=b.firstCapturedUpdate,b.lastUpdate=b.lastCapturedUpdate),b.firstCapturedUpdate=b.lastCapturedUpdate=null),a=b.firstEffect,b.firstEffect=b.lastEffect=null;null!==a;)d=a.callback,null!==d&&(a.callback=null,Vb(d,c)),a=a.nextEffect;for(a=b.firstCapturedEffect,b.firstCapturedEffect=b.lastCapturedEffect=null;null!==a;)b=a.callback,null!==b&&(a.callback=null,Vb(b,c)),a=a.nextEffect}function Xb(a,b){return{value:a,source:b,stack:aa(b)}}function Yb(a){var b=a.type._context;rb(Ug,b._changedBits,a),rb(Tg,b._currentValue,a),rb(Sg,a,a),b._currentValue=a.pendingProps.value,b._changedBits=a.stateNode}function Zb(a){var b=Ug.current,c=Tg.current;qb(Sg,a),qb(Tg,a),qb(Ug,a),a=a.type._context,a._currentValue=c,a._changedBits=b}function $b(a){return a===Vg&&b("174"),a}function _b(a,b){rb(Yg,b,a),rb(Xg,a,a),rb(Wg,Vg,a);var c=b.nodeType;switch(c){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:_a(null,"");break;default:c=8===c?b.parentNode:b,b=c.namespaceURI||null,c=c.tagName,b=_a(b,c)}qb(Wg,a),rb(Wg,b,a)}function ac(a){qb(Wg,a),qb(Xg,a),qb(Yg,a)}function bc(a){Xg.current===a&&(qb(Wg,a),qb(Xg,a))}function cc(a,b,c){var d=a.memoizedState;b=b(c,d),d=null===b||void 0===b?d:ke({},d,b),a.memoizedState=d,null!==(a=a.updateQueue)&&0===a.expirationTime&&(a.baseState=d)}function dc(a,b,c,d,e,f){var g=a.stateNode;return a=a.type,"function"==typeof g.shouldComponentUpdate?g.shouldComponentUpdate(c,e,f):!a.prototype||!a.prototype.isPureReactComponent||(!of(b,c)||!of(d,e))}function ec(a,b,c,d){a=b.state,"function"==typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d),"function"==typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d),b.state!==a&&Zg.enqueueReplaceState(b,b.state,null)}function fc(a,b){var c=a.type,d=a.stateNode,e=a.pendingProps,f=sb(a);d.props=e,d.state=a.memoizedState,d.refs=Tf,d.context=tb(a,f),f=a.updateQueue,null!==f&&(Ub(a,f,e,d,b),d.state=a.memoizedState),f=a.type.getDerivedStateFromProps,"function"==typeof f&&(cc(a,f,e),d.state=a.memoizedState),"function"==typeof c.getDerivedStateFromProps||"function"==typeof d.getSnapshotBeforeUpdate||"function"!=typeof d.UNSAFE_componentWillMount&&"function"!=typeof d.componentWillMount||(c=d.state,"function"==typeof d.componentWillMount&&d.componentWillMount(),"function"==typeof d.UNSAFE_componentWillMount&&d.UNSAFE_componentWillMount(),c!==d.state&&Zg.enqueueReplaceState(d,d.state,null),null!==(f=a.updateQueue)&&(Ub(a,f,e,d,b),d.state=a.memoizedState)),"function"==typeof d.componentDidMount&&(a.effectTag|=4)}function gc(a,c,d){if(null!==(a=d.ref)&&"function"!=typeof a&&"object"!=typeof a){if(d._owner){d=d._owner;var e=void 0;d&&(2!==d.tag&&b("110"),e=d.stateNode),e||b("147",a);var f=""+a;return null!==c&&null!==c.ref&&"function"==typeof c.ref&&c.ref._stringRef===f?c.ref:(c=function(a){var b=e.refs===Tf?e.refs={}:e.refs;null===a?delete b[f]:b[f]=a},c._stringRef=f,c)}"string"!=typeof a&&b("148"),d._owner||b("254",a)}return a}function hc(a,c){"textarea"!==a.type&&b("31","[object Object]"===Object.prototype.toString.call(c)?"object with keys {"+Object.keys(c).join(", ")+"}":c,"")}function ic(a){function c(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c,c.nextEffect=null,c.effectTag=8}}function d(b,d){if(!a)return null;for(;null!==d;)c(b,d),d=d.sibling;return null}function e(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function f(a,b,c){return a=Cb(a,b,c),a.index=0,a.sibling=null,a}function g(b,c,d){return b.index=d,a?null!==(d=b.alternate)?(d=d.index,d<c?(b.effectTag=2,c):d):(b.effectTag=2,c):c}function h(b){return a&&null===b.alternate&&(b.effectTag=2),b}function i(a,b,c,d){return null===b||6!==b.tag?(b=Fb(c,a.mode,d),b.return=a,b):(b=f(b,c,d),b.return=a,b)}function j(a,b,c,d){return null!==b&&b.type===c.type?(d=f(b,c.props,d),d.ref=gc(a,b,c),d.return=a,d):(d=Db(c,a.mode,d),d.ref=gc(a,b,c),d.return=a,d)}function k(a,b,c,d){return null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation?(b=Gb(c,a.mode,d),b.return=a,b):(b=f(b,c.children||[],d),b.return=a,b)}function l(a,b,c,d,e){return null===b||10!==b.tag?(b=Eb(c,a.mode,d,e),b.return=a,b):(b=f(b,c,d),b.return=a,b)}function m(a,b,c){if("string"==typeof b||"number"==typeof b)return b=Fb(""+b,a.mode,c),b.return=a,b;if("object"==typeof b&&null!==b){switch(b.$$typeof){case Le:return c=Db(b,a.mode,c),c.ref=gc(a,null,b),c.return=a,c;case Me:return b=Gb(b,a.mode,c),b.return=a,b}if($g(b)||$(b))return b=Eb(b,a.mode,c,null),b.return=a,b;hc(a,b)}return null}function n(a,b,c,d){var e=null!==b?b.key:null;if("string"==typeof c||"number"==typeof c)return null!==e?null:i(a,b,""+c,d);if("object"==typeof c&&null!==c){switch(c.$$typeof){case Le:return c.key===e?c.type===Ne?l(a,b,c.props.children,d,e):j(a,b,c,d):null;case Me:return c.key===e?k(a,b,c,d):null}if($g(c)||$(c))return null!==e?null:l(a,b,c,d,null);hc(a,c)}return null}function o(a,b,c,d,e){if("string"==typeof d||"number"==typeof d)return a=a.get(c)||null,i(b,a,""+d,e);if("object"==typeof d&&null!==d){switch(d.$$typeof){case Le:return a=a.get(null===d.key?c:d.key)||null,d.type===Ne?l(b,a,d.props.children,e,d.key):j(b,a,d,e);case Me:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e)}if($g(d)||$(d))return a=a.get(c)||null,l(b,a,d,e,null);hc(b,d)}return null}function p(b,f,h,i){for(var j=null,k=null,l=f,p=f=0,q=null;null!==l&&p<h.length;p++){l.index>p?(q=l,l=null):q=l.sibling;var r=n(b,l,h[p],i);if(null===r){null===l&&(l=q);break}a&&l&&null===r.alternate&&c(b,l),f=g(r,f,p),null===k?j=r:k.sibling=r,k=r,l=q}if(p===h.length)return d(b,l),j;if(null===l){for(;p<h.length;p++)(l=m(b,h[p],i))&&(f=g(l,f,p),null===k?j=l:k.sibling=l,k=l);return j}for(l=e(b,l);p<h.length;p++)(q=o(l,b,p,h[p],i))&&(a&&null!==q.alternate&&l.delete(null===q.key?p:q.key),f=g(q,f,p),null===k?j=q:k.sibling=q,k=q);return a&&l.forEach(function(a){return c(b,a)}),j}function q(f,h,i,j){var k=$(i);"function"!=typeof k&&b("150"),null==(i=k.call(i))&&b("151");for(var l=k=null,p=h,q=h=0,r=null,s=i.next();null!==p&&!s.done;q++,s=i.next()){p.index>q?(r=p,p=null):r=p.sibling;var t=n(f,p,s.value,j);if(null===t){p||(p=r);break}a&&p&&null===t.alternate&&c(f,p),h=g(t,h,q),null===l?k=t:l.sibling=t,l=t,p=r}if(s.done)return d(f,p),k;if(null===p){for(;!s.done;q++,s=i.next())null!==(s=m(f,s.value,j))&&(h=g(s,h,q),null===l?k=s:l.sibling=s,l=s);return k}for(p=e(f,p);!s.done;q++,s=i.next())null!==(s=o(p,f,q,s.value,j))&&(a&&null!==s.alternate&&p.delete(null===s.key?q:s.key),h=g(s,h,q),null===l?k=s:l.sibling=s,l=s);return a&&p.forEach(function(a){return c(f,a)}),k}return function(a,e,g,i){var j="object"==typeof g&&null!==g&&g.type===Ne&&null===g.key;j&&(g=g.props.children);var k="object"==typeof g&&null!==g;if(k)switch(g.$$typeof){case Le:a:{for(k=g.key,j=e;null!==j;){if(j.key===k){if(10===j.tag?g.type===Ne:j.type===g.type){d(a,j.sibling),e=f(j,g.type===Ne?g.props.children:g.props,i),e.ref=gc(a,j,g),e.return=a,a=e;break a}d(a,j);break}c(a,j),j=j.sibling}g.type===Ne?(e=Eb(g.props.children,a.mode,i,g.key),e.return=a,a=e):(i=Db(g,a.mode,i),i.ref=gc(a,e,g),i.return=a,a=i)}return h(a);case Me:a:{for(j=g.key;null!==e;){if(e.key===j){if(4===e.tag&&e.stateNode.containerInfo===g.containerInfo&&e.stateNode.implementation===g.implementation){d(a,e.sibling),e=f(e,g.children||[],i),e.return=a,a=e;break a}d(a,e);break}c(a,e),e=e.sibling}e=Gb(g,a.mode,i),e.return=a,a=e}return h(a)}if("string"==typeof g||"number"==typeof g)return g=""+g,null!==e&&6===e.tag?(d(a,e.sibling),e=f(e,g,i),e.return=a,a=e):(d(a,e),e=Fb(g,a.mode,i),e.return=a,a=e),h(a);if($g(g))return p(a,e,g,i);if($(g))return q(a,e,g,i);if(k&&hc(a,g),void 0===g&&!j)switch(a.tag){case 2:case 1:i=a.type,b("152",i.displayName||i.name||"Component")}return d(a,e)}}function jc(a,b){var c=new Bb(5,null,null,0);c.type="DELETED",c.stateNode=b,c.return=a,c.effectTag=8,null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function kc(a,b){switch(a.tag){case 5:var c=a.type;return null!==(b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b)&&(a.stateNode=b,!0);case 6:return null!==(b=""===a.pendingProps||3!==b.nodeType?null:b)&&(a.stateNode=b,!0);default:return!1}}function lc(a){if(dh){var b=ch;if(b){var c=b;if(!kc(a,b)){if(!(b=nb(c))||!kc(a,b))return a.effectTag|=2,dh=!1,void(bh=a);jc(bh,c)}bh=a,ch=ob(b)}else a.effectTag|=2,dh=!1,bh=a}}function mc(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag;)a=a.return;bh=a}function nc(a){if(a!==bh)return!1;if(!dh)return mc(a),dh=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==b&&!mb(b,a.memoizedProps))for(b=ch;b;)jc(a,b),b=nb(b);return mc(a),ch=bh?nb(a.stateNode):null,!0}function oc(){ch=bh=null,dh=!1}function pc(a,b,c){qc(a,b,c,b.expirationTime)}function qc(a,b,c,d){b.child=null===a?ah(b,null,c,d):_g(b,a.child,c,d)}function rc(a,b){var c=b.ref;(null===a&&null!==c||null!==a&&a.ref!==c)&&(b.effectTag|=128)}function sc(a,b,c,d,e){rc(a,b);var f=0!=(64&b.effectTag);if(!c&&!f)return d&&Ab(b,!1),wc(a,b);c=b.stateNode,Je.current=b;var g=f?null:c.render();return b.effectTag|=1,f&&(qc(a,b,null,e),b.child=null),qc(a,b,g,e),b.memoizedState=c.state,b.memoizedProps=c.props,d&&Ab(b,!0),b.child}function tc(a){var b=a.stateNode;b.pendingContext?xb(a,b.pendingContext,b.pendingContext!==b.context):b.context&&xb(a,b.context,!1),_b(a,b.containerInfo)}function uc(a,b,c,d){var e=a.child;for(null!==e&&(e.return=a);null!==e;){switch(e.tag){case 12:var f=0|e.stateNode;if(e.type===b&&0!=(f&c)){for(f=e;null!==f;){var g=f.alternate;if(0===f.expirationTime||f.expirationTime>d)f.expirationTime=d,null!==g&&(0===g.expirationTime||g.expirationTime>d)&&(g.expirationTime=d);else{if(null===g||!(0===g.expirationTime||g.expirationTime>d))break;g.expirationTime=d}f=f.return}f=null}else f=e.child;break;case 13:f=e.type===a.type?null:e.child;break;default:f=e.child}if(null!==f)f.return=e;else for(f=e;null!==f;){if(f===a){f=null;break}if(null!==(e=f.sibling)){e.return=f.return,f=e;break}f=f.return}e=f}}function vc(a,b,c){var d=b.type._context,e=b.pendingProps,f=b.memoizedProps,g=!0;if(Ng.current)g=!1;else if(f===e)return b.stateNode=0,Yb(b),wc(a,b);var h=e.value;if(b.memoizedProps=e,null===f)h=1073741823;else if(f.value===e.value){if(f.children===e.children&&g)return b.stateNode=0,Yb(b),wc(a,b);h=0}else{var i=f.value;if(i===h&&(0!==i||1/i==1/h)||i!==i&&h!==h){if(f.children===e.children&&g)return b.stateNode=0,Yb(b),wc(a,b);h=0}else if(h="function"==typeof d._calculateChangedBits?d._calculateChangedBits(i,h):1073741823,0===(h|=0)){if(f.children===e.children&&g)return b.stateNode=0,Yb(b),wc(a,b)}else uc(b,d,h,c)}return b.stateNode=h,Yb(b),pc(a,b,e.children),b.child}function wc(a,c){if(null!==a&&c.child!==a.child&&b("153"),null!==c.child){a=c.child;var d=Cb(a,a.pendingProps,a.expirationTime);for(c.child=d,d.return=c;null!==a.sibling;)a=a.sibling,d=d.sibling=Cb(a,a.pendingProps,a.expirationTime),d.return=c;d.sibling=null}return c.child}function xc(a,c,d){if(0===c.expirationTime||c.expirationTime>d){switch(c.tag){case 3:tc(c);break;case 2:zb(c);break;case 4:_b(c,c.stateNode.containerInfo);break;case 13:Yb(c)}return null}switch(c.tag){case 0:null!==a&&b("155");var e=c.type,f=c.pendingProps,g=sb(c);return g=tb(c,g),e=e(f,g),c.effectTag|=1,"object"==typeof e&&null!==e&&"function"==typeof e.render&&void 0===e.$$typeof?(g=c.type,c.tag=2,c.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,g=g.getDerivedStateFromProps,"function"==typeof g&&cc(c,g,f),f=zb(c),e.updater=Zg,c.stateNode=e,e._reactInternalFiber=c,fc(c,d),a=sc(a,c,!0,f,d)):(c.tag=1,pc(a,c,e),c.memoizedProps=f,a=c.child),a;case 1:return f=c.type,d=c.pendingProps,Ng.current||c.memoizedProps!==d?(e=sb(c),e=tb(c,e),f=f(d,e),c.effectTag|=1,pc(a,c,f),c.memoizedProps=d,a=c.child):a=wc(a,c),a;case 2:if(f=zb(c),null===a)if(null===c.stateNode){var h=c.pendingProps,i=c.type;e=sb(c);var j=2===c.tag&&null!=c.type.contextTypes;g=j?tb(c,e):Tf,h=new i(h,g),c.memoizedState=null!==h.state&&void 0!==h.state?h.state:null,h.updater=Zg,c.stateNode=h,h._reactInternalFiber=c,j&&(j=c.stateNode,j.__reactInternalMemoizedUnmaskedChildContext=e,j.__reactInternalMemoizedMaskedChildContext=g),fc(c,d),e=!0}else{i=c.type,e=c.stateNode,j=c.memoizedProps,g=c.pendingProps,e.props=j;var k=e.context;h=sb(c),h=tb(c,h);var l=i.getDerivedStateFromProps;(i="function"==typeof l||"function"==typeof e.getSnapshotBeforeUpdate)||"function"!=typeof e.UNSAFE_componentWillReceiveProps&&"function"!=typeof e.componentWillReceiveProps||(j!==g||k!==h)&&ec(c,e,g,h),Rg=!1;var m=c.memoizedState;k=e.state=m;var n=c.updateQueue;null!==n&&(Ub(c,n,g,e,d),k=c.memoizedState),j!==g||m!==k||Ng.current||Rg?("function"==typeof l&&(cc(c,l,g),k=c.memoizedState),(j=Rg||dc(c,j,g,m,k,h))?(i||"function"!=typeof e.UNSAFE_componentWillMount&&"function"!=typeof e.componentWillMount||("function"==typeof e.componentWillMount&&e.componentWillMount(),"function"==typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount()),"function"==typeof e.componentDidMount&&(c.effectTag|=4)):("function"==typeof e.componentDidMount&&(c.effectTag|=4),c.memoizedProps=g,c.memoizedState=k),e.props=g,e.state=k,e.context=h,e=j):("function"==typeof e.componentDidMount&&(c.effectTag|=4),e=!1)}else i=c.type,e=c.stateNode,g=c.memoizedProps,j=c.pendingProps,e.props=g,k=e.context,h=sb(c),h=tb(c,h),l=i.getDerivedStateFromProps,(i="function"==typeof l||"function"==typeof e.getSnapshotBeforeUpdate)||"function"!=typeof e.UNSAFE_componentWillReceiveProps&&"function"!=typeof e.componentWillReceiveProps||(g!==j||k!==h)&&ec(c,e,j,h),Rg=!1,k=c.memoizedState,m=e.state=k,n=c.updateQueue,null!==n&&(Ub(c,n,j,e,d),m=c.memoizedState),g!==j||k!==m||Ng.current||Rg?("function"==typeof l&&(cc(c,l,j),m=c.memoizedState),(l=Rg||dc(c,g,j,k,m,h))?(i||"function"!=typeof e.UNSAFE_componentWillUpdate&&"function"!=typeof e.componentWillUpdate||("function"==typeof e.componentWillUpdate&&e.componentWillUpdate(j,m,h),"function"==typeof e.UNSAFE_componentWillUpdate&&e.UNSAFE_componentWillUpdate(j,m,h)),"function"==typeof e.componentDidUpdate&&(c.effectTag|=4),"function"==typeof e.getSnapshotBeforeUpdate&&(c.effectTag|=256)):("function"!=typeof e.componentDidUpdate||g===a.memoizedProps&&k===a.memoizedState||(c.effectTag|=4),"function"!=typeof e.getSnapshotBeforeUpdate||g===a.memoizedProps&&k===a.memoizedState||(c.effectTag|=256),c.memoizedProps=j,c.memoizedState=m),e.props=j,e.state=m,e.context=h,e=l):("function"!=typeof e.componentDidUpdate||g===a.memoizedProps&&k===a.memoizedState||(c.effectTag|=4),"function"!=typeof e.getSnapshotBeforeUpdate||g===a.memoizedProps&&k===a.memoizedState||(c.effectTag|=256),e=!1);return sc(a,c,e,f,d);case 3:return tc(c),f=c.updateQueue,null!==f?(e=c.memoizedState,e=null!==e?e.element:null,Ub(c,f,c.pendingProps,null,d),(f=c.memoizedState.element)===e?(oc(),a=wc(a,c)):(e=c.stateNode,(e=(null===a||null===a.child)&&e.hydrate)&&(ch=ob(c.stateNode.containerInfo),bh=c,e=dh=!0),e?(c.effectTag|=2,c.child=ah(c,null,f,d)):(oc(),pc(a,c,f)),a=c.child)):(oc(),a=wc(a,c)),a;case 5:return $b(Yg.current),f=$b(Wg.current),e=_a(f,c.type),f!==e&&(rb(Xg,c,c),rb(Wg,e,c)),null===a&&lc(c),f=c.type,j=c.memoizedProps,e=c.pendingProps,g=null!==a?a.memoizedProps:null,Ng.current||j!==e||((j=1&c.mode&&!!e.hidden)&&(c.expirationTime=1073741823),j&&1073741823===d)?(j=e.children,mb(f,e)?j=null:g&&mb(f,g)&&(c.effectTag|=16),rc(a,c),1073741823!==d&&1&c.mode&&e.hidden?(c.expirationTime=1073741823,c.memoizedProps=e,a=null):(pc(a,c,j),c.memoizedProps=e,a=c.child)):a=wc(a,c),a;case 6:return null===a&&lc(c),c.memoizedProps=c.pendingProps,null;case 16:return null;case 4:return _b(c,c.stateNode.containerInfo),f=c.pendingProps,Ng.current||c.memoizedProps!==f?(null===a?c.child=_g(c,null,f,d):pc(a,c,f),c.memoizedProps=f,a=c.child):a=wc(a,c),a;case 14:return f=c.type.render,d=c.pendingProps,e=c.ref,Ng.current||c.memoizedProps!==d||e!==(null!==a?a.ref:null)?(f=f(d,e),pc(a,c,f),c.memoizedProps=d,a=c.child):a=wc(a,c),a;case 10:return d=c.pendingProps,Ng.current||c.memoizedProps!==d?(pc(a,c,d),c.memoizedProps=d,a=c.child):a=wc(a,c),a;case 11:return d=c.pendingProps.children,Ng.current||null!==d&&c.memoizedProps!==d?(pc(a,c,d),c.memoizedProps=d,a=c.child):a=wc(a,c),a;case 15:return d=c.pendingProps,c.memoizedProps===d?a=wc(a,c):(pc(a,c,d.children),c.memoizedProps=d,a=c.child),a;case 13:return vc(a,c,d);case 12:a:if(e=c.type,g=c.pendingProps,j=c.memoizedProps,f=e._currentValue,h=e._changedBits,Ng.current||0!==h||j!==g){if(c.memoizedProps=g,i=g.unstable_observedBits,void 0!==i&&null!==i||(i=1073741823),c.stateNode=i,0!=(h&i))uc(c,e,h,d);else if(j===g){a=wc(a,c);break a}d=g.children,d=d(f),c.effectTag|=1,pc(a,c,d),a=c.child}else a=wc(a,c);return a;default:b("156")}}function yc(a){a.effectTag|=4}function zc(a,c,d){var e=c.pendingProps;switch(c.tag){case 1:return null;case 2:return vb(c),null;case 3:return ac(c),wb(c),d=c.stateNode,d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),null!==a&&null!==a.child||(nc(c),c.effectTag&=-3),eh(c),null;case 5:bc(c),d=$b(Yg.current);var f=c.type;if(null!==a&&null!=c.stateNode){var g=a.memoizedProps,h=c.stateNode,i=$b(Wg.current);h=zg(h,f,g,e,d),fh(a,c,h,f,g,e,d,i),a.ref!==c.ref&&(c.effectTag|=128)}else{if(!e)return null===c.stateNode&&b("166"),null;if(a=$b(Wg.current),nc(c))e=c.stateNode,f=c.type,g=c.memoizedProps,Dg(c,e),Eg(e,g),d=Bg(e,f,g,a,d),c.updateQueue=d,null!==d&&yc(c);else{a=wg(f,e,d,a),Dg(c,a),Eg(a,e);a:for(g=c.child;null!==g;){if(5===g.tag||6===g.tag)a.appendChild(g.stateNode);else if(4!==g.tag&&null!==g.child){g.child.return=g,g=g.child;continue}if(g===c)break;for(;null===g.sibling;){if(null===g.return||g.return===c)break a;g=g.return}g.sibling.return=g.return,g=g.sibling}yg(a,f,e,d),lb(f,e)&&yc(c),c.stateNode=a}null!==c.ref&&(c.effectTag|=128)}return null;case 6:if(a&&null!=c.stateNode)gh(a,c,a.memoizedProps,e);else{if("string"!=typeof e)return null===c.stateNode&&b("166"),null;d=$b(Yg.current),$b(Wg.current),nc(c)?(d=c.stateNode,e=c.memoizedProps,Dg(c,d),Cg(d,e)&&yc(c)):(d=xg(e,d),Dg(c,d),c.stateNode=d)}return null;case 14:case 16:case 10:case 11:case 15:return null;case 4:return ac(c),eh(c),null;case 13:return Zb(c),null;case 12:return null;case 0:b("167");default:b("156")}}function Ac(a,b){var c=b.source;null===b.stack&&null!==c&&aa(c),null!==c&&_(c),b=b.value,null!==a&&2===a.tag&&_(a);try{b&&b.suppressReactErrorLogging||console.error(b)}catch(a){a&&a.suppressReactErrorLogging||console.error(a)}}function Bc(a){var b=a.ref;if(null!==b)if("function"==typeof b)try{b(null)}catch(b){Pc(a,b)}else b.current=null}function Cc(a){switch("function"==typeof Lb&&Lb(a),a.tag){case 2:Bc(a);var b=a.stateNode;if("function"==typeof b.componentWillUnmount)try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(b){Pc(a,b)}break;case 5:Bc(a);break;case 4:Fc(a)}}function Dc(a){return 5===a.tag||3===a.tag||4===a.tag}function Ec(a){a:{for(var c=a.return;null!==c;){if(Dc(c)){var d=c;break a}c=c.return}b("160"),d=void 0}var e=c=void 0;switch(d.tag){case 5:c=d.stateNode,e=!1;break;case 3:case 4:c=d.stateNode.containerInfo,e=!0;break;default:b("161")}16&d.effectTag&&(qg(c,""),d.effectTag&=-17);a:b:for(d=a;;){for(;null===d.sibling;){if(null===d.return||Dc(d.return)){d=null;break a}d=d.return}for(d.sibling.return=d.return,d=d.sibling;5!==d.tag&&6!==d.tag;){if(2&d.effectTag)continue b;if(null===d.child||4===d.tag)continue b;d.child.return=d,d=d.child}if(!(2&d.effectTag)){d=d.stateNode;break a}}for(var f=a;;){if(5===f.tag||6===f.tag)if(d)if(e){var g=c,h=f.stateNode,i=d;8===g.nodeType?g.parentNode.insertBefore(h,i):g.insertBefore(h,i)}else c.insertBefore(f.stateNode,d);else e?(g=c,h=f.stateNode,8===g.nodeType?g.parentNode.insertBefore(h,g):g.appendChild(h)):c.appendChild(f.stateNode);else if(4!==f.tag&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===a)break;for(;null===f.sibling;){if(null===f.return||f.return===a)return;f=f.return}f.sibling.return=f.return,f=f.sibling}}function Fc(a){for(var c=a,d=!1,e=void 0,f=void 0;;){if(!d){d=c.return;a:for(;;){switch(null===d&&b("160"),d.tag){case 5:e=d.stateNode,f=!1;break a;case 3:case 4:e=d.stateNode.containerInfo,f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=c,h=g;;)if(Cc(h),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===g)break;for(;null===h.sibling;){if(null===h.return||h.return===g)break a;h=h.return}h.sibling.return=h.return,h=h.sibling}f?(g=e,h=c.stateNode,8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag?e=c.stateNode.containerInfo:Cc(c),null!==c.child){c.child.return=c,c=c.child;continue}if(c===a)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return,4===c.tag&&(d=!1)}c.sibling.return=c.return,c=c.sibling}}function Gc(a,c){switch(c.tag){case 2:break;case 5:var d=c.stateNode;if(null!=d){var e=c.memoizedProps;a=null!==a?a.memoizedProps:e;var f=c.type,g=c.updateQueue;c.updateQueue=null,null!==g&&(Eg(d,e),Ag(d,g,f,a,e))}break;case 6:null===c.stateNode&&b("162"),c.stateNode.nodeValue=c.memoizedProps;break;case 3:case 15:case 16:break;default:b("163")}}function Hc(a,b,c){c=Ob(c),c.tag=3,c.payload={element:null};var d=b.value;return c.callback=function(){fd(d),Ac(a,b)},c}function Ic(a,b,c){c=Ob(c),c.tag=3;var d=a.stateNode;return null!==d&&"function"==typeof d.componentDidCatch&&(c.callback=function(){null===vh?vh=new Set([this]):vh.add(this);var c=b.value,d=b.stack;Ac(a,b),this.componentDidCatch(c,{componentStack:null!==d?d:""})}),c}function Jc(a,b,c,d,e,f,g){c.effectTag|=512,c.firstEffect=c.lastEffect=null,d=Xb(d,c),a=b;do{switch(a.tag){case 3:return a.effectTag|=1024,d=Hc(a,d,f),void Rb(a,d,f);case 2:if(b=d,c=a.stateNode,0==(64&a.effectTag)&&null!==c&&"function"==typeof c.componentDidCatch&&(null===vh||!vh.has(c)))return a.effectTag|=1024,d=Ic(a,b,f),void Rb(a,d,f)}a=a.return}while(null!==a)}function Kc(a,b,c){switch(a.tag){case 2:return vb(a),b=a.effectTag,1024&b?(a.effectTag=-1025&b|64,a):null;case 3:return ac(a),wb(a),b=a.effectTag,1024&b?(a.effectTag=-1025&b|64,a):null;case 5:return bc(a),null;case 16:return b=a.effectTag,1024&b?(a.effectTag=-1025&b|64,a):null;case 4:return ac(a),null;case 13:return Zb(a),null;default:return null}}function Lc(){if(null!==nh)for(var a=nh.return;null!==a;){var b=a;switch(b.tag){case 2:vb(b);break;case 3:ac(b),wb(b);break;case 5:bc(b);break;case 4:ac(b);break;case 13:Zb(b)}a=a.return}oh=null,ph=0,qh=-1,rh=!1,nh=null,uh=!1}function Mc(a){for(;;){var b=a.alternate,c=a.return,d=a.sibling;if(0==(512&a.effectTag)){b=zc(b,a,ph);var e=a;if(1073741823===ph||1073741823!==e.expirationTime){var f=0;switch(e.tag){case 3:case 2:var g=e.updateQueue;null!==g&&(f=g.expirationTime)}for(g=e.child;null!==g;)0!==g.expirationTime&&(0===f||f>g.expirationTime)&&(f=g.expirationTime),g=g.sibling;e.expirationTime=f}if(null!==b)return b;if(null!==c&&0==(512&c.effectTag)&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a)),null!==d)return d;if(null===c){uh=!0;break}a=c}else{if(null!==(a=Kc(a,rh,ph)))return a.effectTag&=511,a;if(null!==c&&(c.firstEffect=c.lastEffect=null,c.effectTag|=512),null!==d)return d;if(null===c)break;a=c}}return null}function Nc(a){var b=xc(a.alternate,a,ph);return null===b&&(b=Mc(a)),Je.current=null,b}function Oc(a,c,d){mh&&b("243"),mh=!0,c===ph&&a===oh&&null!==nh||(Lc(),oh=a,ph=c,qh=-1,nh=Cb(oh.current,null,ph),a.pendingCommitExpirationTime=0);var e=!1;for(rh=!d||ph<=ih;;){try{if(d)for(;null!==nh&&!ed();)nh=Nc(nh);else for(;null!==nh;)nh=Nc(nh)}catch(c){if(null===nh)e=!0,fd(c);else{null===nh&&b("271"),d=nh;var f=d.return;if(null===f){e=!0,fd(c);break}Jc(a,f,d,c,rh,ph,jh),nh=Mc(d)}}break}if(mh=!1,e)return null;if(null===nh){if(uh)return a.pendingCommitExpirationTime=c,a.current.alternate;rh&&b("262"),0<=qh&&setTimeout(function(){var b=a.current.expirationTime;0!==b&&(0===a.remainingExpirationTime||a.remainingExpirationTime<b)&&Xc(a,b)},qh),gd(a.current.expirationTime)}return null}function Pc(a,c){var d;a:{for(mh&&!th&&b("263"),d=a.return;null!==d;){switch(d.tag){case 2:var e=d.stateNode;if("function"==typeof d.type.getDerivedStateFromCatch||"function"==typeof e.componentDidCatch&&(null===vh||!vh.has(e))){a=Xb(c,a),a=Ic(d,a,1),Qb(d,a,1),Sc(d,1),d=void 0;break a}break;case 3:a=Xb(c,a),a=Hc(d,a,1),Qb(d,a,1),Sc(d,1),d=void 0;break a}d=d.return}3===a.tag&&(d=Xb(c,a),d=Hc(a,d,1),Qb(a,d,1),Sc(a,1)),d=void 0}return d}function Qc(){var a=2+25*(1+((Tc()-2+500)/25|0));return a<=kh&&(a=kh+1),kh=a}function Rc(a,b){return a=0!==lh?lh:mh?th?1:ph:1&b.mode?Kh?2+10*(1+((a-2+15)/10|0)):2+25*(1+((a-2+500)/25|0)):1,Kh&&(0===Dh||a>Dh)&&(Dh=a),a}function Sc(a,c){for(;null!==a;){if((0===a.expirationTime||a.expirationTime>c)&&(a.expirationTime=c),null!==a.alternate&&(0===a.alternate.expirationTime||a.alternate.expirationTime>c)&&(a.alternate.expirationTime=c),null===a.return){if(3!==a.tag)break;var d=a.stateNode;!mh&&0!==ph&&c<ph&&Lc();var e=d.current.expirationTime;mh&&!th&&oh===d||Xc(d,e),Nh>Mh&&b("185")}a=a.return}}function Tc(){return jh=Hg()-hh,ih=2+(jh/10|0)}function Uc(a){var b=lh;lh=2+25*(1+((Tc()-2+500)/25|0));try{return a()}finally{lh=b}}function Vc(a,b,c,d,e){var f=lh;lh=1;try{return a(b,c,d,e)}finally{lh=f}}function Wc(a){if(0!==yh){if(a>yh)return;null!==zh&&Jg(zh)}var b=Hg()-hh;yh=a,zh=Ig(Zc,{timeout:10*(a-2)-b})}function Xc(a,b){if(null===a.nextScheduledRoot)a.remainingExpirationTime=b,null===xh?(wh=xh=a,a.nextScheduledRoot=a):(xh=xh.nextScheduledRoot=a,xh.nextScheduledRoot=wh);else{var c=a.remainingExpirationTime;(0===c||b<c)&&(a.remainingExpirationTime=b)}Ah||(Ih?Jh&&(Bh=a,Ch=1,cd(a,1,!1)):1===b?$c():Wc(b))}function Yc(){var a=0,c=null;if(null!==xh)for(var d=xh,e=wh;null!==e;){var f=e.remainingExpirationTime;if(0===f){if((null===d||null===xh)&&b("244"),e===e.nextScheduledRoot){wh=xh=e.nextScheduledRoot=null;break}if(e===wh)wh=f=e.nextScheduledRoot,xh.nextScheduledRoot=f,e.nextScheduledRoot=null;else{if(e===xh){xh=d,xh.nextScheduledRoot=wh,e.nextScheduledRoot=null
;break}d.nextScheduledRoot=e.nextScheduledRoot,e.nextScheduledRoot=null}e=d.nextScheduledRoot}else{if((0===a||f<a)&&(a=f,c=e),e===xh)break;d=e,e=e.nextScheduledRoot}}d=Bh,null!==d&&d===c&&1===a?Nh++:Nh=0,Bh=c,Ch=a}function Zc(a){_c(0,!0,a)}function $c(){_c(1,!1,null)}function _c(a,b,c){if(Hh=c,Yc(),b)for(;null!==Bh&&0!==Ch&&(0===a||a>=Ch)&&(!Eh||Tc()>=Ch);)Tc(),cd(Bh,Ch,!Eh),Yc();else for(;null!==Bh&&0!==Ch&&(0===a||a>=Ch);)cd(Bh,Ch,!1),Yc();null!==Hh&&(yh=0,zh=null),0!==Ch&&Wc(Ch),Hh=null,Eh=!1,bd()}function ad(a,c){Ah&&b("253"),Bh=a,Ch=c,cd(a,c,!1),$c(),bd()}function bd(){if(Nh=0,null!==Lh){var a=Lh;Lh=null;for(var b=0;b<a.length;b++){var c=a[b];try{c._onComplete()}catch(a){Fh||(Fh=!0,Gh=a)}}}if(Fh)throw a=Gh,Gh=null,Fh=!1,a}function cd(a,c,d){Ah&&b("245"),Ah=!0,d?(d=a.finishedWork,null!==d?dd(a,d,c):null!==(d=Oc(a,c,!0))&&(ed()?a.finishedWork=d:dd(a,d,c))):(d=a.finishedWork,null!==d?dd(a,d,c):null!==(d=Oc(a,c,!1))&&dd(a,d,c)),Ah=!1}function dd(a,c,d){var e=a.firstBatch;if(null!==e&&e._expirationTime<=d&&(null===Lh?Lh=[e]:Lh.push(e),e._defer))return a.finishedWork=c,void(a.remainingExpirationTime=0);if(a.finishedWork=null,th=mh=!0,d=c.stateNode,d.current===c&&b("177"),e=d.pendingCommitExpirationTime,0===e&&b("261"),d.pendingCommitExpirationTime=0,Tc(),Je.current=null,1<c.effectTag)if(null!==c.lastEffect){c.lastEffect.nextEffect=c;var f=c.firstEffect}else f=c;else f=c.firstEffect;Fg=Ff;var g=mf();if(Ra(g)){if("selectionStart"in g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{var i=window.getSelection&&window.getSelection();if(i&&0!==i.rangeCount){h=i.anchorNode;var j=i.anchorOffset,k=i.focusNode;i=i.focusOffset;try{h.nodeType,k.nodeType}catch(a){h=null;break a}var l=0,m=-1,n=-1,o=0,p=0,q=g,r=null;b:for(;;){for(var s;q!==h||0!==j&&3!==q.nodeType||(m=l+j),q!==k||0!==i&&3!==q.nodeType||(n=l+i),3===q.nodeType&&(l+=q.nodeValue.length),null!==(s=q.firstChild);)r=q,q=s;for(;;){if(q===g)break b;if(r===h&&++o===j&&(m=l),r===k&&++p===i&&(n=l),null!==(s=q.nextSibling))break;q=r,r=q.parentNode}q=s}h=-1===m||-1===n?null:{start:m,end:n}}else h=null}h=h||{start:0,end:0}}else h=null;for(Gg={focusedElem:g,selectionRange:h},Ia(!1),sh=f;null!==sh;){g=!1,h=void 0;try{for(;null!==sh;){if(256&sh.effectTag){var t=sh.alternate;switch(j=sh,j.tag){case 2:if(256&j.effectTag&&null!==t){var u=t.memoizedProps,v=t.memoizedState,w=j.stateNode;w.props=j.memoizedProps,w.state=j.memoizedState;var x=w.getSnapshotBeforeUpdate(u,v);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:case 5:case 6:case 4:break;default:b("163")}}sh=sh.nextEffect}}catch(a){g=!0,h=a}g&&(null===sh&&b("178"),Pc(sh,h),null!==sh&&(sh=sh.nextEffect))}for(sh=f;null!==sh;){t=!1,u=void 0;try{for(;null!==sh;){var y=sh.effectTag;if(16&y&&qg(sh.stateNode,""),128&y){var z=sh.alternate;if(null!==z){var A=z.ref;null!==A&&("function"==typeof A?A(null):A.current=null)}}switch(14&y){case 2:Ec(sh),sh.effectTag&=-3;break;case 6:Ec(sh),sh.effectTag&=-3,Gc(sh.alternate,sh);break;case 4:Gc(sh.alternate,sh);break;case 8:v=sh,Fc(v),v.return=null,v.child=null,v.alternate&&(v.alternate.child=null,v.alternate.return=null)}sh=sh.nextEffect}}catch(a){t=!0,u=a}t&&(null===sh&&b("178"),Pc(sh,u),null!==sh&&(sh=sh.nextEffect))}if(A=Gg,z=mf(),y=A.focusedElem,t=A.selectionRange,z!==y&&Lf(document.documentElement,y)){null!==t&&Ra(y)&&(z=t.start,A=t.end,void 0===A&&(A=z),"selectionStart"in y?(y.selectionStart=z,y.selectionEnd=Math.min(A,y.value.length)):window.getSelection&&(z=window.getSelection(),u=y[D()].length,A=Math.min(t.start,u),t=void 0===t.end?A:Math.min(t.end,u),!z.extend&&A>t&&(u=t,t=A,A=u),u=Qa(y,A),v=Qa(y,t),u&&v&&(1!==z.rangeCount||z.anchorNode!==u.node||z.anchorOffset!==u.offset||z.focusNode!==v.node||z.focusOffset!==v.offset)&&(w=document.createRange(),w.setStart(u.node,u.offset),z.removeAllRanges(),A>t?(z.addRange(w),z.extend(v.node,v.offset)):(w.setEnd(v.node,v.offset),z.addRange(w))))),z=[];for(A=y;A=A.parentNode;)1===A.nodeType&&z.push({element:A,left:A.scrollLeft,top:A.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<z.length;y++)A=z[y],A.element.scrollLeft=A.left,A.element.scrollTop=A.top}for(Gg=null,Ia(Fg),Fg=null,d.current=c,sh=f;null!==sh;){f=!1,y=void 0;try{for(z=e;null!==sh;){var B=sh.effectTag;if(36&B){var C=sh.alternate;switch(A=sh,t=z,A.tag){case 2:var E=A.stateNode;if(4&A.effectTag)if(null===C)E.props=A.memoizedProps,E.state=A.memoizedState,E.componentDidMount();else{var F=C.memoizedProps,G=C.memoizedState;E.props=A.memoizedProps,E.state=A.memoizedState,E.componentDidUpdate(F,G,E.__reactInternalSnapshotBeforeUpdate)}var H=A.updateQueue;null!==H&&(E.props=A.memoizedProps,E.state=A.memoizedState,Wb(A,H,E,t));break;case 3:var I=A.updateQueue;if(null!==I){if(u=null,null!==A.child)switch(A.child.tag){case 5:u=A.child.stateNode;break;case 2:u=A.child.stateNode}Wb(A,I,u,t)}break;case 5:var J=A.stateNode;null===C&&4&A.effectTag&&lb(A.type,A.memoizedProps)&&J.focus();break;case 6:case 4:case 15:case 16:break;default:b("163")}}if(128&B){A=void 0;var K=sh.ref;if(null!==K){var L=sh.stateNode;switch(sh.tag){case 5:A=L;break;default:A=L}"function"==typeof K?K(A):K.current=A}}var M=sh.nextEffect;sh.nextEffect=null,sh=M}}catch(a){f=!0,y=a}f&&(null===sh&&b("178"),Pc(sh,y),null!==sh&&(sh=sh.nextEffect))}mh=th=!1,"function"==typeof Kb&&Kb(c.stateNode),c=d.current.expirationTime,0===c&&(vh=null),a.remainingExpirationTime=c}function ed(){return!(null===Hh||Hh.timeRemaining()>Oh)&&(Eh=!0)}function fd(a){null===Bh&&b("246"),Bh.remainingExpirationTime=0,Fh||(Fh=!0,Gh=a)}function gd(a){null===Bh&&b("246"),Bh.remainingExpirationTime=a}function hd(a,b){var c=Ih;Ih=!0;try{return a(b)}finally{(Ih=c)||Ah||$c()}}function id(a,b){if(Ih&&!Jh){Jh=!0;try{return a(b)}finally{Jh=!1}}return a(b)}function jd(a,c){Ah&&b("187");var d=Ih;Ih=!0;try{return Vc(a,c)}finally{Ih=d,$c()}}function kd(a,b,c){if(Kh)return a(b,c);Ih||Ah||0===Dh||(_c(Dh,!1,null),Dh=0);var d=Kh,e=Ih;Ih=Kh=!0;try{return a(b,c)}finally{Kh=d,(Ih=e)||Ah||$c()}}function ld(a){var b=Ih;Ih=!0;try{Vc(a)}finally{(Ih=b)||Ah||_c(1,!1,null)}}function md(a,c,d,e,f){var g=c.current;if(d){d=d._reactInternalFiber;var h;a:{for(2===Aa(d)&&2===d.tag||b("170"),h=d;3!==h.tag;){if(ub(h)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break a}(h=h.return)||b("171")}h=h.stateNode.context}d=ub(d)?yb(d,h):h}else d=Tf;return null===c.context?c.context=d:c.pendingContext=d,c=f,f=Ob(e),f.payload={element:a},c=void 0===c?null:c,null!==c&&(f.callback=c),Qb(g,f,e),Sc(g,e),e}function nd(a){var c=a._reactInternalFiber;return void 0===c&&("function"==typeof a.render?b("188"):b("268",Object.keys(a))),a=Da(c),null===a?null:a.stateNode}function od(a,b,c,d){var e=b.current;return e=Rc(Tc(),e),md(a,b,c,e,d)}function pd(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:default:return a.child.stateNode}}function qd(a){var b=a.findFiberByHostInstance;return Jb(ke({},a,{findHostInstanceByFiber:function(a){return a=Da(a),null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null}}))}function rd(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Me,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function sd(a){this._expirationTime=Qc(),this._root=a,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function td(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ud(a,b,c){this._internalRoot=Hb(a,b,c)}function vd(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function wd(a,b){if(b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot"))),!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ud(a,!1,b)}function xd(a,c,d,e,f){vd(d)||b("200");var g=d._reactRootContainer;if(g){if("function"==typeof f){var h=f;f=function(){var a=pd(g._internalRoot);h.call(a)}}null!=a?g.legacy_renderSubtreeIntoContainer(a,c,f):g.render(c,f)}else{if(g=d._reactRootContainer=wd(d,e),"function"==typeof f){var i=f;f=function(){var a=pd(g._internalRoot);i.call(a)}}id(function(){null!=a?g.legacy_renderSubtreeIntoContainer(a,c,f):g.render(c,f)})}return pd(g._internalRoot)}function yd(a,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return vd(c)||b("200"),rd(a,c,null,d)}var zd=function(a,b,c,d,e,f,g,h){if(!a){if(void 0===b)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=[c,d,e,f,g,h],j=0;a=Error(b.replace(/%s/g,function(){return i[j++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}};a||b("227");var Ad=function(a,b,c,d,e,f,g,h,i){this._hasCaughtError=!1,this._caughtError=null;var j=Array.prototype.slice.call(arguments,3);try{b.apply(c,j)}catch(a){this._caughtError=a,this._hasCaughtError=!0}},Bd={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(a,b,c,d,e,f,g,h,i){Ad.apply(Bd,arguments)},invokeGuardedCallbackAndCatchFirstError:function(a,b,c,d,e,f,g,h,i){if(Bd.invokeGuardedCallback.apply(this,arguments),Bd.hasCaughtError()){var j=Bd.clearCaughtError();Bd._hasRethrowError||(Bd._hasRethrowError=!0,Bd._rethrowError=j)}},rethrowCaughtError:function(){return Cd.apply(Bd,arguments)},hasCaughtError:function(){return Bd._hasCaughtError},clearCaughtError:function(){if(Bd._hasCaughtError){var a=Bd._caughtError;return Bd._caughtError=null,Bd._hasCaughtError=!1,a}b("198")}},Cd=function(){if(Bd._hasRethrowError){var a=Bd._rethrowError;throw Bd._rethrowError=null,Bd._hasRethrowError=!1,a}},Dd=null,Ed={},Fd=[],Gd={},Hd={},Id={},Jd={plugins:Fd,eventNameDispatchConfigs:Gd,registrationNameModules:Hd,registrationNameDependencies:Id,possibleRegistrationNames:null,injectEventPluginOrder:e,injectEventPluginsByName:f},Kd=function(){};Kd.thatReturns=g,Kd.thatReturnsFalse=g(!1),Kd.thatReturnsTrue=g(!0),Kd.thatReturnsNull=g(null),Kd.thatReturnsThis=function(){return this},Kd.thatReturnsArgument=function(a){return a};var Ld=Kd,Md=null,Nd=null,Od=null,Pd=null,Qd=function(a,b){if(a){var c=a._dispatchListeners,d=a._dispatchInstances;if(Array.isArray(c))for(var e=0;e<c.length&&!a.isPropagationStopped();e++)h(a,b,c[e],d[e]);else c&&h(a,b,c,d);a._dispatchListeners=null,a._dispatchInstances=null,a.isPersistent()||a.constructor.release(a)}},Rd=function(a){return Qd(a,!0)},Sd=function(a){return Qd(a,!1)},Td={injectEventPluginOrder:e,injectEventPluginsByName:f},Ud={injection:Td,getListener:k,runEventsInBatch:l,runExtractedEventsInBatch:m},Vd=Math.random().toString(36).slice(2),Wd="__reactInternalInstance$"+Vd,Xd="__reactEventHandlers$"+Vd,Yd={precacheFiberNode:n,getClosestInstanceFromNode:o,getInstanceFromNode:function(a){return a=a[Wd],!a||5!==a.tag&&6!==a.tag?null:a},getNodeFromInstance:p,getFiberCurrentPropsFromNode:q,updateFiberProps:r},Zd={accumulateTwoPhaseDispatches:z,accumulateTwoPhaseDispatchesSkipTarget:function(a){j(a,w)},accumulateEnterLeaveDispatches:A,accumulateDirectDispatches:function(a){j(a,y)}},$d=!("undefined"==typeof window||!window.document||!window.document.createElement),_d={canUseDOM:$d,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:$d&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:$d&&!!window.screen,isInWorker:!$d},ae={animationend:B("Animation","AnimationEnd"),animationiteration:B("Animation","AnimationIteration"),animationstart:B("Animation","AnimationStart"),transitionend:B("Transition","TransitionEnd")},be={},ce={};_d.canUseDOM&&(ce=document.createElement("div").style,"AnimationEvent"in window||(delete ae.animationend.animation,delete ae.animationiteration.animation,delete ae.animationstart.animation),"TransitionEvent"in window||delete ae.transitionend.transition);var de=C("animationend"),ee=C("animationiteration"),fe=C("animationstart"),ge=C("transitionend"),he="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ie=null,je={_root:null,_startText:null,_fallbackText:null},ke=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,le="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),me={type:null,target:null,currentTarget:Ld.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};ke(G.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!=typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=Ld.thatReturnsTrue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!=typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=Ld.thatReturnsTrue)},persist:function(){this.isPersistent=Ld.thatReturnsTrue},isPersistent:Ld.thatReturnsFalse,destructor:function(){var a,b=this.constructor.Interface;for(a in b)this[a]=null;for(b=0;b<le.length;b++)this[le[b]]=null}}),G.Interface=me,G.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};return d.prototype=c.prototype,d=new d,ke(d,b.prototype),b.prototype=d,b.prototype.constructor=b,b.Interface=ke({},c.Interface,a),b.extend=c.extend,J(b),b},J(G);var ne=G.extend({data:null}),oe=G.extend({data:null}),pe=[9,13,27,32],qe=_d.canUseDOM&&"CompositionEvent"in window,re=null;_d.canUseDOM&&"documentMode"in document&&(re=document.documentMode);var se=_d.canUseDOM&&"TextEvent"in window&&!re,te=_d.canUseDOM&&(!qe||re&&8<re&&11>=re),ue=String.fromCharCode(32),ve={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},we=!1,xe=!1,ye={eventTypes:ve,extractEvents:function(a,b,c,d){var e=void 0,f=void 0;if(qe)a:{switch(a){case"compositionstart":e=ve.compositionStart;break a;case"compositionend":e=ve.compositionEnd;break a;case"compositionupdate":e=ve.compositionUpdate;break a}e=void 0}else xe?K(a,c)&&(e=ve.compositionEnd):"keydown"===a&&229===c.keyCode&&(e=ve.compositionStart);return e?(te&&(xe||e!==ve.compositionStart?e===ve.compositionEnd&&xe&&(f=E()):(je._root=d,je._startText=F(),xe=!0)),e=ne.getPooled(e,b,c,d),f?e.data=f:null!==(f=L(c))&&(e.data=f),z(e),f=e):f=null,(a=se?M(a,c):N(a,c))?(b=oe.getPooled(ve.beforeInput,b,c,d),b.data=a,z(b)):b=null,null===f?b:null===b?f:[f,b]}},ze=null,Ae=null,Be=null,Ce={injectFiberControlledHostComponent:function(a){ze=a}},De={injection:Ce,enqueueStateRestore:P,needsStateRestore:Q,restoreStateIfNeeded:R},Ee=function(a,b){return a(b)},Fe=function(a,b,c){return a(b,c)},Ge=function(){},He=!1,Ie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Je=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ke="function"==typeof Symbol&&Symbol.for,Le=Ke?Symbol.for("react.element"):60103,Me=Ke?Symbol.for("react.portal"):60106,Ne=Ke?Symbol.for("react.fragment"):60107,Oe=Ke?Symbol.for("react.strict_mode"):60108,Pe=Ke?Symbol.for("react.profiler"):60114,Qe=Ke?Symbol.for("react.provider"):60109,Re=Ke?Symbol.for("react.context"):60110,Se=Ke?Symbol.for("react.async_mode"):60111,Te=Ke?Symbol.for("react.forward_ref"):60112,Ue=Ke?Symbol.for("react.timeout"):60113,Ve="function"==typeof Symbol&&Symbol.iterator,We=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xe={},Ye={},Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){Ze[a]=new ea(a,0,!1,a,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];Ze[b]=new ea(b,1,!1,a[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){Ze[a]=new ea(a,2,!1,a.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(a){Ze[a]=new ea(a,2,!1,a,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){Ze[a]=new ea(a,3,!1,a.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(a){Ze[a]=new ea(a,3,!0,a.toLowerCase(),null)}),["capture","download"].forEach(function(a){Ze[a]=new ea(a,4,!1,a.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(a){Ze[a]=new ea(a,6,!1,a.toLowerCase(),null)}),["rowSpan","start"].forEach(function(a){Ze[a]=new ea(a,5,!1,a.toLowerCase(),null)});var $e=/[\-:]([a-z])/g,_e=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=a.replace($e,_e);Ze[b]=new ea(b,1,!1,a,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace($e,_e);Ze[b]=new ea(b,1,!1,a,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace($e,_e);Ze[b]=new ea(b,1,!1,a,"http://www.w3.org/XML/1998/namespace")}),Ze.tabIndex=new ea("tabIndex",1,!1,"tabindex",null);var af={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},bf=null,cf=null,df=!1;_d.canUseDOM&&(df=V("input")&&(!document.documentMode||9<document.documentMode));var ef={eventTypes:af,_isInputEventSupported:df,extractEvents:function(a,b,c,d){var e=b?p(b):window,f=void 0,g=void 0,h=e.nodeName&&e.nodeName.toLowerCase();if("select"===h||"input"===h&&"file"===e.type?f=qa:T(e)?df?f=wa:(f=ua,g=ta):(h=e.nodeName)&&"input"===h.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(f=va),f&&(f=f(a,b)))return na(f,c,d);g&&g(a,e,b),"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&la(e,"number",e.value)}},ff=G.extend({view:null,detail:null}),gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},hf=ff.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:ya,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)}}),jf=hf.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),kf={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},lf={eventTypes:kf,extractEvents:function(a,b,c,d){var e="mouseover"===a||"pointerover"===a,f="mouseout"===a||"pointerout"===a;if(e&&(c.relatedTarget||c.fromElement)||!f&&!e)return null;if(e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window,f?(f=b,b=(b=c.relatedTarget||c.toElement)?o(b):null):f=null,f===b)return null;var g=void 0,h=void 0,i=void 0,j=void 0;return"mouseout"===a||"mouseover"===a?(g=hf,h=kf.mouseLeave,i=kf.mouseEnter,j="mouse"):"pointerout"!==a&&"pointerover"!==a||(g=jf,h=kf.pointerLeave,i=kf.pointerEnter,j="pointer"),a=null==f?e:p(f),e=null==b?e:p(b),h=g.getPooled(h,f,c,d),h.type=j+"leave",h.target=a,h.relatedTarget=e,c=g.getPooled(i,b,c,d),c.type=j+"enter",c.target=e,c.relatedTarget=a,A(h,c,f,b),[h,c]}},mf=function(a){if(void 0===(a=a||("undefined"!=typeof document?document:void 0)))return null;try{return a.activeElement||a.body}catch(b){return a.body}},nf=Object.prototype.hasOwnProperty,of=function(a,b){if(za(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!nf.call(b,c[d])||!za(a[c[d]],b[c[d]]))return!1;return!0},pf=G.extend({animationName:null,elapsedTime:null,pseudoElement:null}),qf=G.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),rf=ff.extend({relatedTarget:null}),sf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uf=ff.extend({key:function(a){if(a.key){var b=sf[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Fa(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?tf[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:ya,charCode:function(a){return"keypress"===a.type?Fa(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?Fa(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),vf=hf.extend({dataTransfer:null}),wf=ff.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:ya}),xf=G.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),yf=hf.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null}),zf=[["abort","abort"],[de,"animationEnd"],[ee,"animationIteration"],[fe,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ge,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Af={},Bf={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(a){Ga(a,!0)}),zf.forEach(function(a){Ga(a,!1)});var Cf={eventTypes:Af,isInteractiveTopLevelEventType:function(a){return void 0!==(a=Bf[a])&&!0===a.isInteractive},extractEvents:function(a,b,c,d){var e=Bf[a];if(!e)return null;switch(a){case"keypress":if(0===Fa(c))return null;case"keydown":case"keyup":a=uf;break;case"blur":case"focus":a=rf;break;case"click":if(2===c.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=wf;break;case de:case ee:case fe:a=pf;break;case ge:a=xf;break;case"scroll":a=ff;break;case"wheel":a=yf;break;case"copy":case"cut":case"paste":a=qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=jf;break;default:a=G}return b=a.getPooled(e,b,c,d),z(b),b}},Df=Cf.isInteractiveTopLevelEventType,Ef=[],Ff=!0,Gf={get _enabled(){return Ff},setEnabled:Ia,isEnabled:function(){return Ff},trapBubbledEvent:Ja,trapCapturedEvent:Ka,dispatchEvent:Ma},Hf={},If=0,Jf="_reactListenersID"+(""+Math.random()).slice(2),Kf=function(a){var b=(a?a.ownerDocument||a:document).defaultView||window;return!(!a||!("function"==typeof b.Node?a instanceof b.Node:"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName))&&3==a.nodeType},Lf=Oa,Mf=_d.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Nf={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Of=null,Pf=null,Qf=null,Rf=!1,Sf={eventTypes:Nf,extractEvents:function(a,b,c,d){var e,f=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument;if(!(e=!f)){a:{f=Na(f),e=Id.onSelect;for(var g=0;g<e.length;g++){var h=e[g];if(!f.hasOwnProperty(h)||!f[h]){f=!1;break a}}f=!0}e=!f}if(e)return null;switch(f=b?p(b):window,a){case"focus":(T(f)||"true"===f.contentEditable)&&(Of=f,Pf=b,Qf=null);break;case"blur":Qf=Pf=Of=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":return Rf=!1,Sa(c,d);case"selectionchange":if(Mf)break;case"keydown":case"keyup":return Sa(c,d)}return null}};Td.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),function(a){Md=a.getFiberCurrentPropsFromNode,Nd=a.getInstanceFromNode,Od=a.getNodeFromInstance}(Yd),Td.injectEventPluginsByName({SimpleEventPlugin:Cf,EnterLeaveEventPlugin:lf,ChangeEventPlugin:ef,SelectEventPlugin:Sf,BeforeInputEventPlugin:ye});var Tf={},Uf="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,Vf=Date,Wf=setTimeout,Xf=clearTimeout,Yf=void 0;if("object"==typeof performance&&"function"==typeof performance.now){var Zf=performance;Yf=function(){return Zf.now()}}else Yf=function(){return Vf.now()};var $f=void 0,_f=void 0;if(_d.canUseDOM){var ag="function"==typeof Uf?Uf:function(a){b("276")},bg=null,cg=null,dg=-1,eg=!1,fg=!1,gg=0,hg=33,ig=33,jg={didTimeout:!1,timeRemaining:function(){var a=gg-Yf();return 0<a?a:0}},kg=function(a,b){var c=a.scheduledCallback,d=!1;try{c(b),d=!0}finally{_f(a),d||(eg=!0,window.postMessage(lg,"*"))}},lg="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(a){if(a.source===window&&a.data===lg&&(eg=!1,null!==bg)){if(null!==bg){var b=Yf();if(!(-1===dg||dg>b)){a=-1;for(var c=[],d=bg;null!==d;){var e=d.timeoutTime;-1!==e&&e<=b?c.push(d):-1!==e&&(-1===a||e<a)&&(a=e),d=d.next}if(0<c.length)for(jg.didTimeout=!0,b=0,d=c.length;b<d;b++)kg(c[b],jg);dg=a}}for(a=Yf();0<gg-a&&null!==bg;)a=bg,jg.didTimeout=!1,kg(a,jg),a=Yf();null===bg||fg||(fg=!0,ag(mg))}},!1);var mg=function(a){fg=!1;var b=a-gg+ig;b<ig&&hg<ig?(8>b&&(b=8),ig=b<hg?hg:b):hg=b,gg=a+ig,eg||(eg=!0,window.postMessage(lg,"*"))};$f=function(a,b){var c=-1;return null!=b&&"number"==typeof b.timeout&&(c=Yf()+b.timeout),(-1===dg||-1!==c&&c<dg)&&(dg=c),a={scheduledCallback:a,timeoutTime:c,prev:null,next:null},null===bg?bg=a:null!==(b=a.prev=cg)&&(b.next=a),cg=a,fg||(fg=!0,ag(mg)),a},_f=function(a){if(null!==a.prev||bg===a){var b=a.next,c=a.prev;a.next=null,a.prev=null,null!==b?null!==c?(c.next=b,b.prev=c):(b.prev=null,bg=b):null!==c?(c.next=null,cg=c):cg=bg=null}}}else{var ng=new Map;$f=function(a,b){b={scheduledCallback:a,timeoutTime:0,next:null,prev:null};var c=Wf(function(){a({timeRemaining:function(){return 1/0},didTimeout:!1})});return ng.set(a,c),b},_f=function(a){var b=ng.get(a.scheduledCallback);ng.delete(a),Xf(b)}}var og=void 0,pg=function(a){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{for(og=og||document.createElement("div"),og.innerHTML="<svg>"+b+"</svg>",b=og.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),qg=function(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType)return void(c.nodeValue=b)}a.textContent=b},rg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sg=["Webkit","ms","Moz","O"];Object.keys(rg).forEach(function(a){sg.forEach(function(b){
b=b+a.charAt(0).toUpperCase()+a.substring(1),rg[b]=rg[a]})});var tg=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ug=Ld.thatReturns(""),vg={createElement:eb,createTextNode:fb,setInitialProperties:gb,diffProperties:hb,updateProperties:ib,diffHydratedProperties:jb,diffHydratedText:kb,warnForUnmatchedText:function(a,b){},warnForDeletedHydratableElement:function(a,b){},warnForDeletedHydratableText:function(a,b){},warnForInsertedHydratedElement:function(a,b,c){},warnForInsertedHydratedText:function(a,b){},restoreControlledState:function(a,c,d){switch(c){case"input":if(ja(a,d),c=d.name,"radio"===d.type&&null!=c){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<d.length;c++){var e=d[c];if(e!==a&&e.form===a.form){var f=q(e);f||b("90"),Z(e),ja(e,f)}}}break;case"textarea":Za(a,d);break;case"select":null!=(c=d.value)&&Va(a,!!d.multiple,c,!1)}}},wg=eb,xg=fb,yg=gb,zg=hb,Ag=ib,Bg=jb,Cg=kb,Dg=n,Eg=r,Fg=null,Gg=null,Hg=Yf,Ig=$f,Jg=_f;new Set;var Kg=[],Lg=-1,Mg=pb(Tf),Ng=pb(!1),Og=Tf,Pg=null,Qg=null,Rg=!1,Sg=pb(null),Tg=pb(null),Ug=pb(0),Vg={},Wg=pb(Vg),Xg=pb(Vg),Yg=pb(Vg),Zg={isMounted:function(a){return!!(a=a._reactInternalFiber)&&2===Aa(a)},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=Tc();d=Rc(d,a);var e=Ob(d);e.payload=b,void 0!==c&&null!==c&&(e.callback=c),Qb(a,e,d),Sc(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=Tc();d=Rc(d,a);var e=Ob(d);e.tag=1,e.payload=b,void 0!==c&&null!==c&&(e.callback=c),Qb(a,e,d),Sc(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=Tc();c=Rc(c,a);var d=Ob(c);d.tag=2,void 0!==b&&null!==b&&(d.callback=b),Qb(a,d,c),Sc(a,c)}},$g=Array.isArray,_g=ic(!0),ah=ic(!1),bh=null,ch=null,dh=!1,eh=void 0,fh=void 0,gh=void 0;eh=function(a){},fh=function(a,b,c,d,e,f,g,h){(b.updateQueue=c)&&yc(b)},gh=function(a,b,c,d){c!==d&&yc(b)};var hh=Hg(),ih=2,jh=hh,kh=0,lh=0,mh=!1,nh=null,oh=null,ph=0,qh=-1,rh=!1,sh=null,th=!1,uh=!1,vh=null,wh=null,xh=null,yh=0,zh=void 0,Ah=!1,Bh=null,Ch=0,Dh=0,Eh=!1,Fh=!1,Gh=null,Hh=null,Ih=!1,Jh=!1,Kh=!1,Lh=null,Mh=1e3,Nh=0,Oh=1,Ph={updateContainerAtExpirationTime:md,createContainer:function(a,b,c){return Hb(a,b,c)},updateContainer:od,flushRoot:ad,requestWork:Xc,computeUniqueAsyncExpiration:Qc,batchedUpdates:hd,unbatchedUpdates:id,deferredUpdates:Uc,syncUpdates:Vc,interactiveUpdates:kd,flushInteractiveUpdates:function(){Ah||0===Dh||(_c(Dh,!1,null),Dh=0)},flushControlled:ld,flushSync:jd,getPublicRootInstance:pd,findHostInstance:nd,findHostInstanceWithNoPortals:function(a){return a=Ea(a),null===a?null:a.stateNode},injectIntoDevTools:qd};Ce.injectFiberControlledHostComponent(vg),sd.prototype.render=function(a){this._defer||b("250"),this._hasChildren=!0,this._children=a;var c=this._root._internalRoot,d=this._expirationTime,e=new td;return md(a,c,null,d,e._onCommit),e},sd.prototype.then=function(a){if(this._didComplete)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]),b.push(a)}},sd.prototype.commit=function(){var a=this._root._internalRoot,c=a.firstBatch;if(this._defer&&null!==c||b("251"),this._hasChildren){var d=this._expirationTime;if(c!==this){this._hasChildren&&(d=this._expirationTime=c._expirationTime,this.render(this._children));for(var e=null,f=c;f!==this;)e=f,f=f._next;null===e&&b("251"),e._next=f._next,this._next=c,a.firstBatch=this}this._defer=!1,ad(a,d),c=this._next,this._next=null,c=a.firstBatch=c,null!==c&&c._hasChildren&&c.render(c._children)}else this._next=null,this._defer=!1},sd.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var a=this._callbacks;if(null!==a)for(var b=0;b<a.length;b++)(0,a[b])()}},td.prototype.then=function(a){if(this._didCommit)a();else{var b=this._callbacks;null===b&&(b=this._callbacks=[]),b.push(a)}},td.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var a=this._callbacks;if(null!==a)for(var c=0;c<a.length;c++){var d=a[c];"function"!=typeof d&&b("191",d),d()}}},ud.prototype.render=function(a,b){var c=this._internalRoot,d=new td;return b=void 0===b?null:b,null!==b&&d.then(b),od(a,c,null,d._onCommit),d},ud.prototype.unmount=function(a){var b=this._internalRoot,c=new td;return a=void 0===a?null:a,null!==a&&c.then(a),od(null,b,null,c._onCommit),c},ud.prototype.legacy_renderSubtreeIntoContainer=function(a,b,c){var d=this._internalRoot,e=new td;return c=void 0===c?null:c,null!==c&&e.then(c),od(b,d,a,e._onCommit),e},ud.prototype.createBatch=function(){var a=new sd(this),b=a._expirationTime,c=this._internalRoot,d=c.firstBatch;if(null===d)c.firstBatch=a,a._next=null;else{for(c=null;null!==d&&d._expirationTime<=b;)c=d,d=d._next;a._next=d,null!==c&&(c._next=a)}return a},function(a){Ee=a.batchedUpdates,Fe=a.interactiveUpdates,Ge=a.flushInteractiveUpdates}(Ph);var Qh={createPortal:yd,findDOMNode:function(a){return null==a?null:1===a.nodeType?a:nd(a)},hydrate:function(a,b,c){return xd(null,a,b,!0,c)},render:function(a,b,c){return xd(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,c,d,e){return(null==a||void 0===a._reactInternalFiber)&&b("38"),xd(a,c,d,!1,e)},unmountComponentAtNode:function(a){return vd(a)||b("40"),!!a._reactRootContainer&&(id(function(){xd(null,null,a,!1,function(){a._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return yd.apply(void 0,arguments)},unstable_batchedUpdates:hd,unstable_deferredUpdates:Uc,unstable_interactiveUpdates:kd,flushSync:jd,unstable_flushControlled:ld,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Ud,EventPluginRegistry:Jd,EventPropagators:Zd,ReactControlledComponent:De,ReactDOMComponentTree:Yd,ReactDOMEventListener:Gf},unstable_createRoot:function(a,b){return new ud(a,!0,null!=b&&!0===b.hydrate)}};qd({findFiberByHostInstance:o,bundleType:0,version:"16.4.1",rendererPackageName:"react-dom"});var Rh={default:Qh},Sh=Rh&&Qh||Rh;return Sh.default?Sh.default:Sh}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.PhotoEditorSDK=b():a.PhotoEditorSDK=b()}("undefined"!=typeof self?self:this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=157)}([function(a,b,c){a.exports={default:c(177),__esModule:!0}},function(a,b,c){a.exports={default:c(194),__esModule:!0}},function(a,b,c){a.exports={default:c(179),__esModule:!0}},function(a,b,c){a.exports={default:c(182),__esModule:!0}},function(a,b,c){a.exports=c(158).default},function(a,b,c){a.exports={default:c(216),__esModule:!0}},function(a,b,c){a.exports={default:c(202),__esModule:!0}},function(a,b,c){var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(271)),p=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this,a,p({intensity:{type:n.OptionType.NUMBER,default:1,setter:function(a){return this._stack&&this._stack.setIntensity(a),a}},dirty:{type:n.OptionType.BOOLEAN,default:!0}},c)));return d._stack=new o.a(d._options.intensity),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Configurable),q(b,[{key:"render",value:function(a,b,c){var d=this;return this._stack.render(a,b,c).then(function(a){return d.setDirty(!1),a})}},{key:"setDirtyForRenderer",value:function(a,b){this._stack.setDirtyForRenderer(a,b)}},{key:"disposeRenderTextures",value:function(){this._stack.disposeRenderTextures()}},{key:"dispose",value:function(){this._stack.dispose()}}]),b}();r.identifier=null,r.isIdentity=!1,r.displayName=null,r.PrimitivesStack=o.a,b.a=r},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(273);c.d(b,"Brightness",function(){return d.a});var e=c(275);c.d(b,"Contrast",function(){return e.a});var f=c(277);c.d(b,"ColorMatrixPrimitive",function(){return f.a});var g=c(279);c.d(b,"Desaturation",function(){return g.a});var h=c(281);c.d(b,"DuoTone",function(){return h.a});var i=c(283);c.d(b,"Gamma",function(){return i.a});var j=c(285);c.d(b,"Glow",function(){return j.a});var k=c(287);c.d(b,"Gobblin",function(){return k.a});var l=c(289);c.d(b,"Grayscale",function(){return l.a});var m=c(146);c.d(b,"LookupTable",function(){return m.a});var n=c(292);c.d(b,"LookupTableImage",function(){return n.a});var o=c(294);c.d(b,"Saturation",function(){return o.a});var p=c(296);c.d(b,"SoftColorOverlay",function(){return p.a});var q=c(298);c.d(b,"ToneCurve",function(){return q.a});var r=c(299);c.d(b,"X400",function(){return r.a});var s=c(301);c.d(b,"ThreeDLookupTableImage",function(){return s.a})},function(a,b,c){c.d(b,"a",function(){return m}),c.d(b,"j",function(){return n});var d=c(26),e=c(51),f=c(126),g=c(127),h=c(31),i=c(52),j=c(22),k=c(128),l=c(32);c.d(b,"b",function(){return e.a}),c.d(b,"g",function(){return f.a}),c.d(b,"k",function(){return h.a}),c.d(b,"h",function(){return g.a}),c.d(b,"d",function(){return i.a}),c.d(b,"f",function(){return d.a}),c.d(b,"i",function(){return j.a}),c.d(b,"c",function(){return l}),c.d(b,"e",function(){return k.a});var m=2e3,n=20},function(a,b){var c=a.exports={version:"2.5.3"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),m(b,[{key:"update",value:function(){}},{key:"getFilter",value:function(){return this._filter}},{key:"dispose",value:function(){this._filter&&(this._filter.dispose(),this._filter=null)}}]),b}();b.a=n},function(a,b,c){var d=c(85)("wks"),e=c(65),f=c(14).Symbol,g="function"==typeof f;(a.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))}).store=d},function(a,b,c){var d=c(14),e=c(10),f=c(37),g=c(27),h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=r.prototype,t=m?d:n?d[b]:(d[b]||{}).prototype;for(i in m&&(c=b),c)(j=!l&&t&&void 0!==t[i])&&i in r||(k=j?t[i]:c[i],r[i]=m&&"function"!=typeof t[i]?c[i]:p&&j?f(k,d):q&&t[i]==k?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b.prototype=a.prototype,b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r.virtual||(r.virtual={}))[i]=k,a&h.R&&s&&!s[i]&&g(s,i,k)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,a.exports=h},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b,c){a.exports={default:c(197),__esModule:!0}},function(a,b,c){c.d(b,"a",function(){return g});var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._seed=void 0===b?a.TimeSeed():b}return f(a,[{key:"seed",value:function(b){this._seed=void 0===b?a.TimeSeed():b}},{key:"next",value:function(){var b=0|this._seed,c=b/a.SEED_DIVIDER|0,d=b%a.SEED_DIVIDER|0;return(b=a.SEED_LOW_MULTIPLY*d-a.SEED_HIGH_MULTIPLY*c)<=0&&(b+=a.MAX),-1===b&&(b=a.MAX-1),this._seed=b,b}},{key:"nextInRange",value:function(a,b){return void 0===b&&(b=a,a=0),a+this.next()%(b-a+1)}},{key:"nextBool",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.nextInRange(a+b-1)>=a}},{key:"pickNext",value:function(a){return Array.isArray(a)?a[this.next()%a.length]:null}}],[{key:"TimeSeed",value:function(){return Date.now()}}]),a}();g.MAX=2147483647,g.SEED_DIVIDER=127773,g.SEED_LOW_MULTIPLY=16807,g.SEED_HIGH_MULTIPLY=2836},function(a,b,c){c.d(b,"a",function(){return l});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(4),i=(c.n(h),e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=h.Math.Rectangle,l=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.top=b,this.left=c,this.bottom=d,this.right=e}return j(a,[{key:"multiply",value:function(a){this.top*=a,this.left*=a,this.bottom*=a,this.right*=a}},{key:"toObject",value:function(){return i({},this)}},{key:"equals",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(a.top-this.top)<=b&&Math.abs(a.left-this.left)<=b&&Math.abs(a.bottom-this.bottom)<=b&&Math.abs(a.right-this.right)<=b}},{key:"scale",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b=arguments[1];return void 0===b&&(b=a),this.top*=b,this.bottom*=b,this.left*=a,this.right*=a,this}},{key:"clone",value:function(){return new a(this.top,this.left,this.bottom,this.right)}},{key:"applyToRectangle",value:function(a){return new k(a.x+this.left,a.y+this.top,a.width-this.left-this.right,a.height-this.top-this.bottom)}}],[{key:"ZERO",get:function(){return new a(0,0,0,0)}}]),a}()},function(a,b,c){var d=c(24);a.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},function(a,b,c){c.d(b,"a",function(){return u});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(60)),p=c(17),q=c(61),r=c(42),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),t(b,[{key:"_calculateLayoutElements",value:function(){var a=this.serializeOptions(),b=a.attributes,c=a.imageInsets,d=a.size,e=(a.width,this.getWords().joined(1)[0]||""),f=b.fontIdentifier,g=new q.a({text:e,fontIdentifier:f});g.fitWidth(this._getTextFrame().width);var h=g.getTextMetrics().height+c.top+c.bottom;d.height=h;var i=this._getTextFrame();return[new r.a({text:e,frame:i,font:g})]}}]),b}();u.prototype.availableOptions=s({},o.a.prototype.availableOptions,{imageInsets:{type:n.OptionType.OBJECT,default:new p.a}})},function(a,b,c){c.d(b,"a",function(){return t});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(30),k=c.n(j),l=c(365),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),r=void 0;r=window.Image;var s=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,p.Configurable),q(b,[{key:"loadImages",value:function(){var a,b=(a=m.a.mark(function a(b){var c,d,e;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=[],d=0;case 2:if(!(d<b.length)){a.next=10;break}return e=b[d],a.next=6,this.addImage(e.path,e.fullPath,e.image);case 6:c.push(e);case 7:d++,a.next=2;break;case 10:return a.abrupt("return",c);case 11:case"end":return a.stop()}},a,this)}),function(){var b=a.apply(this,arguments);return new k.a(function(a,c){return function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}if(!g.done)return k.a.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)});a(h)}("next")})});return function(a){return b.apply(this,arguments)}}()},{key:"addImage",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"anonymous",e=this.getImages();return c?(e[a]={fullPath:b,image:c},k.a.resolve({fullPath:b,image:c})):new k.a(function(f,g){(c=new r).onload=function(){e[a]={fullPath:b,image:c},f({fullPath:b,image:c})},c.crossOrigin=p.Utils.getCrossOriginValue(d),c.onerror=g,c.src=b})}},{key:"getImage",value:function(a){var b=this.getImages()[a];return b?b.image:null}},{key:"getVariation",value:function(a){return this.getFonts()[a]}},{key:"addFont",value:function(a,b){return this.getFonts()[a]=b,b}}]),b}();s.prototype.availableOptions={images:{type:p.OptionType.OBJECT,default:{}},fonts:{type:p.OptionType.OBJECT,default:{}}};var t=new s},function(a,b,c){var d=c(18),e=c(111),f=c(81),g=Object.defineProperty;b.f=c(25)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},function(a,b,c){(function(a){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return h()(a)}var e=c(6),f=c.n(e),g=c(15),h=c.n(g),i=c(36),j=c.n(i),k=c(40),l=c.n(k),m=c(0),n=c.n(m),o=c(30),p=c.n(o),q=c(70),r=c.n(q),s=c(1),t=c.n(s),u=c(50),v=c(207),w=f.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},x="function"==typeof l.a&&"symbol"==typeof j.a?function(a){return typeof a}:function(a){return a&&"function"==typeof l.a&&a.constructor===l.a&&a!==l.a.prototype?"symbol":typeof a},y=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),n()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),z=function(){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b)}return y(b,null,[{key:"isArray",value:function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{key:"isPlainObject",value:function(a){if("object"!==(void 0===a?"undefined":x(a))||!a)return!1;if("function"==typeof t.a){var b=t()(a);return b===Object.prototype||null===b}return"[object Object]"===Object.prototype.toString.call(a)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var a=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&void 0!==a}},{key:"values",value:function(a){var b=[];for(var c in a)b.push(a[c]);return b}},{key:"isDOMElement",value:function(a){return"object"===("undefined"==typeof HTMLElement?"undefined":x(HTMLElement))?a instanceof HTMLElement:a&&"object"===(void 0===a?"undefined":x(a))&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}},{key:"isTouchEvent",value:function(a){return-1!==a.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(a,b){var c=Math.min(b.x/a.x,b.y/a.y);return a.clone().multiply(c)}},{key:"resizeVectorToFill",value:function(a,b){var c=a.x/a.y;return c>b.x/b.y?b.clone().set(b.y*c,b.y):b.clone().set(b.x,b.x/c)}},{key:"isExtendable",value:function(a){return void 0!==a&&null!==a&&("object"===(void 0===a?"undefined":x(a))||"function"==typeof a)}},{key:"defaults",value:function(a){var b={};for(var c in a)b[c]=a[c];for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];for(var g=0;g<e.length;g++){var h=e[g];for(var i in h)void 0===b[i]&&(b[i]=h[i])}return b}},{key:"deepMerge",value:function(a){for(var c=arguments.length,e=Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];return e.reduce(function a(c,e){if(void 0===e)return a(null,c);if(Array.isArray(e))return[].concat(d(e));if(!b.isPlainObject(e))return e;if(!b.isPlainObject(c))return w({},e);var f=w({},c);return r()(e).forEach(function(b){var d=e[b];void 0!==d&&(f[b]=a(c[b],d))}),f},a)}},{key:"deepDefaults",value:function(a){for(var c=arguments.length,e=Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=[].concat(e).reverse();return b.deepMerge.apply(b,d(g).concat([a]))}},{key:"deepClone",value:function(a){var c={};for(var d in a)b.isExtendable(a[d])?c[d]=b.deepClone(a[d]):c[d]=a[d];return c}},{key:"getDeepProperty",value:function(a,b){return"string"==typeof b?a[b]:Array.isArray(b)?b.reduce(function(a,b){return a?"function"==typeof b?function(a,b){var c=void 0;try{c=b(a)}catch(a){if(!(a instanceof TypeError))throw a}return c}(a,b):a[b]:null},a):void 0}},{key:"extend",value:function(a){var b={};for(var c in a)b[c]=a[c];for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];for(var g=0;g<e.length;g++){var h=e[g];for(var i in h)b[i]=h[i]}return b}},{key:"clone",value:function(a){return this.extend({},a)}},{key:"createBlobURIFromDataURI",value:function(b){var c="undefined"==typeof window?a:window;if(!(c.Blob&&c.URL&&ArrayBuffer&&Uint8Array))return b;for(var d=u.a.decode(b.split(",")[1]),e=b.split(",")[0].split(":")[1].split(";")[0],f=new ArrayBuffer(d.length),g=new Uint8Array(f),h=0;h<d.length;h++)g[h]=d[h];var i=new c.Blob([f],{type:e});return c.URL.createObjectURL(i)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"convertHtmlImageToRGBACanvas",value:function(a){var c=b.createCanvas();return c.width=a.width,c.height=a.height,c.getContext("2d").drawImage(a,0,0,a.width,a.height),c}},{key:"isPowerOfTwo",value:function(a){return 0==(a.x&a.x-1)&&0==(a.y&a.y-1)}},{key:"nextLowestPOT",value:function(a){for(var b=1;b<32;b<<=1)a|=a>>b;return a-(a>>1)}},{key:"nextHighestPOT",value:function(a){a--;for(var b=1;b<32;b<<=1)a|=a>>b;return a+1}},{key:"moveArrayItem",value:function(a,b,c){if(c>=a.length)for(var d=c-a.length;1+d--;)a.push(void 0);a.splice(c,0,a.splice(b,1)[0])}},{key:"ensureCanvasDimensions",value:function(a,b){a.width===b.x&&a.height===b.y||(a.width=b.x,a.height=b.y)}},{key:"byteArrayToString",value:function(a){return a.map(function(a){return String.fromCharCode(a)}).join("")}},{key:"clamp",value:function(a,b,c){return Math.max(b,Math.min(a,c))}},{key:"wildCardMatch",value:function(a,b){return new RegExp("^"+b.split("*").join(".*")+"$").test(a)}},{key:"flipObject",value:function(a){var b={};for(var c in a)b[a[c]]=c;return b}},{key:"cloneOptions",value:function(a){var b={};for(var c in a){var d=a[c];Array.isArray(d)?d=d.slice():d.clone&&(d=d.clone()),b[c]=d}return b}},{key:"ISODateString",value:function(a){function b(a){return a<10?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"}},{key:"getCrossOriginValue",value:function(a){return a?"none"!==a?a:void 0:"anonymous"}},{key:"shallowEqual",value:function(a,b){if(a===b)return!0;if("object"!==(void 0===a?"undefined":x(a))||null===a||"object"!==(void 0===b?"undefined":x(b))||null===b)return!1;var c=r()(a),d=r()(b);if(c.length!==d.length)return!1;for(var e=hasOwnProperty.bind(b),f=0;f<c.length;f++)if(!e(c[f])||a[c[f]]!==b[c[f]])return!1;return!0}},{key:"enableIf",value:function(a,b){return a?b:void 0}},{key:"invariant",value:function(a,b){if(!a)throw new Error(b)}},{key:"executePromises",value:function(a){var b=a.length,c=0,d=[],e=[];return new p.a(function(f,g){var h=function(){++c>=b&&(e.length<=0?f(d):g(e))},i=function(a){d.push(a),h()},j=function(a){e.push(a),h()};a.forEach(function(a){a.then(i).catch(j)})})}}]),b}();z.Array=v.a,b.a=z}).call(b,c(49))},function(a,b,c){c.d(b,"a",function(){return i});var d=c(0),e=c.n(d),f=c(4),g=(c.n(f),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),h=f.Math.Rectangle,i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.width=b,this.height=c}return g(a,[{key:"set",value:function(a,b){this.width=a,this.height=b}},{key:"aspect",value:function(){return this.width/this.height}},{key:"rectangle",value:function(a,b){return new h(a,b,this.width,this.height)}},{key:"clone",value:function(){return new a(this.width,this.height)}},{key:"scale",value:function(a,b){return void 0===b&&(b=a),this.width*=a,this.height*=b,this}},{key:"copy",value:function(a){return this.width=a.width,this.height=a.height,this}},{key:"fitInWidthWithOther",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a;return this.copy(a.fitTwoInWidth(b,this,c)[0]),this}}],[{key:"fitTwoInWidth",value:function(b,c,d){var e=c.width*d.height+c.height*d.width,f=d.height*b/e,g=c.width*f,h=c.height*f;return[new a(g,h),new a(b-g,h)]}}]),a}()},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){a.exports=!c(38)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(a,b,c){(function(a){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return f()(a)}var e=c(15),f=c.n(e),g=c(0),h=c.n(g),i=c(200),j=c.n(i),k=c(22),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],n=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},o=new(function(){function b(){var a=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),this._levels=[].concat(d(e)),
this._maxLevel=this.getLevelIndexByName(c),this._consoleFuncs={trace:function(){var a,b;n()?((a=console).groupCollapsed.apply(a,arguments),console.trace(),console.groupEnd()):(b=console).trace.apply(b,arguments)}},this._levels.forEach(function(b){var c=b.name;a[c]=function(b){for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];a._log.apply(a,[c,b].concat(e))}})}return l(b,[{key:"getLevelIndexByName",value:function(a){return k.a.Array.findIndex(this._levels,function(b){return b.name===a})}},{key:"getLevelObjectByName",value:function(a){return k.a.Array.find(this._levels,function(b){return b.name===a})}},{key:"canLog",value:function(a){var b=this.getLevelIndexByName(a);return!(b<0)&&b>=this._maxLevel}},{key:"setLevel",value:function(a){var b=this.getLevelIndexByName(a);b<0||(this._maxLevel=b)}},{key:"_log",value:function(b,c){for(var e=arguments.length,f=Array(e>2?e-2:0),g=2;g<e;g++)f[g-2]=arguments[g];var h=this.getLevelObjectByName(b);if(h&&this.canLog(b)){h.name;var i,l=h.type,m=h.background,o=h.color,p=f.filter(function(a){return void 0!==a}).map(function(a){return a.toObject?JSON.parse(j()(a.toObject())):a}),q=this._consoleFuncs[l]||console[l]?function(){var a;return(a=console)[l].apply(a,arguments)}:function(){var a;return(a=console).log.apply(a,arguments)},r=p.length,s=function(a,b){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+a+"; color: "+b+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]}(m,o);if(!(!a||a&&a.browser)||"undefined"==typeof navigator||!navigator.userAgent.match(/Gecko|WebKit/i)||navigator.userAgent.match(/Trident/)){var t=p.length;return t<=0?void q("PhotoEditorSDK | "+c+" "):1===t&&"string"==typeof p[0]?void q("PhotoEditorSDK | "+c+" | "+p[0]):void q.apply(void 0,["PhotoEditorSDK | "+c+" | "].concat(d(p)))}r<=0?q.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+c+" %c %c  "].concat(d(s))):1!==r||"string"!=typeof p[0]?n()?((i=console).groupCollapsed.apply(i,["%c  %c PhotoEditorSDK %c  %c "+c+" %c"].concat(d(k.a.Array.init(s)))),q.apply(void 0,d(p)),console.groupEnd()):q.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+c+" %c"].concat(d(k.a.Array.init(s)),d(p))):q.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+c+" %c  "+p[0]+"  %c  "].concat(d(s)))}}},{key:"image",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments[1],c=new window.Image,d=function(){var b=c.width,d=c.height;a&&console.log(a),console.log("%c+","\n        font-size: 1px;\n        padding: 0px "+Math.floor(b/2)+"px;\n        line-height: "+d+"px;\n        background: url("+c.src+");\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: "+b+"px "+d+"px;")};return c.onload=d,b instanceof window.HTMLCanvasElement?c.src=b.toDataURL():b instanceof window.Image?(c=b,d()):"string"==typeof b?c.src=b:this.log(a,b),c}},{key:"texture",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments[1];if(b){var c=b.getBaseTexture(),d=c.getRenderers(),e=k.a.Array.find(d,function(a){return a&&"WebGL"===a.constructor.type}),f=c.getFrame(),g=f.width,h=f.height;if(e){var i=e.getContext(),j=c.getGLTextureForRenderer(e);this.logGlTexture(i,j,g,h,a)}else o.image(a,c.getSource())}else this.log(a,"texture: null or undefined")}},{key:"logGlTexture",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,e=arguments[4];a.bindTexture(a.TEXTURE_2D,b);var f=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,f),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,b,0);var g=new Uint8Array(c*d*4);a.readPixels(0,0,c,d,a.RGBA,a.UNSIGNED_BYTE,g),a.deleteFramebuffer(f);var h=document.createElement("canvas");h.width=c,h.height=d;var i=h.getContext("2d"),j=i.createImageData(c,d);return j.data.set(g),i.putImageData(j,0,0),o.image(e,h)}}]),b}())("warn");b.a=o}).call(b,c(125))},function(a,b,c){var d=c(21),e=c(45);a.exports=c(25)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},function(a,b){var c={}.hasOwnProperty;a.exports=function(a,b){return c.call(a,b)}},function(a,b,c){var d=c(114),e=c(79);a.exports=function(a){return d(e(a))}},function(a,b,c){a.exports={default:c(184),__esModule:!0}},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=b,this.y=c,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0)}return f(a,[{key:"set",value:function(a,b){return this.x=a,this.y=b,this}},{key:"clone",value:function(){return new a(this.x,this.y)}},{key:"copy",value:function(a){return this.x=a.x,this.y=a.y,this}},{key:"clamp",value:function(b,c){var d=null!==b&&void 0!==b,e=null!==c&&void 0!==c;return b instanceof a||!d||(b=new a(b,b)),c instanceof a||!e||(c=new a(c,c)),d&&(this.x=Math.max(b.x,this.x),this.y=Math.max(b.y,this.y)),e&&(this.x=Math.min(c.x,this.x),this.y=Math.min(c.y,this.y)),this}},{key:"divide",value:function(b,c){return b instanceof a?(this.x/=b.x,this.y/=b.y):(this.x/=b,this.y/=void 0===c?b:c),this}},{key:"subtract",value:function(b,c){return b instanceof a?(this.x-=b.x,this.y-=b.y):(this.x-=b,this.y-=void 0===c?b:c),this}},{key:"multiply",value:function(b,c){return b instanceof a?(this.x*=b.x,this.y*=b.y):(this.x*=b,this.y*=void 0===c?b:c),this}},{key:"add",value:function(b,c){return b instanceof a?(this.x+=b.x,this.y+=b.y):(this.x+=b,this.y+=void 0===c?b:c),this}},{key:"dot",value:function(b,c){return b instanceof a?this.x*b.x+this.y*b.y:this.x*b+this.y*(void 0===c?b:c)}},{key:"equals",value:function(b,c){return b instanceof a?b.x===this.x&&b.y===this.y:b===this.x&&c===this.y}},{key:"flip",value:function(){var a=this.x;return this.x=this.y,this.y=a,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"min",value:function(){return Math.min(this.x,this.y)}},{key:"max",value:function(){return Math.max(this.x,this.y)}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}},{key:"toString",value:function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"}},{key:"roundDecimal",value:function(a){return this.x=parseFloat(this.x.toFixed(a)),this.y=parseFloat(this.y.toFixed(a)),this}}],[{key:"fromObject",value:function(b){return new a(b.x,b.y)}},{key:"NULL",get:function(){return new a(0,0)}}]),a}();b.a=g},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0}),c.d(b,"RenderType",function(){return d}),c.d(b,"ImageFormat",function(){return e}),c.d(b,"OptionType",function(){return f}),c.d(b,"UniformType",function(){return g}),c.d(b,"RendererType",function(){return h});var d={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},e={PNG:"image/png",JPEG:"image/jpeg"},f={NUMBER:"number",VECTOR2:"vector2",COLOR_MATRIX:"color-matrix",COLOR:"color",ARRAY:"array",OBJECT:"object",STRING:"string",BOOLEAN:"boolean",CONFIGURABLE:"configurable",IMAGE:"image",FUNCTION:"function",TEXTURE:"texture",ALL:"*"},g={SAMPLER2D:"sampler2d",INT:"i",INT1:"1i",FLOAT:"f",FLOAT1:"1f",FLOAT2:"2f",FLOAT_VECTOR2:"2fv",FLOAT3:"3f",FLOAT4:"4f",MAT3:"mat3",MAT3FV:"mat3fv",MAT4:"mat4"},h={WEBGL:"webgl",CANVAS:"canvas"}},function(a,b,c){(function(a){var d=c(36),e=c.n(d),f=c(40),g=c.n(f),h=c(30),i=c.n(h),j=c(0),k=c.n(j),l=c(227),m=c.n(l),n="function"==typeof g.a&&"symbol"==typeof e.a?function(a){return typeof a}:function(a){return a&&"function"==typeof g.a&&a.constructor===g.a&&a!==g.a.prototype?"symbol":typeof a},o=void 0===a?window:a,p=void 0!==i.a?i.a:function(){function a(a,b){l.add(a,b),j||(j=p(l.drain))}function b(a){var b,c=void 0===a?"undefined":n(a);return null==a||"object"!=c&&"function"!=c||(b=a.then),"function"==typeof b&&b}function c(){for(var a=0;a<this.chain.length;a++)d(this,1===this.state?this.chain[a].success:this.chain[a].failure,this.chain[a]);this.chain.length=0}function d(a,c,d){var e,f;try{!1===c?d.reject(a.msg):(e=!0===c?a.msg:c.call(void 0,a.msg))===d.promise?d.reject(TypeError("Promise-chain cycle")):(f=b(e))?f.call(e,d.resolve,d.reject):d.resolve(e)}catch(a){d.reject(a)}}function e(b){var d=this;d.triggered||(d.triggered=!0,d.def&&(d=d.def),d.msg=b,d.state=2,d.chain.length>0&&a(c,d))}function f(a,b,c,d){for(var e=0;e<b.length;e++)!function(e){a.resolve(b[e]).then(function(a){c(e,a)},d)}(e)}function g(a){this.def=a,this.triggered=!1}function h(d){if("function"!=typeof d)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var f=new function(a){this.promise=a,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(b,d){var e={success:"function"!=typeof b||b,failure:"function"==typeof d&&d};return e.promise=new this.constructor(function(a,b){if("function"!=typeof a||"function"!=typeof b)throw TypeError("Not a function");e.resolve=a,e.reject=b}),f.chain.push(e),0!==f.state&&a(c,f),e.promise},this.catch=function(a){return this.then(void 0,a)};try{d.call(void 0,function(d){(function d(f){var h,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(h=b(f))?a(function(){var a=new g(i);try{h.call(f,function(){d.apply(a,arguments)},function(){e.apply(a,arguments)})}catch(b){e.call(a,b)}}):(i.msg=f,i.state=1,i.chain.length>0&&a(c,i))}catch(d){e.call(new g(i),d)}}}).call(f,d)},function(a){e.call(f,a)})}catch(d){e.call(f,d)}}var i,j,l,o=Object.prototype.toString,p=void 0!==m.a?function(a){return m()(a)}:setTimeout;try{Object.defineProperty({},"x",{}),i=function(a,b,c,d){return k()(a,b,{value:c,writable:!0,configurable:!1!==d})}}catch(j){i=function(a,b,c){return a[b]=c,a}}l={add:function(a,b){s=new function(a,b){this.fn=a,this.self=b,this.next=void 0}(a,b),r?r.next=s:q=s,r=s,s=void 0},drain:function(){var a=q;for(q=r=j=void 0;a;)a.fn.call(a.self),a=a.next}};var q,r,s,t=i({},"constructor",h,!1);return h.prototype=t,i(t,"__NPO__",0,!1),i(h,"resolve",function(a){return a&&"object"==(void 0===a?"undefined":n(a))&&1===a.__NPO__?a:new this(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");b(a)})}),i(h,"reject",function(a){return new this(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");c(a)})}),i(h,"all",function(a){var b=this;return"[object Array]"!=o.call(a)?b.reject(TypeError("Not an array")):0===a.length?b.resolve([]):new b(function(c,d){if("function"!=typeof c||"function"!=typeof d)throw TypeError("Not a function");var e=a.length,g=Array(e),h=0;f(b,a,function(a,b){g[a]=b,++h===e&&c(g)},d)})}),i(h,"race",function(a){var b=this;return"[object Array]"!=o.call(a)?b.reject(TypeError("Not an array")):new b(function(c,d){if("function"!=typeof c||"function"!=typeof d)throw TypeError("Not a function");f(b,a,function(a,b){c(b)},d)})}),h}();o.Promise=o.Promise||p,b.a=p}).call(b,c(49))},function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return f()(a)}c.d(b,"a",function(){return k});var e=c(15),f=c.n(e),g=c(0),h=c.n(g),i=c(4),j=(c.n(i),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),k=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.words=[],b&&this.splitIntoWords(b)}return j(a,[{key:"splitIntoWords",value:function(a){return this.words=a.match(/\S+/g)||[],[].concat(d(this.words))}},{key:"get",value:function(){return[].concat(d(this.words))}},{key:"getWord",value:function(a){return this.words[a]}},{key:"set",value:function(a){return this.words=[].concat(d(a)),this}},{key:"slice",value:function(b,c){return a.fromWords(this.words.slice(b,c))}},{key:"getLowerCase",value:function(){return this.words.map(function(a){return a.toLowerCase()})}},{key:"getUpperCase",value:function(){return this.words.map(function(a){return a.toUpperCase()})}},{key:"size",value:function(){return this.words.length}},{key:"countNumberOfCharacters",value:function(){return this.words.reduce(function(a,b){return a+b.length},0)}},{key:"joined",value:function(a){var b=this,c=this.size(),d=Math.floor(c/a),e=c%a,f=0,g=0;return i.Utils.Array.range(0,a).map(function(a){f=g;var h=d+(a<e?1:0);return g=Math.min(f+h,c),i.Utils.Array.range(f,g).reduce(function(a,c){return a+(c===f?"":" ")+b.words[c]},"")})}}],[{key:"fromWords",value:function(b){var c=new a;return c.words=[].concat(d(b)),c}}]),a}()},function(a,b,c){c.d(b,"c",function(){return m}),c.d(b,"e",function(){return n}),c.d(b,"d",function(){return o}),c.d(b,"b",function(){return q}),c.d(b,"a",function(){return r});var d=c(71),e=c.n(d),f=c(72),g=c.n(f),h=c(4),i=(c.n(h),function(){return function(a,b){if(Array.isArray(a))return a;if(e()(Object(a)))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var h,i=g()(a);!(d=(h=i.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),j=h.Math.Rectangle,k=h.Math.Vector2,l=function(a,b,c,d){a.drawImage(b,c.x,c.y,c.width,c.height,d.x,d.y,d.width,d.height)},m=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over",e=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a.save(),a.fillStyle=c.toRGBA(),a.globalCompositeOperation=d,a.fillRect(b.x,b.y,b.width,b.height),e&&(a.strokeStyle=c.toRGBA(),a.strokeWith=1,a.strokeRect(b.x,b.y,b.width,b.height)),a.restore()},n=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;a.save(),a.strokeStyle=c.toRGBA(),a.lineWidth=d,a.strokeRect(b.x,b.y,b.width,b.height),a.restore()},o=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"source-over";a.save();var e=b.height/2,f=b.y+e,g=b.x+e,h=b.x+b.width;for(a.fillStyle=c.toRGBA(),a.globalCompositeOperation=d;g<h;)a.beginPath(),a.arc(g,f,e,0,2*Math.PI),a.fill(),g+=4*e;a.restore()},p=function(a,b){var c=b.applyToRectangle(a),d=a.x,e=a.y,f=a.width,g=a.height;return{corners:[j.FromDiagonalPoints(new k(0,0),new k(c.x,c.y)),j.FromDiagonalPoints(new k(0,c.y+c.height),new k(c.x,g)),j.FromDiagonalPoints(new k(c.x+c.width,c.y+c.height),new k(f,g)),j.FromDiagonalPoints(new k(c.x+c.width,0),new k(f,c.y))].map(function(a){return a.translate(d,e)}),bars:[j.FromDiagonalPoints(new k(c.x,0),new k(c.x+c.width,c.y)),j.FromDiagonalPoints(new k(0,c.y),new k(c.x,c.y+c.height)),j.FromDiagonalPoints(new k(c.x,c.y+c.height),new k(c.x+c.width,g)),j.FromDiagonalPoints(new k(c.x+c.width,c.y),new k(f,c.y+c.height))].map(function(a){return a.translate(d,e)}),center:c}},q=function(a,b,c,d){var e=b.naturalWidth||b.width,f=b.naturalHeight||b.height,g=p(new j(0,0,e,f),d),k=p(c,d);l(a,b,g.center,k.center),h.Utils.Array.zip(g.corners,k.corners).forEach(function(c){var d=i(c,2),e=d[0],f=d[1];return l(a,b,e,f)}),h.Utils.Array.zip(g.bars,k.bars).forEach(function(c){var d=i(c,2),e=d[0],f=d[1];return l(a,b,e,f)})},r=function(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"source-atop";if(a.save(),d&&(a.globalAlpha=d.a),a.drawImage(b,c.x,c.y,c.width,c.height),d&&(a.globalAlpha=1),d){var f=d.clone();f.a=1,m(a,c,f,e)}a.restore()}},function(a,b,c){a.exports={default:c(160),__esModule:!0}},function(a,b,c){var d=c(64);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){try{return!!a()}catch(a){return!0}}},function(a,b){a.exports={}},function(a,b,c){a.exports={default:c(169),__esModule:!0}},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(69),e=c(32),f=c(50),g=c(52),h=c(239),i=c(22),j=c(55),k=c(51),l=c(26),m=c(33),n=c(128),o=c(240),p=c(250);c.d(b,"requestAnimationFrame",function(){return p.b}),c.d(b,"cancelAnimationFrame",function(){return p.a}),c.d(b,"Engine",function(){return d.a}),c.d(b,"EventEmitter",function(){return g.a}),c.d(b,"Events",function(){return h.a}),c.d(b,"Utils",function(){return i.a}),c.d(b,"Configurable",function(){return j.a}),c.d(b,"Color",function(){return k.a}),c.d(b,"Constants",function(){return e}),c.d(b,"Log",function(){return l.a}),c.d(b,"Promise",function(){return m.a}),c.d(b,"GLUtils",function(){return n.a}),c.d(b,"Base64",function(){return f.a}),c.d(b,"LicenseChecker",function(){return o.b}),c.d(b,"FreeLicenseChecker",function(){return o.a});var q=c(138);c.d(b,"Vector2",function(){return q.Vector2}),c.d(b,"Vector3",function(){return q.Vector3}),c.d(b,"Rectangle",function(){return q.Rectangle}),c.d(b,"Matrix",function(){return q.Matrix}),c.d(b,"ColorMatrix",function(){return q.ColorMatrix}),c.d(b,"CubicBezierCurve",function(){return q.CubicBezierCurve})},function(a,b,c){c.d(b,"a",function(){return k});var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(4);c.n(j);var k=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.Configurable),b}();k.prototype.availableOptions={text:{type:j.OptionType.STRING,default:""},frame:{type:j.OptionType.OBJECT,default:null},font:{type:j.OptionType.OBJECT,default:null}}},function(a,b,c){c.d(b,"a",function(){return z});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(59)),r=c(34),s=c(62),t=c(107),u=c(20),v=c(16),w=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},z=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f._rowType=s.a.Box,f._alignmentRandomizer=new v.a(0),f._isMaskedRandomizer=new v.a(0),f._seedPool.push(f._alignmentRandomizer),f._seedPool.push(f._isMaskedRandomizer),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),x(b,[{key:"getImagePaths",value:function(){return[s.a.Box.getImagePath()]}},{key:"_modifiedText",value:function(a){return y(b.prototype.__proto__||o()(b.prototype),"_modifiedText",this).call(this,a).toLowerCase()}},{key:"_modifiedLines",value:function(a){var b=new r.a;return b.set([a.reduce(function(a,b){return a+(""===a?"":"\n")+b.joined(1)[0]},"")]),[b]}},{key:"_layoutRows",value:function(a,c){var d=y(b.prototype.__proto__||o()(b.prototype),"_layoutRows",this).call(this,a,c),e=d[0];if(e&&this.getSquareLayout()){var f=e.getSize();f.height=f.width}return d}},{key:"getAlignment",value:function(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||b.ValidAlignments)}},{key:"_randomLayoutRow",value:function(a,b,c,d){var e=this.getAlignment(),f=this._rowType,g=u.a.getImage(f.getImagePath());d.setAlignment(e);var h=new t.a({words:a,width:c,attributes:d,image:g,imageInsets:f.insetsForWidth(c),capInsets:f.getCapInsets(),backgroundColor:p.Color.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===s.a.Box&&(h.serverImageSmoothingFix=!0);var i=h.getSize();return this.getSquareLayout()?i.height=i.width:i.height=Math.max(i.height,i.width*f.getMinimumHeightRatio()),h}}]),b}();z.defaultFontIdentifiers=["imgly_font_galano_grotesque_bold"],z.Alignment={Left:"left",Center:"center",Right:"right"},z.ValidAlignments=[z.Alignment.Left,z.Alignment.Center,z.Alignment.Right],z.identifier="imgly_text_design_masked",z.prototype.availableOptions=w({},q.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:z.defaultFontIdentifiers},squareLayout:{type:p.OptionType.BOOLEAN,default:!0}})},function(a,b,c){var d=c(161)(!0);c(110)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},function(a,b){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(a,b,c){var d=c(113),e=c(86);a.exports=Object.keys||function(a){return d(a,e)}},function(a,b){var c={}.toString;a.exports=function(a){return c.call(a).slice(8,-1)}},function(a,b,c){var d=c(79);a.exports=function(a){return Object(d(a))}},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e={encode:function(a){var b="",c=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=0;do{g=(c=a[k++])>>2,h=(3&c)<<4|(e=a[k++])>>4,i=(15&e)<<2|(f=a[k++])>>6,j=63&f,isNaN(e)?i=j=64:isNaN(f)&&(j=64),b=b+d.charAt(g)+d.charAt(h)+d.charAt(i)+d.charAt(j),c=e=f="",g=h=i=j=""}while(k<a.length);return b},decode:function(a){var b=void 0,c=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=0,j=[];if(/[^A-Za-z0-9+\/=]/g.exec(a))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");a=a.replace(/[^A-Za-z0-9+\/=]/g,"");do{b=d.indexOf(a.charAt(i++))<<2|(f=d.indexOf(a.charAt(i++)))>>4,c=(15&f)<<4|(g=d.indexOf(a.charAt(i++)))>>2,e=(3&g)<<6|(h=d.indexOf(a.charAt(i++))),j.push(b),64!==g&&j.push(c),64!==h&&j.push(e),b=c=e="",f=g=h=""}while(i<a.length);return j}};b.a=e},function(a,b,c){var d=c(71),e=c.n(d),f=c(72),g=c.n(f),h=c(0),i=c.n(h),j=function(){return function(a,b){if(Array.isArray(a))return a;if(e()(Object(a)))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var h,i=g()(a);!(d=(h=i.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),i()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(){function a(b,c,d){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.r=b,this.g=c,this.b=d,this.a=e}return k(a,[{key:"toRGBA",value:function(){return"rgba("+[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")+")"}},{key:"set",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.a;return this.r=a,this.g=b,this.b=c,this.a=d,this}},{key:"toRGB",value:function(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}},{key:"toHex",value:function(){return"#"+[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}},{key:"toGLColor",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray",value:function(){return this.toGLColor()}},{key:"toRGBGLColor",value:function(){return[this.r,this.g,this.b]}},{key:"toHSV",value:function(){var a,b=Math.max(this.r,this.g,this.b),c=Math.min(this.r,this.g,this.b),d=void 0,e=b,f=b-c;if(a=0===b?0:f/b,b===c)d=0;else{switch(b){case this.r:d=(this.g-this.b)/f,this.g<this.b&&(d+=6);break;case this.g:d=(this.b-this.r)/f+2;break;case this.b:d=(this.r-this.g)/f+4}d/=6}return[d,a,e]}},{key:"fromHSV",value:function(b,c,d){return this.copy(a.fromHSV(b,c,d)),this}},{key:"clone",value:function(){return new a(this.r,this.g,this.b,this.a)}},{key:"add",value:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this.a+=a.a,this}},{key:"minus",value:function(a){return this.r-=a.r,this.g-=a.g,this.b-=a.b,this.a-=a.a,this}},{key:"multiplyScalar",value:function(a){return this.r*=a,this.g*=a,this.b*=a,this.a*=a,this}},{key:"divideScalar",value:function(a){return this.r/=a,this.g/=a,this.b/=a,this.a/=a,this}},{key:"clamp",value:function(a,b){return this.r=Math.min(Math.max(this.r,a),b),this.g=Math.min(Math.max(this.g,a),b),this.b=Math.min(Math.max(this.b,a),b),this.a=Math.min(Math.max(this.a,a),b),this}},{key:"mix",value:function(a,b){return this.r=(1-b)*this.r+b*a.r,this.g=(1-b)*this.g+b*a.g,this.b=(1-b)*this.b+b*a.b,this.a=(1-b)*this.a+b*a.a,this}},{key:"copy",value:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this}},{key:"equals",value:function(a){return this.r===a.r&&this.g===a.g&&this.b===a.b&&this.a===a.a}},{key:"_componentToHex",value:function(a){var b=a.toString(16);return 1===b.length?"0"+b:b}},{key:"toString",value:function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"}}],[{key:"fromHSV",value:function(b,c,d){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,f=[],g=f[0],h=f[1],i=f[2],j=Math.floor(6*b),k=6*b-j,l=d*(1-c),m=d*(1-k*c),n=d*(1-(1-k)*c);switch(j%6){case 0:g=d,h=n,i=l;break;case 1:g=m,h=d,i=l;break;case 2:g=l,h=d,i=n;break;case 3:g=l,h=m,i=d;break;case 4:g=n,h=l,i=d;break;case 5:g=d,h=l,i=m}return new a(g,h,i,e)}},{key:"fromArray",value:function(b){return new a(b[0],b[1],b[2],b[3])}},{key:"fromHex",value:function(b){var c=b.match(/[0-9A-fa-f]{1,2}/g),d=j(c,3),e=d[0],f=d[1],g=d[2];return new a(parseInt(e,16)/255,parseInt(f,16)/255,parseInt(g,16)/255,1)}},{key:"TRANSPARENT",get:function(){return new a(0,0,0,0)}},{key:"WHITE",get:function(){return new a(1,1,1,1)}},{key:"BLACK",get:function(){return new a(0,0,0,1)}},{key:"RED",get:function(){return new a(1,0,0,1)}},{key:"BLUE",get:function(){return new a(0,0,1,1)}},{key:"GREEN",get:function(){return new a(0,1,0,1)}}]),a}();b.a=l},function(a,b,c){var d=c(0),e=c.n(d),f=c(26),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=12,i=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._maxListeners=h,this._events={},this._pipeDestinations=[]}return g(a,[{key:"pipeEvents",value:function(a){this._pipeDestinations.push(a)}},{key:"unpipeEvents",value:function(a){var b=this._pipeDestinations.indexOf(a);-1!==b&&this._pipeDestinations.splice(b,1)}},{key:"on",value:function(a,b){if(void 0===a)throw new Error("Invalid event type: `"+a+"`");if("function"!=typeof b)throw new TypeError;var c=this._events[a]||(this._events[a]=[]);return-1!==c.indexOf(b)?this:(c.push(b),this._maxListeners&&c.length>this._maxListeners&&(f.a.warn("EventEmitter","Possible memory leak detected, added "+c.length+" `"+a+"` listeners (current limit is "+this._maxListeners+")"),"undefined"!=typeof console&&console.trace()),this)}},{key:"once",value:function(a,b){if(void 0===a)throw new Error("Invalid event type: `"+a+"`");var c=this;return this.on(a,function d(){c.off(a,d),b.apply(null,arguments)})}},{key:"off",value:function(a){if(void 0===a)throw new Error("Invalid event type: `"+a+"`");if(0==(arguments.length<=1?0:arguments.length-1))return this._events[a]=null,this;var b=arguments.length<=1?void 0:arguments[1];if("function"!=typeof b)throw new TypeError;var c=this._events[a];if(!c||!c.length)return this;var d=c.indexOf(b);return-1===d?this:(c.splice(d,1),this)}},{key:"emit",value:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(void 0===a)throw new Error("Invalid event type: `"+a+"`");this._pipeDestinations.forEach(function(b){b.emit.apply(b,[a].concat(c))});var e=this._events[a];return!(!e||!e.length||(e.slice(0).forEach(function(a){return a.apply(null,c)}),0))}},{key:"setMaxListeners",value:function(a){if(parseInt(a,10)!==a)throw new TypeError;this._maxListeners=a}}]),a}();b.a=i},function(a,b,c){var d=c(15),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(9),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this));return c.id=b.id++,c._onSourceLoaded=c._onSourceLoaded.bind(c),c._renderers=[],c._glTextures={},c._source=a,c._dirty=!0,c._glUnit=0,c._mipMapping=!1,c._magFilter=b.DefaultMagFilter,c._minFilter=b.DefaultMinFilter,c._repeatX=b.ClampToEdge,c._repeatY=b.ClampToEdge,c._pixelRatio=1,c._loaded=!1,c._frame=new n.h(0,0,100,100),a&&c._loadSource(),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.d),o(b,[{key:"resizeTo",value:function(a){this._frame.width===a.x&&this._frame.height===a.y||(this._frame.width=a.x,this._frame.height=a.y,this._dirty=!0)}},{key:"_loadSource",value:function(){var a=this._source,b=a.complete,c="Canvas"===a.constructor.name||a.tagName&&"CANVAS"===a.tagName.toUpperCase();if(b||c)return this._onSourceLoaded();a.addEventListener("load",this._onSourceLoaded)}},{key:"_onSourceLoaded",value:function(){
this._loaded=!0,this.emit("loaded"),this.update()}},{key:"_updateGLFilters",value:function(){var a=new n.k(this._source.width,this._source.height);n.i.isPowerOfTwo(a)?(n.f.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=b.TrilinearFilter,this._mipMapping=!0):(this._minFilter=b.LinearFilter,this._mipMapping=!1)}},{key:"update",value:function(){this._frame.width===this._source.width&&this._frame.height===this._source.height||(this._frame=new n.h(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update")}},{key:"getRenderers",value:function(){return[].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return e()(a)}(this._renderers))}},{key:"getGLFilter",value:function(a,b){switch(b){case"min":return this.constructor.getGLFilter(a,this._minFilter);case"mag":return this.constructor.getGLFilter(a,this._magFilter)}}},{key:"isLoaded",value:function(){return this._loaded}},{key:"setLoaded",value:function(a){this._loaded=a}},{key:"getSource",value:function(){return this._source}},{key:"setSource",value:function(a){this._source=a}},{key:"getGLTextureForRenderer",value:function(a){return this._glTextures[a.id]}},{key:"setGLTextureForRenderer",value:function(a,b){this._renderers[b.id]=b,this._glTextures[b.id]=a}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(a){this._frame=a}},{key:"getDimensions",value:function(){return new n.k(this._frame.width,this._frame.height)}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(a){this._pixelRatio=a}},{key:"getGLUnit",value:function(){return this._glUnit}},{key:"setGLUnit",value:function(a){this._glUnit=a}},{key:"setMinFilter",value:function(a){this._minFilter=a}},{key:"getMinFilter",value:function(){return this._minFilter}},{key:"setMagFilter",value:function(a){this._magFilter=a}},{key:"getMagFilter",value:function(){return this._magFilter}},{key:"setRepeatX",value:function(a){this._repeatX=a}},{key:"getRepeatX",value:function(){return this._repeatX}},{key:"setRepeatY",value:function(a){this._repeatY=a}},{key:"getRepeatY",value:function(){return this._repeatY}},{key:"getGLRepeat",value:function(a,c){switch("x"===c?this.getRepeatX():this.getRepeatY()){case b.ClampToEdge:return a.CLAMP_TO_EDGE;case b.Repeat:return a.REPEAT;case b.MirroredRepeat:return a.MIRRORED_REPEAT}}},{key:"isDirty",value:function(){return this._dirty}},{key:"setDirty",value:function(a){this._dirty=a}},{key:"disposeGLTextures",value:function(){var a=this;this._renderers.forEach(function(b){a.disposeGLTexturesForRenderer(b)})}},{key:"disposeGLTexturesForRenderer",value:function(a){this._glTextures[a.id]&&(a.getContext().deleteTexture(this._glTextures[a.id]),delete this._glTextures[a.id],this._renderers[a.id]||delete this._renderers[a.id])}},{key:"isMipMappingEnabled",value:function(){return this._mipMapping}},{key:"setMipMappingEnabled",value:function(a){this._mipMapping=a}},{key:"dispose",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.disposeGLTextures()}}],[{key:"getGLFilter",value:function(a,c){switch(c){case b.LinearFilter:return a.LINEAR;case b.NearestFilter:return a.NEAREST;case b.BilinearFilter:return a.LINEAR_MIPMAP_NEAREST;case b.TrilinearFilter:return a.LINEAR_MIPMAP_LINEAR}}}]),b}();p.NearestFilter=0,p.LinearFilter=1,p.BilinearFilter=2,p.TrilinearFilter=3,p.DefaultMagFilter=p.NearestFilter,p.DefaultMinFilter=p.LinearFilter,p.ClampToEdge=0,p.Repeat=1,p.MirroredRepeat=2,p.id=0,b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(9),o=c(55),p=c(98),q=c(97),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},t=n.c.OptionType,u=n.c.UniformType,v=n.c.RendererType,w=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),r(b,[{key:"_initOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._shaders=[],this._availableUniforms=q.a.defaultUniforms,this._attributes=q.a.defaultAttributes,this._vertexSource=q.a.defaultVertexSource,this._fragmentSource=q.a.defaultFragmentSource,this._initUniforms(),s(b.prototype.__proto__||m()(b.prototype),"_initOptions",this).call(this,a)}},{key:"_initUniforms",value:function(){for(var a in this._uniforms={},this._availableUniforms){var b=this._availableUniforms[a];this._uniforms[a]={type:b.type,value:b.default||null}}for(var c in this.availableOptions){var d=this.availableOptions[c];d.uniformType?this._uniforms["u_"+c]={type:d.uniformType,value:d.default||null}:n.f.trace(this.constructor.name,"Option `"+c+"` is missing a `uniformType`!")}}},{key:"setOption",value:function(a,c){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s(b.prototype.__proto__||m()(b.prototype),"setOption",this).call(this,a,c,d);var e=c,f=this.availableOptions[a];if(f.uniformType){var g="u_"+a;switch(f.type){case t.COLOR:f.uniformType===u.FLOAT4?e=c.toGLColor():f.uniformType===u.FLOAT3&&(e=c.toRGBGLColor());break;case t.VECTOR2:e=[c.x,c.y];break;case t.COLOR_MATRIX:e=[c.a,c.b,c.c,c.d,c.f,c.g,c.h,c.i,c.k,c.l,c.m,c.n,c.p,c.q,c.r,c.s];var h=[c.e,c.j,c.o,c.t];this._uniforms[g+"_vec"]={value:h,type:u.FLOAT4}}this.setUniform(g,e)}}},{key:"setUniform",value:function(a,b){arguments.length>2&&void 0!==arguments[2]&&arguments[2],this._uniforms[a].value=b}},{key:"setUniforms",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var c in a)this._uniforms[c].value=a[c],b&&this.syncUniform(c)}},{key:"syncUniform",value:function(a){this._shaders.forEach(function(b){b.syncUniform(a)})}},{key:"syncUniforms",value:function(){this._shaders.forEach(function(a){a.syncUniforms()})}},{key:"getShaderForRenderer",value:function(a){var b=a.getContext(),c=this._shaders[b.id];return c||(c=new p.a(a,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[b.id]=c),c}},{key:"apply",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a.isOfType(v.WEBGL)?this._applyWebGL(a,b,c,d):a.isOfType(v.CANVAS)&&this._applyCanvas(a,b,c,d)}},{key:"_applyWebGL",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=a.getContext(),f=this.getShaderForRenderer(a);a.setRenderTarget(c),d&&c.clear(),a.setShader(f);var g=a.getCurrentRenderTarget().getProjectionMatrix().toArray();f.setUniform("u_projMatrix",g),f.syncUniforms(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,b.getTexture()),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}},{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=b.getCanvas(),e=c.getContext();n.f.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),e.clearRect(0,0,d.width,d.height),e.drawImage(d,0,0)}},{key:"dispose",value:function(){this._shaders.forEach(function(a){return a.dispose()}),this._shaders=[]}}]),b}();b.a=w},function(a,b,c){var d=c(36),e=c.n(d),f=c(40),g=c.n(f),h=c(6),i=c.n(h),j=c(0),k=c.n(j),l=c(2),m=c.n(l),n=c(3),o=c.n(n),p=c(70),q=c.n(p),r=c(1),s=c.n(r),t=c(33),u=c(26),v=c(52),w=c(31),x=c(51),y=c(22),z=c(75),A=c(136),B=c(32),C="function"==typeof g.a&&"symbol"==typeof e.a?function(a){return typeof a}:function(a){return a&&"function"==typeof g.a&&a.constructor===g.a&&a!==g.a.prototype?"symbol":typeof a},D=i.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},E=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),k()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),F=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||s()(b)).call(this));return d.availableOptions=d.availableOptions||{},d.availableOptions=y.a.extend(d.availableOptions,c),d._onConfigurableUpdate=d._onConfigurableUpdate.bind(d),d._initOptions(a),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=o()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(m.a?m()(a,b):a.__proto__=b)}(b,v.a),E(b,[{key:"_buildConfigError",value:function(a){var b="";return this.constructor.name&&(b=this.constructor.name+": "),b+=a,new Error(b)}},{key:"_onOptionsChange",value:function(){}},{key:"validateSettings",value:function(){var a=this;return new t.a(function(b,c){for(var d in a.availableOptions)if(a.availableOptions[d].required&&void 0===a._options[d])return c(a._buildConfigError("Option `"+d+"` is required."));b()})}},{key:"_initOptions",value:function(){var a,c,d,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options={};var f=this;for(a in this.availableOptions){if(d=a.charAt(0).toUpperCase()+a.slice(1),c=this.availableOptions[a],-1===[B.OptionType.STRING,B.OptionType.NUMBER,B.OptionType.BOOLEAN,B.OptionType.OBJECT,B.OptionType.VECTOR2,B.OptionType.COLOR,B.OptionType.CONFIGURABLE,B.OptionType.COLOR_MATRIX,B.OptionType.ARRAY,B.OptionType.IMAGE,B.OptionType.FUNCTION,B.OptionType.ALL].indexOf(c.type))throw this._buildConfigError("Unknown option type: `"+c.type+"`");if(function(a,b){f["set"+d]=function(b,c,d){f.setOption(a,b,c,d)},f["get"+d]=function(){return f.getOption(a)}}(a),c.type===B.OptionType.CONFIGURABLE&&(this._options[a]=new b(void 0,c.structure||{}),this._options[a].on("update",this._onConfigurableUpdate)),!(a in e)||void 0===e[a])if(void 0!==c.default){var g=c.default;"function"==typeof c.default&&(g=c.default()),this["set"+d](g,!1,!0)}else c.type!==B.OptionType.CONFIGURABLE&&(this._options[a]=void 0)}for(a in e){if(void 0===this.availableOptions[a])throw new Error("Invalid option: "+a);void 0!==e[a]&&this["set"+(d=a.charAt(0).toUpperCase()+a.slice(1))](e[a],!1,!0)}}},{key:"set",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var c in a)this.setOption(c,a[c],!1);this._onOptionsChange(),b&&this.emit("update",this,a)}},{key:"getOption",value:function(a){return this._options[a]}},{key:"hasOption",value:function(a){return!!this.availableOptions[a]}},{key:"getOptionDefault",value:function(a){var b=this.availableOptions[a];if(!b)throw new Error("Invalid option: "+a);return b.default}},{key:"resetOptions",value:function(){this.set(this.getDefaultOptions())}},{key:"getDefaultOptions",value:function(){var a={};for(var b in this.availableOptions){var c=this.availableOptions[b].default;void 0!==c&&(a[b]=c)}return a}},{key:"getOptions",value:function(){return D({},this._options)}},{key:"equals",value:function(a){var b=a.getOptions();return this.optionsEqual(b)}},{key:"optionsEqual",value:function(a){for(var b in a){var c=a[b];if(!this._optionEquals(b,c))return!1}return!0}},{key:"_optionEquals",value:function(a,b){if(void 0===this.availableOptions[a])throw new Error("Invalid option: "+a);var c=this.availableOptions[a].type,d=this._options[a];if(d===b)return!0;if(void 0===b||void 0===d)return!1;switch(c){case B.OptionType.OBJECT:return"function"==typeof d.optionsEqual?d.optionsEqual(b._options):d===b;case B.OptionType.STRING:case B.OptionType.NUMBER:case B.OptionType.BOOLEAN:case B.OptionType.FUNCTION:case"*":return d===b;case B.OptionType.VECTOR2:return d.equals(b);case B.OptionType.COLOR:case B.OptionType.COLOR_MATRIX:return b.equals(d);case B.OptionType.CONFIGURABLE:return d.optionsEqual(b);case B.OptionType.ARRAY:return this._arrayOptionEquals(a,b);case B.OptionType.IMAGE:return d.src===b.src}}},{key:"_arrayOptionEquals",value:function(a,c){var d=this._options[a];if(c.length!==d.length)return!1;for(var e=!0,f=0;f<d.length;f++){var g=d[f],h=c[f];if(g instanceof b){if(void 0===h||!g.optionsEqual(h)){e=!1;break}}else if(h!==g){e=!1;break}}return e}},{key:"serializeOptions",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q()(this._options),c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d={};return b.forEach(function(b){if(void 0===a.availableOptions[b])return u.a.warn("Trying to serialize a key that does not exist: "+b);!1!==a.availableOptions[b].serializable&&(d[b]=a.serializeOption(b,c))}),d}},{key:"serializeOption",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=this.availableOptions[a],d=c.type,e=this._options[a];if(!e)return e;if(!1===c.serializable)throw new Error("Option `"+a+"` is not serializable.");switch(d){case B.OptionType.STRING:case B.OptionType.NUMBER:case B.OptionType.BOOLEAN:case B.OptionType.OBJECT:case B.OptionType.FUNCTION:case B.OptionType.ALL:return e;case B.OptionType.VECTOR2:return b?e.toObject():e.clone();case B.OptionType.COLOR:case B.OptionType.COLOR_MATRIX:return b?e.toArray():e.clone();case B.OptionType.CONFIGURABLE:return e.serializeOptions(void 0,b);case B.OptionType.ARRAY:return e.slice(0);case B.OptionType.IMAGE:return b?e.src:e}}},{key:"setOption",value:function(a,c){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=this.availableOptions[a];if(!f)throw new Error("Invalid option: "+a);if(void 0!==f.setter&&(c=f.setter.call(this,c,e)),void 0!==f.validation&&f.validation(c),null===c||void 0===c){if(f.required)throw this._buildConfigError("Option `"+a+"` is required.");this._options[a]=c}else switch(f.type){case B.OptionType.STRING:if((void 0===c?"undefined":C(c))!==B.OptionType.STRING)throw this._buildConfigError("Option `"+a+"` has to be a string.");var g=f.available;if(void 0!==g&&-1===g.indexOf(c))throw this._buildConfigError("Invalid value for `"+a+"` (valid values are: "+f.available.join(", ")+")");this._options[a]=c;break;case B.OptionType.NUMBER:if((void 0===c?"undefined":C(c))!==B.OptionType.NUMBER)throw this._buildConfigError("Option `"+a+"` has to be a number.");this._options[a]=c;break;case B.OptionType.BOOLEAN:if((void 0===c?"undefined":C(c))!==B.OptionType.BOOLEAN)throw this._buildConfigError("Option `"+a+"` has to be a boolean.");this._options[a]=c;break;case B.OptionType.VECTOR2:if(!(c instanceof w.a||"object"===(void 0===c?"undefined":C(c))&&"x"in c&&"y"in c))throw this._buildConfigError("Option `"+a+"` has to be an instance of Vector2 or an Object holding x and y values.");c instanceof w.a?this._options[a]=c.clone():this._options[a]=w.a.fromObject(c);break;case B.OptionType.COLOR:if(!(c instanceof x.a))throw this._buildConfigError("Option `"+a+"` has to be an instance of Color.");this._options[a]=c;break;case B.OptionType.COLOR_MATRIX:if(!(c instanceof A.a))throw this._buildConfigError("Option `"+a+"` has to be an instance of ColorMatrix.");this._options[a]=c.clone();break;case B.OptionType.FUNCTION:if("function"!=typeof c)throw this._buildConfigError("Option `"+a+"` has to be a function.");this._options[a]=c;break;case B.OptionType.OBJECT:case"*":this._options[a]=c;break;case B.OptionType.IMAGE:if("string"==typeof c){var h=new z.a;h.crossOrigin=y.a.getCrossOriginValue(f.crossOrigin),h.src=c,this._options[a]=h}else{if(!(c instanceof z.a||"undefined"!=typeof HTMLImageElement&&c instanceof HTMLImageElement))throw this._buildConfigError("Option `"+a+"` has to be an Image or String.");this._options[a]=c}break;case B.OptionType.CONFIGURABLE:c instanceof b?this._options[a]=c:this._options[a].set(c);break;case B.OptionType.ARRAY:if(!(c instanceof Array))throw this._buildConfigError("Option `"+a+"` has to be an Array.");this._options[a]=c.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+f.type+"`")}d&&(this._onOptionsChange(),this.emit("update",this,function(a,b,c){return b in a?k()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}({},a,c)))}},{key:"_onConfigurableUpdate",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.emit.apply(this,["update"].concat(b))}},{key:"hasChanges",value:function(){var a=this.getDefaultOptions();return!this.optionsEqual(a)}}]),b}();b.a=F},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(76)),n=c.n(m),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=l.Math.Vector2,q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(e)));return g._fragmentSource=c(269),g._lastBlurRadius=null,g._lastDimensions=new p(0,0),g._blurredRenderTarget=new l.Engine.CanvasRenderTarget(100,100,1),g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Engine.Filter),o(b,[{key:"_applyCanvas",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("low"!==this._options.blurQuality){var f=b.getCanvas(),g=b.getContext(),h=c.getContext();this._lastBlurRadius===this._options.blurRadius&&h.drawImage(f,0,0);for(var i=g.getImageData(0,0,f.width,f.height),j=h.getImageData(0,0,f.width,f.height),k=this._options.blurRadius,l=this._options.delta,m=0;m<f.width;m++)for(var n=0;n<f.height;n++){var o=4*(m+n*f.width),q=0,r=0,s=0,t=0,u=0;e&&(k=e(m/f.width,n/f.height));for(var v=this._random(m,1-n/f.height),w=-30;w<=30;w++){var x=(w+v-.5)/30,y=1-Math.abs(x),z=l.x*x*k,A=l.y*x*k,B=Math.max(Math.min(m+z,f.width-1),0),C=Math.max(Math.min(n+A,f.height-1),0),D=4*(Math.round(C)*f.width+Math.round(B)),E=i.data[D+3];q+=E*i.data[D]*y,r+=E*i.data[D+1]*y,s+=E*i.data[D+2]*y,t+=E*y,u+=y}q/=u,r/=u,s/=u,t/=u,j.data[o]=q/t,j.data[o+1]=r/t,j.data[o+2]=s/t,j.data[o+3]=t}h.putImageData(j,0,0),this._lastDimensions.copy(new p(f.width,f.height))}else this._renderLQBlur(a,b,c,d)}},{key:"_renderLQBlur",value:function(a,b,c,d){var e=b.getDimensions(),f=!this._lastDimensions.equals(e);this._blurredRenderTarget.setPixelRatio(b.getPixelRatio()),this._blurredRenderTarget.resizeTo(b.getDimensions()),c.setPixelRatio(b.getPixelRatio()),c.resizeTo(b.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||f)&&(this._blurImage(b),this._lastBlurRadius=this._options.blurRadius),c.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(e)}},{key:"_blurImage",value:function(a){var b=a.getCanvas(),c=a.getContext(),d=new p(b.width,b.height),e=c.getImageData(0,0,b.width,b.height);n.a.stackBlurCanvasRGBA(e,0,0,b.width,b.height,this._options.blurRadius*d.min()),this._blurredRenderTarget.getContext().putImageData(e,0,0)}},{key:"_random",value:function(a,b){var c=12.9898*a+78.233*b,d=c-3.14*Math.floor(c/3.14),e=43758.5453*Math.sin(d);return e-Math.floor(e)}}]),b}();q.prototype.availableOptions={blurRadius:{type:l.OptionType.NUMBER,default:30,uniformType:l.UniformType.FLOAT},delta:{type:l.OptionType.VECTOR2,default:new p(1,1),uniformType:l.UniformType.FLOAT2},texSize:{type:l.OptionType.VECTOR2,default:new p(100,100),uniformType:l.UniformType.FLOAT2}},b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),p=n.Math.Vector2,q=function(a){function b(a,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this,c));return d._operation=a,d._dirtiness={},d.id=n.Utils.getUUID(),d._renderTextures={},d._identitySprite=new n.Engine.Sprite,d._sprite=new n.Engine.Sprite,d._dummyImage={addEventListener:function(){},removeEventListener:function(){}},d._hitTestSprite=new n.Engine.Sprite,d._renderers=[],d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Configurable),o(b,[{key:"applyScale",value:function(a){}},{key:"applyRotation",value:function(a){var b=this._operation.getInputDimensions(),c=180*this.getRotation()/Math.PI;c+=a,this.setRotation(c*Math.PI/180);var d=(a+360)%360*Math.PI/180,e=Math.cos(d),f=Math.sin(d),g=this._options.position.clone().subtract(.5).multiply(b),h=new p(g.x*e-g.y*f,g.x*f+g.y*e).divide(b.clone().flip());this.setPosition(new p(.5,.5).add(h))}},{key:"applyFlip",value:function(a){var b=this.getPosition().clone();switch(a){case"horizontal":b.x=1-this._options.position.x;break;case"vertical":b.y=1-this._options.position.y}this.setPosition(b)}},{key:"applyTransform",value:function(a){var b={};b.rotation=a.applyToRotation(this.getRotation()),b.position=a.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(b.dimensions=a.applyToDimensions(this.getDimensions())),this.set(b,!1)}},{key:"getDisplayObject",value:function(){return this._sprite}},{key:"getHitTestDisplayObject",value:function(){return this._sprite}},{key:"_getTexture",value:function(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}},{key:"_prepareRenderTexture",value:function(a){if(this._renderTexture)this._renderTexture.clear();else{var b=this._getTexture();this._renderTextureContainer=new n.Engine.Container,this._renderTextureSprite=new n.Engine.Sprite(b),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(a.getRenderer(),b.getDimensions())}}},{key:"_rendersToRenderTexture",value:function(a){return a.getOptions().smoothDownscaling&&a.getRenderer().isOfType(n.RendererType.WEBGL)}},{key:"_optionEquals",value:function(a,c){return"type"===a||function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"_optionEquals",this).call(this,a,c)}},{key:"update",value:function(a,b){this._rendersToRenderTexture(a)&&(this._prepareRenderTexture(a),this._renderToRenderTexture(a)),this._updateSprite(b)}},{key:"_updateSprite",value:function(a){var b=this;[this._sprite,this._hitTestSprite].forEach(function(c){if(c.getTexture()){c.setAnchor(b._options.anchor),c.setPosition(b._options.position.clone().multiply(a)),void 0!==b._options.alpha&&c.setAlpha(b._options.alpha);var d=b._options.dimensions;d&&(d=d.clone().multiply(b._operation.getSDK().getTextureScale()),c.setWidth(d.x),c.setHeight(d.y)),c.updateTransform();var e=c.getTexture().getFrame(),f=new p(e.width,e.height);c.setPivot(b._options.pivot.clone().multiply(f)),c.setRotation(b._options.rotation),c.updateTransform()}})}},{key:"_renderToRenderTexture",value:function(a){var b=this._getTexture().getDimensions(),c=this._getRenderTexture(a.getRenderer(),b),d=b.clone();if(this._options.smoothDownscaling&&(d.x=n.Utils.nextHighestPOT(d.x),d.y=n.Utils.nextHighestPOT(d.y)),this._renderTexture.resizeTo(d),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){var e=d.clone().subtract(b.x,b.y).divide(d),f=c.getUVs().getUVs();f[0].x=f[3].x=0,f[1].x=f[2].x=1-e.x,f[0].y=f[1].y=0,f[2].y=f[3].y=1-e.y}this._sprite.setTexture(c)}},{key:"isDirtyForRenderer",value:function(a){return a.id in this._dirtiness||(this._dirtiness[a.id]=!0),this._dirtiness[a.id]}},{key:"setDirtyForRenderer",value:function(a,b){this._renderers[b.id]=b,this._dirtiness[b.id]=a}},{key:"setDirty",value:function(a){for(var b in this._dirtiness)this.setDirtyForRenderer(a,this._renderers[b])}},{key:"_getRenderTexture",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new p(100,100);return this._renderTextures[a.id]||(this._renderTextures[a.id]=new n.Engine.RenderTexture(a,b.x,b.y,1)),this._renderTextures[a.id]}},{key:"dispose",value:function(){for(var a in this._renderTextures)this._renderTextures[a].dispose()}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canBeDeleted",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}},{key:"canBeTakenToFront",value:function(){return!0}},{key:"canBeFlippedHorizontally",value:function(){return!0}}]),b}();b.a=q},function(a,b,c){c.d(b,"a",function(){return D});var d=c(6),e=c.n(d),f=c(15),g=c.n(f),h=c(0),i=c.n(h),j=c(5),k=c.n(j),l=c(2),m=c.n(l),n=c(3),o=c.n(n),p=c(1),q=c.n(p),r=c(4),s=(c.n(r),c(59)),t=c(368),u=c(104),v=c(19),w=c(105),x=c(77),y=c(20),z=c(16),A=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},B=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),i()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),C=function a(b,c,d){null===b&&(b=Function.prototype);var e=k()(b,c);if(void 0===e){var f=q()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},D=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||q()(b)).call.apply(a,[this].concat(d)));return f.getImagePaths=function(){var a=f.getBanderoles();return a&&a.map(function(a){return a.getImagePath()})||[]},f.onImagesLoaded=function(){var a=f.getBanderoles();a&&a.forEach(function(a){var b=y.a.getImage(a.getImagePath());b?a.setImage(b):r.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '"+a.getImagePath()+"'")})},f._rowTypeLessThan3WordsRandomizer=new z.a(0),f._rowTypeMoreThan3WordsRandomizer=new z.a(0),f._banderolesRandomizer=new z.a(0),f._seedPool=[].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return g()(a)}(f._seedPool),[f._rowTypeLessThan3WordsRandomizer,f._rowTypeMoreThan3WordsRandomizer,f._banderolesRandomizer]),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=o()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(m.a?m()(a,b):a.__proto__=b)}(b,s.a),B(b,[{key:"_modifiedText",value:function(a){return C(b.prototype.__proto__||q()(b.prototype),"_modifiedText",this).call(this,a).toUpperCase()}},{key:"generateLayoutData",value:function(a,c){return this._options.hasMaskedText=!1,C(b.prototype.__proto__||q()(b.prototype),"generateLayoutData",this).call(this,a,c)}},{key:"_randomLayoutRow",value:function(a,b,c,d){if(a.size()<3){var e=0===this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2);return this._layoutRow(a,c,d,e)}var f=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(f){case 0:return new t.a({words:a,width:c,attributes:d,orientation:t.a.Orientations.Left});case 1:return new t.a({words:a,width:c,attributes:d,orientation:t.a.Orientations.Right});case 2:return this._layoutRow(a,c,d,!0);case 3:return new v.a({words:a,width:c,attributes:d});default:throw new Error("TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: "+f+".")}}},{key:"_layoutRow",value:function(a,b,c,d){if(this.getHasMaskedText()&&(d=!1),d){this.setHasMaskedText(!0);var e=this._banderolesRandomizer.pickNext(this.getBanderoles()),f=new w.a({words:a,width:b,attributes:new x.a({alignment:"left",fontIdentifier:e.getFontIdentifier()}),image:e.getImage(),imageInsets:e.insetsForWidth(b),capInsets:null,backgroundColor:r.Color.WHITE});return e.getNeedsImageSmoothingFix()&&(f.serverImageSmoothingFix=!0),f}return new v.a({words:a,width:b,attributes:c})}}]),b}();D.defaultFontIdentifiers=["imgly_font_campton_bold"],D.identifier="imgly_text_design_blocks",D.defaultBanderoles=[u.a.Rectangle,u.a.Small],D.prototype.availableOptions=A({},s.a.prototype.availableOptions,{fontIdentifiers:{type:r.OptionType.ARRAY,default:D.defaultFontIdentifiers},relativeLineSpacing:{type:r.OptionType.NUMBER,default:.025/3},hasMaskedText:{type:r.OptionType.BOOLEAN,default:!1},banderoles:{type:r.OptionType.ARRAY,default:D.defaultBanderoles}})},function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return f()(a)}c.d(b,"a",function(){return y});var e=c(15),f=c.n(e),g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(361),n=c.n(m),o=c(1),p=c.n(o),q=c(4),r=(c.n(q),c(16)),s=c(17),t=c(34),u=c(364),v=c(77),w=c(19),x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||p()(b)).call(this,a));return c._relativeInsets=new s.a,c._background=null,c._fontRandomizer=new r.a(0),c._lineNumberRandomizer=new r.a(0),c._wordsPerLineRandomizer=new r.a(0),c._seedPool=[c._fontRandomizer,c._lineNumberRandomizer,c._wordsPerLineRandomizer],c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}(b,q.Configurable),x(b,[{key:"seed",value:function(a){this._seedPool.forEach(function(b){return b.seed(a)})}},{key:"getImagePaths",value:function(){return[]}},{key:"onImagesLoaded",value:function(){}},{key:"getMaximumNumberOfTries",value:function(){return 10}},{key:"getMinLineCountOfRandom",value:function(){return 4}},{key:"getRandomAdditionalLinePercentage",value:function(){return.4}},{key:"_fontForRow",value:function(a,b){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}},{key:"_modifiedText",value:function(a){return a.replace("\n"," ").replace("\t"," ")}},{key:"_minimumNumberOfLines",value:function(a){return Math.ceil(Math.sqrt(a.size()))}},{key:"_maximumNumberOfLines",value:function(a){return a.size()}},{key:"_calculatedNumberOfLines",value:function(a){var b=this._minimumNumberOfLines(a);if(a.size()>=this.getMinLineCountOfRandom()){var c=Math.floor(Math.max(1,b*this.getRandomAdditionalLinePercentage()));b+=this._lineNumberRandomizer.nextInRange(0,c)}return Math.min(b,this._maximumNumberOfLines(a))}},{key:"_randomizedNumberOfWordsPerLine",value:function(a,b){var c=this;if(a>b)return q.Log.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),b;var d=q.Utils.Array.repeat(1,a);return q.Utils.Array.range(a,b).forEach(function(b){var e=c._wordsPerLineRandomizer.nextInRange(0,a-1);d[e]+=1}),d}},{key:"_textLines",value:function(a){var b=new t.a(a),c=this._calculatedNumberOfLines(b);return this._randomizedNumberOfWordsPerLine(c,b.size()).reduce(function(a,c){return{index:a.index+c,lines:[].concat(d(a.lines),[b.slice(a.index,Math.min(a.index+c,b.size()))])}},{index:0,lines:[]}).lines}},{key:"_validTextLines",value:function(a){var b=this._textLines(a),c=0;do{if((c=q.Utils.Array.findIndex(b,function(a){return a.countNumberOfCharacters()<3}))>=0){var e=b[c-1],f=b[c+1];(e?e.countNumberOfCharacters():n.a)<(f?f.countNumberOfCharacters():n.a)&&e?(e.words=[].concat(d(e.words),d(b[c].words)),b=[].concat(d(b.slice(0,c)),d(b.slice(c+1)))):f&&(f.words=[].concat(d(b[c].words),d(f.words)),b=[].concat(d(b.slice(0,c)),d(b.slice(c+1))))}}while(c>-1&&b.length>1);return b}},{key:"_modifiedLines",value:function(a){return a}},{key:"_getBackground",value:function(){return this._background}},{key:"generateLayoutData",value:function(a,b){var c=this._modifiedText(a),d=this._modifiedLines(this._validTextLines(c)),e=b*(1-this._relativeInsets.left-this._relativeInsets.right),f=this._layoutRows(d,e);return new u.a({text:c,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:d,rows:f,width:b})}},{key:"_layoutRows",value:function(a,b){var c=this;return a.map(function(a,d){return c._randomLayoutRow(a,d,b,new v.a({fontIdentifier:c._fontForRow(d,a)})).layout()})}},{key:"_randomLayoutRow",value:function(a,b,c,d){return new w.a({words:a,width:c,attributes:d})}}]),b}();y.defaultFontIdentifiers=[],y.identifier="text-design",y.prototype.availableOptions={fontIdentifiers:{type:q.OptionType.ARRAY,default:[]},relativeLineSpacing:{type:q.OptionType.NUMBER,default:0}}},function(a,b,c){c.d(b,"a",function(){return q});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(23)),n=c(77),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=l.Math.Rectangle,q=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this,a));return c.setSize(new m.a(c.getWidth(),0)),c.serverImageSmoothingFix=!1,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),o(b,[{key:"_getFrame",value:function(){var a=this.getSize();return new p(0,0,a.width,a.height)}},{key:"_getTextFrame",value:function(){return this._getFrame()}},{key:"_getTextFrameForElement",value:function(a){return a.getFrame().clone()}},{key:"_calculateLayoutElements",value:function(){l.Log.warn("TextDesignRow is an abstract class.")}},{key:"_getLayoutElements",value:function(){return this._options.elements.length<=0&&this.layout(),this.getElements()}},{key:"_fontSize",value:function(a){return l.Log.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}},{key:"layout",value:function(){return this.setElements(this._calculateLayoutElements()),this}},{key:"textFrame",value:function(a,b){return a.getFrame().clone()}},{key:"willRender",value:function(a){}},{key:"didRender",value:function(a){}},{key:"render",value:function(a){var b=this;a.save(),this._getLayoutElements().forEach(function(c){var d=c.serializeOptions(),e=(d.text,d.frame),f=d.font,g=b.getAttributes();f.draw(a,e.x,e.y,{textColor:g.getTextColor().toRGBA(),alignment:g.getAlignment()})}),a.restore()}}]),b}();q.prototype.availableOptions={words:{type:l.OptionType.OBJECT,default:null},width:{type:l.OptionType.NUMBER,default:100},attributes:{type:l.OptionType.CONFIGURABLE,default:new n.a},shearingAngle:{type:l.OptionType.NUMBER,default:0},elements:{type:l.OptionType.ARRAY,default:[]},size:{type:l.OptionType.OBJECT,default:null}}},function(a,b,c){c.d(b,"a",function(){return u});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(23)),r=c(20),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).call(this,a)),d=r.a.getVariation(c.getFontIdentifier());return d||p.Log.warn("TextDesignFont: Unable to find font '"+c._fontIdentifier+"'"),c.set({fontVariation:d}),c._metrics=null,c._canvas=p.Utils.createCanvas(),c._context=c._canvas.getContext("2d"),c._isDirty=!0,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,p.Configurable),t(b,[{key:"_onOptionsChange",value:function(){this._isDirty=!0}},{key:"setOption",value:function(a,c){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||o()(b.prototype),"setOption",this).call(this,a,c,d,e),"fontIdentifier"!==a||e||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var a=r.a.getVariation(this.getFontIdentifier());return a||p.Log.warn("TextDesignFont: Unable to find font '"+this._fontIdentifier+"'"),this.setFontVariation(a),a}},{key:"setOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=s({},this._options,a),this._isDirty=!0}},{key:"_applyTextOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=s({},this._options,b),d=c.fontSize,e=c.fontVariation,f=c.lineHeight,g=c.textColor,h=c.alignment,i=e.serializeOptions(),j=i.fontStyle,k=i.fontWeight,l=i.fontFamily;a.font=j+" "+k+" "+d+"px/"+f+" "+l,a.fillStyle=g,a.textBaseline="alphabetic",a.textAlign=h||"left"}},{key:"getTextMetrics",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),s({},this._metrics)}},{key:"getSizeValue",value:function(){return this._metrics&&!this._isDirty||this._calculateTextMetrics(),new q.a(this._metrics.width,this._metrics.height)}},{key:"fitWidth",value:function(a){if(this.getFontVariation()){this._applyTextOptions(this._context,{fontSize:50});var b=a/this._context.measureText(this.getText()).width,c=Math.floor(50*b);return this.setFontSize(c),this._calculateTextMetrics(),this.getTextMetrics()}p.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"fitHeight",value:function(a){if(this.getFontVariation()){var b=a/this._calculateTextMetrics({fontSize:50}).height,c=Math.floor(50*b);return this.setFontSize(c),this._calculateTextMetrics(),this.getTextMetrics()}p.Log.warn("TextDesignFont#fitText: missing font variation")}},{key:"_calculateTextMetrics",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=this._canvas,c=this._context,d=s({},this._options,a),e=this.getText();this._applyTextOptions(c,d);var f=Math.ceil(c.measureText(e).width),g=Math.floor(f+2*d.fontSize),h=Math.floor(3*d.fontSize);b.width=g,b.height=h;var i=Math.floor(d.fontSize),j=Math.floor(.6*h);this._applyTextOptions(c,d),c.fillText(e,i,j);var k=c.getImageData(0,0,b.width,b.height).data,l=z(k,g,h,j,this._options.excludeAccents),m=y(k,g,h,j,this._options.excludeAccents),n=f,o=l+m;return this._metrics={width:n,height:o,ascender:l,descender:m},this._isDirty=!1,s({},this._metrics)}},{key:"draw",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._context,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments[3],e=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a.save(),this._metrics&&!this._isDirty||this._calculateTextMetrics(),this._applyTextOptions(a,d),a.fillText(this.getText(),b,c+this._metrics.ascender),e&&(B(a,b,c,this._metrics.width,this._metrics.height),A(a,c+this._metrics.ascender,b,b+this._metrics.width)),a.restore()}}]),b}(),v=function(a,b,c,d){var e=c*(4*d)+4*b;return{r:a[e],g:a[e+1],b:a[e+2],a:a[e+3]}},w=function(a){return a.a<=254},x=function(a,b,c){for(var d=!0,e=0;e<c;e++){var f=v(a,e,b,c);if(!w(f)){d=!1;break}}return d},y=function(a,b,c,d){for(var e=arguments.length>4&&void 0!==arguments[4]&&arguments[4],f=0,g=d+1;g<c;g++)if(x(a,g,b)){if(e)break}else f=g-d+1;return f},z=function(a,b,c,d){for(var e=arguments.length>4&&void 0!==arguments[4]&&arguments[4],f=0,g=d-1;g>=0;g--)if(x(a,g,b)){if(e)break}else f=d-g;return f},A=function(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"red";a.save(),a.strokeStyle=e,function(a,b,c,d,e){a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke()}(a,c,b,d,b),a.restore()},B=function(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"blue";a.save(),a.strokeStyle=f,a.strokeRect(b,c,d,e),a.restore()};u.prototype.availableOptions={text:{type:p.OptionType.STRING,default:""},fontIdentifier:{type:p.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:p.OptionType.OBJECT,default:null},lineHeight:{type:p.OptionType.NUMBER,default:1},fontSize:{type:p.OptionType.NUMBER,default:22},textColor:{type:p.OptionType.STRING,default:"black"},strokeStyle:{type:p.OptionType.STRING,default:"black"},outlineWidth:{type:p.OptionType.NUMBER,default:0},textBaseline:{type:p.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:p.OptionType.BOOLEAN,default:!1}}},function(a,b,c){c.d(b,"a",function(){return o});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(17)),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),n(b,[{key:"insetsForWidth",value:function(a){return this.getRelativeInsets().clone().scale(a)}}]),b}();o.prototype.availableOptions={imagePath:{type:l.OptionType.STRING,default:""},minimumHeightRatio:{type:l.OptionType.NUMBER,default:0},sizeToFitContent:{type:l.OptionType.BOOLEAN,default:!0},capInsets:{type:l.OptionType.OBJECT,default:new m.a},relativeInsets:{type:l.OptionType.OBJECT,default:new m.a}},o.Box=new o({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new m.a(.1,.1,.1,.1)}),o.Badge1=new o({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new m.a(.3,.18,.2,.18)}),o.Badge2=new o({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new m.a(.3,.18,.2,.18)}),o.Badge3=new o({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new m.a(.3,.18,.2,.18)}),o.Badge4=new o({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new m.a(.3,.18,.2,.18)}),o.SpeechBubble1=new o({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new m.a(.04,.07,.12,.07),capInsets:new m.a(57,171,123,51)}),o.SpeechBubble2=new o({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new m.a(.04,.07,.12,.07),capInsets:new m.a(6,105,87,15)}),o.SpeechBubble3=new o({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new m.a(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),o.SpeechBubble4=new o({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new m.a(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),o.SpeechBubble5=new o({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new m.a(.114892823,.27,.15984926,.27)}),o.Watercolor1=new o({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new m.a(.2,.25,.2,.25)}),o.Watercolor2=new o({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new m.a(.08,.25,.3,.25)}),o.Watercolor3=new o({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new m.a(.1,.2,.15,.2)})},function(a,b){a.exports=!0},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){var c=0,d=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++c+d).toString(36))}},function(a,b,c){var d=c(21).f,e=c(28),f=c(12)("toStringTag");a.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},function(a,b,c){c(166);for(var d=c(14),e=c(27),f=c(39),g=c(12)("toStringTag"),h="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),i=0;i<h.length;i++){var j=h[i],k=d[j],l=k&&k.prototype;l&&!l[g]&&e(l,g,j),f[j]=f.Array}},function(a,b){b.f={}.propertyIsEnumerable},function(a,b,c){var d=c(196),e=c(215),f=c(96),g=c(100),h=c(99),i=c(134),j=c(53),k=c(135),l=c(223),m=c(74),n=c(73),o=c(224),p=c(226),q=c(98),r=c(54),s=c(230),t=c(133),u={WebGLRenderer:e.a,CanvasRenderer:d.a,WebGLFilterManager:g.a,CanvasFilterManager:f.a,DisplayObject:h.a,Container:i.a,BaseTexture:j.a,Texture:k.a,RenderTexture:l.a,WebGLRenderTarget:m.a,CanvasRenderTarget:n.a,Sprite:o.a,Shaders:p.a,Shader:q.a,Filter:r.a,Filters:s,PixelArrayImage:t.a,autoDetectRenderer:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.a.isSupported()?new e.a(a,b,c):new d.a(a,b,c)}};b.a=u},function(a,b,c){a.exports={default:c(205),__esModule:!0}},function(a,b,c){a.exports={default:c(208),__esModule:!0}},function(a,b,c){a.exports={default:c(210),__esModule:!0}},function(a,b,c){var d=c(0),e=c.n(d),f=c(9),g=c(53),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b,c,d,e,f){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._width=b,this._height=c,this._pixelRatio=d,this._baseTexture=new g.a,this._canvas=e||this._createCanvas(),this._context=f||this._canvas.getContext("2d"),this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return h(a,[{key:"_createCanvas",value:function(){return f.i.createCanvas()}},{key:"clear",value:function(){var a=this._context;a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"resizeTo",value:function(a){this._baseTexture.resizeTo(a),this._width!==a.x&&(this._width=a.x,this._canvas.width=this._width*this._pixelRatio),this._height!==a.y&&(this._height=a.y,this._canvas.height=this._height*this._pixelRatio)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"getContext",value:function(){return this._context}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(a){this._pixelRatio=a}},{key:"getDimensions",value:function(){return new f.k(this._width,this._height)}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){this._canvas=null,this._context=null}}]),a}();b.a=i},function(a,b,c){var d=c(0),e=c.n(d),f=c(9),g=c(53),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b,c,d,e){var h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._renderer=b,this._gl=b.getContext(),this._width=c,this._height=d,this._frame=null,this._pixelRatio=e,this._projectionMatrix=new f.g,this._mipMapping=!1,this._baseTexture=new g.a;var i=this._baseTexture.getFrame();i.width=c,i.height=d,this._baseTexture.setPixelRatio(e),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=h,this._filterStack=[{renderTarget:this,filter:[]}],h||this._initFrameBuffer()}return h(a,[{key:"resizeTo",value:function(a){this._width=0|a.x,this._height=0|a.y,this._baseTexture.resizeTo(a),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}},{key:"_getMinFilter",value:function(){var a=g.a.DefaultMinFilter;return this._mipMapping&&(a=g.a.TrilinearFilter),a}},{key:"_getMagFilter",value:function(){return g.a.DefaultMagFilter}},{key:"_resizeTexture",value:function(){var a=this._gl,b=this._width*this._pixelRatio,c=this._height*this._pixelRatio;this._texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this._texture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,null),a.bindFramebuffer(a.FRAMEBUFFER,this._framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),f.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",a);var d=new f.k(this._width,this._height);f.i.isPowerOfTwo(d)?(f.f.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}},{key:"activate",value:function(){var a=this._gl;a.bindFramebuffer(a.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),a.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),a.disable(a.STENCIL_TEST)}},{key:"clear",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.b.TRANSPARENT,b=this._gl;b.bindFramebuffer(b.FRAMEBUFFER,this._framebuffer),f.e.checkFramebufferStatus("WebGLRenderTarget#clear",b),b.clearColor.apply(b,a.toGLColor()),b.clear(b.COLOR_BUFFER_BIT)}},{key:"_calculateProjectionMatrix",value:function(){var a=this._projectionMatrix;a.reset();var b=this._frame||new f.h(0,0,this._width,this._height),c=b.x,d=b.y;this._isRoot?(a.a=1/this._width*2,a.d=-1/this._height*2,a.tx=-1-c*a.a,a.ty=1-d*a.d):(a.a=1/this._width*2,a.d=1/this._height*2,a.tx=-1-c*a.a,a.ty=-1-d*a.d)}},{key:"_initFrameBuffer",value:function(){var a=this._gl;this._framebuffer=a.createFramebuffer(),this._texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this._texture),a.bindFramebuffer(a.FRAMEBUFFER,this._framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this._texture,0),this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new f.k(this._width,this._height)),f.e.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",a)}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getTexture",value:function(){return this._texture}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(a){this._frame=a}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(a){this._pixelRatio=a,this._isRoot||this._resizeTexture()}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"dispose",value:function(){var a=this._gl;this._baseTexture.disposeGLTexturesForRenderer(this._renderer),a.deleteTexture(this._texture),a.deleteFramebuffer(this._framebuffer)}}]),a}();b.a=i},function(a,b,c){var d=void 0;d=window.Image,b.a=d},function(a,b,c){function d(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],f=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];a.exports={stackBlurCanvasRGBA:function(a,b,c,g,h,i){if(!(isNaN(i)||i<1)){i|=0;var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=a.data,J=i+i+1,K=g-1,L=h-1,M=i+1,N=M*(M+1)/2,O=new d,P=O;for(l=1;l<J;l++)P=P.next=new d,l==M&&(H=P);P.next=O;var Q=null,R=null;p=o=0;var S=e[i],T=f[i];for(k=0;k<h;k++){for(y=z=A=B=q=r=s=t=0,u=M*(C=I[o]),v=M*(D=I[o+1]),w=M*(E=I[o+2]),x=M*(F=I[o+3]),q+=N*C,r+=N*D,s+=N*E,t+=N*F,P=O,l=0;l<M;l++)P.r=C,P.g=D,P.b=E,P.a=F,P=P.next;for(l=1;l<M;l++)m=o+((K<l?K:l)<<2),q+=(P.r=C=I[m])*(G=M-l),r+=(P.g=D=I[m+1])*G,s+=(P.b=E=I[m+2])*G,t+=(P.a=F=I[m+3])*G,y+=C,z+=D,A+=E,B+=F,P=P.next;for(Q=O,R=H,j=0;j<g;j++)I[o+3]=F=t*S>>T,0!==F?(F=255/F,I[o]=(q*S>>T)*F,I[o+1]=(r*S>>T)*F,I[o+2]=(s*S>>T)*F):I[o]=I[o+1]=I[o+2]=0,q-=u,r-=v,s-=w,t-=x,u-=Q.r,v-=Q.g,w-=Q.b,x-=Q.a,m=p+((m=j+i+1)<K?m:K)<<2,q+=y+=Q.r=I[m],r+=z+=Q.g=I[m+1],s+=A+=Q.b=I[m+2],t+=B+=Q.a=I[m+3],Q=Q.next,u+=C=R.r,v+=D=R.g,w+=E=R.b,x+=F=R.a,y-=C,z-=D,A-=E,B-=F,R=R.next,o+=4;p+=g}for(j=0;j<g;j++){for(z=A=B=y=r=s=t=q=0,u=M*(C=I[o=j<<2]),v=M*(D=I[o+1]),w=M*(E=I[o+2]),x=M*(F=I[o+3]),q+=N*C,r+=N*D,s+=N*E,t+=N*F,P=O,l=0;l<M;l++)P.r=C,P.g=D,P.b=E,P.a=F,P=P.next;for(n=g,l=1;l<=i;l++)o=n+j<<2,q+=(P.r=C=I[o])*(G=M-l),r+=(P.g=D=I[o+1])*G,s+=(P.b=E=I[o+2])*G,t+=(P.a=F=I[o+3])*G,y+=C,z+=D,A+=E,B+=F,P=P.next,l<L&&(n+=g);for(o=j,Q=O,R=H,k=0;k<h;k++)I[3+(m=o<<2)]=F=t*S>>T,F>0?(F=255/F,I[m]=q*S>>T,I[m+1]=r*S>>T,I[m+2]=s*S>>T):I[m]=I[m+1]=I[m+2]=0,q-=u,r-=v,s-=w,t-=x,u-=Q.r,v-=Q.g,w-=Q.b,x-=Q.a,m=j+((m=k+M)<L?m:L)*g<<2,q+=y+=Q.r=I[m],r+=z+=Q.g=I[m+1],s+=A+=Q.b=I[m+2],t+=B+=Q.a=I[m+3],Q=Q.next,u+=C=R.r,v+=D=R.g,w+=E=R.b,x+=F=R.a,y-=C,z-=D,A-=E,B-=F,R=R.next,o+=g}}}}},function(a,b,c){c.d(b,"a",function(){return k});var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(4);c.n(j);var k=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.Configurable),b}();k.prototype.availableOptions={tintColor:{type:j.OptionType.COLOR,default:j.Color.BLACK},textColor:{type:j.OptionType.COLOR,default:j.Color.BLACK},alignment:{type:j.OptionType.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:j.OptionType.NUMBER,default:1},fontIdentifier:{type:j.OptionType.STRING,default:"imgly_font_open_sans_bold"}}},function(a,b){var c=Math.ceil,d=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?d:c)(a)}},function(a,b){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(a,b,c){var d=c(24),e=c(14).document,f=d(e)&&d(e.createElement);a.exports=function(a){return f?e.createElement(a):{}}},function(a,b,c){var d=c(24);a.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},function(a,b,c){var d=c(18),e=c(163),f=c(86),g=c(84)("IE_PROTO"),h=function(){},i=function(){var a,b=c(80)("iframe"),d=f.length;for(b.style.display="none",c(115).appendChild(b),b.src="javascript:",(a=b.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),i=a.F;d--;)delete i.prototype[f[d]];return i()};a.exports=Object.create||function(a,b){var c;return null!==a?(h.prototype=d(a),c=new h,h.prototype=null,c[g]=a):c=i(),void 0===b?c:e(c,b)}},function(a,b,c){var d=c(78),e=Math.min;a.exports=function(a){return a>0?e(d(a),9007199254740991):0}},function(a,b,c){var d=c(85)("keys"),e=c(65);a.exports=function(a){return d[a]||(d[a]=e(a))}},function(a,b,c){var d=c(14),e=d["__core-js_shared__"]||(d["__core-js_shared__"]={});a.exports=function(a){return e[a]||(e[a]={})}},function(a,b){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(a,b,c){b.f=c(12)},function(a,b,c){var d=c(14),e=c(10),f=c(63),g=c(87),h=c(21).f;a.exports=function(a){var b=e.Symbol||(e.Symbol=f?{}:d.Symbol||{});"_"==a.charAt(0)||a in b||h(b,a,{value:g.f(a)})}},function(a,b){b.f=Object.getOwnPropertySymbols},function(a,b,c){var d=c(68),e=c(45),f=c(29),g=c(81),h=c(28),i=c(111),j=Object.getOwnPropertyDescriptor;b.f=c(25)?j:function(a,b){if(a=f(a),b=g(b,!0),i)try{return j(a,b)}catch(a){}if(h(a,b))return e(!d.f.call(a,b),a[b])}},function(a,b,c){var d=c(47),e=c(12)("toStringTag"),f="Arguments"==d(function(){return arguments}());a.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=function(a,b){try{return a[b]}catch(a){}}(b=Object(a),e))?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}},function(a,b,c){var d=c(91),e=c(12)("iterator"),f=c(39);a.exports=c(10).getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}},function(a,b,c){var d,e,f,g=c(37),h=c(188),i=c(115),j=c(80),k=c(14),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=k.Dispatch,q=0,r={},s=function(){var a=+this;if(r.hasOwnProperty(a)){var b=r[a];delete r[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return r[++q]=function(){h("function"==typeof a?a:Function(a),b)},d(q),q},n=function(a){delete r[a]},"process"==c(47)(l)?d=function(a){l.nextTick(g(s,a,1))}:p&&p.now?d=function(a){p.now(g(s,a,1))}:o?(f=(e=new o).port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d="onreadystatechange"in j("script")?function(a){i.appendChild(j("script")).onreadystatechange=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),a.exports={set:m,clear:n}},function(a,b,c){var d=c(64);a.exports.f=function(a){return new function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=d(b),this.reject=d(c)}(a)}},function(a,b,c){var d=c(13),e=c(10),f=c(38);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){
var d=c(0),e=c.n(d),f=c(9),g=c(73),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._renderer=b,this._filterStack=[{renderTarget:b.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new f.h(0,0,b.getWidth(),b.getHeight())}return h(a,[{key:"resizeTo",value:function(a){this._textureFrame.width=a.x,this._textureFrame.height=a.y,this._textures.forEach(function(b){return b.resizeTo(a)})}},{key:"pushFilters",value:function(a,b){var c=a.getBounds();this._currentFrame=c;var d=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(d),this._filterStack.push({renderTarget:d,filters:b}),d.clear()}},{key:"popFilters",value:function(){var a=this._filterStack.pop(),b=a.filters,c=a.renderTarget,d=this._filterStack[this._filterStack.length-1].renderTarget;return 1===b.length?(b[0].apply(this._renderer,c,d),this._textures.push(c)):this._applyFilters(b,c,d),b}},{key:"_applyFilters",value:function(a,b,c){var d=this,e=b,f=this._getOrCreateRenderTarget(!0),g=a[a.length-1];a.forEach(function(a,b){if(a===g)a.apply(d._renderer,e,c);else{a.apply(d._renderer,e,f);var h=e;e=f,f=h}}),this._textures.push(e),this._textures.push(f)}},{key:"_getOrCreateRenderTarget",value:function(a){var b=this._textures.pop();return b||(b=new g.a(this._textureFrame.width,this._textureFrame.height,1)),a&&b.clear(),b}},{key:"setFilterStack",value:function(a){this._filterStack=a}},{key:"dispose",value:function(){}}]),a}();b.a=i},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(9),k=c(98),l=j.c.UniformType,m=function(a){function b(a,c,d){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),c=c||b.defaultVertexSource,d=d||b.defaultFragmentSource,function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).call(this,a,c,d,b.defaultUniforms,b.defaultAttributes))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,k.a),b}();m.defaultVertexSource=c(219),m.defaultFragmentSource=c(220);var n=new j.g;m.defaultUniforms={u_image:{type:l.SAMPLER2D,value:0},u_projMatrix:{type:l.MAT3,value:n.toArray()}},m.defaultAttributes=["a_position","a_texCoord","a_color"],b.a=m},function(a,b,c){var d=c(0),e=c.n(d),f=c(70),g=c.n(f),h=c(9),i=c(32),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=h.f,l=h.i,m=function(){function a(b,c,d,e,f){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._renderer=b,this._vertexSource=c,this._fragmentSource=d,this._uniforms=e||{},this._uniformLocations={},this._attributes=f||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return j(a,[{key:"_init",value:function(){this._compile(),this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}},{key:"_onContextChange",value:function(){this._init()}},{key:"setupBuffers",value:function(a,b){var c=this._renderer.getContext();c.bindBuffer(c.ARRAY_BUFFER,a),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b),c.vertexAttribPointer(this._attributeLocations.a_position,2,c.FLOAT,!1,h.j,0),c.vertexAttribPointer(this._attributeLocations.a_texCoord,2,c.FLOAT,!1,h.j,8),c.vertexAttribPointer(this._attributeLocations.a_color,4,c.UNSIGNED_BYTE,!0,h.j,16)}},{key:"syncUniforms",value:function(){var a=this;g()(this._uniforms).forEach(function(b){a.syncUniform(b)})}},{key:"syncUniform",value:function(a){var b=this._renderer.getContext(),c=this._uniforms[a],d=this._uniformLocations[a];switch(c.type){case i.UniformType.SAMPLER2D:b.uniform1i(d,c.value);break;case i.UniformType.INT:case i.UniformType.INT1:b.uniform1i(d,c.value);break;case i.UniformType.FLOAT:case i.UniformType.FLOAT1:b.uniform1f(d,c.value);break;case i.UniformType.FLOAT2:b.uniform2f(d,c.value[0],c.value[1]);break;case i.UniformType.FLOAT3:b.uniform3f(d,c.value[0],c.value[1],c.value[2]);break;case i.UniformType.FLOAT4:b.uniform4f(d,c.value[0],c.value[1],c.value[2],c.value[3]);break;case i.UniformType.FLOAT_VECTOR2:b.uniform2fv(d,c.value);break;case i.UniformType.MAT3:case i.UniformType.MAT3FV:b.uniformMatrix3fv(d,!1,c.value);break;case i.UniformType.MAT4:b.uniformMatrix4fv(d,!1,c.value);break;default:k.warn(this.constructor.name,"Unknown uniform type: "+c.type)}}},{key:"_cacheAttributeLocations",value:function(){var a=this,b=this._renderer.getContext();this._attributes.forEach(function(c){a._attributeLocations[c]=b.getAttribLocation(a._program,c)})}},{key:"_cacheUniformLocations",value:function(){var a=this,b=this._renderer.getContext();g()(this._uniforms).forEach(function(c){a._uniformLocations[c]=b.getUniformLocation(a._program,c)})}},{key:"_addPrecisionToSource",value:function(a){var b=this._renderer.getMaxFloatPrecision(),c="mediump";return l.isMobile()&&"highp"===b&&(c="highp"),"precision "+c+" float;\n"+a}},{key:"_compile",value:function(){var a=this._renderer.getContext(),b=this._compileShader(a.VERTEX_SHADER,this._vertexSource);this._vertexShader=b;var c=this._addPrecisionToSource(this._fragmentSource),d=this._compileShader(a.FRAGMENT_SHADER,c);this._fragmentShader=d;var e=a.createProgram();if(a.attachShader(e,b),a.attachShader(e,d),a.linkProgram(e),!a.getProgramParameter(e,a.LINK_STATUS)){var f=a.getProgramInfoLog(e);a.isContextLost()&&(f="WebGL context lost"),a.deleteProgram(e),k.error(this.constructor.name,"WebGL program linking error: "+f)}this._program=e}},{key:"_compileShader",value:function(a,b){var c=this._renderer.getContext(),d=c.createShader(a);if(c.shaderSource(d,b),c.compileShader(d),!c.getShaderParameter(d,c.COMPILE_STATUS)){var e=c.getShaderInfoLog(d);c.isContextLost()&&(e="WebGL context lost"),c.deleteShader(d),k.error(this.constructor.name,"WebGL shader compilation error: "+e)}return d}},{key:"setUniform",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniforms[a].value=b,c&&this.syncUniform(a)}},{key:"setUniforms",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var c in a)this._uniforms[c].value=a[c],b&&this.syncUniform(c)}},{key:"getUniforms",value:function(){return this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getAttributeLocations",value:function(){return this._attributeLocations}},{key:"getProgram",value:function(){return this._program}},{key:"dispose",value:function(){var a=this._renderer.getContext();a.deleteProgram(this._program),a.deleteShader(this._vertexShader),a.deleteShader(this._fragmentShader),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)}}]),a}();b.a=m},function(a,b,c){var d=c(0),e=c.n(d),f=c(9),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._position=new f.k(0,0),this._scale=new f.k(1,1),this._pivot=new f.k(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new f.g,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new f.h(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new f.h(0,0,1,1),this._tint=16777215,this._filterRectangle=new f.h(0,0,0,0)}return g(a,[{key:"renderWebGL",value:function(a){f.f.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}},{key:"renderCanvas",value:function(a){f.f.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}},{key:"updateTransform",value:function(){var a=this._parent?this._parent.getWorldTransform():f.g.IDENTITY,b=this._worldTransform;this._rotation!==this._lastRotation&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),b.a=this._cosRotation*this._scale.x,b.b=this._sinRotation*this._scale.x,b.c=-this._sinRotation*this._scale.y,b.d=this._cosRotation*this._scale.y,b.tx=this._position.x,b.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(b.tx-=this._pivot.x*b.a+this._pivot.y*b.c,b.ty-=this._pivot.x*b.b+this._pivot.y*b.d),b.multiply(a),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"addShader",value:function(a){this._shaders.push(a)}},{key:"removeShader",value:function(a){var b=this._shaders.indexOf(a);return-1!==b&&(this._shaders.splice(b,1),!0)}},{key:"removeShaderAt",value:function(a){return!!this._shaders[a]&&(this._shaders.splice(a,1),!0)}},{key:"getBounds",value:function(){return this._bounds.clone()}},{key:"getPosition",value:function(){return this._position}},{key:"setPosition",value:function(a,b){a instanceof f.k?this._position.copy(a):this._position.set(a,b),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getScale",value:function(){return this._scale}},{key:"setScale",value:function(a,b){a instanceof f.k?this._scale.copy(a):this._scale.set(a,b),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getPivot",value:function(){return this._pivot}},{key:"setPivot",value:function(a,b){a instanceof f.k?this._pivot.copy(a):this._pivot.set(a,b),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotation",value:function(a){this._rotation=a,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getAlpha",value:function(){return this._alpha}},{key:"setAlpha",value:function(a){this._alpha=a}},{key:"getWorldAlpha",value:function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}},{key:"getWorldTransform",value:function(){return this._worldTransform}},{key:"getParent",value:function(){return this._parent}},{key:"setParent",value:function(a){this._parent=a}},{key:"getFilterRectangle",value:function(){return this._filterRectangle}},{key:"setFilterRectangle",value:function(a){this._filterRectangle.copy(a)}},{key:"getTint",value:function(){return this._tint}},{key:"setTint",value:function(a){this._tint=a}},{key:"isVisible",value:function(){return this._visible}},{key:"setVisible",value:function(a){this._visible=a}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(9),g=c(74),h=c(221),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=f.c.RendererType,k=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._renderer=b,this._filterStack=[{filters:[]}],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new f.h(0,0,b.getWidth(),b.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return i(a,[{key:"resizeTo",value:function(a){this._textureFrame.width=a.x,this._textureFrame.height=a.y,this._renderTargets.forEach(function(b){return b.resizeTo(a)})}},{key:"getFilterStack",value:function(){return this._filterStack}},{key:"setFilterStack",value:function(a){this._filterStack=a}},{key:"_getOrCreateRenderTarget",value:function(a){var b=this._renderTargets.pop();return b||(b=new g.a(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),b.setFrame(this._currentFrame),a&&b.clear(),b}},{key:"pushFilters",value:function(a,b){var c=a.getBounds();this._currentFrame=c;var d=a.getFilterRectangle();d.width>0&&d.height>0&&(this._currentFrame=d);var e=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(e),e.clear(),this._filterStack.push({renderTarget:e,filters:b})}},{key:"popFilters",value:function(){var a=this._filterStack.pop(),b=a.filters,c=a.renderTarget,d=this._filterStack[this._filterStack.length-1].renderTarget;this._quad.map(this._textureFrame,c.getFrame());var e=b[0].getShaderForRenderer(this._renderer),f=this._quad.getVertexBuffer(),g=this._quad.getIndexBuffer(),h=this._renderer.getContext();h.bindBuffer(h.ARRAY_BUFFER,f),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,g);var i=e.getAttributeLocations();return h.vertexAttribPointer(i.a_position,2,h.FLOAT,!1,0,0),h.vertexAttribPointer(i.a_texCoord,2,h.FLOAT,!1,0,32),h.vertexAttribPointer(i.a_color,4,h.FLOAT,!1,0,64),this._renderer.updateTexture(c.getBaseTexture(),!1),1===b.length?(b[0].apply(this._renderer,c,d),this._renderTargets.push(c)):this._applyFilters(b,c,d),b}},{key:"_applyFilters",value:function(a,b,c){var d=this,e=b,f=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(f.getBaseTexture(),!1);var g=a[a.length-1];a.forEach(function(a,b){if(a===g)a.apply(d._renderer,e,c);else{a.apply(d._renderer,e,f);var h=e;e=f,f=h}}),this._renderTargets.push(e),this._renderTargets.push(f)}},{key:"_onContextChange",value:function(){this._renderTargets.length=0,this._renderer.isOfType(j.WEBGL)&&(this._quad&&this._quad.dispose(),this._quad=new h.a(this._renderer))}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach(function(a){a.dispose()})}}]),a}();b.a=k},function(a,b,c){var d=c(0),e=c.n(d),f=c(50),g=c(102),h=c(22),i=c(103),j=c(255),k=c(256),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();h.a.invariant;var m=i.a.MARKERS,n=new RegExp("^data:image/jpeg;base64,","i"),o=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._buf=b,this._stream=new g.a(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new k.a(this._getMarkerBuffer(m.EXIF)),this._jfifData=new j.a(this._getMarkerBuffer(m.JFIF))}return l(a,[{key:"restoreSegments",value:function(b){var c=a.fromDataURL(b);return c=this.restoreExifTagsToImageData(c),c=this.restoreJfifSegmentToImageData(c),a.toDataURL(c)}},{key:"restoreExifTagsToImageData",value:function(a){if(!this._exifData.isValid())return a;var b=this._sliceIntoSegments(a)[1][0],c=a.slice(0,b),d=a.slice(b),e=c.concat(this._exifData.getBuffer());return e=e.concat(d)}},{key:"restoreJfifSegmentToImageData",value:function(a){if(!this._jfifData.isValid())return a;var b=this._sliceIntoSegments(a),c=this._findSegment(m.JFIF,b);if(!c)return a;var d=c[0],e=c[1],f=a.slice(0,d),g=a.slice(d,e),h=a.slice(e),i=new j.a(g);return i.setDensityX(this._jfifData.getDensityX()),i.setDensityY(this._jfifData.getDensityY()),i.setUnitDensity(this._jfifData.getUnitDensity()),f.concat(g).concat(h)}},{key:"restoreExifTags",value:function(b){var c=a.fromDataURL(b),d=this.restoreExifTagsToImageData(c);return a.toDataURL(d)}},{key:"restoreJfifSegment",value:function(b){if(!this._jfifData.isValid())return b;var c=a.fromDataURL(b),d=this.restoreJfifSegmentToImageData(c);return a.toDataURL(d)}},{key:"setOrientation",value:function(a){return this._exifData.setOrientation(a)}},{key:"_findSegment",value:function(a){for(var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,c=0;c<b.length;c++){var d=b[c][0],e=b[c][1];if(this._stream.setHead(d),this._stream.peekInt16()===a)return[d,e]}return!1}},{key:"_getLastSegment",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._segments;return a[a.length-1]}},{key:"_getMarkerBuffer",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._segments,c=this._findSegment(a,b);if(c){var d=c[0],e=c[1];return this._buf.slice(d,e)}return!1}},{key:"_sliceIntoSegments",value:function(a){for(var b=new g.a(a),c=[];b.getHead()<a.length;){var d=b.readInt16();if(d!==m.SOI){if(d===m.SOS)break;if(!(d>=65280&&d<=65535))throw new Error("Invalid marker: 0x"+d.toString(16));var e=b.readInt16(),f=b.getHead()+e-2;c.push([b.getHead()-4,f]),b.setHead(f)}}return this._stream.setHead(0),c}},{key:"getTags",value:function(){return this._exifData.getTags()}},{key:"getTagData",value:function(){return this._exifData.getTagData()}},{key:"dispose",value:function(){this._buf=[],this._segments=[]}}],[{key:"toDataURL",value:function(a){return"data:image/jpeg;base64,"+f.a.encode(a)}},{key:"fromDataURL",value:function(a){var b=a.replace("data:image/jpeg;base64,","");return f.a.decode(b)}},{key:"isJPEG",value:function(a){return n.test(a)}},{key:"bufferIsJPEG",value:function(a){return"JFIF"===a.slice(6,10).toString()}},{key:"fromBase64String",value:function(b){var c=b.replace("data:image/jpeg;base64,","");return new a(f.a.decode(c))}}]),a}();b.a=o},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._head=0,this._buf=b}return f(a,[{key:"peekInt8",value:function(){return this._buf[this._head]}},{key:"peekInt16",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._buf[this._head],c=this._buf[this._head+1];return a?(c<<8)+b:(b<<8)+c}},{key:"peekInt24",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._buf[this._head],c=this._buf[this._head+1],d=this._buf[this._head+2];return a?(d<<16)+(c<<8)+b:(b<<16)+(c<<8)+d}},{key:"peekInt32",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._buf[this._head],c=this._buf[this._head+1],d=this._buf[this._head+2],e=this._buf[this._head+3];return a?(e<<32)+(d<<16)+(c<<8)+b:(b<<32)+(c<<16)+(d<<8)+e}},{key:"writeInt8",value:function(a){this._buf[this._head]=255&a}},{key:"writeInt16",value:function(a){this._buf[this._head]=a>>8,this._buf[this._head+1]=255&a}},{key:"readInt8",value:function(){var a=this.peekInt8();return this._head+=1,a}},{key:"readInt16",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.peekInt16(a);return this._head+=2,b}},{key:"readInt24",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.peekInt24(a);return this._head+=3,b}},{key:"readInt32",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.peekInt32(a);return this._head+=4,b}},{key:"readString",value:function(a){for(var b="",c=0;c<a;c++){var d=this.readInt8();b+=String.fromCharCode(d)}return b}},{key:"getHead",value:function(){return this._head}},{key:"setHead",value:function(a){this._head=a}}]),a}();b.a=g},function(a,b,c){b.a={MARKERS:{SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},EXIF_TAGS:{256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"}}},function(a,b,c){c.d(b,"a",function(){return o});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(17)),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),n(b,[{key:"insetsForWidth",value:function(a){return this.getRelativeInsets().clone().scale(a)}}],[{key:"Small",get:function(){return new b({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new m.a(.05,.2,.05,.2)})}},{key:"Rectangle",get:function(){return new b({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new m.a(.05,.05,.05,.05),needsImageSmoothingFix:!0})}},{key:"Celebrate1",get:function(){return new b({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new m.a(.05,.2,.05,.2)})}},{key:"Celebrate2",get:function(){return new b({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new m.a(.05,.2,.05,.2)})}}]),b}();o.prototype.availableOptions={image:{type:l.OptionType.IMAGE,default:null},imagePath:{type:l.OptionType.STRING,default:null},relativeInsets:{type:l.OptionType.OBJECT,default:new m.a},fontIdentifier:{type:l.OptionType.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:l.OptionType.BOOLEAN,default:!1}}},function(a,b,c){c.d(b,"a",function(){return w});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(17)),r=c(19),s=c(35),t=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},w=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,r.a),u(b,[{key:"_getTextColor",value:function(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(p.Color.WHITE)?p.Color.BLACK:p.Color.WHITE:this.getAttributes().getTextColor().clone()}},{key:"_getTextFrame",value:function(){return this.getImageInsets().applyToRectangle(this._getFrame())}},{key:"_getTextFrameForElement",value:function(a){var c=v(b.prototype.__proto__||o()(b.prototype),"_getTextFrameForElement",this).call(this,a),d=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(c.y-=d.top),c}},{key:"willRender",value:function(a){this.getAttributes().setTextColor(this._getTextColor());var b=this.getImage();if(b){var c=this.getCapInsets(),d=this._getFrame();c&&!c.equals(q.a.ZERO)?Object(s.b)(a,b,d,c):a.drawImage(b,d.x,d.y,d.width,d.height),Object(s.c)(a,d,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&b&&(a.save(),a.globalCompositeOperation="destination-out")}},{key:"didRender",value:function(a){v(b.prototype.__proto__||o()(b.prototype),"didRender",this).call(this,a),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&a.restore()}}]),b}();w.prototype.availableOptions=t({},r.a.prototype.availableOptions,{image:{type:p.OptionType.IMAGE,default:null},capInsets:{type:p.OptionType.OBJECT,default:new q.a},backgroundColor:{type:p.OptionType.COLOR,default:p.Color.WHITE},autoAdjustTextColor:{type:p.OptionType.BOOLEAN,default:!0},isMasked:{type:p.OptionType.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:p.OptionType.BOOLEAN,default:!1}})},function(a,b,c){c.d(b,"a",function(){return z});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(19)),r=c(61),s=c(42),t=c(23),u=c(35),v=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},y=p.Math.Rectangle,z=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),w(b,[{key:"getImageSize",value:function(){var a=this.getLeftImage(),b=this.getRightImage(),c=this.getWords(),d=this.getAttributes().getFontIdentifier(),e=a?new t.a(a.width,a.height):new t.a,f=c.joined(1)[0];if(!f)return e;var g=new r.a({text:f,fontIdentifier:d,fontSize:50}).getSizeValue(),h=b?2:1;e.scale(h,1);var i=e.clone().fitInWidthWithOther(this._getFrame().width,g);return i.scale(1/h,1),i}},{key:"_getTextFrame",value:function(){var a=x(b.prototype.__proto__||o()(b.prototype),"_getTextFrame",this).call(this).clone(),c=this.getImageSize(),d=this.getRightImage(),e=this.getImagePosition();return d?(a.x+=c.width,a.width-=2*c.width):e===b.ImagePosition.Left&&(a.x+=c.width),a}},{key:"_calculateLayoutElements",value:function(){var a=x(b.prototype.__proto__||o()(b.prototype),"_calculateLayoutElements",this).call(this),c=this._getFrame(),d=this.getRightImage(),e=this.getImageSize(),f=this.getImagePosition(),g=this._getTextFrame(),h=this.getAttributes().getFontIdentifier(),i=new r.a({text:"stickerClock",fontIdentifier:h});i.fitWidth(this._getTextFrame().width);var j=(new y).set(c.x,c.y,e.width,e.height);if(d||f!==b.ImagePosition.Right||(j.x+=g.width),a.push(new s.a({text:"stickerClock",frame:j,font:i})),d){var k=a[0];if(k){var l=j.clone();l.translate(k.getFrame().width+l.width,0),a.push(new s.a({text:"stickerClock",frame:l,font:i}))}}return a}},{key:"render",value:function(a){var b=this._getLayoutElements(),c=this.getAttributes(),d=c.getTextColor(),e=this.getLeftImage(),f=this.getRightImage(),g=b[0],h=b[1],i=g.serializeOptions().font,j=this._getTextFrameForElement(g);if(i.draw(a,j.x,j.y,{textColor:c.getTextColor().toRGBA(),alignment:c.getAlignment()}),e){var k=h.getFrame();a.drawImage(e,k.x,k.y,k.width,k.height),Object(u.c)(a,k,d,"source-atop")}if(b.length>2){var l=b[2].getFrame().clone();a.drawImage(f,l.x,l.y,l.width,l.height),Object(u.c)(a,l,d,"source-atop")}}}]),b}();z.ImagePosition={Left:"LEFT",right:"RIGHT"},z.prototype.availableOptions=v({},q.a.prototype.availableOptions,{leftImage:{type:p.OptionType.IMAGE,default:null},rightImage:{type:p.OptionType.IMAGE,default:null},imagePosition:{type:p.OptionType.STRING,default:z.ImagePosition.Left,available:[z.ImagePosition.Left,z.ImagePosition.Right]}})},function(a,b,c){c.d(b,"a",function(){return u});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(105)),p=c(42),q=c(61),r=(c(150),c(374)),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),t(b,[{key:"_calculateLayoutElements",value:function(){var a=this.getWords(),b=this._getTextFrame(),c=this.getAttributes().getFontIdentifier(),d=this.getImageInsets(),e=new q.a({text:a.getWord(0),fontIdentifier:c});e.fitWidth(b.width);var f=new p.a({text:a.getWord(0),frame:b,font:e});f.setFrame(this._getTextFrameForElement(f));var g=this.getSize();return(this.getSizeToFitContent()||g.height<=1)&&(g.height=d.top+f.getFrame().height+d.bottom),g.height=Math.max(g.height,this.getMinimumHeight()),[f]}},{key:"_getTextFrameForElement",value:function(a){var b=this.getWords().getWord(0),c=this.getAttributes(),d=c.getFontIdentifier(),e=this.getImageInsets(),f=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),g=new r.a({text:b,fontIdentifier:d,alignment:c.getAlignment(),lineHeight:1});g.fitInFrame(f);var h=g.getSize();f.height=h.height;var i=h.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(i+=e.top+e.bottom);var j=this._getFrame(),k=c.getAlignment();if(this.getCenteredVertically())f.y=j.height/2-i/2+e.top;else switch(k){case"left":f.y=j.height-i-e.bottom;break;case"center":f.y=j.height/2-i/2+i*this.getCenterOffset(),f.x=(j.width-f.width)/2;break;case"right":f.x=j.width-f.width-e.right}return f}},{key:"render",value:function(a){
var b=this;a.save(),this._getLayoutElements().forEach(function(c){var d=c.serializeOptions(),e=d.text,f=d.frame,g=b.getAttributes(),h=g.getFontIdentifier(),i=new r.a({text:e,fontIdentifier:h,alignment:g.getAlignment(),lineHeight:1,textColor:g.getTextColor().toRGBA()});f=b._getTextFrameForElement(c),i.fitInFrame(f),i.draw(a,f.x,f.y)}),a.restore()}}]),b}();u.prototype.availableOptions=s({},o.a.prototype.availableOptions,{centerOffset:{type:n.OptionType.NUMBER,default:0},sizeToFitContent:{type:n.OptionType.BOOLEAN,default:!1},textScaleFactor:{type:n.OptionType.NUMBER,default:.95},rowScaleFactor:{type:n.OptionType.NUMBER,default:1},minimumHeight:{type:n.OptionType.NUMBER,default:0},centeredVertically:{type:n.OptionType.BOOLEAN,default:!1}})},function(a,b,c){c.d(b,"a",function(){return v});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(62)),r=c(43),s=c(16),t=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f._possibleRowTypes=[q.a.SpeechBubble1,q.a.SpeechBubble3],f._rowTypesRandomizer=new s.a(0),f._isMaskedRandomizer=new s.a(0),f._seedPool.push(f._rowTypesRandomizer),f._seedPool.push(f._isMaskedRandomizer),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,r.a),u(b,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map(function(a){return a.getImagePath()})}},{key:"_rowTypes",value:function(a){return this._possibleRowTypes}},{key:"_randomLayoutRow",value:function(a,c,d,e){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(a)),e.setLineSpacing(.9);var f=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||o()(b.prototype),"_randomLayoutRow",this).call(this,a,c,d,e);return f.set({textScaleFactor:1,minimumHeight:d*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),f}}]),b}();v.defaultFontIdentifiers=["imgly_font_panton_black_caps","imgly_font_panton_light_caps","imgly_font_panton_black_italic_caps","imgly_font_panton_light_italic_caps"],v.identifier="imgly_text_design_masked_speech_bubble",v.prototype.availableOptions=t({},r.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:v.defaultFontIdentifiers},squareLayout:{type:p.OptionType.BOOLEAN,default:!1},alignment:{type:p.OptionType.STRING,default:"left",available:r.a.ValidAlignments}})},function(a,b,c){c.d(b,"a",function(){return v});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(155)),p=c(20),q=c(35),r=c(381),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=n.Math.Rectangle,v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._MAX_TRIES=1e3,f._PRECISION=1e3,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),t(b,[{key:"render",value:function(a,b,c,d,e){var f=this._options,g=f.imagePaths,h=f.relativeParticleSize;if(!(g.length<=0)){var i=b.width/b.height,j=new u(Math.round(c.left*this._PRECISION),Math.round(c.top*this._PRECISION*i),this._PRECISION,this._PRECISION);j.width-=j.x+Math.round(c.right*this._PRECISION),j.height-=j.y+Math.round(c.bottom*this._PRECISION*i);for(var k=[],l=0,m=0;l<this.getParticleCount()&&m<this._MAX_TRIES;){var n=h/2,o=Math.round(n*this._PRECISION),s=Math.round(n*this._PRECISION*i),t=Math.floor(this._PRECISION)-o,v=Math.floor(this._PRECISION)-s,w=e.nextInRange(o,t),x=e.nextInRange(s,v),y=new u(w-o,x-s,2*o,2*s);y.intersects(j)||this.hasCollision(k,y)||(k.push(new r.a({frame:y})),l+=1),m+=1}for(var z=0;z<k.length;z++){var A=k[z],B=e.pickNext(g),C=p.a.getImage(B),D=e.nextInRange(140,230)/255,E=b.width/this._PRECISION,F=b.height/this._PRECISION,G=A.getContentFrame();G.x*=E,G.y*=F,G.width*=E,G.height*=F;var H=d.clone();H.a=D,Object(q.a)(a,C,G,H,"source-atop")}}}},{key:"hasCollision",value:function(a,b){for(var c=0;c<a.length;c++)if(b.intersects(a[c].getFrame()))return!0;return!1}}]),b}();v.prototype.availableOptions=s({},o.a.prototype.availableOptions,{particleCount:{type:n.OptionType.NUMBER,default:50},relativeParticleSize:{type:n.OptionType.NUMBER,default:.08},imagePaths:{type:n.OptionType.ARRAY,default:[]}})},function(a,b,c){var d=c(63),e=c(13),f=c(112),g=c(27),h=c(28),i=c(39),j=c(162),k=c(66),l=c(116),m=c(12)("iterator"),n=!([].keys&&"next"in[].keys()),o=function(){return this};a.exports=function(a,b,c,p,q,r,s){j(c,b,p);var t,u,v,w=function(a){if(!n&&a in A)return A[a];switch(a){case"keys":case"values":return function(){return new c(this,a)}}return function(){return new c(this,a)}},x=b+" Iterator",y="values"==q,z=!1,A=a.prototype,B=A[m]||A["@@iterator"]||q&&A[q],C=!n&&B||w(q),D=q?y?w("entries"):C:void 0,E="Array"==b&&A.entries||B;if(E&&(v=l(E.call(new a)))!==Object.prototype&&v.next&&(k(v,x,!0),d||h(v,m)||g(v,m,o)),y&&B&&"values"!==B.name&&(z=!0,C=function(){return B.call(this)}),d&&!s||!n&&!z&&A[m]||g(A,m,C),i[b]=C,i[x]=o,q)if(t={values:y?C:w("values"),keys:r?C:w("keys"),entries:D},s)for(u in t)u in A||f(A,u,t[u]);else e(e.P+e.F*(n||z),b,t);return t}},function(a,b,c){a.exports=!c(25)&&!c(38)(function(){return 7!=Object.defineProperty(c(80)("div"),"a",{get:function(){return 7}}).a})},function(a,b,c){a.exports=c(27)},function(a,b,c){var d=c(28),e=c(29),f=c(164)(!1),g=c(84)("IE_PROTO");a.exports=function(a,b){var c,h=e(a),i=0,j=[];for(c in h)c!=g&&d(h,c)&&j.push(c);for(;b.length>i;)d(h,c=b[i++])&&(~f(j,c)||j.push(c));return j}},function(a,b,c){var d=c(47);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},function(a,b,c){var d=c(14).document;a.exports=d&&d.documentElement},function(a,b,c){var d=c(28),e=c(48),f=c(84)("IE_PROTO"),g=Object.prototype;a.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},function(a,b,c){var d=c(113),e=c(86).concat("length","prototype");b.f=Object.getOwnPropertyNames||function(a){return d(a,e)}},function(a,b){},function(a,b,c){var d=c(18);a.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}}},function(a,b,c){var d=c(39),e=c(12)("iterator"),f=Array.prototype;a.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},function(a,b,c){var d=c(18),e=c(64),f=c(12)("species");a.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},function(a,b){a.exports=function(a){try{return{e:!1,v:a()}}catch(a){return{e:!0,v:a}}}},function(a,b,c){var d=c(18),e=c(24),f=c(94);a.exports=function(a,b){if(d(a),e(b)&&b.constructor===a)return b;var c=f.f(a);return(0,c.resolve)(b),c.promise}},function(a,b,c){var d=c(12)("iterator"),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}a.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(j===setTimeout)return setTimeout(a,0);if((j===c||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=e(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,function(a){if(k===clearTimeout)return clearTimeout(a);if((k===d||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};!function(){try{j="function"==typeof setTimeout?setTimeout:c}catch(a){j=c}try{k="function"==typeof clearTimeout?clearTimeout:d}catch(a){k=d}}();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||e(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(a){return[]},l.binding=function(a){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(a){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(a,b,c){var d=c(0),e=c.n(d),f=c(31),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.reset()}return g(a,[{key:"multiply",value:function(a){var b,c,d,e,f,g;return b=this.a*a.a+this.b*a.c,c=this.a*a.b+this.b*a.d,d=this.c*a.a+this.d*a.c,e=this.c*a.b+this.d*a.d,f=this.tx*a.a+this.ty*a.c+a.tx,g=this.tx*a.b+this.ty*a.d+a.ty,this.a=b,this.b=c,this.c=d,this.d=e,this.tx=f,this.ty=g,this}},{key:"applyToVector",value:function(a){var b=a,c=b.x,d=b.y;return(a=a.clone()).x=this.a*c+this.c*d+this.tx,a.y=this.b*c+this.d*d+this.tx,a}},{key:"applyInverseToVector",value:function(a){var b=1/(this.a*this.d+this.c*-this.b),c=a,d=c.x,e=c.y;return(a=a.clone()).x=this.d*b*d+-this.c*b*e+(this.ty*this.c-this.tx*this.d)*b,a.y=this.a*b*e+-this.b*b*d+(-this.ty*this.a+this.tx*this.b)*b,a}},{key:"rectangleToCoordinates",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.a(0,0),c=a.width*(1-b.x),d=a.width*-b.x,e=a.height*(1-b.y),g=a.height*-b.y,h=[];return h.push(new f.a(this.a*d+this.c*g+this.tx,this.d*g+this.b*d+this.ty)),h.push(new f.a(this.a*c+this.c*g+this.tx,this.d*g+this.b*c+this.ty)),h.push(new f.a(this.a*c+this.c*e+this.tx,this.d*e+this.b*c+this.ty)),h.push(new f.a(this.a*d+this.c*e+this.tx,this.d*e+this.b*d+this.ty)),h}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}},{key:"toArray",value:function(){var a=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?a:new Float32Array(a)}},{key:"toString",value:function(){return"Matrix({ a: "+this.a+", b: "+this.b+", c: "+this.c+", d: "+this.d+", tx: "+this.tx+", ty: "+this.ty+" })"}}],[{key:"IDENTITY",get:function(){return new a}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(31),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=b,this.y=c,this.width=d,this.height=e}return g(a,[{key:"set",value:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this}},{key:"clone",value:function(){return new a(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this}},{key:"equals",value:function(b,c,d,e){return b instanceof a?b.x===this.x&&b.y===this.y&&b.width===this.width&&b.height===this.height:b===this.x&&c===this.y&&d===this.width&&e===this.height}},{key:"translate",value:function(a,b){return a instanceof f.a&&(b=a.y,a=a.x),this.x+=a,this.y+=b,this}},{key:"scale",value:function(a,b){return a instanceof f.a?(b=a.y,a=a.x):void 0===b&&(b=a),this.width*=a,this.height*=b,this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}},{key:"getPosition",value:function(){return new f.a(this.x,this.y)}},{key:"getSize",value:function(){return new f.a(this.width,this.height)}},{key:"insetBy",value:function(a,b){return this.x+=a,this.y+=b,this.width-=2*a,this.height-=2*b,this}},{key:"intersects",value:function(a){var b=new f.a(this.x,this.y),c=new f.a(this.x+this.width,this.y+this.height),d=new f.a(a.x,a.y),e=new f.a(a.x+a.width,a.y+a.height);return!(d.x>c.x||b.x>e.x||e.y<b.y||c.y<d.y)}},{key:"toString",value:function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"}}],[{key:"FromDiagonalPoints",value:function(b,c){var d=!1;c.x-b.x<0&&(d=!0);var e=d?c:b,f=d?b:c,g=f.x-e.x,h=f.y-e.y;return new a(e.x,e.y,g,h)}}]),a}();b.a=h},function(a,b,c){function d(a,b,c){return b in a?f()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(0),f=c.n(e),g=c(26),h=c(212);c.n(h),b.a={checkFramebufferStatus:function(a,b){var c,e=b.checkFramebufferStatus(b.FRAMEBUFFER),f=(d(c={},b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,"Incomplete attachment"),d(c,b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT,"Missing attachment"),d(c,b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,"Incomplete dimensions"),d(c,b.FRAMEBUFFER_UNSUPPORTED,"Framebuffer unsupported"),c);e!==b.FRAMEBUFFER_COMPLETE&&g.a.warn(a,"Framebuffer incomplete: "+f[e])},determineGPUName:function(a){var b=null,c=null;a||(a=(c=document.createElement("canvas")).getContext("experimental-webgl")||c.getContext("webgl"));var d=a&&a.getExtension("WEBGL_debug_renderer_info");return d&&(b=a.getParameter(d.UNMASKED_RENDERER_WEBGL),c&&c.remove()),b},isGPUBlacklisted:function(a){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],!1}}},function(a,b,c){var d=c(0),e=c.n(d),f=c(9),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):c(130),i=function(){function a(b){var c=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._context=b,this._tracking=!1;var d=this;for(var e in b)!function(a){"function"==typeof b[a]?c[a]=function(){for(var c=arguments.length,e=Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=b[a];if(!d._tracking)return g.apply(b,e);var i=h(),j=g.apply(b,e),k=h()-i,l={functionName:a,arguments:e,duration:k};return d._trackedCalls.push(l),j}:c._makePropertyWrapper(a)}(e)}return g(a,[{key:"_makePropertyWrapper",value:function(a){if(-1===["_context","_trackedCalls","_tracking"].indexOf(a)){var b=this._context;this.__defineGetter__(a,function(){return b[a]}),this.__defineSetter__(a,function(c){b[a]=c})}}},{key:"startFrame",value:function(){this._tracking=!0,this._trackedCalls=[]}},{key:"endFrame",value:function(){var a="Rendering";f.f.log(a,"Frame rendering results:"),f.f.log(a,"Context calls: "+this._trackedCalls.length);var b={};this._trackedCalls.forEach(function(a){var c=a.functionName,d=a.duration;b[c]=b[c]||{totalDuration:0,calls:0},b[c].totalDuration+=d,b[c].calls++});var c=[];for(var d in b){var e=b[d];e.averageDuration=e.totalDuration/e.calls,c.push({functionName:d,data:e})}c.sort(function(a,b){return b.data.totalDuration-a.data.totalDuration}),(c=c.slice(0,3)).forEach(function(b){f.f.log(a,b.functionName+": "+b.data.calls+" calls, "+b.data.totalDuration.toFixed(2)+"ms")})}}]),a}();b.a=i},function(a,b,c){(function(b){(function(){var c,d,e;"undefined"!=typeof performance&&null!==performance&&performance.now?a.exports=function(){return performance.now()}:void 0!==b&&null!==b&&b.hrtime?(a.exports=function(){return(c()-e)/1e6},d=b.hrtime,e=(c=function(){var a;return 1e9*(a=d())[0]+a[1]})()):Date.now?(a.exports=function(){return Date.now()-e},e=Date.now()):(a.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime())}).call(this)}).call(b,c(125))},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(9),m=c(214),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var e=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return e._options=m.a.defaults(d,{pixelRatio:1,transparent:!1,clearColor:l.b.BLACK,debug:!1}),e.setMaxListeners(0),e._width=a||800,e._height=c||600,e._dimensions=new l.k(e._width,e._height),e._maxTextureSize=null,e._pixelRatio=e._options.pixelRatio,e._clearColor=e._options.transparent?l.b.TRANSPARENT:e._options.clearColor||l.b.BLACK,e}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.d),n(b,[{key:"setCanvas",value:function(a){var b=this._canvas;this._canvas=a,b!==a&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new l.k(this._width,this._height))}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_onBeforeContext",value:function(){}},{key:"resizeTo",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._width=a.x*this._pixelRatio,this._height=a.y*this._pixelRatio,b&&(this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=a.clone()}},{key:"_createContext",value:function(){l.f.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}},{key:"_setupContext",value:function(){l.f.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}},{key:"render",value:function(a){l.f.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}},{key:"getMaxDimensions",value:function(){return null}},{key:"getContext",value:function(){return this._context}},{key:"getWidth",value:function(){return this._dimensions.x}},{key:"getHeight",value:function(){return this._dimensions.y}},{key:"getDimensions",value:function(){return this._dimensions}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"setPixelRatio",value:function(a){this._pixelRatio=a,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(a)}},{key:"getMaxTextureSize",value:function(){return this._maxTextureSize}},{key:"getFilterManager",value:function(){return this._filterManager}},{key:"setFilterManager",value:function(a){this._filterManager=a}},{key:"isOfType",value:function(a){return this._type===a}},{key:"dispose",value:function(){l.f.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}],[{key:"isSupported",value:function(){return!0}}]),b}();b.a=o},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._renderer=b,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return f(a,[{key:"_onContextChange",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"dispose",value:function(){this._renderer.off("context",this._onContextChange),this._renderer=null}}]),a}();b.a=g},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.width=b,this.height=c,this.data=d}return f(a,null,[{key:"fromNodeCanvasImage",value:function(b){var c=new Canvas(b.width,b.height).getContext("2d");c.drawImage(b,0,0);var d=c.getImageData(0,0,b.width,b.height);return new a(b.width,b.height,d.data)}}]),a}();b.a=g},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(9),o=c(99),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._children=[],f._filters=[],f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),p(b,[{key:"addFilter",value:function(a){this._filters.push(a)}},{key:"removeFilter",value:function(a){var b=this._filters.indexOf(a);return-1!==b&&(this._filters.splice(b,1),!0)}},{key:"setFilters",value:function(a){this._filters=a}},{key:"addChild",value:function(a){var b=a.getParent();null!==b&&b.removeChild(a),a.setParent(this),this._children.push(a)}},{key:"prependChild",value:function(a){var b=a.getParent();null!==b&&b.removeChild(a),a.setParent(this),this._children.unshift(a)}},{key:"hasChild",value:function(a){return-1!==this._children.indexOf(a)}},{key:"removeChild",value:function(a){var b=this._children.indexOf(a);-1!==b?(this._children.splice(b,1),a.setParent(null)):n.f.info(this.constructor.name,"Tried to remove a child that does not exist")}},{key:"clearChildren",value:function(){this._children=[]}},{key:"renderWebGL",value:function(a){if(this._visible){var b=a.getFilterManager();this._filters&&this._filters.length&&b.pushFilters(this,this._filters),a.getCurrentObjectRenderer().start(),this._renderWebGL(a),this._children.forEach(function(b){b.renderWebGL(a)}),a.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&b.popFilters(),a.getCurrentObjectRenderer().start()}}},{key:"_renderWebGL",value:function(a){}},{key:"renderCanvas",value:function(a){if(this._visible){var b=a.getFilterManager();this._filters&&this._filters.length&&b.pushFilters(this,this._filters),this._renderCanvas(a),this._children.forEach(function(b){b.renderCanvas(a)}),this._filters&&this._filters.length&&b.popFilters()}}},{key:"_renderCanvas",value:function(a){}},{key:"updateTransform",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"updateTransform",this).call(this),this._children.forEach(function(a){a.updateTransform()})}},{key:"getLocalBounds",value:function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}},{key:"getBounds",value:function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}},{key:"getChildren",value:function(){return this._children}},{key:"getFilters",value:function(){return this._filters}},{key:"dispose",value:function(){}}]),b}();b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(9),m=c(53),n=c(222),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(a,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));if(!(a instanceof m.a))throw new Error("`baseTexture` should be an instance of BaseTexture");return d._uvs=new n.a,d._frame=c?c.clone():null,d._frameLocked=!!c,d._onBaseTextureLoaded=d._onBaseTextureLoaded.bind(d),d._onBaseTextureUpdated=d._onBaseTextureUpdated.bind(d),d._frame||(d._frame=new l.h(0,0,1,1)),d.setBaseTexture(a),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.d),o(b,[{key:"_onBaseTextureLoaded",value:function(){if(!this._frameLocked){var a=this._baseTexture.getFrame().clone();this.setFrame(a)}this._baseTexture.on("update",this._onBaseTextureUpdated)}},{key:"_onBaseTextureUpdated",value:function(){var a=this._baseTexture.getFrame(),b=a.width,c=a.height;this._frame.width=b,this._frame.height=c,this.emit("update")}},{key:"_updateUVs",value:function(){this._uvs.update(this._frame,this._baseTexture.getFrame())}},{key:"getBaseTexture",value:function(){return this._baseTexture}},{key:"setBaseTexture",value:function(a){if(this._baseTexture=a,this._baseTexture.isLoaded()){var b=a.getFrame(),c=b.width,d=b.height;this._frameLocked||(this._frame=new l.h(0,0,c,d)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}},{key:"getFrame",value:function(){return this._frame}},{key:"setFrame",value:function(a){this._frame=a,this._updateUVs()}},{key:"getWidth",value:function(){return this._frame.width}},{key:"getHeight",value:function(){return this._frame.height}},{key:"getUVs",value:function(){return this._uvs}},{key:"getDimensions",value:function(){return new l.k(this._frame.width,this._frame.height)}},{key:"dispose",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._baseTexture.dispose()}}],[{key:"fromImage",value:function(a){return new b(new m.a(a))}},{key:"fromCanvas",value:function(a){return new b(new m.a(a))}}]),b}();b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(51),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,j=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,k=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,m=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,n=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,o=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,p=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,q=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,r=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0,s=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,t=arguments.length>18&&void 0!==arguments[18]?arguments[18]:1,u=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.set(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u)}return g(a,[{key:"set",value:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f,this.g=g,this.h=h,this.i=i,this.j=j,this.k=k,this.l=l,this.m=m,this.n=n,this.o=o,this.p=p,this.q=q,this.r=r,this.s=s,this.t=t}},{key:"reset",value:function(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}},{key:"apply",value:function(a){var b=this.a*a.r+this.b*a.g+this.c*a.b+this.d*a.a+this.e,c=this.f*a.r+this.g*a.g+this.h*a.b+this.i*a.a+this.j,d=this.k*a.r+this.l*a.g+this.m*a.b+this.n*a.a+this.o,e=this.p*a.r+this.q*a.g+this.r*a.b+this.s*a.a+this.t;return new f.a(b,c,d,e)}},{key:"multiply",value:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a,w=this;return b=v.a*w.a+v.b*w.f+v.c*w.k+v.d*w.p,
c=v.a*w.b+v.b*w.g+v.c*w.l+v.d*w.q,d=v.a*w.c+v.b*w.h+v.c*w.m+v.d*w.r,e=v.a*w.d+v.b*w.i+v.c*w.n+v.d*w.s,g=v.f*w.a+v.g*w.f+v.h*w.k+v.i*w.p,h=v.f*w.b+v.g*w.g+v.h*w.l+v.i*w.q,i=v.f*w.c+v.g*w.h+v.h*w.m+v.i*w.r,j=v.f*w.d+v.g*w.i+v.h*w.n+v.i*w.s,l=v.k*w.a+v.l*w.f+v.m*w.k+v.n*w.p,m=v.k*w.b+v.l*w.g+v.m*w.l+v.n*w.q,n=v.k*w.c+v.l*w.h+v.m*w.m+v.n*w.r,o=v.k*w.d+v.l*w.i+v.m*w.n+v.n*w.s,q=v.p*w.a+v.q*w.f+v.r*w.k+v.s*w.p,r=v.p*w.b+v.q*w.g+v.r*w.l+v.s*w.q,s=v.p*w.c+v.q*w.h+v.r*w.m+v.s*w.r,t=v.p*w.d+v.q*w.i+v.r*w.n+v.s*w.s,f=v.a*w.e+v.b*w.j+v.c*w.o+v.d*w.t+v.e,k=v.f*w.e+v.g*w.j+v.h*w.o+v.i*w.t+v.j,p=v.k*w.e+v.l*w.j+v.m*w.o+v.n*w.t+v.o,u=v.p*w.e+v.q*w.j+v.r*w.o+v.s*w.t+v.t,this.a=b,this.b=c,this.c=d,this.d=e,this.e=f,this.f=g,this.g=h,this.h=i,this.i=j,this.j=k,this.k=l,this.l=m,this.m=n,this.n=o,this.o=p,this.p=q,this.q=r,this.r=s,this.s=t,this.t=u,this}},{key:"clone",value:function(){var b=new a;return b.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),b}},{key:"equals",value:function(a){return this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d&&this.e===a.e&&this.f===a.f&&this.g===a.g&&this.h===a.h&&this.i===a.i&&this.j===a.j&&this.k===a.k&&this.l===a.l&&this.m===a.m&&this.n===a.n&&this.o===a.o&&this.p===a.p&&this.q===a.q&&this.r===a.r&&this.s===a.s&&this.t===a.t}},{key:"getOffsets",value:function(){return[this.e,this.j,this.o,this.t]}},{key:"toString",value:function(){return"ColorMatrix( "+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+",\n      "+this.f+", "+this.g+", "+this.h+", "+this.i+", "+this.j+",\n      "+this.k+", "+this.l+", "+this.m+", "+this.n+", "+this.o+",\n      "+this.p+", "+this.q+", "+this.r+", "+this.s+", "+this.t+" )"}},{key:"toArray",value:function(){var a=this;return"abcdefghijklmnopqrst".split("").map(function(b){return a[b]})}}],[{key:"createBrightnessMatrix",value:function(b){var c=new a;return c.e=b,c.j=b,c.o=b,c}},{key:"createContrastMatrix",value:function(b){var c=new a,d=(1-b)/2;return c.a=c.g=c.m=b,c.e=c.j=c.o=d,c}},{key:"createSaturationMatrix",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=new a,d=1-b,e=.213*d,f=.715*d,g=.072*d;return c.a=e+b,c.b=f,c.c=g,c.f=e,c.g=f+b,c.h=g,c.k=e,c.l=f,c.m=g+b,c}},{key:"createExposureMatrix",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=Math.pow(2,b);return new a(c,0,0,0,0,0,c,0,0,0,0,0,c,0,0,0,0,0,1,0)}},{key:"createLinearMatrix",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=new a;return d.a=d.g=d.m=b,d.e=d.j=d.o=c,d}},{key:"IDENTITY",get:function(){return new a}}]),a}();b.a=h},function(a,b,c){(function(a){var d=c(0),e=c.n(d),f=c(33),g=c(242),h=c.n(g),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j="undefined"!=typeof window?window:a,k=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._url=b,this._parsedUrl=h.a.parse(this._url,!0)}return i(a,[{key:"_isJSONPRequest",value:function(){var a=this._parsedUrl.query;for(var b in a)if("?"===a[b])return!0;return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var a=this;return new f.a(function(b,c){var d=void 0;j.XDomainRequest?((d=new j.XDomainRequest).onload=function(){var a=JSON.parse(d.responseText);b(a)},d.onerror=function(a){c(a)},d.open("GET",a._url,!0),d.send()):j.XMLHttpRequest&&((d=new XMLHttpRequest).onreadystatechange=function(a){if(4===d.readyState)if(200===d.status){var e=JSON.parse(d.responseText);b(e)}else c(new Error("HTTP Status "+d.status))},d.open("GET",a._url,!0),d.send())})}},{key:"_loadJSONP",value:function(){var a=this,b=!1,c=!1,d="pesdk"+Math.round(99999999999999*Math.random());return new f.a(function(e,f){var g=a._createJSONPNode(d);j[d]=function(d){a._removeJSONPNode(g),b||(c=!0,e(d))},j.setTimeout(function(){c||(a._removeJSONPNode(g),b=!0,f(new Error("Timeout of 5 seconds exceeded.")))},5e3)})}},{key:"_createJSONPNode",value:function(a){var b=this._buildJSONPUrl(a),c=document.querySelector("head"),d=document.createElement("script");return d.src=b,c.appendChild(d),d}},{key:"_removeJSONPNode",value:function(a){a.parentNode.removeChild(a)}},{key:"_buildJSONPUrl",value:function(a){var b=this._parsedUrl.query,c=null;for(var d in b)if("?"===b[d]){c=d;break}return delete this._parsedUrl.search,b[c]=a,h.a.format(this._parsedUrl)}}]),a}();b.a=k}).call(b,c(49))},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(31),e=c(251),f=c(127),g=c(126),h=c(136),i=c(252);c.d(b,"Vector2",function(){return d.a}),c.d(b,"Vector3",function(){return e.a}),c.d(b,"Rectangle",function(){return f.a}),c.d(b,"Matrix",function(){return g.a}),c.d(b,"ColorMatrix",function(){return h.a}),c.d(b,"CubicBezierCurve",function(){return i.a})},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(253);c.d(b,"ExifOrientationOperation",function(){return d.a})},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(32),m=c(33),n=c(26),o=c(69),p=c(55),q=c(141),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this,c,{enabled:{type:l.OptionType.BOOLEAN,default:!0,serializable:!1}}));return d._sdk=a,d._cacheEnabled=!1,d._dirtiness={},d._sprite=new o.a.Sprite,d._container=new o.a.Container,d._container.addChild(d._sprite),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,p.a),r(b,[{key:"_onOptionsChange",value:function(){this.setDirty(!0)}},{key:"render",value:function(a){var b=this;if(!this.getEnabled())return n.a.info(this.constructor.name,"Disabled - skipping"),m.a.resolve(a);if(!this._renderTexture){var c=this._sdk.getSprite().getTexture().getFrame();this._renderTexture=new o.a.RenderTexture(this._sdk.getRenderer(),c.width,c.height)}var d=this._sdk.getRenderer(),e=void 0,f=void 0;if(n.a.canLog("info")&&(f=new q.a(this.constructor.name,"Rendering")),this.isDirtyForRenderer(d)){this._sprite.setTexture(a);var g=this.getNewDimensions(a.getDimensions()).floor();this._renderTexture.resizeTo(g),this._renderTexture.clear(),e=this._render(a).then(function(){return b.setDirtyForRenderer(!1,d),b._renderTexture})}else n.a.info(this.constructor.name,"Rendering from cache"),e=m.a.resolve(this._renderTexture);return e.then(function(a){return f&&f.stop(),a})}},{key:"_render",value:function(a){return(this._sdk.getRenderer().isOfType(l.RendererType.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(a)}},{key:"_renderWebGL",value:function(a){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}},{key:"_renderCanvas",value:function(a){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}},{key:"getNewDimensions",value:function(a){return a.clone()}},{key:"onBeforeExport",value:function(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}},{key:"onAfterExport",value:function(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}},{key:"_onBeforeExport",value:function(){}},{key:"_onAfterExport",value:function(){}},{key:"setTemporaryTransformChange",value:function(a,b){this._tempTransformChange=a,this._tempInverseTransformChange=b}},{key:"reset",value:function(){this._dirty=!0,this._glslPrograms={}}},{key:"isDirtyForRenderer",value:function(a){var b=this._dirtiness[a.id];return void 0===b||b}},{key:"setDirtyForRenderer",value:function(a,b){arguments.length>2&&void 0!==arguments[2]&&arguments[2],this._dirtiness[b.id]=a}},{key:"setDirty",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var c in this._dirtiness)this.setDirtyForRenderer(a,{id:c},b)}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){var a=this,b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=this._sdk.getInputDimensions();b&&c.multiply(this._sdk.getZoom()).floor();var d=void 0;return this._sdk.getOperationsStack().forEach(function(b){d||(b!==a?c=b.getNewDimensions(c):d=!0)}),c.floor()}},{key:"clone",value:function(){return new(0,this.constructor)(this._sdk,this.serializeOptions())}},{key:"disposeRenderTextures",value:function(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._sprite.dispose()}}]),b}();s.identifier=null,b.a=s},function(a,b,c){var d=c(0),e=c.n(d),f=c(41),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):c(130),i=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._tag=b,this._name=c,this._start=h()}return g(a,[{key:"stop",value:function(){var a=h()-this._start,b=Math.round(1e3/a);f.Log.info(this._tag,this._name+" took "+a.toFixed(2)+"ms ("+b+" FPS)")}}]),a}();b.a=i},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(41),m=c(33),n=c(52),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return c._onOperationUpdate=c._onOperationUpdate.bind(c),c._cacheEnabled=!0,c._stack=a,c._stack.forEach(function(a){a.on("update",c._onOperationUpdate)}),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.a),o(b,[{key:"clear",value:function(){var a=this;this.forEach(function(b){return a.remove(b)}),this._stack=[]}},{key:"hasChanges",value:function(){return this._stack.filter(function(a){return!!a}).some(function(a){return a.hasChanges()})}},{key:"_onOperationUpdate",value:function(a,b){this.emit(l.Events.OPERATION_UPDATED,a,b)}},{key:"enableCache",value:function(){this._cacheEnabled=!0}},{key:"disableCache",value:function(){this._cacheEnabled=!1}},{key:"forEach",value:function(a){return this._stack.filter(function(a){return!!a}).forEach(a)}},{key:"render",value:function(a,b){var c=this,d=b,e=this._stack.filter(function(a){return!!a}).filter(function(a){return a.getEnabled()});e.reverse();var f=e.filter(function(b){return!b.isDirtyForRenderer(a.getRenderer())})[0],g=e.indexOf(f);e.reverse();var h=0;-1!==g&&(h=e.length-g-1);for(var i=0;i<h;i++)l.Log.info(this.constructor.name,"Skipping "+e[i].constructor.name);for(var j=m.a.resolve(d),k=h;k<e.length;k++)!function(a){var b=e[a],d=void 0,f=void 0;j=j.then(function(a){return b.render(a).then(function(a){return d&&a!==d&&!c._cacheEnabled&&f.disposeRenderTextures(),d=a,f=b,a})})}(k);return j}},{key:"validateSettings",value:function(){return m.a.all(this._stack.filter(function(a){return!!a}).map(function(a){return a.validateSettings()}))}},{key:"setAllToDirty",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.forEach(function(b){return b.setDirty(!0,a)})}},{key:"updateDirtinessForRenderer",value:function(a){for(var b=!1,c=0;c<this._stack.length;c++){var d=this._stack[c];d&&(d.isDirtyForRenderer(a)&&(b=!0),b&&d.setDirtyForRenderer(!0,a))}}},{key:"push",value:function(a){this._stack.push(a),a.on("update",this._onOperationUpdate)}},{key:"pop",value:function(){var a=this._stack.pop();a&&(a.off("update",this._onOperationUpdate),a.dispose())}},{key:"unshift",value:function(a){this._stack.unshift(a),a.on("update",this._onOperationUpdate)}},{key:"clone",value:function(){return new b(this._stack.slice(0))}},{key:"get",value:function(a){return this._stack[a]}},{key:"getByIdentifier",value:function(a){return l.Utils.Array.find(this._stack,function(b){return b&&b.constructor.identifier===a})}},{key:"moveToTop",value:function(a){var b=l.Utils.Array.findIndex(this._stack,function(b){return b&&b.constructor.identifier===a});if(!(b<0||b===this._stack.length-1)){var c=this.getByIdentifier(a);this._stack.splice(b,1),this._stack[this._stack.length]=c}}},{key:"set",value:function(a,b){this._stack[a]&&(this._stack[a].off("update",this._onOperationUpdate),this._stack[a].dispose()),this._stack[a]=b,b.on("update",this._onOperationUpdate)}},{key:"remove",value:function(a){var b=this._stack.indexOf(a);-1!==b&&(this._stack[b]&&(this._stack[b].off("update",this._onOperationUpdate),this._stack[b].dispose()),this._stack.splice(b,1))}},{key:"removeAt",value:function(a){this._stack[a]&&(this._stack[a].off("update",this._onOperationUpdate),this._stack[a].dispose()),delete this._stack[a]}},{key:"getStack",value:function(){return this._stack}},{key:"dispose",value:function(){this.forEach(function(a){a.dispose()})}}]),b}();b.a=p},function(a,b){a.exports={name:"photoeditorsdk",version:"4.14.2",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/pesdk-html5",author:"PhotoEditorSDK (img.ly GmbH) <contact@img.ly>",license:"SEE LICENSE IN LICENSE.md",bin:{},scripts:{start:"npm run watch",release:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_RELEASE=true webpack --progress --colors && cross-env npm run prerender-desktop-css && rimraf build/examples/qa-* && rimraf build/examples/ci-* && rimraf build/**/dev.*","release:production":"cross-env ENV=production npm run release && rm -rf build/examples/shared","release:test":"cross-env ENV=test PESDK_CLEAN=true PESDK_ASSETS=true webpack && npm run prerender-desktop-css","release:development":"cross-env ENV=development PESDK_CLEAN=true PESDK_ASSETS=true npm run release",lint:"eslint --ext .jsx,.js src/js","lint:test":"eslint --ext .jsx,.js test","lint:sdk":"eslint --ext .jsx,.js src/js/sdk","lint:ui":"eslint --ext .jsx,.js src/js/ui","lint:ui:react-ui":"eslint --ext .jsx,.js src/js/ui/react-ui","lint:ui:desktop-ui":"eslint --ext .jsx,.js src/js/ui/desktop-ui",build:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true webpack",rebuild:"cross-env PESDK_ASSETS=true webpack --progress --color",clean:"rimraf build/* doc/* dist/*",watch:"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true ENV=development webpack --watch --progress --colors","watch:test":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true ENV=test webpack --watch --progress --colors","watch:production":"cross-env PESDK_CLEAN=true PESDK_ASSETS=true PESDK_SERVE=true webpack --watch --progress --colors",test:"npm run test:sdk && npm run test:ui:react-ui && npm run test:desktop-ui && npm run server","test:sdk":"cross-env ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk","test:ui:react-ui":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/react-ui/support/helpers test/shared/run-server.js "test/react-ui/*.test.js" "test/react-ui/**/*.test.js"',"test:ui:desktop-ui":'cross-env ENV=test node --stack-size=65500  node_modules/.bin/mocha --require test/desktop-ui/support/helpers test/shared/run-server.js "test/desktop-ui/*.test.js" "test/desktop-ui/**/*.test.js"',"test:server":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/server/support/helpers test/shared/run-server.js "test/server/*.test.js" "test/server/**/*.test.js"',"test:comparison":'cross-env ENV=test node --stack-size=65500 node_modules/.bin/mocha --require test/sdk/support/modules --require test/comparison/support/helpers "test/comparison/*.test.js" "test/comparison/**/*.test.js"',"test:webgl":"cross-env RENDERER=webgl ENV=test node_modules/.bin/mocha --require test/sdk/support/modules --require test/sdk/support/helpers test/sdk",jsdoc:"rimraf doc/photoeditorsdk && jsdoc -c config/jsdoc/jsdoc.json -r","jsdoc:server":"rimraf doc/photoeditorsdk-server && jsdoc -c config/jsdoc/jsdoc.server.json -r","render-filter-previews":"node scripts/run render-filter-previews","prerender-desktop-css":"node scripts/run render-desktop-ui-css",dist:"npm run dist:sdk && npm run dist:server","dist:sdk":"rimraf dist/photoeditorsdk && cp -r build/photoeditorsdk/ dist/photoeditorsdk && find dist/photoeditorsdk -d 2 -name '*.min.*'  | sed 'p;s/.min././' | xargs -n2 cp && npm run jsdoc","dist:server":"rimraf dist/photoeditorsdk-server && cp -r build/photoeditorsdk-server/ dist/photoeditorsdk-server && find dist/photoeditorsdk-server -d 2 -name '*.Server.min.*'  | sed 'p;s/.min././' | xargs -n2 cp  && npm run jsdoc:server"},devDependencies:{adonis:"git://github.com/imgly/adonis.git#v1.0.1",ajv:"^5.5.1","babel-core":"^6.26.3","babel-eslint":"^8.2.1","babel-loader":"^7.1.2","babel-minify-webpack-plugin":"^0.2.0","babel-plugin-external-helpers":"^6.22.0","babel-plugin-transform-adonis-hash":"^0.4.0","babel-plugin-transform-class-properties":"^6.19.0","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-proto-to-assign":"^6.26.0","babel-plugin-transform-runtime":"^6.6.0","babel-preset-env":"^1.7.0","babel-preset-es2015":"^6.6.0","babel-preset-minify":"^0.2.0","babel-preset-react":"^6.5.0","babel-preset-stage-3":"^6.24.1","babel-register":"^6.26.0","babel-runtime":"^6.26.0",chai:"^3.4.0","chai-as-promised":"^5.1.0",chalk:"^2.4.1",chromedriver:"^2.37.0","circular-json-es6":"^2.0.2",classnames:"^2.1.3","clean-webpack-plugin":"^0.1.16","compass-mixins":"^0.12.8","copy-webpack-plugin":"^4.5.2","cross-env":"^5.1.1","css-loader":"^0.28.7",del:"^2.0.0",djv:"^1.2.0",eslint:"^4.16.0","eslint-config-standard":"^11.0.0","eslint-plugin-import":"^2.14.0","eslint-plugin-mocha":"^5.0.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-react":"^7.11.1","eslint-plugin-standard":"^3.0.1",express:"^4.16.2","extract-text-webpack-plugin":"^3.0.2","html-webpack-plugin":"^3.2.0",husky:"^1.2.0",inquirer:"^0.11.4","inquirer-path":"^1.0.0-beta5","isomorphic-fetch":"^2.2.1","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"^3.5.5","json-loader":"^0.5.7","lint-staged":"^8.1.0",lodash:"^4.17.11",minimist:"^1.2.0",mkdirp:"^0.5.1",mocha:"^3.5.3",nightwatch:"git://github.com/imgly/nightwatch.git#feature/file-upload-and-multiple-selectors","node-sass":"^4.9.3","node-static":"^0.7.10","optimize-css-assets-webpack-plugin":"^3.2.0","performance-now":"^0.2.0",pixelmatch:"^4.0.2",pngjs:"^3.3.2","preprocess-loader":"^0.3.0","pretty-error":"^2.0.0",prompt:"^1.0.0","prop-types":"^15.6.0","raw-loader":"^0.5.1",react:"^16.4.1","react-dom":"^16.4.1",rembrandt:"^0.1.3",rimraf:"^2.6.2","sass-loader":"^6.0.6","selenium-server-standalone-jar":"3.4.0",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.14.0",standard:"^9.0.2","standard-loader":"^6.0.1","stats.js":"^0.16.0","style-loader":"^0.13.1","term-img2":"^2.0.1","transform-loader":"^0.2.2","uglifyjs-webpack-plugin":"^1.2.5","vinyl-source-stream":"0.1.1",webpack:"^3.12.0","webpack-notifier":"^1.2.1"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"],parser:"babel-eslint"},dependencies:{canvas:"^2.1.0",gl:"^4.1.1",opn:"^5.3.0",request:"^2.88.0"},"lint-staged":{"*.js":["eslint --fix","git add"],"*.jsx":["eslint --fix","git add"]},husky:{hooks:{"pre-commit":"lint-staged","pre-push":"true"}}}},function(a,b,c){function d(a,b,c,d,e){return(a-b)*(e-d)/(c-b)+d}var e=c(0),f=c.n(e),g=c(2),h=c.n(g),i=c(3),j=c.n(i),k=c(1),l=c.n(k),m=c(4),n=(c.n(m),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),o=m.Math.ColorMatrix,p=function(a){return(Math.max(a.r,a.g,a.b)+Math.min(a.r,a.g,a.b))/2},q=function(a){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||l()(b)).call(this));return a._fragmentSource=c(263),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=j()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(h.a?h()(a,b):a.__proto__=b)}(b,m.Engine.Filter),n(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var e=b.getCanvas(),f=b.getContext(),g=c.getContext(),h=f.getImageData(0,0,e.width,e.height),i=this._options,j=i.colorMatrix,k=i.gamma,l=i.shadows,n=i.highlights,o=i.whites,q=i.blacks,r=1!==k,s=0!==l||0!==n,t=new m.Color(0,0,0,0),u=0;u<e.width*e.height;u++){var v=4*u;if(t.r=h.data[v]/255,t.g=h.data[v+1]/255,t.b=h.data[v+2]/255,r&&(t.r=Math.pow(t.r,1/Math.max(k,1e-7)),t.g=Math.pow(t.g,1/Math.max(k,1e-7)),t.b=Math.pow(t.b,1/Math.max(k,1e-7))),s){var w=p(t),x=l>=0?m.Utils.clamp(Math.pow(w,1/(l+1))+-.76*Math.pow(w,2/(l+1))-w,0,Math.max(l,1)):-m.Utils.clamp(Math.pow(w,1/(1-l))+-.76*Math.pow(w,2/(1-l))-w,0,Math.max(-l,1)),y=x*w*w,z=x-y,A=w+y+(n<0?m.Utils.clamp(1-Math.pow(1-w,1/(1-n))- -.8*Math.pow(1-w,2/(1-n))-w,-1,0):-m.Utils.clamp(1-Math.pow(1-w,1/(1+n))- -.8*Math.pow(1-w,2/(1+n))-w,-1,0));t.r=m.Utils.clamp(A*((t.r+z)/Math.max(w,1e-7)),0,1),t.g=m.Utils.clamp(A*((t.g+z)/Math.max(w,1e-7)),0,1),t.b=m.Utils.clamp(A*((t.b+z)/Math.max(w,1e-7)),0,1)}(t=j.apply(t)).r=d(t.r,0,1,q/2,1+o/2),t.g=d(t.g,0,1,q/2,1+o/2),t.b=d(t.b,0,1,q/2,1+o/2),h.data[v]=255*t.r,h.data[v+1]=255*t.g,h.data[v+2]=255*t.b}g.putImageData(h,0,0)}}]),b}();q.prototype.availableOptions={gamma:{type:m.OptionType.NUMBER,default:1,uniformType:m.UniformType.FLOAT},shadows:{type:m.OptionType.NUMBER,default:0,uniformType:m.UniformType.FLOAT},highlights:{type:m.OptionType.NUMBER,default:1,uniformType:m.UniformType.FLOAT},whites:{type:m.OptionType.NUMBER,default:0,uniformType:m.UniformType.FLOAT},blacks:{type:m.OptionType.NUMBER,default:0,uniformType:m.UniformType.FLOAT},colorMatrix:{type:m.OptionType.COLOR_MATRIX,default:new o,uniformType:m.UniformType.MAT4},colorOffset:{type:m.OptionType.ARRAY,default:[],uniformType:m.UniformType.FLOAT4}},b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(7)),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"render",value:function(a,b,c){return l.Promise.resolve(c)}},{key:"hasChanges",value:function(){return!1}}]),b}();o.isIdentity=!0,o.identifier="identity",b.a=o},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=n()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(l.a?l()(a,b):a.__proto__=b)}var g=c(5),h=c.n(g),i=c(0),j=c.n(i),k=c(2),l=c.n(k),m=c(3),n=c.n(m),o=c(1),p=c.n(o),q=c(4),r=(c.n(q),c(11)),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function(a){function b(){var a;d(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];var i=e(this,(a=b.__proto__||p()(b)).call.apply(a,[this].concat(g)));return i._fragmentSource=c(291),i}return f(b,q.Engine.Filter),s(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=this._options.lookupTableData,i=0;i<d.width*d.height;i++){var j=4*i,k=g.data[j];g.data[j]=h[4*k];var l=g.data[j+1];g.data[j+1]=h[1+4*l];var m=g.data[j+2];g.data[j+2]=h[2+4*m]}f.putImageData(g,0,0)}}]),b}();t.prototype.availableOptions={lookupTable:{type:q.OptionType.NUMBER,default:1,uniformType:q.UniformType.INT},lookupTableData:{type:q.OptionType.ARRAY,default:[]}};var u=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||p()(b)).call.apply(a,[this].concat(f)));return h._filter=new t({lookupTable:h._options.textureGLUnit}),h._textures={},h._renderers={},h}return f(b,r.a),s(b,[{key:"update",value:function(a){var b=a.getRenderer();b.isOfType(q.RendererType.WEBGL)?this._updateWebGLTexture(a):b.isOfType(q.RendererType.CANVAS)&&this._filter.setLookupTableData(this._options.data)}},{key:"_updateWebGLTexture",value:function(a){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");var b=new Uint8Array(this._options.data),c=a.getRenderer(),d=c.id;this._renderers[d]=c,this._textures[d]||(this._textures[d]=new q.Engine.BaseTexture);var e=this._textures[d],f=new q.Engine.PixelArrayImage(256,1,b);e.setSource(f),e.setGLUnit(this._options.textureGLUnit),c.isOfType(q.RendererType.WEBGL)&&c.updateTexture(e)}},{key:"dispose",value:function(){for(var a in function a(b,c,d){null===b&&(b=Function.prototype);var e=h()(b,c);if(void 0===e){var f=p()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||p()(b.prototype),"dispose",this).call(this),this._textures)this._textures[a].dispose(),delete this._textures[a];delete this._options.data}}]),b}();b.a=u},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(353)),p=c(57),q=c(148),r=c(355),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},u=n.Math.Vector2,v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._persistedPaths=[],f._outputCanvasDirty=!0,f._outputCanvas=n.Utils.createCanvas(),f._outputContext=f._outputCanvas.getContext("2d"),f._persistCanvas=n.Utils.createCanvas(),f._persistContext=f._persistCanvas.getContext("2d"),f._nextCanvas=n.Utils.createCanvas(),f._texture=n.Engine.Texture.fromCanvas(f._outputCanvas),f._sprite.setTexture(f._texture),f._onPathUpdate=f._onPathUpdate.bind(f),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.a),s(b,[{key:"applyFlip",value:function(a){this._options.paths.forEach(function(b){b.forEachControlPoint(function(b){var c=b.getPosition().clone();switch(a){case"horizontal":c.x=1-c.x;break;case"vertical":c.y=1-c.y}b.setPosition(c)}),b.setDirty(!0)}),this._reset()}},{key:"applyRotation",value:function(a){this._options.paths.forEach(function(b){b.forEachControlPoint(function(b){var c=b.getPosition().clone();90===a?(c.flip(),c.x=1-c.x):-90===a&&(c.flip(),c.y=1-c.y),b.setPosition(c)}),b.setDirty(!0)}),this._reset()}},{key:"applyTransform",value:function(a){var b=null;this._options.paths.forEach(function(c){c.forEachControlPoint(function(b){b.setPosition(a.applyToRelativePoint(b.getPosition()))});var d=c.getBrush();d!==b&&(d.setSize(a.applyToRelativeSize(d.getSize())),b=d),c.setDirty(!0)}),this._reset()}},{key:"clearCanvas",value:function(){if(this._outputCanvas){this._outputCanvasDirty=!0;var a=this._outputCanvas,b=a.width,c=a.height;this._outputContext.clearRect(0,0,b,c)}}},{key:"clearPersistCanvas",value:function(){if(this._persistCanvas){var a=this._persistCanvas,b=a.width,c=a.height;this._persistContext.clearRect(0,0,b,c)}}},{key:"serializeOptions",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=t(b.prototype.__proto__||m()(b.prototype),"serializeOptions",this).call(this,a,c);return a||(d.type="brush"),d}},{key:"serializeOption",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"paths"===a?this._options.paths.map(function(a){return a.serializeOptions(void 0,c)}):t(b.prototype.__proto__||m()(b.prototype),"serializeOption",this).call(this,a,c)}},{key:"createPath",value:function(a){var b=new o.a(this._operation,{brush:a},this._nextCanvas);return b.on("update",this._onPathUpdate),this._options.paths.push(b),this.setDirty(!0),b}},{key:"_onPathUpdate",value:function(){this._operation.setDirty(!0),this.setDirty(!0)}},{key:"_onPathPersist",value:function(a){
a.renderToCanvas(this._persistCanvas),this._nextCanvas=a.getCanvas(),this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(a)}},{key:"_getTexture",value:function(){return this._texture}},{key:"setDirtyForRenderer",value:function(a,c){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t(b.prototype.__proto__||m()(b.prototype),"setDirtyForRenderer",this).call(this,a,c,d),a&&d&&(this._persistedPaths=[],this._options.paths.forEach(function(a){a.setDirty(!0)}))}},{key:"setDirty",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var c in this._dirtiness)this.setDirtyForRenderer(a,this._renderers[c],b)}},{key:"render",value:function(a){var b=this,c=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(c)&&(n.Utils.ensureCanvasDimensions(this._outputCanvas,a),n.Utils.ensureCanvasDimensions(this._persistCanvas,a),this._options.paths.forEach(function(c){c.render(a),c.getClosed()&&-1===b._persistedPaths.indexOf(c)&&b._onPathPersist(c)}),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach(function(a){a.getClosed()||a.renderToCanvas(b._outputCanvas)}),this.setDirtyForRenderer(!1,c))}},{key:"update",value:function(a,c){c&&(n.Utils.ensureCanvasDimensions(this._outputCanvas,c),n.Utils.ensureCanvasDimensions(this._persistCanvas,c),this._texture.getBaseTexture().update()),this.render(c);var d=a.getRenderer();d.isOfType(n.RendererType.WEBGL)&&d.updateTexture(this._texture.getBaseTexture()),t(b.prototype.__proto__||m()(b.prototype),"update",this).call(this,a,c)}},{key:"_reset",value:function(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}},{key:"getCanvas",value:function(){return this._outputCanvas}},{key:"dispose",value:function(){t(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._texture&&this._texture.getBaseTexture().dispose()}}]),b}();v.prototype.availableOptions={id:{type:n.OptionType.STRING,default:function(){return n.Utils.getUUID()}},position:{type:n.OptionType.VECTOR2,default:new u(0,0)},scale:{type:n.OptionType.VECTOR2,default:new u(1,1)},anchor:{type:n.OptionType.VECTOR2,default:new u(0,0)},pivot:{type:n.OptionType.VECTOR2,default:new u(0,0)},rotation:{type:n.OptionType.NUMBER,default:0},paths:{type:n.OptionType.ARRAY,default:[],setter:function(a){var b=this;return a=a.map(function(a){if(a instanceof o.a)return a;var c=a.brush,d=a.closed,e=new o.a(b._operation,{brush:c,closed:d},b._nextCanvas);return a.controlPoints.forEach(function(a){e.addControlPoint(a)}),e}),this._reset(),a}}},v.type="brush",v.Brush=q.a,v.Path=o.a,v.Brushes={RadialBrush:r.a},b.a=v},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.Math.Vector2,o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._lastOptions={},f._lastInputDimensions=new n(0,0),f._brush=null,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),m(b,[{key:"getBrushImage",value:function(a){if(this._brush&&this.optionsEqual(this._lastOptions)&&a.equals(this._lastInputDimensions))return this._brush;var b=this._options,c=b.image,d=b.size;c.width=c.height=Math.ceil(d*a.min());var e=l.Utils.createCanvas();e.width=c.width,e.height=c.height;var f=e.getContext("2d");f.drawImage(c,0,0,e.width,e.height);var g=this._tintImageData(f.getImageData(0,0,e.width,e.height),e.width,e.height);return f.putImageData(g,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=e,this._lastInputDimensions=a.clone(),e}},{key:"_tintImageData",value:function(a){for(var b=this._options.color,c=0;c<a.data.length;c+=4)a.data[c]+=(255*b.r-a.data[c])*b.a,a.data[c+1]+=(255*b.g-a.data[c+1])*b.a,a.data[c+2]+=(255*b.b-a.data[c+2])*b.a;return a}},{key:"clone",value:function(){return new(0,this.constructor)(this._options)}}]),b}();b.a=o,o.prototype.availableOptions={identifier:{type:l.OptionType.STRING},image:{type:l.OptionType.IMAGE},size:{type:l.OptionType.NUMBER,default:.05},color:{type:l.OptionType.COLOR,default:l.Color.RED}}},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=function(a){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return a._fragmentSource=c(356),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Engine.Filter),m(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=this._options,h=g.maskCanvas,i=g.filterCanvas,j=h.getContext("2d"),k=i.getContext("2d"),l=j.getImageData(0,0,d.width,d.height).data,m=e.getImageData(0,0,d.width,d.height),n=m.data,o=k.getImageData(0,0,d.width,d.height).data,p=void 0,q=0;q<d.width*d.height*4;q+=4)p=l[q]/255,n[q]=p*o[q]+(1-p)*n[q],n[q+1]=p*o[q+1]+(1-p)*n[q+1],n[q+2]=p*o[q+2]+(1-p)*n[q+2];f.putImageData(m,0,0)}}]),b}();n.prototype.availableOptions={maskImage:{type:l.OptionType.NUMBER,default:1,uniformType:l.UniformType.INT},maskCanvas:{type:l.OptionType.OBJECT,default:null},filterImage:{type:l.OptionType.NUMBER,default:2,uniformType:l.UniformType.INT},filterCanvas:{type:l.OptionType.OBJECT,default:null}},b.a=n},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=(c.n(f),c(151)),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=f.Math.Vector2,j=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._text=b,this._operation=c,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}return h(a,[{key:"_createCanvas",value:function(){this._canvas=f.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new g.a(this._context),this._finalCanvas=f.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}},{key:"_createTexture",value:function(){this._texture=f.Engine.Texture.fromCanvas(this._canvas),this._finalTexture=f.Engine.Texture.fromCanvas(this._finalCanvas)}},{key:"_applyTextOptions",value:function(a,b){b.font=this._text.getFontStyle()+" "+this._text.getFontWeight()+" "+a.fontSize+'px "'+this._text.getFontFamily()+'"',b.textBaseline="top",b.textAlign=this._text.getAlignment(),b.fillStyle=this._text.getColor().toRGBA(),b.strokeStyle=this._text.getOutlineColor().toRGBA();var c=this._text.getOutlineWidth();c>0&&(b.lineWidth=c)}},{key:"_buildOutputLines",value:function(a){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(a),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(a,b){var c=this._text.getAlignment(),d=new i(0,b);switch(c){case"center":d.x=this._canvas.width/2;break;case"right":d.x=this._canvas.width}this._context.fillText(a,d.x,d.y),this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(a,d.x,d.y))}},{key:"update",value:function(a,b){var c=this.calculateFontStyles(a,b);if(c){var d=this._calculateText(a,c,b),e=d.dimensions,f=d.lines;this._renderText(a,e,f,c,b),this._updateFinalTexture()}}},{key:"_updateFinalTexture",value:function(){var a=this._canvas,b=a.width,c=a.height,d=this.rotation,e=Math.cos(d),f=Math.sin(d),g=new i(Math.abs(b*e)+Math.abs(c*f),Math.abs(b*f)+Math.abs(c*e));this._finalCanvas.width=g.x,this._finalCanvas.height=g.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(d),this._finalContext.drawImage(this._canvas,-b/2,-c/2),this._finalContext.restore()}},{key:"_renderText",value:function(a,b,c,d,e){this._canvas.width=b.x,this._canvas.height=b.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*e.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,b.x,b.y),this._applyTextOptions(d,this._context);for(var f=0;f<c.length;f++){var g=c[f];this._renderTextLine(g,d.topPadding+d.lineHeight*f)}}},{key:"calculateFontStyles",value:function(a,b){var c=this._text.getFontFamily(),d=this._text.getFontSize()*b.y,e=this._text.getAbsoluteTextHeight(b),f=e*this._text.getLineHeight(),g={fontFamily:c,fontSize:d,lineHeight:f,topPadding:e*(this._text.getLineHeight()-1)/2};return this._textOptions.fontFamily===c&&this._textOptions.fontSize===d&&this._textOptions.lineHeight===f||(this._textOptions=g),g}},{key:"_calculateText",value:function(a,b,c){var d=this._text.getMaxWidth()*c.x;this._applyTextOptions(b,this._context);var e=new i,f=this._text.getText().split("\n");if(void 0!==d)e.x=d,f=this._buildOutputLines(d);else for(var g=0;g<f.length;g++){var h=f[g];e.x=Math.max(e.x,this._context.measureText(h).width)}var j=b.lineHeight;return e.y=f.length*j,{dimensions:e,lines:f}}},{key:"getTexture",value:function(){return this._texture}},{key:"getFinalTexture",value:function(){return this._finalTexture}},{key:"getDimensions",value:function(a,b){var c=this.calculateFontStyles(a,b);return this._calculateText(a,c,b).dimensions}},{key:"dispose",value:function(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.getBaseTexture().dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.getBaseTexture().dispose(),this._finalTexture=null)}}]),a}();b.a=j},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._context=b,this._lastFontStyle={}}return f(a,[{key:"getLines",value:function(){for(var a=this,b=[],c=[],d=this._lines.length,e=0;e<d;e++){for(var f=this._lines[e],g=this._buildWords(f),h=g.length,i=0;i<h;i++){var j=g[i],k=c.concat(j).join("").replace(/\s+$/i,"");if(this._getWidth(k)>this._maxWidth){c.length>0&&(b.push(c.join("")),c=[j]);var l=j.replace(/\s+$/i,"");if(this._getWidth(l)>this._maxWidth){var m=this._splitWord(j);b=b.concat(m.lines),m.rest&&(c=[m.rest])}}else c.push(j)}b.push(c.join("")),c=[]}return b.map(function(b){return a._trimLine(b,a._context.textAlign)})}},{key:"_trimLine",value:function(a,b){return a}},{key:"_buildWords",value:function(a){for(var b=[],c="",d=a.length,e=0;e<d;e++){var f=a[e];c+=f," "!==f&&"-"!==f&&e!==d-1||(b.push(c),c="")}return b}},{key:"_splitWord",value:function(a){for(var b={lines:[],rest:null},c=a.length,d=[],e=0;e<c;e++){var f=a[e];this._getWidth(d.concat(f).join(""))>this._maxWidth?(d.length>0&&b.lines.push(d.join("")),d=[f]):d.push(f),e===c-1&&d.length>0&&(b.rest=d.join(""))}return b}},{key:"_fontStyleChanged",value:function(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}},{key:"_getWidth",value:function(a){return this._context.measureText(a).width}},{key:"setText",value:function(a){this._text=a,this._lines=a.split("\n")}},{key:"setMaxWidth",value:function(a){this._maxWidth=a}}]),a}();b.a=g},function(a,b,c){c.d(b,"a",function(){return x});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(58)),r=c(19),s=c(104),t=c(34),u=c(106),v=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),w(b,[{key:"_fontForRow",value:function(a,b){var c=this.getFontIdentifiers();return c[a%c.length]}},{key:"_minimumNumberOfLines",value:function(a){return Math.max(Math.floor(.7*function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||o()(b.prototype),"_minimumNumberOfLines",this).call(this,a)),1)}},{key:"_maximumNumberOfLines",value:function(a){return Math.max(Math.floor(a.countNumberOfCharacters()/5),1)}},{key:"_randomLayoutRow",value:function(a,c,d,e){return this._createSingleRow(b.RowType.Single,a,d,e)}},{key:"_createSingleRow",value:function(a,c,d,e){var f=e.getFontIdentifier(),g="imgly_font_amberlight"===f||"imgly_font_handycheera_regular"===f?(new t.a).set(c.getLowerCase()):c;switch(a){case b.RowType.Single:return new r.a({words:g,width:d,attributes:e});case b.RowType.SingleImage:return new u.a({words:g,width:d,attributes:e});default:return p.Log.warn("TextDesignCelebrate#_createSingleRow: Invalid row type '"+a+"'"),null}}}]),b}();x.defaultFontIdentifiers=["imgly_font_handycheera_regular","imgly_font_rasa_regular"],x.defaultBanderoles=[s.a.Celebrate1,s.a.Celebrate2],x.identifier="imgly_text_design_celebrate",x.RowType={Single:"SINGLE",SingleImage:"SINGLE_IMAGE"},x.prototype.availableOptions=v({},q.a.prototype.availableOptions,{relativeLineSpacing:{type:p.OptionType.NUMBER,default:.01875},fontIdentifiers:{type:p.OptionType.ARRAY,default:x.defaultFontIdentifiers},banderoles:{type:p.OptionType.ARRAY,default:x.defaultBanderoles}})},function(a,b,c){c.d(b,"a",function(){return x});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(60)),p=c(34),q=c(77),r=c(42),s=c(61),t=c(35),u=c(23),v=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f.setSize(new u.a(f.getWidth(),f.getHeight())),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),w(b,[{key:"_getImageFrame",value:function(){var a=this._getTextFrame().clone(),b=this.getImage();if(this.getDrawingModeAspectFit()&&b){var c=Math.min(a.width/b.width,a.height/b.height),d=b.width*c,e=b.height*c;a.x+=(a.width-d)/2,a.y+=(a.height-e)/2,a.width=d,a.height=e}return a}},{key:"_calculateLayoutElements",value:function(){return[new r.a({text:"",frame:this._getImageFrame(),font:new s.a})]}},{key:"render",value:function(a){var b=this.getImage(),c=this._getImageFrame(),d=this.getAttributes().getTextColor();Object(t.a)(a,b,c,d)}}]),b}();x.RowImages={decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"},x.prototype.availableOptions=v({},o.a.prototype.availableOptions,{words:{type:n.OptionType.OBJECT,default:new p.a},height:{type:n.OptionType.NUMBER,default:0},image:{type:n.OptionType.IMAGE,default:null},imagePath:{type:n.OptionType.STRING,default:x.RowImages.decorative1},drawingModeAspectFit:{type:n.OptionType.BOOLEAN,default:!1},attributes:{type:n.OptionType.CONFIGURABLE,default:new q.a}})},function(a,b,c){c.d(b,"a",function(){return z});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(59)),r=c(19),s=c(17),t=c(372),u=c(34),v=c(16),w=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},z=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f._relativeInsets=new s.a(.1,.1,.1,.1),f._alreadyContainsARowWithScriptFont=!1,f._backgroundsRandomizer=new v.a(0),f._seedPool.push(f._backgroundsRandomizer),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),x(b,[{key:"getImagePaths",value:function(){return p.Utils.Array.flatten(t.a.Backgrounds.map(function(a){return a.getImagePaths()}))}},{key:"_getBackground",value:function(){return this._backgroundsRandomizer.pickNext(t.a.Backgrounds)}},{key:"generateLayoutData",value:function(a,c){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),y(b.prototype.__proto__||o()(b.prototype),"generateLayoutData",this).call(this,a,c)}},{key:"_modifiedText",value:function(a){return y(b.prototype.__proto__||o()(b.prototype),"_modifiedText",this).call(this,a).toUpperCase()}},{key:"_fontForRow",value:function(a,c){var d=y(b.prototype.__proto__||o()(b.prototype),"_fontForRow",this).call(this,a,c);return"imgly_font_petit_formal_script"===d&&(this._alreadyContainsARowWithScriptFont&&(d="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),d}},{key:"_randomLayoutRow",value:function(a,b,c,d){var e="imgly_font_petit_formal_script"===d.getFontIdentifier();return new r.a({words:e?(new u.a).set(a.getLowerCase()):a,width:c,attributes:d})}}]),b}();z.identifier="imgly_text_design_equal_width",z.defaultFontIdentifiers=["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"],z.prototype.availableOptions=w({},q.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:z.defaultFontIdentifiers},relativeLineSpacing:{type:p.OptionType.NUMBER,default:.025}})},function(a,b,c){c.d(b,"a",function(){return n});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),m(b,[{key:"render",value:function(a,b,c,d,e){l.Log.warn("TextDesignBackground#render: Abstract class")}}]),b}();n.prototype.availableOptions={}},function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return l()(a)}c.d(b,"a",function(){return J});var e=c(6),f=c.n(e),g=c(71),h=c.n(g),i=c(72),j=c.n(i),k=c(15),l=c.n(k),m=c(0),n=c.n(m),o=c(5),p=c.n(o),q=c(2),r=c.n(q),s=c(3),t=c.n(s),u=c(1),v=c.n(u),w=c(4),x=(c.n(w),c(59)),y=c(19),z=c(20),A=c(17),B=c(34),C=c(153),D=c(106),E=c(16),F=f.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},G=function(){return function(a,b){if(Array.isArray(a))return a;if(h()(Object(a)))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=j()(a);!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),n()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),I=function a(b,c,d){null===b&&(b=Function.prototype);var e=p()(b,c);if(void 0===e){var f=v()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},J=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||v()(b)).call.apply(a,[this].concat(d)));return f._relativeInsets=new A.a(0,.3,0,.3),f._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],f._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],f._lineCount=0,f._decorativeRowCreated=!1,f._useImageRowRandomizer=new E.a(0),f._rowTypeRandomizer=new E.a(0),f._lineDecorativeTypeRandomizer=new E.a(0),f._seedPool.push(f._useImageRowRandomizer),f._seedPool.push(f._rowTypeRandomizer),f._seedPool.push(f._lineDecorativeTypeRandomizer),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=t()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(r.a?r()(a,b):a.__proto__=b)}(b,x.a),H(b,[{key:"getImagePaths",value:function(){return[].concat(d(b.DecoratorImages),d(b.RowImages))}},{key:"_fontForRow",value:function(a,b){var c=this,d=b.countNumberOfCharacters(),e=this.getFontIdentifiers();return d<4?e=e.filter(function(a){return c._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(a)<0}):d<5&&(e=e.filter(function(a){return c._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(a)<0})),e[a%e.length]}},{key:"_modifiedText",value:function(a){return I(b.prototype.__proto__||v()(b.prototype),"_modifiedText",this).call(this,a).toUpperCase()}},{key:"_modifiedLines",value:function(a){return this._lineCount=a.length,a}},{key:"generateLayoutData",value:function(a,c){return this._decorativeRowCreated=!1,I(b.prototype.__proto__||v()(b.prototype),"generateLayoutData",this).call(this,a,c)}},{key:"_randomLayoutRow",value:function(a,b,c,d){var e=a;switch(d.getFontIdentifier()){case"imgly_font_wolesbro":e=(new B.a).set(a.getLowerCase());break;case"imgly_font_permanent_marker":e=(new B.a).set(a.getUpperCase())}var f=this.getDecorativeRowsInTheMiddleOnly()&&(0===b||b===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||f)return new y.a({words:e,width:c,attributes:d});this._decorativeRowCreated=!0;var g=this._randomDecoratorImages(),h=G(g,2),i=h[0],j=h[1];return new D.a({words:a,width:c,attributes:d,leftImage:i,rightImage:j})}},{key:"_layoutRows",value:function(a,c){var e=I(b.prototype.__proto__||v()(b.prototype),"_layoutRows",this).call(this,a,c);if(!this.getDecorationsVisible())return e;var f=new C.a({width:c,height:25,image:z.a.getImage(this._rowTypeRandomizer.pickNext(b.RowImages))}).layout(),g=new C.a({width:c,height:25,image:z.a.getImage(this._rowTypeRandomizer.pickNext(b.RowImages))}).layout();return[f].concat(d(e),[g])}},{key:"_randomDecoratorImages",value:function(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?b.DecoratorImages.slice(0,2).map(function(a){return z.a.getImage(a)}):b.DecoratorImages.slice(2).map(function(a){return z.a.getImage(a)})}}]),b}();J.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"],J.identifier="imgly_text_design_sunshine",J.RowImages=[C.a.RowImages.decorative1,C.a.RowImages.decorative2,C.a.RowImages.decorative3,C.a.RowImages.decorative4],J.DecoratorImages=["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"],J.prototype.availableOptions=F({},x.a.prototype.availableOptions,{fontIdentifiers:{type:w.OptionType.ARRAY,default:J.defaultFontIdentifiers},relativeLineSpacing:{type:w.OptionType.NUMBER,default:.025/3*4},decorationsVisible:{type:w.OptionType.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:w.OptionType.BOOLEAN,default:!1}})},function(a,b,c){a.exports=c(4),c(261)},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(159),e=c(138),f=c(139),g=c(69),h=c(51),i=c(140),j=c(52),k=c(22),l=c(258),m=c(142),n=c(101),o=c(75),p=c(33),q=c(55),r=c(26),s=c(259),t=c(32),u=c(50);d.a.version=c(143).version,d.a.Math=e,d.a.Operations=f,d.a.Engine=g.a,d.a.Color=h.a,d.a.Operation=i.a,d.a.EventEmitter=j.a,d.a.Utils=k.a,d.a.Env=l.a,d.a.OperationsStack=m.a,d.a.EXIF=n.a,d.a.Image=o.a,d.a.Promise=p.a,d.a.Configurable=q.a,d.a.Log=r.a,d.a.Loaders=s,d.a.RenderType=t.RenderType,d.a.ImageFormat=t.ImageFormat,d.a.OptionType=t.OptionType,d.a.RendererType=t.RendererType,d.a.UniformType=t.UniformType,d.a.Base64=u.a,d.a.UI={},b.default=d.a},function(a,b,c){function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}var e=c(36),f=c.n(e),g=c(40),h=c.n(g),i=c(0),j=c.n(i),k=c(2),l=c.n(k),m=c(3),n=c.n(m),o=c(30),p=c.n(o),q=c(1),r=c.n(q),s=c(41),t=c(139),u=c(142),v=c(254),w=c(101),x=(c(75),c(257)),y=c(141),z="function"==typeof h.a&&"symbol"==typeof f.a?function(a){return typeof a}:function(a){return a&&"function"==typeof h.a&&a.constructor===h.a&&a!==h.a.prototype?"symbol":typeof a},A=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),B=function(a){return F.byteArrayToString(K.decode(a))},C=s.Rectangle,D=s.Constants,E=s.Engine,F=s.Utils,G=s.EventEmitter,H=s.Events,I=s.Vector2,J=s.Log,K=s.Base64,L=s.Color,M=D.RenderType,N=D.ImageFormat,O=D.RendererType,P=function(a){function b(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var f=d(this,(b.__proto__||r()(b)).call(this));f._onOperationUpdate=f._onOperationUpdate.bind(f),f._onContextRestored=f._onContextRestored.bind(f);var g=c(143).version;if(f.version=g,f[B("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,f._preferredRenderer=a,f._options=F.defaults(e,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:L.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),f._options.smoothUpscaling&&(E.BaseTexture.DefaultMagFilter=E.BaseTexture.LinearFilter),f._options.extensions=F.defaults(f._options.extensions,{operations:[],controls:[],languages:[]}),J.setLevel(f._options.logLevel),f[B("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,f[B("X29wdGlvbnM=")][B("bGljZW5zZQ==")]){if(!f._v())return d(f);var h=s[B("TGljZW5zZUNoZWNrZXI=")];f._l=new h(f[B("X29wdGlvbnM=")][B("bGljZW5zZQ==")]),f._cv(!0).then(function(){f._ct()}).catch(function(a){J.error(B("TGljZW5zaW5n"),a.message)})}else f[B("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,f._l=new(s[B("RnJlZUxpY2Vuc2VDaGVja2Vy")]);f._defaultRenderMode=f._options.renderMode,f._renderMode=f._options.renderMode,f._textureQuality=f._options.textureQuality,f._offset=new I,f._zoom=f._options.zoom,f._spriteScale=f._options.spriteScale,f._rotation=f._options.rotation,f._operations={},f._operationsStack=null,f.setOperationsStack(new u.a),f._container=new E.Container,f._sprite=new E.Sprite,f._container.addChild(f._sprite),f._inputTexture=f._options.inputTexture,f._currentInputTexture=null,f._currentTexture=null,f._resizedTexture=null,
f._resizedContainer=new E.Container,f._resizedSprite=new E.Sprite,f._resizedContainer.addChild(f._resizedSprite),f._texturesToDispose=[],f.setSmoothDownscaling(f._options.smoothDownscaling),f._checkForUpdates(),f._registerOperations(),f._initRenderer();var i=f._renderer.constructor.type;return f._options.displayWelcomeMessage&&J.log("Version:",f.version+" ("+i+") - https://www.photoeditorsdk.com"),f[B("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&J.log(B("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS91c2Vycy9uZXcgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2RvY3MucGhvdG9lZGl0b3JzZGsuY29tL2d1aWRlcy9odG1sNS92NC9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),f._options.image&&f.setImage(f._options.image,f._options.exif),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=n()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(l.a?l()(a,b):a.__proto__=b)}(b,G),A(b,[{key:"_v",value:function(){return!!this[B("X29wdGlvbnM=")][B("bGljZW5zZQ==")]||(J.error(B("TGljZW5zaW5n"),B("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),J.error(B("TGljZW5zaW5n"),B("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_ct",value:function(){this._l.exp()&&(this._l.isExp()?J.error(B("TGljZW5zaW5n"),B("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):J.warn(B("TGljZW5zaW5n"),B("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl())))}},{key:"_cv",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._l.c().catch(function(c){a[B("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;var d=B("SW52YWxpZCBsaWNlbnNlLg==");throw b&&(d="ELICEXP"===c.code?B("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===c.code?B("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname+".":"ELICINVPLAT"===c.code?B("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===c.code?B("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",z(a._options.license)):B("ELICINV"===c.code?"SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu":"SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),c.message=d,new Error(c)})}},{key:"_t",value:function(){this._l.t()}},{key:"_onOperationUpdate",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];this.emit.apply(this,[H.OPERATION_UPDATED].concat(b))}},{key:"_onContextRestored",value:function(){J.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(a){a.disposeRenderTextures()}),this.render()}},{key:"export",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.DATAURL,b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.PNG,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this._cv(!0).then(function(){return b.hasChanges()&&b._t(),b._operationsStack.forEach(function(a){a.onBeforeExport()}),new x.a(b,{renderType:a,imageFormat:c,quality:d}).export().then(function(a){return b._operationsStack.forEach(function(a){a.onAfterExport()}),p.a.resolve(a)})})}},{key:"render",value:function(){var a=this,b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var c=this._renderer.getContext();c.startFrame&&c.startFrame();var d=void 0;J.canLog("info")&&(d=new y.a("⚡⚡⚡","Frame rendering")),J.info("⚡⚡⚡","Rendering starts");var e=this._operationsStack;return e.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then(function(b){"export"===a._renderMode&&(b=a._inputTexture),a._currentTexture=b,a._sprite.setTexture(b),a._container.updateTransform()}).then(function(){return e.validateSettings()}).then(function(){return a[B("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&(e.getByIdentifier("license-watermark")?e.moveToTop("license-watermark"):a.createOperation("license-watermark")),e.render(a,a._currentTexture)}).then(function(c){switch(a._currentTexture=c,a._sprite.setTexture(a._currentTexture),a._renderMode){case"dynamic":var d=a._renderer.getDimensions().clone().divide(2).add(a._offset);a._container.setScale(a._zoom/a.getTextureScale(),a._zoom/a.getTextureScale()),a._container.setPosition(d),a._sprite.setAnchor(.5,.5),a._sprite.setScale(a._spriteScale,a._spriteScale),a._sprite.setRotation(a._rotation);break;case"export":a._container.setScale(1,1),a._container.setPosition(0,0),a._sprite.setAnchor(0,0),a._sprite.setPosition(0,0),a._sprite.setScale(a._spriteScale,a._spriteScale),a._sprite.setRotation(0)}return b&&a._renderer.render(a._container),c}).then(function(b){return d&&d.stop(),c.endFrame&&c.endFrame(),a._disposeTextures(),b})}},{key:"getTextureScale",value:function(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}},{key:"_prepareTexture",value:function(){var a=this;return new p.a(function(b,c){var d=a.getTextureScale();if(1===a._textureQuality)return b(a._inputTexture);var e=a.getInputDimensions().multiply(d).floor(),f=void 0;a._resizedTexture?a._resizedTexture.getDimensions().equals(e)||(a._resizedTexture.resizeTo(e),f=!0):(a._resizedTexture=new E.RenderTexture(a._renderer,e.x,e.y),f=!0),f&&(a._resizedSprite.setScale(d,d),a._resizedSprite.setTexture(a._inputTexture),a._resizedTexture.render(a._resizedContainer)),b(a._resizedTexture)})}},{key:"_registerOperations",value:function(){for(var a in this._operations={},t){var b=t[a];this._operations[b.identifier]=b}this._operations=F.extend(this._operations,this._options.extensions.operations)}},{key:"registerOperations",value:function(a){var b=this;a.forEach(function(a){b._operations[a.identifier]=a})}},{key:"setAllOperationsToDirty",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._operationsStack.setAllToDirty(a)}},{key:"createOperation",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=this._operations[a];if(!d)throw new Error("No operation with identifier `"+a+"` found.");var e=new d(this,b);return c&&this.addOperation(e),e}},{key:"addOperation",value:function(a){this._operationsStack.push(a)}},{key:"removeOperation",value:function(a){this._operationsStack.remove(a)}},{key:"getInputDimensions",value:function(){var a=this._inputTexture.getFrame();return new I(a.width,a.height)}},{key:"getFinalDimensions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.getInputDimensions();return this._operationsStack.forEach(function(a){a.getEnabled()&&(b=a.getNewDimensions(b))}),a&&b.multiply(this._spriteScale),b.floor()}},{key:"getOutputDimensions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getFinalDimensions(a).clone().multiply(this._zoom).floor()}},{key:"getOutputTextureDimensions",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.getTextureScale(),b=this.getInputDimensions().multiply(a).floor();return this._operationsStack.forEach(function(a){b=a.getNewDimensions(b)}),b}},{key:"getCrossOrigin",value:function(){return F.getCrossOrigin(this._options.crossOrigin||"Anonymous")}},{key:"_checkForUpdates",value:function(){this._l.isENT()||(this._versionChecker=new v.a(this.version))}},{key:"_initRenderer",value:function(){var a={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor},b=void 0,c=void 0;if("dynamic"===this._renderMode&&this._options.canvas){var d=this._options.canvas;b=d.width,c=d.height}else if(this._inputTexture){var e=this.getFinalDimensions();b=e.x,c=e.y}else b=1,c=1;switch(this._preferredRenderer){case O.WEBGL:this._renderer=E.autoDetectRenderer(b,c,a),this._renderer.on("context-restored",this._onContextRestored);break;case O.CANVAS:this._renderer=new E.CanvasRenderer(b,c,a),this._renderer.on("context-restored",this._onContextRestored);break;default:J.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=E.autoDetectRenderer(b,c,a)}}},{key:"resizeTo",value:function(a){this._renderer.resizeTo(a,!0)}},{key:"reset",value:function(){this._operationsStack.clear()}},{key:"parseExif",value:function(a){if(a){var b=a.src,c=null;if(c=b,w.a.isJPEG(b)){var d=null;try{d=w.a.fromBase64String(c)}catch(a){}if(!d)return;return d}}}},{key:"_handleExifOrientation",value:function(){var a=this._exif.getTags();if(a&&a.Orientation){var b=1!==a.Orientation&&2!==a.Orientation,c=-1!==[2,4,5,7].indexOf(a.Orientation);(b||c)&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(a),this._exif.setOrientation(1))}}},{key:"hasImage",value:function(){return null!==this._image&&void 0!==this._image}},{key:"getImage",value:function(){return this._image}},{key:"disposeTexture",value:function(a){this._texturesToDispose.push(a)}},{key:"_disposeTextures",value:function(){for(var a=0;a<this._texturesToDispose.length;a++)this._texturesToDispose[a].dispose();this._texturesToDispose=[]}},{key:"setImage",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=a,this._image=a,this._exif=b||this.parseExif(a),this._exif&&this._handleExifOrientation();var d=new E.BaseTexture(this._image),e=new C(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);c&&(e.width=c.x,e.height=c.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new E.Texture(d,e),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.setAllOperationsToDirty(!0)}},{key:"setInputTexture",value:function(a){this._inputTexture=a}},{key:"getCanvas",value:function(){return this._renderer.getCanvas()}},{key:"setCanvas",value:function(a){this._renderer.setCanvas(a)}},{key:"getSprite",value:function(){return this._sprite}},{key:"getContainer",value:function(){return this._container}},{key:"getOperationsStack",value:function(){return this._operationsStack}},{key:"setOperationsStack",value:function(a){this._operationsStack&&this._operationsStack.off(H.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=a,this._operationsStack.on(H.OPERATION_UPDATED,this._onOperationUpdate)}},{key:"getOperations",value:function(){return this._operations}},{key:"getRenderer",value:function(){return this._renderer}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(a,b){a instanceof I?this._offset.copy(a):this._offset.set(a,b)}},{key:"getRenderMode",value:function(){return this._renderMode}},{key:"setRenderMode",value:function(a){this._renderMode=a}},{key:"getZoom",value:function(){return this._zoom}},{key:"setZoom",value:function(a){this._zoom=a,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}},{key:"getTextureQuality",value:function(){return"export"===this._renderMode?1:this._textureQuality}},{key:"setTextureQuality",value:function(a){a!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,a),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}},{key:"getSpriteScale",value:function(){return this._spriteScale}},{key:"setSpriteScale",value:function(a){this._spriteScale=a,this._sprite.setScale(a,a),this._sprite.updateTransform()}},{key:"getPixelRatio",value:function(){return this._options.pixelRatio}},{key:"getExif",value:function(){return this._exif}},{key:"getOptions",value:function(){return this._options}},{key:"getInputTexture",value:function(){return this._inputTexture}},{key:"setSmoothDownscaling",value:function(a){this._options.smoothDownscaling=a,this._sprite.setSmoothDownscaling(a),this._resizedSprite.setSmoothDownscaling(a)}},{key:"setRotation",value:function(a){this._rotation=a}},{key:"getRotation",value:function(){return this._rotation}},{key:"hasChanges",value:function(){return this.getOperationsStack().hasChanges()}},{key:"dispose",value:function(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}}]),b}();b.a=P},function(a,b,c){c(44),c(67),a.exports=c(87).f("iterator")},function(a,b,c){var d=c(78),e=c(79);a.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i))<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):g-56320+(f-55296<<10)+65536}}},function(a,b,c){var d=c(82),e=c(45),f=c(66),g={};c(27)(g,c(12)("iterator"),function(){return this}),a.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)}),f(a,b+" Iterator")}},function(a,b,c){var d=c(21),e=c(18),f=c(46);a.exports=c(25)?Object.defineProperties:function(a,b){e(a);for(var c,g=f(b),h=g.length,i=0;h>i;)d.f(a,c=g[i++],b[c]);return a}},function(a,b,c){var d=c(29),e=c(83),f=c(165);a.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if((h=i[k++])!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k||0;return!a&&-1}}},function(a,b,c){var d=c(78),e=Math.max,f=Math.min;a.exports=function(a,b){return(a=d(a))<0?e(a+b,0):f(a,b)}},function(a,b,c){var d=c(167),e=c(168),f=c(39),g=c(29);a.exports=c(110)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):e(0,"keys"==b?c:"values"==b?a[c]:[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},function(a,b){a.exports=function(){}},function(a,b){a.exports=function(a,b){return{value:b,done:!!a}}},function(a,b,c){c(170),c(118),c(175),c(176),a.exports=c(10).Symbol},function(a,b,c){var d=c(14),e=c(28),f=c(25),g=c(13),h=c(112),i=c(171).KEY,j=c(38),k=c(85),l=c(66),m=c(65),n=c(12),o=c(87),p=c(88),q=c(172),r=c(173),s=c(18),t=c(24),u=c(29),v=c(81),w=c(45),x=c(82),y=c(174),z=c(90),A=c(21),B=c(46),C=z.f,D=A.f,E=y.f,F=d.Symbol,G=d.JSON,H=G&&G.stringify,I=n("_hidden"),J=n("toPrimitive"),K={}.propertyIsEnumerable,L=k("symbol-registry"),M=k("symbols"),N=k("op-symbols"),O=Object.prototype,P="function"==typeof F,Q=d.QObject,R=!Q||!Q.prototype||!Q.prototype.findChild,S=f&&j(function(){return 7!=x(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=C(O,b);d&&delete O[b],D(a,b,c),d&&a!==O&&D(O,b,d)}:D,T=function(a){var b=M[a]=x(F.prototype);return b._k=a,b},U=P&&"symbol"==typeof F.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof F},V=function(a,b,c){return a===O&&V(N,b,c),s(a),b=v(b,!0),s(c),e(M,b)?(c.enumerable?(e(a,I)&&a[I][b]&&(a[I][b]=!1),c=x(c,{enumerable:w(0,!1)})):(e(a,I)||D(a,I,w(1,{})),a[I][b]=!0),S(a,b,c)):D(a,b,c)},W=function(a,b){s(a);for(var c,d=q(b=u(b)),e=0,f=d.length;f>e;)V(a,c=d[e++],b[c]);return a},X=function(a){var b=K.call(this,a=v(a,!0));return!(this===O&&e(M,a)&&!e(N,a))&&(!(b||!e(this,a)||!e(M,a)||e(this,I)&&this[I][a])||b)},Y=function(a,b){if(a=u(a),b=v(b,!0),a!==O||!e(M,b)||e(N,b)){var c=C(a,b);return!c||!e(M,b)||e(a,I)&&a[I][b]||(c.enumerable=!0),c}},Z=function(a){for(var b,c=E(u(a)),d=[],f=0;c.length>f;)e(M,b=c[f++])||b==I||b==i||d.push(b);return d},$=function(a){for(var b,c=a===O,d=E(c?N:u(a)),f=[],g=0;d.length>g;)!e(M,b=d[g++])||c&&!e(O,b)||f.push(M[b]);return f};P||(h((F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var a=m(arguments.length>0?arguments[0]:void 0),b=function(c){this===O&&b.call(N,c),e(this,I)&&e(this[I],a)&&(this[I][a]=!1),S(this,a,w(1,c))};return f&&R&&S(O,a,{configurable:!0,set:b}),T(a)}).prototype,"toString",function(){return this._k}),z.f=Y,A.f=V,c(117).f=y.f=Z,c(68).f=X,c(89).f=$,f&&!c(63)&&h(O,"propertyIsEnumerable",X,!0),o.f=function(a){return T(n(a))}),g(g.G+g.W+g.F*!P,{Symbol:F});for(var _="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),aa=0;_.length>aa;)n(_[aa++]);for(var ba=B(n.store),ca=0;ba.length>ca;)p(ba[ca++]);g(g.S+g.F*!P,"Symbol",{for:function(a){return e(L,a+="")?L[a]:L[a]=F(a)},keyFor:function(a){if(!U(a))throw TypeError(a+" is not a symbol!");for(var b in L)if(L[b]===a)return b},useSetter:function(){R=!0},useSimple:function(){R=!1}}),g(g.S+g.F*!P,"Object",{create:function(a,b){return void 0===b?x(a):W(x(a),b)},defineProperty:V,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),G&&g(g.S+g.F*(!P||j(function(){var a=F();return"[null]"!=H([a])||"{}"!=H({a:a})||"{}"!=H(Object(a))})),"JSON",{stringify:function(a){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);if(c=b=d[1],(t(b)||void 0!==a)&&!U(a))return r(b)||(b=function(a,b){if("function"==typeof c&&(b=c.call(this,a,b)),!U(b))return b}),d[1]=b,H.apply(G,d)}}),F.prototype[J]||c(27)(F.prototype,J,F.prototype.valueOf),l(F,"Symbol"),l(Math,"Math",!0),l(d.JSON,"JSON",!0)},function(a,b,c){var d=c(65)("meta"),e=c(24),f=c(28),g=c(21).f,h=0,i=Object.isExtensible||function(){return!0},j=!c(38)(function(){return i(Object.preventExtensions({}))}),k=function(a){g(a,d,{value:{i:"O"+ ++h,w:{}}})},l=a.exports={KEY:d,NEED:!1,fastKey:function(a,b){if(!e(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!f(a,d)){if(!i(a))return"F";if(!b)return"E";k(a)}return a[d].i},getWeak:function(a,b){if(!f(a,d)){if(!i(a))return!0;if(!b)return!1;k(a)}return a[d].w},onFreeze:function(a){return j&&l.NEED&&i(a)&&!f(a,d)&&k(a),a}}},function(a,b,c){var d=c(46),e=c(89),f=c(68);a.exports=function(a){var b=d(a),c=e.f;if(c)for(var g,h=c(a),i=f.f,j=0;h.length>j;)i.call(a,g=h[j++])&&b.push(g);return b}},function(a,b,c){var d=c(47);a.exports=Array.isArray||function(a){return"Array"==d(a)}},function(a,b,c){var d=c(29),e=c(117).f,f={}.toString,g="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(a){return g&&"[object Window]"==f.call(a)?function(a){try{return e(a)}catch(a){return g.slice()}}(a):e(d(a))}},function(a,b,c){c(88)("asyncIterator")},function(a,b,c){c(88)("observable")},function(a,b,c){c(178);var d=c(10).Object;a.exports=function(a,b,c){return d.defineProperty(a,b,c)}},function(a,b,c){var d=c(13);d(d.S+d.F*!c(25),"Object",{defineProperty:c(21).f})},function(a,b,c){c(180),a.exports=c(10).Object.setPrototypeOf},function(a,b,c){var d=c(13);d(d.S,"Object",{setPrototypeOf:c(181).set})},function(a,b,c){var d=c(24),e=c(18),f=function(a,b){if(e(a),!d(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};a.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,b,d){try{(d=c(37)(Function.call,c(90).f(Object.prototype,"__proto__").set,2))(a,[]),b=!(a instanceof Array)}catch(a){b=!0}return function(a,c){return f(a,c),b?a.__proto__=c:d(a,c),a}}({},!1):void 0),check:f}},function(a,b,c){c(183);var d=c(10).Object;a.exports=function(a,b){return d.create(a,b)}},function(a,b,c){var d=c(13);d(d.S,"Object",{create:c(82)})},function(a,b,c){c(118),c(44),c(67),c(185),c(192),c(193),a.exports=c(10).Promise},function(a,b,c){var d,e,f,g,h=c(63),i=c(14),j=c(37),k=c(91),l=c(13),m=c(24),n=c(64),o=c(186),p=c(187),q=c(121),r=c(93).set,s=c(189)(),t=c(94),u=c(122),v=c(123),w=i.TypeError,x=i.process,y=i.Promise,z="process"==k(x),A=function(){},B=e=t.f,C=!!function(){try{var a=y.resolve(1),b=(a.constructor={})[c(12)("species")]=function(a){a(A,A)};return(z||"function"==typeof PromiseRejectionEvent)&&a.then(A)instanceof b}catch(a){}}(),D=function(a){var b;return!(!m(a)||"function"!=typeof(b=a.then))&&b},E=function(a,b){if(!a._n){a._n=!0;var c=a._c;s(function(){for(var d=a._v,e=1==a._s,f=0;c.length>f;)!function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject,j=b.domain;try{g?(e||(2==a._h&&H(a),a._h=1),!0===g?c=d:(j&&j.enter(),c=g(d),j&&j.exit()),c===b.promise?i(w("Promise-chain cycle")):(f=D(c))?f.call(c,h,i):h(c)):i(d)}catch(a){i(a)}}(c[f++]);a._c=[],a._n=!1,b&&!a._h&&F(a)})}},F=function(a){r.call(i,function(){var b,c,d,e=a._v,f=G(a);if(f&&(b=u(function(){z?x.emit("unhandledRejection",e,a):(c=i.onunhandledrejection)?c({promise:a,reason:e}):(d=i.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=z||G(a)?2:1),a._a=void 0,f&&b.e)throw b.v})},G=function(a){return 1!==a._h&&0===(a._a||a._c).length},H=function(a){r.call(i,function(){var b;z?x.emit("rejectionHandled",a):(b=i.onrejectionhandled)&&b({promise:a,reason:a._v})})},I=function(a){var b=this;b._d||(b._d=!0,(b=b._w||b)._v=a,b._s=2,b._a||(b._a=b._c.slice()),E(b,!0))},J=function(a){var b,c=this;if(!c._d){c._d=!0,c=c._w||c;try{if(c===a)throw w("Promise can't be resolved itself");(b=D(a))?s(function(){var d={_w:c,_d:!1};try{b.call(a,j(J,d,1),j(I,d,1))}catch(a){I.call(d,a)}}):(c._v=a,c._s=1,E(c,!1))}catch(a){I.call({_w:c,_d:!1},a)}}};C||(y=function(a){o(this,y,"Promise","_h"),n(a),d.call(this);try{a(j(J,this,1),j(I,this,1))}catch(a){I.call(this,a)}},(d=function(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=c(190)(y.prototype,{then:function(a,b){var c=B(q(this,y));return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,c.domain=z?x.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&E(this,!1),c.promise},catch:function(a){return this.then(void 0,a)}}),f=function(){var a=new d;this.promise=a,this.resolve=j(J,a,1),this.reject=j(I,a,1)},t.f=B=function(a){return a===y||a===g?new f(a):e(a)}),l(l.G+l.W+l.F*!C,{Promise:y}),c(66)(y,"Promise"),c(191)("Promise"),g=c(10).Promise,l(l.S+l.F*!C,"Promise",{reject:function(a){var b=B(this);return(0,b.reject)(a),b.promise}}),l(l.S+l.F*(h||!C),"Promise",{resolve:function(a){return v(h&&this===g?y:this,a)}}),l(l.S+l.F*!(C&&c(124)(function(a){y.all(a).catch(A)})),"Promise",{all:function(a){var b=this,c=B(b),d=c.resolve,e=c.reject,f=u(function(){var c=[],f=0,g=1;p(a,!1,function(a){var h=f++,i=!1;c.push(void 0),g++,b.resolve(a).then(function(a){i||(i=!0,c[h]=a,--g||d(c))},e)}),--g||d(c)});return f.e&&e(f.v),c.promise},race:function(a){var b=this,c=B(b),d=c.reject,e=u(function(){p(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e.e&&d(e.v),c.promise}})},function(a,b){a.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},function(a,b,c){var d=c(37),e=c(119),f=c(120),g=c(18),h=c(83),i=c(92),j={},k={};(b=a.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if((q=b?s(g(o=a[t])[0],o[1]):s(a[t]))===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if((q=e(p,s,o.value,b))===j||q===k)return q}).BREAK=j,b.RETURN=k},function(a,b){a.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},function(a,b,c){var d=c(14),e=c(93).set,f=d.MutationObserver||d.WebKitMutationObserver,g=d.process,h=d.Promise,i="process"==c(47)(g);a.exports=function(){var a,b,c,j=function(){var d,e;for(i&&(d=g.domain)&&d.exit();a;){e=a.fn,a=a.next;try{e()}catch(d){throw a?c():b=void 0,d}}b=void 0,d&&d.enter()};if(i)c=function(){g.nextTick(j)};else if(!f||d.navigator&&d.navigator.standalone)if(h&&h.resolve){var k=h.resolve();c=function(){k.then(j)}}else c=function(){e.call(d,j)};else{var l=!0,m=document.createTextNode("");new f(j).observe(m,{characterData:!0}),c=function(){m.data=l=!l}}return function(d){var e={fn:d,next:void 0};b&&(b.next=e),a||(a=e,c()),b=e}}},function(a,b,c){var d=c(27);a.exports=function(a,b,c){for(var e in b)c&&a[e]?a[e]=b[e]:d(a,e,b[e]);return a}},function(a,b,c){var d=c(14),e=c(10),f=c(21),g=c(25),h=c(12)("species");a.exports=function(a){var b="function"==typeof e[a]?e[a]:d[a];g&&b&&!b[h]&&f.f(b,h,{configurable:!0,get:function(){return this}})}},function(a,b,c){var d=c(13),e=c(10),f=c(14),g=c(121),h=c(123);d(d.P+d.R,"Promise",{finally:function(a){var b=g(this,e.Promise||f.Promise),c="function"==typeof a;return this.then(c?function(c){return h(b,a()).then(function(){return c})}:a,c?function(c){return h(b,a()).then(function(){throw c})}:a)}})},function(a,b,c){var d=c(13),e=c(94),f=c(122);d(d.S,"Promise",{try:function(a){var b=e.f(this),c=f(a);return(c.e?b.reject:b.resolve)(c.v),b.promise}})},function(a,b,c){c(195),a.exports=c(10).Object.getPrototypeOf},function(a,b,c){var d=c(48),e=c(116);c(95)("getPrototypeOf",function(){return function(a){return e(d(a))}})},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(9),m=c(129),n=c(131),o=c(73),p=c(96),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=l.c.RendererType,s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._type=r.CANVAS,f.setCanvas(f._options.canvas||f._createCanvas()),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.a),q(b,[{key:"_createCanvas",value:function(){return l.i.createCanvas()}},{key:"_createContext",value:function(){var a=this._canvas.getContext("2d");return this._options.debug&&(a=new m.a(a)),this.id=a.id=b.contextId++,this._context=a,a.renderer=this,this.emit("context",a),a}},{key:"_setupContext",value:function(){var a=this._context;"imageSmoothingEnabled"in a?a.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(b){a[b]&&(a[b]=!0)}),this._defaultRenderTarget=new o.a(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new p.a(this)}},{key:"render",value:function(a){var b=this._renderTarget.getContext(),c=a.getParent();a.setParent(this._fakeObject),a.updateTransform(),a.setParent(c),b.setTransform(1,0,0,1,0,0),b.globalAlpha=1;var d=this._canvas,e=d.width,f=d.height;b.clearRect(0,0,e,f),0!==this._clearColor.a&&(b.save(),b.fillStyle=this._clearColor.toRGBA(),b.fillRect(0,0,e,f),b.restore()),this.renderDisplayObject(a,this._renderTarget)}},{key:"renderDisplayObject",value:function(a,b){var c=this._renderTarget;this._filterManager.setFilterStack(b.getFilterStack()),this.setRenderTarget(b),a.renderCanvas(this),this.setRenderTarget(c)}},{key:"getCurrentRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderTarget",value:function(a){this._renderTarget=a}},{key:"getContext",value:function(){return this._renderTarget.getContext()}},{key:"dispose",value:function(){this._filterManager.dispose()}}]),b}();s.contextId=0,s.type="Canvas2D",b.a=s},function(a,b,c){c(44),c(198),a.exports=c(10).Array.from},function(a,b,c){var d=c(37),e=c(13),f=c(48),g=c(119),h=c(120),i=c(83),j=c(199),k=c(92);e(e.S+e.F*!c(124)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,l,m=f(a),n="function"==typeof this?this:Array,o=arguments.length,p=o>1?arguments[1]:void 0,q=void 0!==p,r=0,s=k(m);if(q&&(p=d(p,o>2?arguments[2]:void 0,2)),void 0==s||n==Array&&h(s))for(c=new n(b=i(m.length));b>r;r++)j(c,r,q?p(m[r],r):m[r]);else for(l=s.call(m),c=new n;!(e=l.next()).done;r++)j(c,r,q?g(l,p,[e.value,r],!0):e.value);return c.length=r,c}})},function(a,b,c){var d=c(21),e=c(45);a.exports=function(a,b,c){b in a?d.f(a,b,e(0,c)):a[b]=c}},function(a,b,c){a.exports={default:c(201),__esModule:!0}},function(a,b,c){var d=c(10),e=d.JSON||(d.JSON={stringify:JSON.stringify});a.exports=function(a){return e.stringify.apply(e,arguments)}},function(a,b,c){c(203),a.exports=c(10).Object.assign},function(a,b,c){var d=c(13);d(d.S+d.F,"Object",{assign:c(204)})},function(a,b,c){var d=c(46),e=c(89),f=c(68),g=c(48),h=c(114),i=Object.assign;a.exports=!i||c(38)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=i({},a)[c]||Object.keys(i({},b)).join("")!=d})?function(a,b){for(var c=g(a),i=arguments.length,j=1,k=e.f,l=f.f;i>j;)for(var m,n=h(arguments[j++]),o=k?d(n).concat(k(n)):d(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:i},function(a,b,c){c(206),a.exports=c(10).Object.keys},function(a,b,c){var d=c(48),e=c(46);c(95)("keys",function(){return function(a){return e(d(a))}})},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return f(a,null,[{key:"head",value:function(a){return a[0]}},{key:"tail",value:function(a){return a.slice(1)}},{key:"last",value:function(a){return a[a.length-1]}},{key:"init",value:function(a){return a.slice(0,a.length-1)}},{key:"remove",value:function(a,b){return a.filter(function(a,c,d){return!b(a,c,d)})}},{key:"findIndex",value:function(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1}},{key:"find",value:function(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return a[c]}},{key:"flatten",value:function(b){return b.reduce(function(b,c){return b.concat(Array.isArray(c)?a.flatten(c):c)},[])}},{key:"range",value:function(a,b){var c=[];if(b>a)for(var d=a;d<b;d++)c.push(d);return c}},{
key:"repeat",value:function(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}},{key:"zip",value:function(a,b){for(var c=Math.min(a.length,b.length),d=[],e=0;e<c;e++)d[e]=[a[e],b[e]];return d}}]),a}();b.a=g},function(a,b,c){c(67),c(44),a.exports=c(209)},function(a,b,c){var d=c(91),e=c(12)("iterator"),f=c(39);a.exports=c(10).isIterable=function(a){var b=Object(a);return void 0!==b[e]||"@@iterator"in b||f.hasOwnProperty(d(b))}},function(a,b,c){c(67),c(44),a.exports=c(211)},function(a,b,c){var d=c(18),e=c(92);a.exports=c(10).getIterator=function(a){var b=e(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return d(b.call(a))}},function(a,b,c){var d;!function(e,f){var g="model",h="name",i="type",j="vendor",k="version",l="mobile",m="tablet",n={extend:function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},has:function(a,b){return"string"==typeof a&&-1!==b.toLowerCase().indexOf(a.toLowerCase())},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"==typeof a?a.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},o={rgx:function(a,b){for(var c,d,e,f,g,h,i=0;i<b.length&&!g;){var j=b[i],k=b[i+1];for(c=d=0;c<j.length&&!g;)if(g=j[c++].exec(a))for(e=0;e<k.length;e++)h=g[++d],"object"==typeof(f=k[e])&&f.length>0?2==f.length?"function"==typeof f[1]?this[f[0]]=f[1].call(this,h):this[f[0]]=f[1]:3==f.length?"function"!=typeof f[1]||f[1].exec&&f[1].test?this[f[0]]=h?h.replace(f[1],f[2]):void 0:this[f[0]]=h?f[1].call(this,h,f[2]):void 0:4==f.length&&(this[f[0]]=h?f[3].call(this,h.replace(f[1],f[2])):void 0):this[f]=h||void 0;i+=2}},str:function(a,b){for(var c in b)if("object"==typeof b[c]&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(n.has(b[c][d],a))return"?"===c?void 0:c}else if(n.has(b[c],a))return"?"===c?void 0:c;return a}},p={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},q={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[h,k],[/(opios)[\/\s]+([\w\.]+)/i],[[h,"Opera Mini"],k],[/\s(opr)\/([\w\.]+)/i],[[h,"Opera"],k],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[h,k],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[h,"IE"],k],[/(edge)\/((\d+)?[\w\.]+)/i],[h,k],[/(yabrowser)\/([\w\.]+)/i],[[h,"Yandex"],k],[/(puffin)\/([\w\.]+)/i],[[h,"Puffin"],k],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[h,"UCBrowser"],k],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],k],[/(micromessenger)\/([\w\.]+)/i],[[h,"WeChat"],k],[/(QQ)\/([\d\.]+)/i],[h,k],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[h,k],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[k,[h,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[k,[h,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[k,[h,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[h,/(.+)/,"$1 WebView"],k],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[h,/(.+(?:g|us))(.+)/,"$1 $2"],k],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[k,[h,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[h,k],[/(dolfin)\/([\w\.]+)/i],[[h,"Dolphin"],k],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[h,"Chrome"],k],[/(coast)\/([\w\.]+)/i],[[h,"Opera Coast"],k],[/fxios\/([\w\.-]+)/i],[k,[h,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[k,[h,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[k,h],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[h,"GSA"],k],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[h,[k,o.str,p.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[h,k],[/(navigator|netscape)\/([\w\.-]+)/i],[[h,"Netscape"],k],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[h,k]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",n.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",n.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",n.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[g,j,[i,m]],[/applecoremedia\/[\w\.]+ \((ipad)/],[g,[j,"Apple"],[i,m]],[/(apple\s{0,1}tv)/i],[[g,"Apple TV"],[j,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[j,g,[i,m]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[g,[j,"Amazon"],[i,m]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[g,o.str,p.device.amazon.model],[j,"Amazon"],[i,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[g,j,[i,l]],[/\((ip[honed|\s\w*]+);/i],[g,[j,"Apple"],[i,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[j,g,[i,l]],[/\(bb10;\s(\w+)/i],[g,[j,"BlackBerry"],[i,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[g,[j,"Asus"],[i,m]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[j,"Sony"],[g,"Xperia Tablet"],[i,m]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[g,[j,"Sony"],[i,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[j,g,[i,"console"]],[/android.+;\s(shield)\sbuild/i],[g,[j,"Nvidia"],[i,"console"]],[/(playstation\s[34portablevi]+)/i],[g,[j,"Sony"],[i,"console"]],[/(sprint\s(\w+))/i],[[j,o.str,p.device.sprint.vendor],[g,o.str,p.device.sprint.model],[i,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[j,g,[i,m]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[j,[g,/_/g," "],[i,l]],[/(nexus\s9)/i],[g,[j,"HTC"],[i,m]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[g,[j,"Huawei"],[i,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[j,g,[i,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[g,[j,"Microsoft"],[i,"console"]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[j,"Microsoft"],[i,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[g,[j,"Motorola"],[i,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[g,[j,"Motorola"],[i,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[j,n.trim],[g,n.trim],[i,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[j,"Samsung"],[i,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[g,[j,"Sharp"],[i,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[j,"Samsung"],g,[i,m]],[/smart-tv.+(samsung)/i],[j,[i,"smarttv"],g],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[j,"Samsung"],g,[i,l]],[/sie-(\w+)*/i],[g,[j,"Siemens"],[i,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[j,"Nokia"],g,[i,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[g,[j,"Acer"],[i,m]],[/android.+([vl]k\-?\d{3})\s+build/i],[g,[j,"LG"],[i,m]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[j,"LG"],g,[i,m]],[/(lg) netcast\.tv/i],[j,g,[i,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[g,[j,"LG"],[i,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[g,[j,"Lenovo"],[i,m]],[/linux;.+((jolla));/i],[j,g,[i,l]],[/((pebble))app\/[\d\.]+\s/i],[j,g,[i,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[j,g,[i,l]],[/crkey/i],[[g,"Chromecast"],[j,"Google"]],[/android.+;\s(glass)\s\d/i],[g,[j,"Google"],[i,"wearable"]],[/android.+;\s(pixel c)\s/i],[g,[j,"Google"],[i,m]],[/android.+;\s(pixel xl|pixel)\s/i],[g,[j,"Google"],[i,l]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[g,/_/g," "],[j,"Xiaomi"],[i,l]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[g,/_/g," "],[j,"Xiaomi"],[i,m]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[g,[j,"Meizu"],[i,m]],[/android.+a000(1)\s+build/i],[g,[j,"OnePlus"],[i,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[g,[j,"RCA"],[i,m]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[g,[j,"Dell"],[i,m]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[g,[j,"Verizon"],[i,m]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[j,"Barnes & Noble"],g,[i,m]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[g,[j,"NuVision"],[i,m]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[j,"ZTE"],g,[i,m]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[g,[j,"Swiss"],[i,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[g,[j,"Swiss"],[i,m]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[g,[j,"Zeki"],[i,m]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[j,"Dragon Touch"],g,[i,m]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[g,[j,"Insignia"],[i,m]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[g,[j,"NextBook"],[i,m]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[j,"Voice"],g,[i,l]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[j,"LvTel"],g,[i,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[g,[j,"Envizen"],[i,m]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[j,g,[i,m]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[g,[j,"MachSpeed"],[i,m]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[j,g,[i,m]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[g,[j,"Rotor"],[i,m]],[/android.+(KS(.+))\s+build/i],[g,[j,"Amazon"],[i,m]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[j,g,[i,m]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[i,n.lowerize],j,g],[/(android.+)[;\/].+build/i],[g,[j,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[k,[h,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[h,k],[/rv\:([\w\.]+).*(gecko)/i],[k,h]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[h,k],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[h,[k,o.str,p.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[h,"Windows"],[k,o.str,p.os.windows.version]],[/\((bb)(10);/i],[[h,"BlackBerry"],k],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[h,k],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[h,"Symbian"],k],[/\((series40);/i],[h],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[h,"Firefox OS"],k],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[h,k],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[h,"Chromium OS"],k],[/(sunos)\s?([\w\.]+\d)*/i],[[h,"Solaris"],k],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[h,k],[/(haiku)\s(\w+)/i],[h,k],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[k,/_/g,"."],[h,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[h,"Mac OS"],[k,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[h,k]]},r=function(a,b){if("object"==typeof a&&(b=a,a=void 0),!(this instanceof r))return new r(a,b).getResult();var c=a||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),d=b?n.extend(q,b):q;return this.getBrowser=function(){var a={name:void 0,version:void 0};return o.rgx.call(a,c,d.browser),a.major=n.major(a.version),a},this.getCPU=function(){var a={architecture:void 0};return o.rgx.call(a,c,d.cpu),a},this.getDevice=function(){var a={vendor:void 0,model:void 0,type:void 0};return o.rgx.call(a,c,d.device),a},this.getEngine=function(){var a={name:void 0,version:void 0};return o.rgx.call(a,c,d.engine),a},this.getOS=function(){var a={name:void 0,version:void 0};return o.rgx.call(a,c,d.os),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return c},this.setUA=function(a){return c=a,this},this};r.VERSION="0.7.17",r.BROWSER={NAME:h,MAJOR:"major",VERSION:k},r.CPU={ARCHITECTURE:"architecture"},r.DEVICE={MODEL:g,VENDOR:j,TYPE:i,CONSOLE:"console",MOBILE:l,SMARTTV:"smarttv",TABLET:m,WEARABLE:"wearable",EMBEDDED:"embedded"},r.ENGINE={NAME:h,VERSION:k},r.OS={NAME:h,VERSION:k},void 0!==b?(void 0!==a&&a.exports&&(b=a.exports=r),b.UAParser=r):c(213)?void 0===(d=function(){return r}.call(b,c,b,a))||(a.exports=d):e&&(e.UAParser=r);var s=e&&(e.jQuery||e.Zepto);if(void 0!==s){var t=new r;s.ua=t.getResult(),s.ua.get=function(){return t.getUA()},s.ua.set=function(a){t.setUA(a);var b=t.getResult();for(var c in b)s.ua[c]=b[c]}}}("object"==typeof window?window:this)},function(a,b){(function(b){a.exports=b}).call(b,{})},function(a,b,c){var d={defaults:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e={};for(var f in a)e[f]=a[f];for(var g=0;g<c.length;g++){var h=c[g];for(var i in h)void 0===e[i]&&(e[i]=h[i])}return e},extend:function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e={};for(var f in a)e[f]=a[f];for(var g=0;g<c.length;g++){var h=c[g];for(var i in h)e[i]=h[i]}return e}};b.a=d},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(9),o=c(131),p=c(74),q=c(132),r=c(218),s=c(97),t=c(99),u=c(100),v=c(129),w=c(133),x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},z=n.c.RendererType,A=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._type=z.WEBGL,f._textures=[],f._fakeObject=new t.a,f._onContextLost=f._onContextLost.bind(f),f._onContextRestored=f._onContextRestored.bind(f),f.setCanvas(f._options.canvas||n.i.createCanvas()),f.shaders=f._initShaders(),f.renderers=f._initRenderers(),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),x(b,[{key:"_onContextLost",value:function(a){a.preventDefault(),n.f.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}},{key:"_onContextCreationError",value:function(a){a.preventDefault(),n.f.warn(this.constructor.name,"Failed to create WebGL context: "+(a.statusMessage||"Unknown error"))}},{key:"_onContextRestored",value:function(){var a=this;n.f.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._textures.forEach(function(b){b.disposeGLTexturesForRenderer(a)}),this._createContext(),this._setupContext(),this.emit("context-restored")}},{key:"_onBeforeContext",value:function(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new u.a(this),this._currentObjectRenderer=new q.a(this)}},{key:"setShader",value:function(a){this._currentShader=a,this._context.useProgram(a.getProgram()),this._setAttributesForShader(a)}},{key:"setCanvas",value:function(a){this._canvas&&this._removeContextEventListeners(),y(b.prototype.__proto__||m()(b.prototype),"setCanvas",this).call(this,a),this._canvas.addEventListener&&this._addContextEventListeners()}},{key:"_addContextEventListeners",value:function(){this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_removeContextEventListeners",value:function(){this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError)}},{key:"_setAttributesForShader",value:function(a){var b=this._context,c=a.getAttributes(),d=a.getAttributeLocations();c.forEach(function(a){var c=d[a];b.enableVertexAttribArray(c)})}},{key:"_initShaders",value:function(){return{default:new s.a(this)}}},{key:"_initRenderers",value:function(){return{sprite:new r.a(this)}}},{key:"_createContext",value:function(){var a=this._canvas,c=null,d={preserveDrawingBuffer:!0};return c=a.getContext("webgl",d)||a.getContext("experimental-webgl",d),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug&&(c=window.WebGLDebugUtils.makeDebugContext(c,null,function(a,b){console.error("gl."+a+"("+window.WebGLDebugUtils.glFunctionArgsToString(a,b)+")")})),this._options.debug&&(c=new v.a(c)),this.id=c.id=b.contextId++,this._context=c,c.renderer=this,this._maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),this.emit("context",c),c}},{key:"_setupContext",value:function(){var a=this._context;a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new p.a(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}},{key:"_getMaxPrecision",value:function(){var a=this._context,b=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT);this._maxFloatPrecision=0!==b.precision?"highp":"mediump";var c=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_INT);this._maxIntPrecision=0!==c.rangeMax?"highp":"lowp"}},{key:"resizeTo",value:function(a){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];y(b.prototype.__proto__||m()(b.prototype),"resizeTo",this).call(this,a,c),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(a)}},{key:"setRenderTarget",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._defaultRenderTarget;this._currentRenderTarget=a,this._currentRenderTarget.activate()}},{key:"setObjectRenderer",value:function(a){this._currentObjectRenderer.stop(),this._currentObjectRenderer=a,this._currentObjectRenderer.start()}},{key:"render",value:function(a){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var b=a.getParent();a.setParent(this._fakeObject),a.updateTransform(),a.setParent(b),this.renderDisplayObject(a,this._defaultRenderTarget)}},{key:"renderDisplayObject",value:function(a,b){this.setRenderTarget(b),this._filterManager.setFilterStack(b.getFilterStack()),a.renderWebGL(this),this._currentObjectRenderer.flush()}},{key:"clear",value:function(){var a=this._context;a.clearColor.apply(a,this._clearColor.toGLColor()),a.clear(a.COLOR_BUFFER_BIT)}},{key:"save",value:function(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}},{key:"restore",value:function(a){this.setRenderTarget(a.renderTarget),this._filterManager.setFilterStack(a.filterStack),this._currentObjectRenderer=a.objectRenderer}},{key:"getOrCreateGLTexture",value:function(a){var b=this._context,c=a.getGLTextureForRenderer(this);return c||(c=b.createTexture(),a.setGLTextureForRenderer(c,this),this._textures.push(a)),c}},{key:"updateTexture",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=a.getSource(),d=!!c,e=this._context,f=a.getGLUnit(),g=this.getOrCreateGLTexture(a);if(e.activeTexture(e.TEXTURE0+f),e.bindTexture(e.TEXTURE_2D,g),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),b&&d)if(c instanceof w.a)e.texImage2D(e.TEXTURE_2D,0,e.RGBA,c.width,c.height,0,e.RGBA,e.UNSIGNED_BYTE,c.data);else{var h=n.i.convertHtmlImageToRGBACanvas(c);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,h)}a.isMipMappingEnabled()?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,a.getGLRepeat(e,"x")),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a.getGLRepeat(e,"y"))),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,a.getGLFilter(e,"min")),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a.getGLFilter(e,"mag")),e.activeTexture(e.TEXTURE0)}},{key:"getMaxDimensions",value:function(){var a=n.i.createCanvas(),b=a.getContext("webgl")||a.getContext("experimental-webgl");if(b){var c=b.getParameter(b.MAX_TEXTURE_SIZE),d=b.getExtension("WEBGL_lose_context");return d&&d.loseContext(),c}return null}},{key:"getCurrentRenderTarget",value:function(){return this._currentRenderTarget}},{key:"getCurrentObjectRenderer",value:function(){return this._currentObjectRenderer}},{key:"getMaxFloatPrecision",value:function(){return this._maxFloatPrecision}},{key:"getMaxIntPrecision",value:function(){return this._maxIntPrecision}},{key:"dispose",value:function(){var a=this;for(var b in this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(b){b.disposeGLTexturesForRenderer(a)}),this.shaders)this.shaders[b].dispose(),delete this.shaders[b];this._removeContextEventListeners();var c=this._context.getExtension("WEBGL_lose_context");c&&c.loseContext()}}],[{key:"isSupported",value:function(){var a=n.i.createCanvas();a.addEventListener("webglcontextcreationerror",this.prototype._onContextCreationError);var b=a.getContext("webgl")||a.getContext("experimental-webgl"),c=!!b;if(c){var d=n.e.determineGPUName(b);c&=!n.e.isGPUBlacklisted(d)}return a.removeEventListener("webglcontextcreationerror",this.prototype._onContextCreationError),c}}]),b}();A.contextId=0,A.type="WebGL",b.a=A},function(a,b,c){c(217);var d=c(10).Object;a.exports=function(a,b){return d.getOwnPropertyDescriptor(a,b)}},function(a,b,c){var d=c(29),e=c(90).f;c(95)("getOwnPropertyDescriptor",function(){return function(a,b){return e(d(a),b)}})},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(9),o=c(132),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));f._maxBatchSize=n.a,f._vertices=new ArrayBuffer(4*n.a*n.j),f._positions=new Float32Array(f._vertices),f._colors=new Uint32Array(f._vertices),f._indices=new Uint16Array(6*n.a);for(var g=0,h=0;g<6*n.a;g+=6,h+=4)f._indices[g+0]=h+0,f._indices[g+1]=h+1,f._indices[g+2]=h+2,f._indices[g+3]=h+0,f._indices[g+4]=h+2,f._indices[g+5]=h+3;return f._shaders=[],f._sprites=[],f._currentBatchSize=0,f._currentBaseTexture=null,f._onContextChange(),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),p(b,[{key:"render",value:function(a){var b=a.getTexture(),c=b.getFrame(),d=b.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=d);var e=b.getUVs();if(e){var f=this._currentBatchSize*n.j;this._addVertexCoordinates(a,f,c),this._addTextureUVs(a,f,e),this._addColors(a,f),this._sprites[this._currentBatchSize]=a,this._currentBatchSize++}}},{key:"_addColors",value:function(a,b){var c=this._colors,d=a.getTint(),e=(d>>16)+(65280&d)+((255&d)<<16)+(255*a.getWorldAlpha()<<24);c[b+4]=c[b+9]=c[b+14]=c[b+19]=e}},{key:"_addTextureUVs",value:function(a,b,c){var d=this._positions,e=c.getUVsAt(0);d[b+2]=e.x,d[b+3]=e.y,e=c.getUVsAt(1),d[b+7]=e.x,d[b+8]=e.y,e=c.getUVsAt(2),d[b+12]=e.x,d[b+13]=e.y,e=c.getUVsAt(3),d[b+17]=e.x,d[b+18]=e.y}},{key:"_addVertexCoordinates",value:function(a,b,c){for(var d=this._positions,e=a.getWorldTransform(),f=a.getAnchor(),g=e.rectangleToCoordinates(c,f),h=0;h<4;h++)d[b+5*h]=g[h].x,d[b+5*h+1]=g[h].y}},{key:"_onContextChange",value:function(){var a=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer=a.createBuffer(),this._indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this._indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this._indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this._vertices,a.DYNAMIC_DRAW)}},{key:"start",value:function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}},{key:"flush",value:function(){var a=this._renderer,b=a.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*n.a)b.bufferSubData(b.ARRAY_BUFFER,0,this._vertices);else{var c=this._positions.subarray(0,this._currentBatchSize*n.j);b.bufferSubData(b.ARRAY_BUFFER,0,c)}for(var d=0,e=null,f=null,g=null,h=null,i=!1,j=null,k=0,l=0,m=this._currentBatchSize;l<m;l++){if(f=(j=this._sprites[l]).getTexture().getBaseTexture(),i=g!==(h=j.getShader()||this._shader),(e!==f||i)&&(this._renderBatch(e,d,k),k=l,d=0,e=f,i)){g=h,a.setShader(g);var o=a.getCurrentRenderTarget().getProjectionMatrix().toArray();g.setUniform("u_projMatrix",o),g.syncUniforms(),b.activeTexture(b.TEXTURE0)}d++}this._renderBatch(e,d,k),this._currentBatchSize=0,this._sprites=[]}}},{key:"_renderBatch",value:function(a,b,c){if(0!==b){var d=this._renderer,e=d.getContext(),f=a.getGLTextureForRenderer(d);f||(f=d.getOrCreateGLTexture(a)),a.isDirty()&&(d.updateTexture(a),a.setDirty(!1)),e.activeTexture(e.TEXTURE0+a.getGLUnit()),e.bindTexture(e.TEXTURE_2D,f);var g=6*b,h=6*c*2;e.drawElements(e.TRIANGLES,g,e.UNSIGNED_SHORT,h)}}},{key:"dispose",value:function(){var a=this._renderer.getContext();a.deleteBuffer(this._vertexBuffer),a.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this)}}]),b}();b.a=q},function(a,b){a.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(a,b){a.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._renderer=b,this._context=this._renderer.getContext(),this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return f(a,[{key:"map",value:function(a,b){var c=b.x,d=b.y;this._uvs[2]=b.width/a.width,this._uvs[4]=this._uvs[2],this._uvs[5]=b.height/a.height,this._uvs[7]=this._uvs[5],this._vertices[0]=c,this._vertices[1]=d,this._vertices[2]=c+b.width,this._vertices[3]=d,this._vertices[4]=this._vertices[2],this._vertices[5]=d+b.height,this._vertices[6]=c,this._vertices[7]=this._vertices[5],this._uploadBuffers()}},{key:"_initBuffers",value:function(){var a=this._context;this._vertexBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),a.bufferData(a.ARRAY_BUFFER,128,a.DYNAMIC_DRAW),this._indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this._indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this._indices,a.STATIC_DRAW)}},{key:"_uploadBuffers",value:function(){var a=this._context;a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),a.bufferSubData(a.ARRAY_BUFFER,0,this._vertices),a.bufferSubData(a.ARRAY_BUFFER,32,this._uvs),a.bufferSubData(a.ARRAY_BUFFER,64,this._colors)}},{key:"getVertexBuffer",value:function(){return this._vertexBuffer}},{key:"getIndexBuffer",value:function(){return this._indexBuffer}},{key:"dispose",value:function(){var a=this._context;a.deleteBuffer(this._vertexBuffer),a.deleteBuffer(this._indexBuffer)}}]),a}();b.a=g},function(a,b,c){var d=c(0),e=c.n(d),f=c(9),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._uvs=[new f.k(0,0),new f.k(1,0),new f.k(1,1),new f.k(0,1)]}return g(a,[{key:"update",value:function(a,b){var c=this._uvs[0];c.x=a.x/b.width,c.y=a.y/b.height,(c=this._uvs[1]).x=(a.x+a.width)/b.width,c.y=a.y/b.height,(c=this._uvs[2]).x=(a.x+a.width)/b.width,c.y=(a.y+a.height)/b.height,(c=this._uvs[3]).x=a.x/b.width,c.y=(a.y+a.height)/b.height}},{key:"getUVsAt",value:function(a){return this._uvs[a]}},{key:"getUVs",value:function(){return this._uvs}}]),a}();b.a=h
},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(9),m=c(135),n=c(53),o=c(74),p=c(73),q=c(100),r=c(96),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=l.c.RendererType,u=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this,new n.a,new l.h(0,0,c,d)));return f._loaded=!0,f._width=c,f._height=d,f._pixelRatio=e,f._renderer=a,f._setupFilterManager(),f._setupBuffer(),f.setBaseTexture(f._renderTarget.getBaseTexture()),f._updateUVs(),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),s(b,[{key:"_setupFilterManager",value:function(){this._renderer.isOfType(t.WEBGL)?this._filterManager=new q.a(this._renderer):this._renderer.isOfType(t.CANVAS)&&(this._filterManager=new r.a(this._renderer)),this._filterManager.resizeTo(new l.k(this._width,this._height))}},{key:"_setupBuffer",value:function(){this._renderer.isOfType(t.WEBGL)?this._setupWebGLRenderTarget():this._renderer.isOfType(t.CANVAS)&&this._setupCanvasRenderTarget()}},{key:"_setupWebGLRenderTarget",value:function(){this._renderTarget=new o.a(this._renderer,this._width,this._height,this._pixelRatio)}},{key:"_setupCanvasRenderTarget",value:function(){this._renderTarget=new p.a(this._width,this._height,this._pixelRatio)}},{key:"clear",value:function(a){this._renderTarget.clear(a)}},{key:"resizeTo",value:function(a){this._width===a.x&&this._height===a.y||(this._width=a.x,this._height=a.y,this._frame.width=a.x,this._frame.height=a.y,this._renderTarget.resizeTo(a),this._filterManager.resizeTo(a))}},{key:"render",value:function(a){if(this._renderer.isOfType(t.WEBGL))this._renderWebGL(a);else{if(!this._renderer.isOfType(t.CANVAS))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(a)}}},{key:"_renderWebGL",value:function(a){this._renderTarget.activate(),a.getWorldTransform().reset(),a.getChildren().forEach(function(a){a.updateTransform()});var b=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(a,this._renderTarget),this._renderer.setFilterManager(b)}},{key:"_renderCanvas",value:function(a){a.getWorldTransform().reset(),a.getChildren().forEach(function(a){a.updateTransform()});var b=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(a,this._renderTarget),this._renderer.setFilterManager(b)}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"dispose",value:function(){this._renderTarget.dispose(),this._filterManager.dispose()}}]),b}();b.a=u},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(9),m=c(134),n=c(225),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return c._onTextureUpdate=c._onTextureUpdate.bind(c),c._texture=a,c._shader=null,c._width=0,c._height=0,c._anchor=new l.k(0,0),c._canvasSmoothingEnabled=!0,c.setTexture(a),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),o(b,[{key:"_onTextureUpdate",value:function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"_renderWebGL",value:function(a){var b=a.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new n.a),this._potRenderer.render(a,this,this._texture)),a.restore(b),a.setObjectRenderer(a.renderers.sprite),a.renderers.sprite.render(this)}},{key:"_renderCanvas",value:function(a){var b=this._worldTransform,c=this._texture.getFrame(),d=c.width,e=c.height,f=a.getCurrentRenderTarget().getPixelRatio(),g=this._anchor.x*-d|0,h=this._anchor.y*-e|0,i=a.getContext();i.setTransform(b.a,b.b,b.c,b.d,b.tx*f,b.ty*f),i.globalAlpha=this.getWorldAlpha();var j=this._texture.getBaseTexture(),k=j.getPixelRatio(),l=j.getSource();i.imageSmoothingEnabled=this._canvasSmoothingEnabled,i.drawImage(l,0,0,(l.naturalWidth||d)*k,(l.naturalHeight||e)*k,g*f,h*f,d*f,e*f)}},{key:"isAtPosition",value:function(a){var b=this._worldTransform.applyInverseToVector(a),c=this._texture.getFrame(),d=c.width,e=c.height,f=new l.k(-d,-e);f.multiply(this._anchor);var g=f.clone().add(d,e);return!(b.x<f.x||b.x>g.x||b.y<f.y||b.y>g.y)}},{key:"getLocalBounds",value:function(){if(this._localBoundsNeedUpdate){var a=this._localBounds,b=this._texture.getFrame();a.x=-b.width*this._anchor.x,a.y=-b.height*this._anchor.y,a.width=b.width,a.height=b.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}},{key:"getBounds",value:function(){if(this._boundsNeedUpdate){var a=this._bounds,b=this._texture.getFrame(),c=this._worldTransform,d=this._anchor,e=c.rectangleToCoordinates(b,d),f=e[0].x,g=e[0].y,h=f,i=g;e.forEach(function(a){var b=a.x,c=a.y;f=Math.min(f,b),g=Math.min(g,c),h=Math.max(h,b),i=Math.max(i,c)}),a.x=f,a.width=Math.abs(h-f),a.y=g,a.height=Math.abs(i-g),this._boundsNeedUpdate=!1}return this._bounds.clone()}},{key:"getTexture",value:function(){return this._texture}},{key:"clearTexture",value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._texture&&(this._texture.off("update",this._onTextureUpdate),a&&this._texture.dispose(),this._texture=null,this._potRenderer&&(a&&this._potRenderer.dispose(),this._potRenderer=null))}},{key:"setTexture",value:function(a){a&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=a,a.getBaseTexture().isLoaded()&&this._onTextureUpdate(),a.on("update",this._onTextureUpdate))}},{key:"getShader",value:function(){return this._shader}},{key:"setShader",value:function(a){this._shader=a}},{key:"getWidth",value:function(){return this._width}},{key:"setWidth",value:function(a){this._scale.x=a/this._texture.getFrame().width,this._width=a,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getHeight",value:function(){return this._height}},{key:"setHeight",value:function(a){this._scale.y=a/this._texture.getFrame().height,this._height=a,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"getDimensions",value:function(){return new l.k(this._width,this._height)}},{key:"getAnchor",value:function(){return this._anchor}},{key:"setAnchor",value:function(a,b){a instanceof l.k?this._anchor.copy(a):this._anchor.set(a,b),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}},{key:"isSmoothDownscaling",value:function(){return this._smoothDownscaling}},{key:"setSmoothDownscaling",value:function(a){this._smoothDownscaling=a}},{key:"dispose",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._texture&&this._texture.off("update",this._onTextureUpdate),(a||b)&&this._texture.dispose(b),this._potRenderer&&this._potRenderer.dispose()}}]),b}();b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(41),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._container=new f.Engine.Container,this._sprite=new f.Engine.Sprite,this._container.addChild(this._sprite)}return g(a,[{key:"render",value:function(a,b,c){var d=c.getDimensions(),e=this._getNextHighestPOT(d);this._renderTexture?this._renderTexture.resizeTo(e):this._renderTexture=new f.Engine.RenderTexture(a,e.x,e.y);var g=this._renderTexture.getDimensions();this._sprite.setTexture(c),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(a,b,d,g)}},{key:"_updateSprite",value:function(a,b,c,d){b.setTexture(this._renderTexture),this._renderTexture.setFrame(new f.Rectangle(0,0,c.x,c.y))}},{key:"_getNextHighestPOT",value:function(a){return new f.Vector2(f.Utils.nextHighestPOT(a.x),f.Utils.nextHighestPOT(a.y))}},{key:"getRenderTexture",value:function(){return this._renderTexture}},{key:"dispose",value:function(){this._renderTexture&&(this._renderTexture.dispose(),this._renderTexture=null)}}]),a}();b.a=h},function(a,b,c){var d=c(97);b.a={TextureShader:d.a}},function(a,b,c){a.exports={default:c(228),__esModule:!0}},function(a,b,c){c(229),a.exports=c(10).setImmediate},function(a,b,c){var d=c(13),e=c(93);d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(231);c.d(b,"UnpremultiplyFilter",function(){return d.a});var e=c(233);c.d(b,"ColorOverlayFilter",function(){return e.a});var f=c(235);c.d(b,"TintFilter",function(){return f.a});var g=c(237);c.d(b,"OverlayFilter",function(){return g.a})},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(54),k=function(a){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).call(this));return a._fragmentSource=c(232),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();b.a=k},function(a,b){a.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(9),m=c(54),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=l.c.OptionType,p=l.c.UniformType,q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(e)));return g._fragmentSource=c(234),g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=this._options.color,h=e.getImageData(0,0,d.width,d.height),i=f.getImageData(0,0,d.width,d.height),j=d.width*d.height,k=new l.b,m=new l.b,n=0;n<4*j;n+=4){k.set(h.data[n]/255,h.data[n+1]/255,h.data[n+2]/255,h.data[n+3]/255),m.set(i.data[n]/255,i.data[n+1]/255,i.data[n+2]/255,i.data[n+3]/255);var o=m.r+k.a*(k.r-m.r);i.data[n]=255*(o+k.a*(g.r-o));var p=m.g+k.a*(k.g-m.g);i.data[n+1]=255*(p+k.a*(g.g-p));var q=m.b+k.a*(k.b-m.b);i.data[n+2]=255*(q+k.a*(g.b-q))}f.putImageData(i,0,0)}}]),b}();q.prototype.availableOptions={color:{type:o.COLOR,default:l.b.WHITE,uniformType:p.FLOAT4}},b.a=q},function(a,b){a.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(9),m=c(54),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=l.c.OptionType,p=l.c.UniformType,q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(e)));return g._fragmentSource=c(236),g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"_applyCanvas",value:function(a,c,d){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var e=c.getCanvas(),f=c.getContext(),g=d.getContext(),h=f.getImageData(0,0,e.width,e.height),i=this._options,j=i.mode,k=i.color,m=k.r,n=k.g,o=k.b,p=k.a,q=[.2125,.7154,.0721];switch(j){case b.MODES.SOLID:for(var r=0;r<e.width*e.height;r++){var s=4*r;h.data[s]+=(255*m-h.data[s])*p,h.data[s+1]+=(255*n-h.data[s+1])*p,h.data[s+2]+=(255*o-h.data[s+2])*p}break;case b.MODES.COLORIZED:for(var t=0;t<e.width*e.height;t++){var u=4*t,v=h.data[u]/255*q[0]+h.data[u+1]/255*q[1]+h.data[u+2]/255*q[2],w=new l.b(v*m,v*n,v*o);h.data[u]+=(255*w.r-h.data[u])*p,h.data[u+1]+=(255*w.g-h.data[u+1])*p,h.data[u+2]+=(255*w.b-h.data[u+2])*p}}g.putImageData(h,0,0)}}]),b}();q.MODES={NONE:0,SOLID:1,COLORIZED:2},q.prototype.availableOptions={color:{type:o.COLOR,default:l.b.WHITE,uniformType:p.FLOAT4},mode:{type:o.NUMBER,default:q.MODES.NONE,uniformType:p.INT}},b.a=q},function(a,b){a.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(9),m=c(54),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=l.c.OptionType,p=l.c.UniformType,q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(e)));return g._fragmentSource=c(238),g._lastImage=null,g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"_applyCanvas",value:function(a,c,d){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var e=this._options.overlayTexture.getRenderTarget().getContext(),f=c.getCanvas(),g=c.getContext(),h=d.getContext(),i=g.getImageData(0,0,f.width,f.height),j=e.getImageData(0,0,f.width,f.height),k=this._options,m=k.blendMode,n=k.alpha,o=new l.b,p=new l.b,q=new l.b,r=0;r<f.width*f.height*4;r+=4){o.set(i.data[r]/255,i.data[r+1]/255,i.data[r+2]/255,i.data[r+3]/255),p.set(j.data[r]/255,j.data[r+1]/255,j.data[r+2]/255,j.data[r+3]/255);var s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0;switch(m){case b.BLEND_MODES.NORMAL:q.set(o.r+p.a*n*(p.r-o.r),o.g+p.a*n*(p.g-o.g),o.b+p.a*n*(p.b-o.b),o.a);break;case b.BLEND_MODES.OVERLAY:s=1-2*(1-o.r)*(1-p.r),t=2*o.r*p.r,u=s+(o.r<.5?1:0)*(t-s),v=1-2*(1-o.g)*(1-p.g),w=2*o.g*p.g,x=v+(o.g<.5?1:0)*(w-v),y=1-2*(1-o.b)*(1-p.b),z=2*o.b*p.b,A=y+(o.b<.5?1:0)*(z-y),q.set(o.r+p.a*n*(u-o.r),o.g+p.a*n*(x-o.g),o.b+p.a*n*(A-o.b),o.a);break;case b.BLEND_MODES.HARD_LIGHT:s=1-2*(1-p.r)*(1-o.r),t=2*p.r*o.r,u=s+(p.r<.5?1:0)*(t-s),v=1-2*(1-p.g)*(1-o.g),w=2*p.g*o.g,x=v+(p.g<.5?1:0)*(w-v),y=1-2*(1-p.b)*(1-o.b),z=2*p.b*o.b,A=y+(p.b<.5?1:0)*(z-y),q.set(o.r+p.a*n*(u-o.r),o.g+p.a*n*(x-o.g),o.b+p.a*n*(A-o.b),o.a);break;case b.BLEND_MODES.SOFT_LIGHT:s=2*o.r*(1-p.r)+(2*p.r-1)*Math.sqrt(o.r),t=2*o.r*p.r+o.r*o.r*(1-2*p.r),u=s+(p.r<.5?1:0)*(t-s),v=2*o.g*(1-p.g)+(2*p.g-1)*Math.sqrt(o.g),w=2*o.g*p.g+o.g*o.g*(1-2*p.g),x=v+(p.g<.5?1:0)*(w-v),y=2*o.b*(1-p.b)+(2*p.b-1)*Math.sqrt(o.b),z=2*o.b*p.b+o.b*o.b*(1-2*p.b),A=y+(p.b<.5?1:0)*(z-y),q.set(o.r+p.a*n*(u-o.r),o.g+p.a*n*(x-o.g),o.b+p.a*n*(A-o.b),o.a);break;case b.BLEND_MODES.MULTIPLY:u=o.r*p.r,x=o.g*p.g,A=o.b*p.b,q.set(o.r+p.a*n*(u-o.r),o.g+p.a*n*(x-o.g),o.b+p.a*n*(A-o.b),o.a);break;case b.BLEND_MODES.DARKEN:u=Math.min(o.r,p.r),x=Math.min(o.g,p.g),A=Math.min(o.b,p.b),q.set(o.r+p.a*n*(u-o.r),o.g+p.a*n*(x-o.g),o.b+p.a*n*(A-o.b),o.a);break;case b.BLEND_MODES.LIGHTEN:u=Math.max(o.r,p.r),x=Math.max(o.g,p.g),A=Math.max(o.b,p.b),q.set(o.r+p.a*n*(u-o.r),o.g+p.a*n*(x-o.g),o.b+p.a*n*(A-o.b),o.a);break;case b.BLEND_MODES.SCREEN:u=1-(1-o.r)*(1-p.r),x=1-(1-o.g)*(1-p.g),A=1-(1-o.b)*(1-p.b),q.set(o.r+p.a*n*(u-o.r),o.g+p.a*n*(x-o.g),o.b+p.a*n*(A-o.b),o.a);break;case b.BLEND_MODES.COLOR_BURN:u=Math.max(0,Math.min(1,1-(1-o.r)/Math.max(p.r,1e-6))),x=Math.max(0,Math.min(1,1-(1-o.g)/Math.max(p.g,1e-6))),A=Math.max(0,Math.min(1,1-(1-o.b)/Math.max(p.b,1e-6))),q.set(o.r+p.a*n*(u-o.r),o.g+p.a*n*(x-o.g),o.b+p.a*n*(A-o.b),o.a)}i.data[r]=255*q.r,i.data[r+1]=255*q.g,i.data[r+2]=255*q.b,i.data[r+3]=255*q.a}h.putImageData(i,0,0)}}]),b}();q.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},q.prototype.availableOptions={blendMode:{type:o.NUMBER,default:q.BLEND_MODES.NORMAL,uniformType:p.INT},overlayImage:{type:o.NUMBER,required:!0,uniformType:p.SAMPLER2D},overlayTexture:{type:o.OBJECT,required:!0},alpha:{type:o.NUMBER,default:1,uniformType:p.FLOAT}},b.a=q},function(a,b){a.exports="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n"},function(a,b,c){c.d(b,"a",function(){return d});var d={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"}},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.d(b,"a",function(){return v});var e=c(36),f=c.n(e),g=c(40),h=c.n(g),i=c(0),j=c.n(i),k=c(30),l=c.n(k),m=c(22),n=c(241),o=c(50),p=c(137),q=c(249),r="function"==typeof h.a&&"symbol"==typeof f.a?function(a){return typeof a}:function(a){return a&&"function"==typeof h.a&&a.constructor===h.a&&a!==h.a.prototype?"symbol":typeof a},s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function(a){return m.a.byteArrayToString(o.a.decode(a))},u=function(){function a(b){d(this,a),this._version="2.0",this._l="string"==typeof b?b.trim():b,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}return s(a,[{key:"v",value:function(){return this._sigValid()&&!this.isExp()}},{key:"_jsonValid",value:function(){try{this._decLic=JSON.parse(this._l)}catch(a){return this._decLic={},!1}return!0}},{key:"_hostnameValid",value:function(){if("undefined"==typeof window)return!0;if(!this._decLic[t("YXBwX2lkZW50aWZpZXJz")].length)return!0;var a=window.location.hostname,b=!1;return this._decLic[t("YXBwX2lkZW50aWZpZXJz")].forEach(function(c){m.a.wildCardMatch(a,c)&&(b=!0)}),b}},{key:"_platformValid",value:function(){return"HTML5"===this._decLic[t("cGxhdGZvcm0=")]}},{key:"c",value:function(){var a=this;return new l.a(function(b,c){if("string"!==r(a._l)||!a._jsonValid()){var d=new Error;return d.code="ELICINVFMT",c(d)}if(!a._sigValid()){var e=new Error;return e.code="ELICINV",c(e)}if(!a._hostnameValid()){var f=new Error;return f.code="ELICINVHOST",c(f)}if(!a._platformValid()){var g=new Error;return g.code="ELICINVPLAT",c(g)}if(a.isExp()){var h=new Error;return h.code="ELICEXP",c(h)}b()})}},{key:"isToolAllowed",value:function(a){return this._decLic[t("ZmVhdHVyZXM=")]&&-1!==this._decLic[t("ZmVhdHVyZXM=")].indexOf(a)}},{key:"t",value:function(){if(this._decLic.enterprise_license)return l.a.resolve();var a=this._decLic[t("ZG9tYWlucw==")][0]+t(t("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[t("YXBpX3Rva2Vu")];return new p.a(a).load()}},{key:"isENT",value:function(){return!!this._decLic&&this._decLic[t("ZW50ZXJwcmlzZV9saWNlbnNl")]}},{key:"_sigValid",value:function(){return this._verify(this._message,this._sig)}},{key:"exp",value:function(){return!!this._decLic[t("ZXhwaXJlc19hdA==")]}},{key:"dl",value:function(){return Math.ceil((this._expAt()-Date.now())/864e5)}},{key:"isExp",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return null!==this._decLic[t("ZXhwaXJlc19hdA==")]&&a>this._expAt()}},{key:"_expAt",value:function(){return 1e3*this._decLic[t("ZXhwaXJlc19hdA==")]}},{key:"_verify",value:function(a,b){return this._encodeMessage(a)===this._decodeSignature(b).substr(-64)}},{key:"_encodeMessage",value:function(a){return Object(q.a)(a)}},{key:"_decodeSignature",value:function(a){return a=o.a.decode(a),a=a.map(function(a){return("0"+(255&a).toString(16)).slice(-2)}).join(""),(a=this._parseBigInt(a,16)).modPowInt(this._e,this._n).toString(16)}},{key:"_parseBigInt",value:function(a,b){return new n.a(a,b)}},{key:"_parseLicense",value:function(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[t("c2lnbmF0dXJl")]||"",delete this._decLic[t("c2lnbmF0dXJl")],this._sig=this._sig.replace(/[^A-Za-z0-9+\/=]/g,""),this._message=this._l.replace(new RegExp(',"'+t("c2lnbmF0dXJl")+'":"([^"]*)"'),""))}}]),a}(),v=function(){function a(){d(this,a)}return s(a,[{key:"v",value:function(){return!0}},{key:"c",value:function(){return l.a.resolve()}},{key:"isToolAllowed",value:function(a){return!0}},{key:"t",value:function(){return l.a.resolve()}},{key:"isENT",value:function(){return!1}},{key:"exp",value:function(){return!1}},{key:"dl",value:function(){return 0}},{key:"isExp",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),!1}}]),a}();b.b=u},function(a,b,c){function d(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function e(){return new d(null)}function f(a){return y.charAt(a)}function g(a,b){var c=z[a.charCodeAt(b)];return null==c?-1:c}function h(a){var b=e();return b.fromInt(a),b}function i(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function j(a){this.m=a}function k(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function l(a,b){return a&b}function m(a,b){return a|b}function n(a,b){return a^b}function o(a,b){return a&~b}function p(a){if(0==a)return-1;var b=0;return 0==(65535&a)&&(a>>=16,b+=16),0==(255&a)&&(a>>=8,b+=8),0==(15&a)&&(a>>=4,b+=4),0==(3&a)&&(a>>=2,b+=2),0==(1&a)&&++b,b}function q(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function r(){}function s(a){return a}function t(a){this.r2=e(),this.q3=e(),d.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}var u,v=v||{};"Microsoft Internet Explorer"==v.appName?(d.prototype.am=function(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this[a],j=this[a++]>>15,k=h*i+j*g;e=((i=g*i+((32767&k)<<15)+c[d]+(1073741823&e))>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=1073741823&i}return e},u=30):"Netscape"!=v.appName?(d.prototype.am=function(a,b,c,d,e,f){for(;--f>=0;){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864),c[d++]=67108863&g}return e},u=26):(d.prototype.am=function(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this[a],j=this[a++]>>14,k=h*i+j*g;e=((i=g*i+((16383&k)<<14)+c[d]+e)>>28)+(k>>14)+h*j,c[d++]=268435455&i}return e},u=28),d.prototype.DB=u,d.prototype.DM=(1<<u)-1,d.prototype.DV=1<<u,d.prototype.FV=Math.pow(2,52),d.prototype.F1=52-u,d.prototype.F2=2*u-52;var w,x,y="0123456789abcdefghijklmnopqrstuvwxyz",z=new Array;for(w="0".charCodeAt(0),x=0;x<=9;++x)z[w++]=x;for(w="a".charCodeAt(0),x=10;x<36;++x)z[w++]=x;for(w="A".charCodeAt(0),x=10;x<36;++x)z[w++]=x;j.prototype.convert=function(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a},j.prototype.revert=function(a){return a},j.prototype.reduce=function(a){a.divRemTo(this.m,null,a)},j.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},j.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},k.prototype.convert=function(a){var b=e();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(d.ZERO)>0&&this.m.subTo(b,b),b},k.prototype.revert=function(a){var b=e();return a.copyTo(b),this.reduce(b),b},k.prototype.reduce=function(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a[b],d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(a[c=b+this.m.t]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)},k.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},k.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},d.prototype.copyTo=function(a){
for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s},d.prototype.fromInt=function(a){this.t=1,this.s=a<0?-1:0,a>0?this[0]=a:a<-1?this[0]=a+this.DV:this.t=0},d.prototype.fromString=function(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else{if(4!=b)return void this.fromRadix(a,b);c=2}this.t=0,this.s=0;for(var e=a.length,f=!1,h=0;--e>=0;){var i=8==c?255&a[e]:g(a,e);i<0?"-"==a.charAt(e)&&(f=!0):(f=!1,0==h?this[this.t++]=i:h+c>this.DB?(this[this.t-1]|=(i&(1<<this.DB-h)-1)<<h,this[this.t++]=i>>this.DB-h):this[this.t-1]|=i<<h,(h+=c)>=this.DB&&(h-=this.DB))}8==c&&0!=(128&a[0])&&(this.s=-1,h>0&&(this[this.t-1]|=(1<<this.DB-h)-1<<h)),this.clamp(),f&&d.ZERO.subTo(this,this)},d.prototype.clamp=function(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t},d.prototype.dlShiftTo=function(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s},d.prototype.drShiftTo=function(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s},d.prototype.lShiftTo=function(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b[c+g+1]=this[c]>>e|h,h=(this[c]&f)<<d;for(c=g-1;c>=0;--c)b[c]=0;b[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()},d.prototype.rShiftTo=function(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)b.t=0;else{var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}},d.prototype.subTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=d<0?-1:0,d<-1?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()},d.prototype.multiplyTo=function(a,b){var c=this.abs(),e=a.abs(),f=c.t;for(b.t=f+e.t;--f>=0;)b[f]=0;for(f=0;f<e.t;++f)b[f+c.t]=c.am(0,e[f],b,f,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&d.ZERO.subTo(b,b)},d.prototype.squareTo=function(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()},d.prototype.divRemTo=function(a,b,c){var f=a.abs();if(!(f.t<=0)){var g=this.abs();if(g.t<f.t)return null!=b&&b.fromInt(0),void(null!=c&&this.copyTo(c));null==c&&(c=e());var h=e(),j=this.s,k=a.s,l=this.DB-i(f[f.t-1]);l>0?(f.lShiftTo(l,h),g.lShiftTo(l,c)):(f.copyTo(h),g.copyTo(c));var m=h.t,n=h[m-1];if(0!=n){var o=n*(1<<this.F1)+(m>1?h[m-2]>>this.F2:0),p=this.FV/o,q=(1<<this.F1)/o,r=1<<this.F2,s=c.t,t=s-m,u=null==b?e():b;for(h.dlShiftTo(t,u),c.compareTo(u)>=0&&(c[c.t++]=1,c.subTo(u,c)),d.ONE.dlShiftTo(m,u),u.subTo(h,h);h.t<m;)h[h.t++]=0;for(;--t>=0;){var v=c[--s]==n?this.DM:Math.floor(c[s]*p+(c[s-1]+r)*q);if((c[s]+=h.am(0,v,c,t,0,m))<v)for(h.dlShiftTo(t,u),c.subTo(u,c);c[s]<--v;)c.subTo(u,c)}null!=b&&(c.drShiftTo(m,b),j!=k&&d.ZERO.subTo(b,b)),c.t=m,c.clamp(),l>0&&c.rShiftTo(l,c),j<0&&d.ZERO.subTo(c,c)}}},d.prototype.invDigit=function(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return(b=(b=(b=(b=b*(2-(15&a)*b)&15)*(2-(255&a)*b)&255)*(2-((65535&a)*b&65535))&65535)*(2-a*b%this.DV)%this.DV)>0?this.DV-b:-b},d.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},d.prototype.exp=function(a,b){if(a>4294967295||a<1)return d.ONE;var c=e(),f=e(),g=b.convert(this),h=i(a)-1;for(g.copyTo(c);--h>=0;)if(b.sqrTo(c,f),(a&1<<h)>0)b.mulTo(f,g,c);else{var j=c;c=f,f=j}return b.revert(c)},d.prototype.toString=function(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,g="",h=this.t,i=this.DB-h*this.DB%b;if(h-- >0)for(i<this.DB&&(c=this[h]>>i)>0&&(e=!0,g=f(c));h>=0;)i<b?(c=(this[h]&(1<<i)-1)<<b-i,c|=this[--h]>>(i+=this.DB-b)):(c=this[h]>>(i-=b)&d,i<=0&&(i+=this.DB,--h)),c>0&&(e=!0),e&&(g+=f(c));return e?g:"0"},d.prototype.negate=function(){var a=e();return d.ZERO.subTo(this,a),a},d.prototype.abs=function(){return this.s<0?this.negate():this},d.prototype.compareTo=function(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(0!=(b=c-a.t))return this.s<0?-b:b;for(;--c>=0;)if(0!=(b=this[c]-a[c]))return b;return 0},d.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+i(this[this.t-1]^this.s&this.DM)},d.prototype.mod=function(a){var b=e();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(d.ZERO)>0&&a.subTo(b,b),b},d.prototype.modPowInt=function(a,b){var c;return c=a<256||b.isEven()?new j(b):new k(b),this.exp(a,c)},d.ZERO=h(0),d.ONE=h(1),r.prototype.convert=s,r.prototype.revert=s,r.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c)},r.prototype.sqrTo=function(a,b){a.squareTo(b)},t.prototype.convert=function(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=e();return a.copyTo(b),this.reduce(b),b},t.prototype.revert=function(a){return a},t.prototype.reduce=function(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)},t.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},t.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)};var A=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],B=(1<<26)/A[A.length-1];d.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))},d.prototype.toRadix=function(a){if(null==a&&(a=10),0==this.signum()||a<2||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=h(c),f=e(),g=e(),i="";for(this.divRemTo(d,f,g);f.signum()>0;)i=(c+g.intValue()).toString(a).substr(1)+i,f.divRemTo(d,f,g);return g.intValue().toString(a)+i},d.prototype.fromRadix=function(a,b){this.fromInt(0),null==b&&(b=10);for(var c=this.chunkSize(b),e=Math.pow(b,c),f=!1,h=0,i=0,j=0;j<a.length;++j){var k=g(a,j);k<0?"-"==a.charAt(j)&&0==this.signum()&&(f=!0):(i=b*i+k,++h>=c&&(this.dMultiply(e),this.dAddOffset(i,0),h=0,i=0))}h>0&&(this.dMultiply(Math.pow(b,h)),this.dAddOffset(i,0)),f&&d.ZERO.subTo(this,this)},d.prototype.fromNumber=function(a,b,c){if("number"==typeof b)if(a<2)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(d.ONE.shiftLeft(a-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(d.ONE.shiftLeft(a-1),this);else{var e=new Array,f=7&a;e.length=1+(a>>3),b.nextBytes(e),f>0?e[0]&=(1<<f)-1:e[0]=0,this.fromString(e,256)}},d.prototype.bitwiseTo=function(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;d<f;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){for(e=a.s&this.DM,d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{for(e=this.s&this.DM,d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()},d.prototype.changeBit=function(a,b){var c=d.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c},d.prototype.addTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=d<0?-1:0,d>0?b[c++]=d:d<-1&&(b[c++]=this.DV+d),b.t=c,b.clamp()},d.prototype.dMultiply=function(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()},d.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}},d.prototype.multiplyLowerTo=function(a,b,c){var d,e=Math.min(this.t+a.t,b);for(c.s=0,c.t=e;e>0;)c[--e]=0;for(d=c.t-this.t;e<d;++e)c[e+this.t]=this.am(0,a[e],c,e,0,this.t);for(d=Math.min(a.t,b);e<d;++e)this.am(0,a[e],c,e,0,b-e);c.clamp()},d.prototype.multiplyUpperTo=function(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)},d.prototype.modInt=function(a){if(a<=0)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(0==b)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c},d.prototype.millerRabin=function(a){var b=this.subtract(d.ONE),c=b.getLowestSetBit();if(c<=0)return!1;var f=b.shiftRight(c);(a=a+1>>1)>A.length&&(a=A.length);for(var g=e(),h=0;h<a;++h){g.fromInt(A[Math.floor(Math.random()*A.length)]);var i=g.modPow(f,this);if(0!=i.compareTo(d.ONE)&&0!=i.compareTo(b)){for(var j=1;j++<c&&0!=i.compareTo(b);)if(0==(i=i.modPowInt(2,this)).compareTo(d.ONE))return!1;if(0!=i.compareTo(b))return!1}}return!0},d.prototype.clone=function(){var a=e();return this.copyTo(a),a},d.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},d.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},d.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},d.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},d.prototype.toByteArray=function(){var a=this.t,b=new Array;b[0]=this.s;var c,d=this.DB-a*this.DB%8,e=0;if(a-- >0)for(d<this.DB&&(c=this[a]>>d)!=(this.s&this.DM)>>d&&(b[e++]=c|this.s<<this.DB-d);a>=0;)d<8?(c=(this[a]&(1<<d)-1)<<8-d,c|=this[--a]>>(d+=this.DB-8)):(c=this[a]>>(d-=8)&255,d<=0&&(d+=this.DB,--a)),0!=(128&c)&&(c|=-256),0==e&&(128&this.s)!=(128&c)&&++e,(e>0||c!=this.s)&&(b[e++]=c);return b},d.prototype.equals=function(a){return 0==this.compareTo(a)},d.prototype.min=function(a){return this.compareTo(a)<0?this:a},d.prototype.max=function(a){return this.compareTo(a)>0?this:a},d.prototype.and=function(a){var b=e();return this.bitwiseTo(a,l,b),b},d.prototype.or=function(a){var b=e();return this.bitwiseTo(a,m,b),b},d.prototype.xor=function(a){var b=e();return this.bitwiseTo(a,n,b),b},d.prototype.andNot=function(a){var b=e();return this.bitwiseTo(a,o,b),b},d.prototype.not=function(){for(var a=e(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];return a.t=this.t,a.s=~this.s,a},d.prototype.shiftLeft=function(a){var b=e();return a<0?this.rShiftTo(-a,b):this.lShiftTo(a,b),b},d.prototype.shiftRight=function(a){var b=e();return a<0?this.lShiftTo(-a,b):this.rShiftTo(a,b),b},d.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this[a])return a*this.DB+p(this[a]);return this.s<0?this.t*this.DB:-1},d.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=q(this[c]^b);return a},d.prototype.testBit=function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)},d.prototype.setBit=function(a){return this.changeBit(a,m)},d.prototype.clearBit=function(a){return this.changeBit(a,o)},d.prototype.flipBit=function(a){return this.changeBit(a,n)},d.prototype.add=function(a){var b=e();return this.addTo(a,b),b},d.prototype.subtract=function(a){var b=e();return this.subTo(a,b),b},d.prototype.multiply=function(a){var b=e();return this.multiplyTo(a,b),b},d.prototype.divide=function(a){var b=e();return this.divRemTo(a,b,null),b},d.prototype.remainder=function(a){var b=e();return this.divRemTo(a,null,b),b},d.prototype.divideAndRemainder=function(a){var b=e(),c=e();return this.divRemTo(a,b,c),new Array(b,c)},d.prototype.modPow=function(a,b){var c,d,f=a.bitLength(),g=h(1);if(f<=0)return g;c=f<18?1:f<48?3:f<144?4:f<768?5:6,d=f<8?new j(b):b.isEven()?new t(b):new k(b);var l=new Array,m=3,n=c-1,o=(1<<c)-1;if(l[1]=d.convert(this),c>1){var p=e();for(d.sqrTo(l[1],p);m<=o;)l[m]=e(),d.mulTo(p,l[m-2],l[m]),m+=2}var q,r,s=a.t-1,u=!0,v=e();for(f=i(a[s])-1;s>=0;){for(f>=n?q=a[s]>>f-n&o:(q=(a[s]&(1<<f+1)-1)<<n-f,s>0&&(q|=a[s-1]>>this.DB+f-n)),m=c;0==(1&q);)q>>=1,--m;if((f-=m)<0&&(f+=this.DB,--s),u)l[q].copyTo(g),u=!1;else{for(;m>1;)d.sqrTo(g,v),d.sqrTo(v,g),m-=2;m>0?d.sqrTo(g,v):(r=g,g=v,v=r),d.mulTo(v,l[q],g)}for(;s>=0&&0==(a[s]&1<<f);)d.sqrTo(g,v),r=g,g=v,v=r,--f<0&&(f=this.DB-1,--s)}return d.revert(g)},d.prototype.modInverse=function(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return d.ZERO;for(var c=a.clone(),e=this.clone(),f=h(1),g=h(0),i=h(0),j=h(1);0!=c.signum();){for(;c.isEven();)c.rShiftTo(1,c),b?(f.isEven()&&g.isEven()||(f.addTo(this,f),g.subTo(a,g)),f.rShiftTo(1,f)):g.isEven()||g.subTo(a,g),g.rShiftTo(1,g);for(;e.isEven();)e.rShiftTo(1,e),b?(i.isEven()&&j.isEven()||(i.addTo(this,i),j.subTo(a,j)),i.rShiftTo(1,i)):j.isEven()||j.subTo(a,j),j.rShiftTo(1,j);c.compareTo(e)>=0?(c.subTo(e,c),b&&f.subTo(i,f),g.subTo(j,g)):(e.subTo(c,e),b&&i.subTo(f,i),j.subTo(g,j))}return 0!=e.compareTo(d.ONE)?d.ZERO:j.compareTo(a)>=0?j.subtract(a):j.signum()<0?(j.addTo(a,j),j.signum()<0?j.add(a):j):j},d.prototype.pow=function(a){return this.exp(a,new r)},d.prototype.gcd=function(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(f<0)return b;for(e<f&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));b.signum()>0;)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c},d.prototype.isProbablePrime=function(a){var b,c=this.abs();if(1==c.t&&c[0]<=A[A.length-1]){for(b=0;b<A.length;++b)if(c[0]==A[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<A.length;){for(var d=A[b],e=b+1;e<A.length&&d<B;)d*=A[e++];for(d=c.modInt(d);b<e;)if(d%A[b++]==0)return!1}return c.millerRabin(a)},d.prototype.square=function(){var a=e();return this.squareTo(a),a},b.a=d},function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&g.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}var f=c(243),g=c(245);b.parse=e,b.resolve=function(a,b){return e(a,!1,!0).resolve(b)},b.resolveObject=function(a,b){return a?e(a,!1,!0).resolveObject(b):b},b.format=function(a){return g.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)},b.Url=d;var h=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,j=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,k=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(k),m=["%","/","?",";","#"].concat(l),n=["/","?","#"],o=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,q={javascript:!0,"javascript:":!0},r={javascript:!0,"javascript:":!0},s={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},t=c(246);d.prototype.parse=function(a,b,c){if(!g.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",i=a.split(e);i[0]=i[0].replace(/\\/g,"/");var k=a=i.join(e);if(k=k.trim(),!c&&1===a.split("#").length){var u=j.exec(k);if(u)return this.path=k,this.href=k,this.pathname=u[1],u[2]?(this.search=u[2],this.query=b?t.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var v=h.exec(k);if(v){var w=(v=v[0]).toLowerCase();this.protocol=w,k=k.substr(v.length)}if(c||v||k.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===k.substr(0,2);!x||v&&r[v]||(k=k.substr(2),this.slashes=!0)}if(!r[v]&&(x||v&&!s[v])){for(var y,z,A=-1,B=0;B<n.length;B++)-1!==(C=k.indexOf(n[B]))&&(-1===A||C<A)&&(A=C);for(-1!==(z=-1===A?k.lastIndexOf("@"):k.lastIndexOf("@",A))&&(y=k.slice(0,z),k=k.slice(z+1),this.auth=decodeURIComponent(y)),A=-1,B=0;B<m.length;B++){var C;-1!==(C=k.indexOf(m[B]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=k.length),this.host=k.slice(0,A),k=k.slice(A),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var E=this.hostname.split(/\./),F=(B=0,E.length);B<F;B++){var G=E[B];if(G&&!G.match(o)){for(var H="",I=0,J=G.length;I<J;I++)G.charCodeAt(I)>127?H+="x":H+=G[I];if(!H.match(o)){var K=E.slice(0,B),L=E.slice(B+1),M=G.match(p);M&&(K.push(M[1]),L.unshift(M[2])),L.length&&(k="/"+L.join(".")+k),this.hostname=K.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=f.toASCII(this.hostname));var N=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+N,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==k[0]&&(k="/"+k))}if(!q[w])for(B=0,F=l.length;B<F;B++){var P=l[B];if(-1!==k.indexOf(P)){var Q=encodeURIComponent(P);Q===P&&(Q=escape(P)),k=k.split(P).join(Q)}}var R=k.indexOf("#");-1!==R&&(this.hash=k.substr(R),k=k.slice(0,R));var S=k.indexOf("?");if(-1!==S?(this.search=k.substr(S),this.query=k.substr(S+1),b&&(this.query=t.parse(this.query)),k=k.slice(0,S)):b&&(this.search="",this.query={}),k&&(this.pathname=k),s[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var T=this.search||"";this.path=N+T}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=(a=encodeURIComponent(a)).replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&g.isObject(this.query)&&Object.keys(this.query).length&&(f=t.stringify(this.query));var h=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||s[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),h&&"?"!==h.charAt(0)&&(h="?"+h),b+e+(c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}))+(h=h.replace("#","%23"))+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(g.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var h=e[f];c[h]=this[h]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var i=Object.keys(a),j=0;j<i.length;j++){var k=i[j];"protocol"!==k&&(c[k]=a[k])}return s[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!s[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||r[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var t=c.pathname&&"/"===c.pathname.charAt(0),u=a.host||a.pathname&&"/"===a.pathname.charAt(0),v=u||t||c.host&&a.pathname,w=v,x=c.pathname&&c.pathname.split("/")||[],y=(o=a.pathname&&a.pathname.split("/")||[],c.protocol&&!s[c.protocol]);if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),v=v&&(""===o[0]||""===x[0])),u)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!g.isNullOrUndefined(a.search))return y&&(c.hostname=c.host=x.shift(),(D=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"))&&(c.auth=D.shift(),c.host=c.hostname=D.shift())),c.search=a.search,c.query=a.query,g.isNull(c.pathname)&&g.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var z=x.slice(-1)[0],A=(c.host||a.host||x.length>1)&&("."===z||".."===z)||""===z,B=0,C=x.length;C>=0;C--)"."===(z=x[C])?x.splice(C,1):".."===z?(x.splice(C,1),B++):B&&(x.splice(C,1),B--);if(!v&&!w)for(;B--;B)x.unshift("..");!v||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),A&&"/"!==x.join("/").substr(-1)&&x.push("");var D,E=""===x[0]||x[0]&&"/"===x[0].charAt(0);return y&&(c.hostname=c.host=E?"":x.length?x.shift():"",(D=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"))&&(c.auth=D.shift(),c.host=c.hostname=D.shift())),(v=v||c.host&&x.length)&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),g.isNull(c.pathname)&&g.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=i.exec(a);b&&(":"!==(b=b[0])&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},function(a,b,c){(function(a,d){var e;!function(d){function f(a){throw new RangeError(B[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),d+g((a=a.replace(A,".")).split("."),b).join(".")}function i(a){for(var b,c,d=[],e=0,f=a.length;e<f;)(b=a.charCodeAt(e++))>=55296&&b<=56319&&e<f?56320==(64512&(c=a.charCodeAt(e++)))?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(b+=E((a-=65536)>>>10&1023|55296),a=56320|1023&a),b+=E(a)}).join("")}function k(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?D(a/u):a>>1,a+=D(a/b);a>C*s>>1;d+=q)a=D(a/C);return D(d+(C+1)*a/(a+t))}function m(a){var b,c,d,e,g,h,i,k,m,n,o,t=[],u=a.length,y=0,z=w,A=v;for((c=a.lastIndexOf(x))<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&f("not-basic"),t.push(a.charCodeAt(d));for(e=c>0?c+1:0;e<u;){for(g=y,h=1,i=q;e>=u&&f("invalid-input"),((k=(o=a.charCodeAt(e++))-48<10?o-22:o-65<26?o-65:o-97<26?o-97:q)>=q||k>D((p-y)/h))&&f("overflow"),y+=k*h,!(k<(m=i<=A?r:i>=A+s?s:i-A));i+=q)h>D(p/(n=q-m))&&f("overflow"),h*=n;A=l(y-g,b=t.length+1,0==g),D(y/b)>p-z&&f("overflow"),z+=D(y/b),y%=b,t.splice(y++,0,z)}return j(t)}function n(a){var b,c,d,e,g,h,j,m,n,o,t,u,y,z,A,B=[];for(u=(a=i(a)).length,b=w,c=0,g=v,h=0;h<u;++h)(t=a[h])<128&&B.push(E(t));for(d=e=B.length,e&&B.push(x);d<u;){for(j=p,h=0;h<u;++h)(t=a[h])>=b&&t<j&&(j=t);for(j-b>D((p-c)/(y=d+1))&&f("overflow"),c+=(j-b)*y,b=j,h=0;h<u;++h)if((t=a[h])<b&&++c>p&&f("overflow"),t==b){for(m=c,n=q;!(m<(o=n<=g?r:n>=g+s?s:n-g));n+=q)A=m-o,z=q-o,B.push(E(k(o+A%z,0))),m=D(A/z);B.push(E(k(m,0))),g=l(c,y,d==e),c=0,++d}++c,++b}return B.join("")}"object"==typeof b&&b&&b.nodeType,"object"==typeof a&&a&&a.nodeType;var o,p=2147483647,q=36,r=1,s=26,t=38,u=700,v=72,w=128,x="-",y=/^xn--/,z=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=q-r,D=Math.floor,E=String.fromCharCode;o={version:"1.4.1",ucs2:{decode:i,encode:j},decode:m,encode:n,toASCII:function(a){return h(a,function(a){return z.test(a)?"xn--"+n(a):a})},toUnicode:function(a){return h(a,function(a){return y.test(a)?m(a.slice(4).toLowerCase()):a})}},void 0===(e=function(){return o}.call(b,c,b,a))||(a.exports=e)}()}).call(b,c(244)(a),c(49))},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(a,b,c){a.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},function(a,b,c){b.decode=b.parse=c(247),b.encode=b.stringify=c(248)},function(a,b,c){function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}a.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},function(a,b,c){function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};a.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},function(a,b,c){function d(a){function b(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function c(a,b){return a>>>b|a<<32-b}function d(a,b){return a>>>b}function e(a,b,c){return a&b^~a&c}function f(a,b,c){return a&b^a&c^b&c}function g(a){return c(a,2)^c(a,13)^c(a,22)}function h(a){return c(a,6)^c(a,11)^c(a,25)}function i(a){return c(a,7)^c(a,18)^d(a,3)}return function(a){for(var b="0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>8*(3-d%4)+4&15)+b.charAt(a[d>>2]>>8*(3-d%4)&15);return c}(function(a,j){var k,l,m,n,o,p,q,r,s,t,u,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);a[j>>5]|=128<<24-j%32,a[15+(j+64>>9<<4)]=j;for(var y=0;y<a.length;y+=16){k=w[0],l=w[1],m=w[2],n=w[3],o=w[4],p=w[5],q=w[6],r=w[7];for(var z=0;z<64;z++)x[z]=z<16?a[z+y]:b(b(b(c(u=x[z-2],17)^c(u,19)^d(u,10),x[z-7]),i(x[z-15])),x[z-16]),s=b(b(b(b(r,h(o)),e(o,p,q)),v[z]),x[z]),t=b(g(k),f(k,l,m)),r=q,q=p,p=o,o=b(n,s),n=m,m=l,l=k,k=b(s,t);w[0]=b(k,w[0]),w[1]=b(l,w[1]),w[2]=b(m,w[2]),w[3]=b(n,w[3]),w[4]=b(o,w[4]),w[5]=b(p,w[5]),w[6]=b(q,w[6]),w[7]=b(r,w[7])}return w}(function(a){for(var b=Array(),c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<24-c%32;return b}(a=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}(a)),8*a.length))}c.d(b,"a",function(){return d})},function(a,b,c){(function(a){c.d(b,"b",function(){return e}),c.d(b,"a",function(){return f});for(var d="undefined"==typeof window?a:window,e=d.requestAnimationFrame,f=d.cancelAnimationFrame,g=0,h=["ms","moz","webkit","o"],i=0;i<h.length&&!e;++i)e=d[h[i]+"RequestAnimationFrame"],f=d[h[i]+"CancelAnimationFrame"]||d[h[i]+"CancelRequestAnimationFrame"];e&&(e=e.bind(d)),f&&(f=f.bind(d)),e||(e=function(a,b){var c=(new Date).getTime(),d=Math.max(0,16-(c-g)),e=setTimeout(function(){a(c+d)},d);return g=c+d,e}),f||(f=function(a){clearTimeout(a)})}).call(b,c(49))},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=b,this.y=c,this.z=d,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}return f(a,[{key:"set",value:function(a,b,c){return this.x=a,this.y=b,this.z=c,this}},{key:"clone",value:function(){return new a(this.x,this.y,this.z)}},{key:"copy",value:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}},{key:"clamp",value:function(b,c){var d=null!==b&&void 0!==b,e=null!==c&&void 0!==c;return b instanceof a||!d||(b=new a(b,b,b)),c instanceof a||!e||(c=new a(c,c,c)),d&&(this.x=Math.max(b.x,this.x),this.y=Math.max(b.y,this.y),this.z=Math.max(b.z,this.z)),e&&(this.x=Math.min(c.x,this.x),this.y=Math.min(c.y,this.y),this.z=Math.min(c.z,this.z)),this}},{key:"divide",value:function(b){return b instanceof a?(this.x/=b.x,this.y/=b.y,this.z/=b.z):(this.x/=b,this.y/=b,this.z/=b),this}},{key:"subtract",value:function(b){return b instanceof a?(this.x-=b.x,this.y-=b.y,this.z-=b.z):(this.x-=b,this.y-=b,this.z-=b),this}},{key:"multiply",value:function(b){return b instanceof a?(this.x*=b.x,this.y*=b.y,this.z*=b.z):(this.x*=b,this.y*=b,this.z*=b),this}},{key:"add",value:function(b){return b instanceof a?(this.x+=b.x,this.y+=b.y,this.z+=b.z):(this.x+=b,this.y+=b,this.z+=b),this}},{key:"equals",value:function(b){return b instanceof a?b.x===this.x&&b.y===this.y&&b.z===this.z:b===this.x&&b===this.y&&b===this.z}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"fract",value:function(){return this.x=this.x%1,this.y=this.y%1,this.z=this.z%1,this}},{key:"toInt",value:function(){return this.x=0|this.x,this.y=0|this.y,this.z=0|this.z,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}},{key:"len",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"min",value:function(){return Math.min(Math.min(this.x,this.y),this.z)}},{key:"max",value:function(){
return Math.max(Math.max(this.x,this.y),this.z)}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"toString",value:function(){return"Vector3({ x: "+this.x+", y: "+this.y+", z: "+this.z+" })"}},{key:"roundDecimal",value:function(a){return this.x=parseFloat(this.x.toFixed(a)),this.y=parseFloat(this.y.toFixed(a)),this.z=parseFloat(this.z.toFixed(a)),this}}],[{key:"fromObject",value:function(b){return new a(b.x,b.y,b.z)}},{key:"NULL",get:function(){return new a(0,0,0)}}]),a}();b.a=g},function(a,b,c){var d=c(0),e=c.n(d),f=c(31),g=c(26),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f.a(0,0),c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.a(1,1),d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new f.a(2,-1),e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new f.a(2,0);!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._p0=b.clone(),this._p1=c.clone(),this._p2=d.clone(),this._p3=e.clone(),this._segments=[],this._length=-1,this._sample=[]}return h(a,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f.a(0,0),b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f.a(1,1),c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new f.a(2,1),d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new f.a(2,0);this._p0=a.clone(),this._p1=b.clone(),this._p2=c.clone(),this._p3=d.clone()}},{key:"getLength",value:function(){return this._length}},{key:"calculateSegments",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,b=0,c=0,d=[],e=1/a,f=this._p0.clone(),g=1;g<=a;g++){var h=[];h.push({t:b,s:c,point:f}),b+=e,b=Math.min(b,1);var i=this.evalAt(b);c+=i.clone().subtract(f).len(),h.push({t:b,s:c,point:i}),d.push(h),f=i}return this._segments=d,this._length=c,c}},{key:"evalAt",value:function(a){a=this.normalizeParameter(a);var b=this._p0.clone().multiply(Math.pow(1-a,3)),c=this._p1.clone().multiply(3*(1-a)*(1-a)*a),d=this._p2.clone().multiply(3*(1-a)*a*a),e=this._p3.clone().multiply(a*a*a);return b.add(c).add(d).add(e)}},{key:"isInSegment",value:function(a,b){return(a=this.normalizeArcLength(a))>=b[0].s&&a<=b[1].s}},{key:"getArcLengthSegment",value:function(a){a=this.normalizeArcLength(a);for(var b=0;b<this._segments.length;b++){var c=this._segments[b];if(this.isInSegment(a,c))return c}return null}},{key:"normalizeArcLength",value:function(a){return Math.max(Math.min(this._length,a),0)}},{key:"normalizeParameter",value:function(a){return Math.max(Math.min(1,a),0)}},{key:"getParameterForArcLength",value:function(a){var b=this.normalizeArcLength(a),c=this.getArcLengthSegment(b);if(!c)return g.a.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;var d=(b-c[1].s)/(c[0].s-c[1].s);return d*c[0].t+(1-d)*c[1].t}},{key:"evalAtArcLength",value:function(a){return this.evalAt(this.getParameterForArcLength(a))}},{key:"approximateAtArcLength",value:function(a){var b=this.normalizeArcLength(a),c=this.getArcLengthSegment(b);if(!c)return-1;var d=(b-c[1].s)/(c[0].s-c[1].s);return c[0].point.clone().multiply(d).add(c[1].point.clone().multiply(1-d))}},{key:"parameterSample",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,b=1/a,c=[],d=0,e=0;e<=a+1;e++)c.push(this.evalAt(d)),d+=b;return this._sample=c,[].concat(c)}},{key:"arcLengthApproxSample",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=this._length/a,e=[],f=0,g=b?1:0;g<a+1;g++)e.push(this.approximateAtArcLength(f)),f+=d;return c&&e.pop(),this._sample=e,[].concat(e)}}]),a}();b.a=i},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(41),m=c(33),n=c(31),o=c(140),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=l.Constants.OptionType,r=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,o.a),p(b,[{key:"_getRotation",value:function(){var a=0;switch(this.getTags().Orientation){case 7:case 8:a=-90;break;case 3:case 4:a=-180;break;case 5:case 6:a=90}return a}},{key:"_getFlipVertically",value:function(){return-1!==[5,7].indexOf(this.getTags().Orientation)}},{key:"_getFlipHorizontally",value:function(){return-1!==[2,4].indexOf(this.getTags().Orientation)}},{key:"_getFinalOptions",value:function(){return{rotation:this._getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}},{key:"_render",value:function(a){var b=this._getFinalOptions(),c=b.rotation%360*(Math.PI/180);this._sprite.setScale(b.flipHorizontally?-1:1,b.flipVertically?-1:1),this._sprite.setRotation(c),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var d=this._sprite.getBounds();return this._renderTexture.resizeTo(new n.a(d.width,d.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),m.a.resolve()}},{key:"getNewDimensions",value:function(a){var b=this._getFinalOptions();return a=a.clone(),b.rotation%180&&a.flip(),a}}]),b}();r.identifier="exif-orientation",r.prototype.availableOptions={tags:{type:q.OBJECT,default:{}}},b.a=r},function(a,b,c){var d=c(0),e=c.n(d),f=c(41),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._version=b,this._check()}return g(a,[{key:"_check",value:function(){var a=this;if("undefined"==typeof document)return f.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");var b=this;window.imglySDKVersionCallback=function(c){c.outdated&&f.Log.warn(a.constructor.name,"Your Version "+b._version+" is outdated. Current version is "+c.version+".")};var c=document.createElement("script");c.src="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback=imglySDKVersionCallback&version="+this._version,c.async=!0,document.getElementsByTagName("head")[0].appendChild(c)}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(102),g=c(103),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=g.a.MARKERS,j=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._buf=b,this._stream=new f.a(this._buf),this._stream.setHead(0)}return h(a,[{key:"isValid",value:function(){if(this._stream.setHead(0),this._stream.readInt16()!==i.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;var a=this._stream.readString(4),b=this._stream.readInt8();return"JFIF"===a&&0===b}},{key:"setUnitDensity",value:function(a){this._stream.setHead(11),this._stream.writeInt8(a)}},{key:"setDensityX",value:function(a){this._stream.setHead(12),this._stream.writeInt16(a)}},{key:"setDensityY",value:function(a){this._stream.setHead(14),this._stream.writeInt16(a)}},{key:"getUnitDensity",value:function(){return this._stream.setHead(11),this._stream.readInt8()}},{key:"getDensityX",value:function(){return this._stream.setHead(12),this._stream.readInt16()}},{key:"getDensityY",value:function(){return this._stream.setHead(14),this._stream.readInt16()}},{key:"getBuffer",value:function(){return this._buf}}]),a}();b.a=j},function(a,b,c){var d=c(0),e=c.n(d),f=c(102),g=c(103),h=c(22),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=h.a.invariant,k=g.a.MARKERS,l=g.a.EXIF_TAGS,m=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._buf=b,this._stream=new f.a(this._buf),this._stream.setHead(0),this._parse()}return i(a,[{key:"isValid",value:function(){return this._stream.setHead(0),this._stream.readInt16()===k.EXIF&&this._stream.readInt16()>0&&"Exif"===this._stream.readString(4)}},{key:"_parse",value:function(){if(this.isValid()){this._stream.setHead(10);var a=this._stream.getHead(),b=!1,c=this._stream.readInt16();18761===c?b=!1:19789===c?b=!0:j(!1,"Invalid TIFF data: No endian type found"),j(42===this._stream.readInt16(!b),"Invalid TIFF data: No 0x002A");var d=this._stream.readInt32(!b);j(d>=8,"Invalid TIFF data: First IFD offset < 8");var e=a+d,f=this._readTags(this._stream,a,e,b);this._tags=f.tags,this._tagData=f.tagData}}},{key:"getTags",value:function(){return this._tags}},{key:"getTagData",value:function(){return this._tagData}},{key:"setOrientation",value:function(a){if(this._tagData.Orientation){var b=this._tagData.Orientation.entryOffset;this._stream.setHead(b+8),this._stream.writeInt16(a)}}},{key:"_readTags",value:function(a,b,c,d){a.setHead(c);for(var e=a.readInt16(!d),f={},g=[],h=0;h<e;h++){var i=c+12*h+2;a.setHead(i);var j=a.readInt16(!d),k=void 0,m=void 0,n=void 0;if(l[j]){j=l[j],k=a.readInt16(!d),m=a.readInt32(!d),n=a.readInt32(!d)+b;var o=null;switch(k){case 1:case 7:if(1===m)o=a.readInt8(!d);else{o=[];for(var p=0;p<m;p++)o.push(a.readInt8(!d))}break;case 2:a.setHead(m>4?n:i+8),o=a.readString(m);break;case 3:if(a.setHead(m>2?n:i+8),1===m)o=a.readInt16(!d);else{o=[];for(var q=0;q<m;q++)o.push(a.readInt16(!d))}break;case 4:case 9:if(a.setHead(m>1?n:i+8),1===m)o=a.readInt32(!d);else{o=[];for(var r=0;r<m;r++)o.push(a.readInt32(!d))}break;case 5:case 10:if(a.setHead(n),1===m)o=a.readInt32(!d)/a.readInt32(!d);else{o=[];for(var s=0;s<m;s++){var t=a.readInt32(!d)/a.readInt32(!d);o.push(t)}}}f[j]=o,g[j]={value:o,numValues:m,entryOffset:i,valueOffset:n,type:k}}}return{tags:f,tagData:g}}},{key:"getBuffer",value:function(){return this._buf}}]),a}();b.a=m},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(30),k=c.n(j),l=c(1),m=c.n(l),n=c(32),o=c(69),p=c(22),q=c(75),r=c(101),s=c(55),t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this,c));return d._sdk=a,d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,s.a),t(b,[{key:"export",value:function(){var a=this,b=this._options.imageFormat;return this.validateSettings().then(function(){return a._prepareSDK()}).then(function(b){var c=a._sdk.getRenderer(),d=c.getCanvas();return c.isOfType(n.RendererType.WEBGL)&&(d=a._createCanvasFromTexture(b)),a._encodeImageFormat(d)}).then(function(c){return a._restoreExifMetadata(c,b)}).then(function(b){return a._restoreSDK().then(function(){return b})})}},{key:"_restoreExifMetadata",value:function(a,b,c){if(b===n.ImageFormat.JPEG){var d=this._sdk.getImage(),e=r.a.isJPEG(d.src),f=r.a.isJPEG(a);if(e&&f){var g=this._sdk.getExif();g&&(a=g.restoreSegments(a))}}return k.a.resolve(a)}},{key:"_encodeAsDataURL",value:function(a,b,c){return p.a.isBrowser?k.a.resolve(a.toDataURL(b,c)):new k.a(function(d,e){a.toDataURL(b,c,function(a,b){a?e(a):d(b)})})}},{key:"_encodeAsHTMLImage",value:function(a,b,c){return this._encodeAsDataURL(a).then(function(a){var b=new q.a;return b.src=a,k.a.resolve(b)})}},{key:"_encodeAsBuffer",value:function(a,b,c){return p.a.isNode?b===n.ImageFormat.PNG||b===n.ImageFormat.JPEG?k.a.resolve(a.toBuffer(b,{quality:c})):k.a.reject(new Error("Unsupported imageFormat: "+b)):k.a.reject(new Error("Unsupported platform for RenderType"))}},{key:"_encodeAsMSBlob",value:function(a,b,c){return k.a.resolve(a.msToBlob())}},{key:"_encodeAsBLOB",value:function(a,b,c){return new k.a(function(d,e){a.toBlob(function(a){d(a)},b,c)})}},{key:"_encodeImageFormat",value:function(a){var b=this._options,c=b.renderType,d=b.imageFormat,e=b.quality;switch(c){case n.RenderType.IMAGE:return this._encodeAsHTMLImage(a,d,e);case n.RenderType.DATAURL:return this._encodeAsDataURL(a,d,e);case n.RenderType.BUFFER:return this._encodeAsBuffer(a,d,e);case n.RenderType.MSBLOB:return this._encodeAsMSBLOB(a,d,e);case n.RenderType.BLOB:return this._encodeAsBLOB(a,d,e)}return k.a.reject(new Error("Unsupported RenderType: "+c+"!"))}},{key:"_prepareSDK",value:function(){var a=this._sdk.getRenderer();this._sdkSettings={dimensions:a.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);var b=a.isOfType(n.RendererType.CANVAS);a.setPixelRatio(1),a.resizeTo(this._sdk.getFinalDimensions(),b),this._sdk.setAllOperationsToDirty(!0);var c=this._sdk.getOperationsStack();return c.forEach(function(a){a.disposeRenderTextures()}),c.disableCache(),this._sdk.render()}},{key:"_restoreSDK",value:function(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);var a=this._sdk.getRenderer(),b=a.isOfType(n.RendererType.CANVAS);return a.setPixelRatio(this._sdkSettings.pixelRatio),a.resizeTo(this._sdkSettings.dimensions,b),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}},{key:"_createCanvasFromTexture",value:function(a){var b=this._sdk.getRenderer(),c=this._sdk.getFinalDimensions(),d=this._sdk.getRenderer().getContext(),e=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,e);var f=a.getBaseTexture().getGLTextureForRenderer(b);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,f,0);var g=new Uint8Array(c.x*c.y*4);d.readPixels(0,0,c.x,c.y,d.RGBA,d.UNSIGNED_BYTE,g);var h=void 0;if(this._checkPixelsForTransparency(g)){var i=new o.a.Sprite(a);i.setFilters([new o.a.Filters.UnpremultiplyFilter]);var j=new o.a.Container;j.addChild(i),(h=new o.a.RenderTexture(b,c.x,c.y)).render(j);var k=h.getBaseTexture().getGLTextureForRenderer(b);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,k,0),d.readPixels(0,0,c.x,c.y,d.RGBA,d.UNSIGNED_BYTE,g),b.setRenderTarget(),h.dispose()}var l=p.a.createCanvas();l.width=c.x,l.height=c.y;var m=l.getContext("2d"),n=m.createImageData(c.x,c.y);return n.data.set(g),m.putImageData(n,0,0),d.deleteFramebuffer(e),l}},{key:"_checkPixelsForTransparency",value:function(a){for(var b=this._sdk.getFinalDimensions(),c=b.x*b.y*4,d=3;d<c;d+=4)if(255!==a[d])return!0;return!1}}]),b}();u.prototype.availableOptions={renderType:{type:n.OptionType.STRING,available:p.a.values(n.RenderType),default:n.RenderType.IMAGE},imageFormat:{type:n.OptionType.STRING,available:p.a.values(n.ImageFormat),default:n.ImageFormat.PNG},quality:{type:n.OptionType.NUMBER,default:.8}},b.a=u},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return f(a,null,[{key:"current",value:function(){return"production"}},{key:"isTest",value:function(){return!1}},{key:"isDevelopment",value:function(){return!1}},{key:"isProduction",value:function(){return!0}}]),a}();b.a=g},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(260);c.d(b,"ImageLoader",function(){return d.a});var e=c(137);c.d(b,"JSONLoader",function(){return e.a})},function(a,b,c){var d=c(71),e=c.n(d),f=c(72),g=c.n(f),h=c(30),i=c.n(h),j=function(){return function(a,b){if(Array.isArray(a))return a;if(e()(Object(a)))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var h,i=g()(a);!(d=(h=i.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b.a={load:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return(a.substr(0,5),i.a.resolve([a,a])).then(function(a){var d=j(a,2),e=d[0],f=d[1];return b._createAndLoadImage(e,f,c)})},_createAndLoadImage:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{cors:!0,value:"anonymous"};return new i.a(function(a,e){var f=new i.a(function(a,c){var e=new window.Image;e.addEventListener("load",function(){a(e)}),e.addEventListener("error",function(){c(new Error("Failed to load image at "+b))}),d.cors&&(e.crossOrigin=d.value),e.src=b}),g=new i.a(function(a,e){c._loadAsDataURL(b,d).then(function(b){var c=new window.Image;c.addEventListener("load",function(){a(c)}),c.src=b,c.rawSource=b}).catch(function(b){f.then(function(b){return a(b)})})});return b.endsWith(".svg")?f.then(function(b){return a(b)}):g.then(function(b){return a(b)})})},_loadAsDataURL:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymus"};return new i.a(function(c,d){var e=new XMLHttpRequest;e.onload=function(){var a=new FileReader;a.onloadend=function(){a.error&&d(a.error),c(a.result)},a.readAsDataURL(e.response)},e.open("GET",a),e.responseType="blob",e.withCredentials=b.cors&&"use-credentials"===b.value,e.send()})},loadXHR:function(a,b){return new i.a(function(c,d){var e=void 0;window.XDomainRequest?(e=new window.XDomainRequest,b&&e.overrideMimeType(b),e.onload=function(){c(e)},e.onerror=function(a){d(a)}):window.XMLHttpRequest&&(e=new window.XMLHttpRequest,b&&e.overrideMimeType(b),e.onreadystatechange=function(a){4===e.readyState&&(200===e.status?c(e):d(new Error("HTTP Status "+e.status)))}),e.open("GET",a,!0),e.send()})}}},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(4),e=c.n(d),f=c(262),g=c(268),h=c(270),i=c(336),j=c(337),k=c(341),l=c(344),m=c(347),n=c(348),o=c(349),p=c(352),q=c(357),r=c(387),s=c(389),t=[f.a,g.a,h.a,i.a,j.a,k.a,l.a,m.a,n.a,o.a,p.a,q.a,r.a,s.a];e.a.AllOperations=t,b.default=t},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c.n(n),p=c(144),q=c(264),r=c(266),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=n.Math.ColorMatrix,u=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._clarityFilter=new q.a,f._temperatureFilter=new r.a,f._filter=new p.a,f._sprite.setFilters([f._clarityFilter,f._temperatureFilter,f._filter]),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Operation),s(b,[{key:"_render",value:function(a){var b=a.getDimensions();b.x=1/b.x,b.y=1/b.y;var c=new t;c.multiply(t.createSaturationMatrix(-.3*this._options.clarity+1)),c.multiply(t.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:b,colorMatrix:c,colorOffset:c.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature});var d=new t;d.multiply(t.createExposureMatrix(this._options.exposure)),d.multiply(t.createSaturationMatrix(this._options.saturation+1)),d.multiply(t.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),d.multiply(t.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:d,colorOffset:d.getOffsets()});var e=[];return 0!==this._options.clarity&&e.push(this._clarityFilter),0!==this._options.temperature&&e.push(this._temperatureFilter),e.push(this._filter),this._sprite.setFilters(e),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose()}}]),b}();u.identifier="adjustments",u.prototype.availableOptions={brightness:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:n.OptionType.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:n.OptionType.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:n.OptionType.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},o.a.Operations.AdjustmentsOperation=u,b.a=u},function(a,b){a.exports="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.Math.Vector2,o=l.Math.ColorMatrix,p=function(a){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return a._fragmentSource=c(265),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Engine.Filter),m(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=c.getContext(),e=b.getCanvas(),f=b.getContext(),g=this._options.clarity,h=this._options.colorMatrix,i=new l.Color(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),j=e.width,k=e.height,m=f.getImageData(0,0,j,k),n=d.createImageData(j,k);this.canvasShader(m,n,g,h,i),d.putImageData(n,0,0)}},{key:"canvasShader",value:function(a,b,c,d,e){for(var f=function(a,b,c){return Math.min(Math.max(a,b),c)},g=function(a,b,c){var d=f((c-a)/(b-a),0,1);return d*d*(3-2*d)},h=4*a.width,i=a.data.length,j=i-1,k=a.data,m=b.data,n=new l.Color,o=function(a){return k[a=(a=a<0?0:a)>j?j:a]},p=0;p<i;p+=4){var q=o(p+0),r=o(p+1),s=o(p+2),t=o(p+3),u=(q+o(p-4-h+0)+o(p-4+0)+o(p-4+h+0)+o(p-h+0)+o(p+h+0)+o(p+4-h+0)+o(p+4+0)+o(p+4+h))/2295,v=(r+o(p-4-h+1)+o(p-4+1)+o(p-4+h+1)+o(p-h+1)+o(p+h+1)+o(p+4-h+1)+o(p+4+1)+o(p+4+h+1))/2295,w=(s+o(p-4-h+2)+o(p-4+2)+o(p-4+h+2)+o(p-h+2)+o(p+h+2)+o(p+4-h+2)+o(p+4+2)+o(p+4+h+2))/2295,x=(t+o(p-4-h+3)+o(p-4+3)+o(p-4+h+3)+o(p-h+3)+o(p+h+3)+o(p+4-h+3)+o(p+4+3)+o(p+4+h+3))/2295;t/=255;var y=f(.3*(q/=255)+.59*(r/=255)+.1*(s/=255),.111111,.999999),z=Math.min(g(1-y,0,.11),g(y,0,.11)),A=3.7*c*z,B=Math.pow(2,.27*c*z),C=f(q+f((q-u)*A,0,10),0,1)*B,D=f(r+f((r-v)*A,0,10),0,1)*B,E=f(s+f((s-w)*A,0,10),0,1)*B,F=f(t+f((t-x)*A,0,10),0,1);n.set(C,D,E,F);var G=d.apply(n);m[p+0]=255*G.r,m[p+1]=255*G.g,m[p+2]=255*G.b,m[p+3]=255*G.a}}}]),b}();p.prototype.availableOptions={clarity:{type:l.OptionType.NUMBER,default:0,uniformType:l.UniformType.FLOAT},pixelDimension:{type:l.OptionType.VECTOR2,default:new n(100,100),uniformType:l.UniformType.FLOAT2},colorMatrix:{type:l.OptionType.COLOR_MATRIX,default:new o,uniformType:l.UniformType.MAT4},colorOffset:{type:l.OptionType.ARRAY,default:[],uniformType:l.UniformType.FLOAT4}},b.a=p},function(a,b){
a.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n\n    vec4 mergedColor = color;\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    mergedColor += texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    mergedColor += texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    mergedColor /= 9.0;\n\n    color.rgb /= max(color.a, EPSILON);       // Revert premultiplied alpha\n    mergedColor.rgb /= max(mergedColor.a, EPSILON); // Revert premultiplied alpha\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0);\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n\n\n    color = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0);\n\n    color.rgb *= color.a; // Do premultiplie alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}());l.Math.Vector3;var n=function(a){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return a._fragmentSource=c(267),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Engine.Filter),m(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=c.getContext(),e=b.getCanvas(),f=b.getContext(),g=this._options.temperature,h=e.width,i=e.height,j=f.getImageData(0,0,h,i),k=d.createImageData(h,i);this.canvasShader(j,k,g),d.putImageData(k,0,0)}},{key:"canvasShader",value:function(a,b,c){for(var d,e,f,g=function(a,b,c){return a*(1-c)+b*c},h=function(a,b){return[a[0]*b[0]+a[3]*b[1]+a[6]*b[2],a[1]*b[0]+a[4]*b[1]+a[7]*b[2],a[2]*b[0]+a[5]*b[1]+a[8]*b[2]]},i=a.data.length,j=i-1,k=a.data,l=b.data,m=function(a){return k[a=(a=a<0?0:a)>j?j:a]},n=[.93,.54,0],o=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],p=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702],q=0;q<i;q+=4){var r=m(q+0)/255,s=m(q+1)/255,t=m(q+2)/255,u=m(q+3)/255,v=h(o,[r,s,t]);v.z=(d=v.z+0,e=-.5226,f=.5226,Math.min(Math.max(d,e),f));var w=h(p,v),x=[w[0]<.5?2*w[0]*n[0]:1-2*(1-w[0])*(1-n[0]),w[1]<.5?2*w[1]*n[1]:1-2*(1-w[1])*(1-n[1]),w[2]<.5?2*w[2]*n[2]:1-2*(1-w[2])*(1-n[2])];l[q+0]=255*g(w[0],x[0],c),l[q+1]=255*g(w[1],x[1],c),l[q+2]=255*g(w[2],x[2],c),l[q+3]=255*u}}}]),b}();n.prototype.availableOptions={temperature:{type:l.OptionType.NUMBER,default:0,uniformType:l.UniformType.FLOAT}},b.a=n},function(a,b){a.exports="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c.n(n),p=c(56),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=n.Math.Vector2,s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));f._lastBlurRadius=f._options.blurRadius;var g={blurQuality:{type:n.OptionType.STRING}};return f._horizontalFilter=new p.a({},g),f._verticalFilter=new p.a({},g),f._sprite.setFilters([f._horizontalFilter,f._verticalFilter]),f._horizontalFilter.setDelta(new r(.5,.5)),f._verticalFilter.setDelta(new r(-.5,.5)),f._filter=new p.a({},g),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Operation),q(b,[{key:"_renderWebGL",value:function(a){return this._renderBlur(a)}},{key:"_renderCanvas",value:function(a){return this._options.highQualityCanvasBlur?this._renderBlur(a):this._renderLQCanvasBlur(a)}},{key:"_renderBlur",value:function(a){var b=a.getDimensions(),c=b.min(),d={blurRadius:this._options.blurRadius*c,texSize:b,blurQuality:"high"};return this._horizontalFilter.set(d),this._verticalFilter.set(d),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(a){var b=this._options.blurRadius,c=a.getDimensions();return this._filter.set({blurRadius:b,texSize:c,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"transform",value:function(a){var b=this.getBlurRadius(),c=a.applyToRelativeSize(b);this.set({blurRadius:c},!1)}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),b}();s.identifier="blur",s.prototype.availableOptions={blurRadius:{type:n.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:n.OptionType.BOOLEAN,default:!1}},o.a.Operations.BlurOperation=s,b.a=s},function(a,b){a.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(a,b,c){var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=c.n(p),r=c(145),s=c(8),t=c(303),u=c(7),v=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},y=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,p.Operation),w(b,[{key:"_render",value:function(a){return this._selectedFilter.render(this._sdk,a,this._renderTexture)}},{key:"render",value:function(a){return this._selectedFilter.getDirty()&&this.setDirty(!0),!this.getEnabled()||this._selectedFilter.constructor.isIdentity?p.Promise.resolve(a):x(b.prototype.__proto__||o()(b.prototype),"render",this).call(this,a)}},{key:"setDirtyForRenderer",value:function(a,c){x(b.prototype.__proto__||o()(b.prototype),"setDirtyForRenderer",this).call(this,a,c),this._selectedFilter.setDirtyForRenderer(a,c)}},{key:"disposeRenderTextures",value:function(){x(b.prototype.__proto__||o()(b.prototype),"disposeRenderTextures",this).call(this),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}},{key:"dispose",value:function(){x(b.prototype.__proto__||o()(b.prototype),"dispose",this).call(this),this._selectedFilter&&this._selectedFilter.dispose()}},{key:"restoreSnapshot",value:function(a){var b=v({},a);if(delete b.filter,a.filter){var c=a.filter.constructor;"3d-lut"===c.identifier?this.setFilter(new c({image:a.filter.getImage(),resolution:a.filter.getResolution(),horizontalTileCount:a.filter.getHorizontalTileCount(),verticalTileCount:a.filter.getVerticalTileCount()})):"duotone"===c.identifier?this.setFilter(new c({lightColor:a.filter.getLightColor(),darkColor:a.filter.getDarkColor(),intensity:a.filter.getIntensity()})):this.setFilter(new c)}this.set(b)}},{key:"resetToDefaultFilterIntensity",value:function(){var a=this._selectedFilter&&this._selectedFilter.availableOptions,b=a&&a.intensity.default;this.setIntensity(b||1)}}]),b}();y.identifier="filter",y.prototype.availableOptions={identifier:{type:p.OptionType.STRING,default:"identity"},intensity:{type:p.OptionType.NUMBER,default:1,setter:function(a){return this._selectedFilter&&this._selectedFilter.setIntensity(a),a}},filter:{type:p.OptionType.OBJECT,default:new r.a,setter:function(a){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=a,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),a}}},y.FilterPrimitives=s,y.Filters=t,y.Filter=u.a,q.a.Operations.FilterOperation=y,b.a=y},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=c(0),f=c.n(e),g=c(2),h=c.n(g),i=c(3),j=c.n(i),k=c(1),l=c.n(k),m=c(4),n=(c.n(m),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),o=function(a){function b(){d(this,b);var a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||l()(b)).call(this));return a._fragmentSource=c(272),a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=j()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(h.a?h()(a,b):a.__proto__=b)}(b,m.Engine.Filter),n(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=b.getCanvas(),e=c.getContext(),f=this._options.filteredCanvas;e.save(),e.globalAlpha=1-this._options.intensity,e.drawImage(d,0,0),e.globalAlpha=this._options.intensity,e.drawImage(f,0,0),e.restore()}}]),b}();o.prototype.availableOptions={filteredImage:{type:m.OptionType.NUMBER,default:1,uniformType:m.UniformType.INT},filteredCanvas:{type:m.OptionType.OBJECT,default:null},intensity:{type:m.OptionType.NUMBER,default:1,uniformType:m.UniformType.FLOAT}};var p=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;d(this,a),this._intensity=b,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new m.Engine.Container,this._sprite=new m.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new o}return n(a,[{key:"push",value:function(a){this._stack.push(a)}},{key:"clear",value:function(){this._stack=[]}},{key:"render",value:function(a,b,c){if(0===this._stack.length)return m.Promise.resolve();var d=a.getRenderer();this._sprite.setTexture(b);var e=this._renderTextures[d.id];if(!e){var f=a.getSprite().getTexture().getFrame();e=new m.Engine.RenderTexture(a.getRenderer(),f.width,f.height),this._renderTextures[d.id]=e}var g=c.getDimensions();e.resizeTo(g);var h=this.isDirtyForRenderer(d);if(h){this._stack.forEach(function(b){b.update(a)});var i=this._stack.map(function(a){return a.getFilter()});this._sprite.setFilters(i),e.render(this._container),this.setDirtyForRenderer(!1,d)}if(this._blendFilter.setIntensity(this._intensity),d.isOfType(m.RendererType.CANVAS))this._blendFilter.setFilteredCanvas(e.getRenderTarget().getCanvas());else if(d.isOfType(m.RendererType.WEBGL)){var j=e.getBaseTexture();j.setGLUnit(this._blendFilter.getFilteredImage()),d.updateTexture(j,!1)}return this._sprite.setFilters([this._blendFilter]),c.clear(m.Color.TRANSPARENT),c.render(this._container),h&&this.disposeRenderTextures(),m.Promise.resolve(c)}},{key:"setIntensity",value:function(a){this._intensity=a}},{key:"isDirtyForRenderer",value:function(a){return a.id in this._dirtiness||(this._dirtiness[a.id]=!0),this._dirtiness[a.id]}},{key:"setDirtyForRenderer",value:function(a,b){this._dirtiness[b.id]=a}},{key:"setDirty",value:function(a){for(var b in this._dirtiness)this._dirtiness[b]=a}},{key:"disposeRenderTextures",value:function(){for(var a in this._renderTextures)this._renderTextures[a].dispose(),delete this._renderTextures[a]}},{key:"dispose",value:function(){this.disposeRenderTextures(),this._stack.forEach(function(a){return a.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}}]),a}();b.a=p},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(274),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=this._options.brightness;if(0!==h){h*=255;for(var i=0;i<d.width*d.height;i++){var j=4*i;g.data[j]+=h,g.data[j+1]+=h,g.data[j+2]+=h}f.putImageData(g,0,0)}}}]),b}();r.prototype.availableOptions={brightness:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT}};var s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setBrightness(this._options.brightness)}}]),b}();s.prototype.availableOptions=r.prototype.availableOptions,b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(276),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=this._options.contrast;if(1!==h){for(var i=0;i<d.width*d.height;i++){var j=4*i;g.data[j]=(g.data[j]-127)*h+127,g.data[j+1]=(g.data[j+1]-127)*h+127,g.data[j+2]=(g.data[j+2]-127)*h+127}f.putImageData(g,0,0)}}}]),b}();r.prototype.availableOptions={contrast:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT}};var s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setContrast(this._options.contrast)}}]),b}();s.prototype.availableOptions=r.prototype.availableOptions,b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=o.Math.ColorMatrix,s=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(278),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=this._options.colorMatrix,i=new o.Color(0,0,0,0),j=0;j<d.width*d.height;j++){var k=4*j;i.r=g.data[k]/255,i.g=g.data[k+1]/255,i.b=g.data[k+2]/255,i=h.apply(i),g.data[k]=255*i.r,g.data[k+1]=255*i.g,g.data[k+2]=255*i.b}f.putImageData(g,0,0)}}]),b}();s.prototype.availableOptions={colorMatrix:{type:o.OptionType.COLOR_MATRIX,default:new r,uniformType:o.UniformType.MAT4},colorMatrixOffset:{type:o.OptionType.ARRAY,default:[],uniformType:o.UniformType.FLOAT4}};var t=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new s,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setColorMatrix(this._options.colorMatrix)}}]),b}();t.prototype.availableOptions=s.prototype.availableOptions,b.a=t},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(280),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=[.3,.59,.11],i=this._options.desaturation,j=0;j<d.width*d.height;j++){var k=4*j,l=h[0]*g.data[k]/255+h[1]*g.data[k+1]/255+h[2]*g.data[k+2]/255;g.data[k]+=(255*l-g.data[k])*i,g.data[k+1]+=(255*l-g.data[k+1])*i,g.data[k+2]+=(255*l-g.data[k+2])*i}f.putImageData(g,0,0)}}]),b}();r.prototype.availableOptions={desaturation:{type:o.OptionType.NUMBER,default:1,uniformType:o.UniformType.FLOAT}};var s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setDesaturation(this._options.desaturation)}}]),b}();s.prototype.availableOptions=r.prototype.availableOptions,b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(282),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=this._options,i=h.lightColor,j=h.darkColor,k=h.intensity,l=0;l<d.width*d.height;l++){var m=4*l,n=g.data[m]/255,p=g.data[m+1]/255,q=g.data[m+2]/255,r=g.data[m+3]/255,s=new o.Color(n,p,q,r),t=this._duoToneKernel(s,i,j,k);g.data[m]=255*t.r,g.data[m+1]=255*t.g,g.data[m+2]=255*t.b,g.data[m+3]=255*t.a}f.putImageData(g,0,0)}},{key:"_duoToneKernel",value:function(a,b,c,d){if(a.clone().clamp(0,1),d>0){var e=Math.max(d+1,1e-7);a.r=1-Math.pow(1-a.r,e),a.g=1-Math.pow(1-a.g,e),a.b=1-Math.pow(1-a.b,e)}else{var f=Math.max(1-d,1e-7);a.r=Math.pow(a.r,f),a.g=Math.pow(a.g,f),a.b=Math.pow(a.b,f)}var g=.2126*a.r+.7152*a.g+.0722*a.b,h=Math.min(Math.max(g,0),1),i=c.clone().mix(b,h);return i.a*=a.a,i}}]),b}();r.prototype.availableOptions={lightColor:{type:o.OptionType.COLOR,default:o.Color.RED,uniformType:o.UniformType.FLOAT4},darkColor:{type:o.OptionType.COLOR,default:o.Color.BLACK,uniformType:o.UniformType.FLOAT4},intensity:{type:o.OptionType.NUMBER,default:.5,uniformType:o.UniformType.FLOAT}};var s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);var a=2*this._options.intensity-1;this._filter.setIntensity(a)}}]),b}();s.prototype.availableOptions=r.prototype.availableOptions,b.a=s},function(a,b){a.exports='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),
d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(284),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=this._options.gamma,i=new Float32Array(256),j=0;j<256;j++)i[j]=255*Math.pow(j/255,h.r);for(var k=new Float32Array(256),l=0;l<256;l++)k[l]=255*Math.pow(l/255,h.g);for(var m=new Float32Array(256),n=0;n<256;n++)m[n]=255*Math.pow(n/255,h.b);for(var o=0;o<d.width*d.height;o++){var p=4*o;g.data[p]=i[g.data[p]],g.data[p+1]=k[g.data[p+1]],g.data[p+2]=m[g.data[p+2]]}f.putImageData(g,0,0)}}]),b}();r.prototype.availableOptions={gamma:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setGamma(this._options.gamma)}}]),b}();s.prototype.availableOptions=r.prototype.availableOptions,b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(286),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d,e=b.getCanvas(),f=b.getContext(),g=c.getContext(),h=f.getImageData(0,0,e.width,e.height),i=this._options.color,j=0;j<e.width;j++)for(var k=0;k<e.height;k++){var l=4*(e.width*k+j),m=(j/e.width-.5)/.75,n=(k/e.height-.5)/.75;d=1-(m*m+n*n),d=Math.min(Math.max(d,.1),1),h.data[l]=h.data[l]*(d*i.r),h.data[l+1]=h.data[l+1]*(d*i.g),h.data[l+2]=h.data[l+2]*(d*i.b),h.data[l+3]=255}g.putImageData(h,0,0)}}]),b}();r.prototype.availableOptions={color:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),b}();s.prototype.availableOptions=r.prototype.availableOptions,b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(288),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=0;h<d.width;h++)for(var i=0;i<d.height;i++){var j=4*(d.width*i+h);g.data[j+2]=.33*g.data[j+1],g.data[j]=.6*g.data[j],g.data[j+2]+=.33*g.data[j],g.data[j+1]=.7*g.data[j+1],g.data[j+3]=255}f.putImageData(g,0,0)}}]),b}(),s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),b}();b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(290),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=0;h<d.width;h++)for(var i=0;i<d.height;i++){var j=4*(d.width*i+h),k=.2125*g.data[j]+.7154*g.data[j+1]+.0721*g.data[j+2];g.data[j]=k,g.data[j+1]=k,g.data[j+2]=k}f.putImageData(g,0,0)}}]),b}(),s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),b}();b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=n()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(l.a?l()(a,b):a.__proto__=b)}var g=c(5),h=c.n(g),i=c(0),j=c.n(i),k=c(2),l=c.n(k),m=c(3),n=c.n(m),o=c(1),p=c.n(o),q=c(4),r=(c.n(q),c(11)),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=q.Math.Vector2,u=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||p()(b)).call(this));return a._precomputeQuads(),a._fragmentSource=c(293),a}return f(b,q.Engine.Filter),s(b,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var a=0;a<256;a++){var b=a/255*63,c=new t;c.y=.125*(0|b)|0,c.x=(0|b)-8*c.y,this._quads.push(c)}}},{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=this._options.lookupTableImage,h=this._createImageCanvas(g).getContext("2d"),i=e.getImageData(0,0,d.width,d.height),j=h.getImageData(0,0,g.width,g.height),k=new t,l=0;l<d.width*d.height*4;l+=4){var m=i.data[l],n=i.data[l+1],o=i.data[l+2],p=i.data[l+3]/255,q=this._quads[o];k.x=64*q.x,k.y=64*q.y,k.x+=Math.floor(m/4),k.y+=Math.floor(n/4);var r=4*(g.width*k.y+k.x)|0,s=j.data[r];s=m*(1-p)+s*p;var u=j.data[r+1];u=n*(1-p)+u*p;var v=j.data[r+2];v=o*(1-p)+v*p,i.data[l]=s,i.data[l+1]=u,i.data[l+2]=v}f.putImageData(i,0,0)}},{key:"_createImageCanvas",value:function(a){var b=q.Utils.createCanvas();return b.width=a.width,b.height=a.height,b.getContext("2d").drawImage(a,0,0),b}}]),b}();u.prototype.availableOptions={lookupTable:{type:q.OptionType.NUMBER,default:3,uniformType:q.UniformType.INT},lookupTableImage:{type:q.OptionType.IMAGE,uniformType:null}};var v=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||p()(b)).call.apply(a,[this].concat(f)));return h._filter=new u,h._textures={},h}return f(b,r.a),s(b,[{key:"update",value:function(a){var b=a.getRenderer();b.isOfType(q.RendererType.WEBGL)?this._updateWebGLTexture(a):b.isOfType(q.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}},{key:"_updateWebGLTexture",value:function(a){var b=a.getRenderer(),c=b.id;this._textures[c]||(this._textures[c]=new q.Engine.BaseTexture);var d=this._textures[c];d.setSource(this._options.image),d.setGLUnit(3),b.updateTexture(d)}},{key:"dispose",value:function(){for(var a in function a(b,c,d){null===b&&(b=Function.prototype);var e=h()(b,c);if(void 0===e){var f=p()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||p()(b.prototype),"dispose",this).call(this),this._textures)delete this._textures[a]}}]),b}();v.prototype.availableOptions={image:{type:q.OptionType.IMAGE}},b.a=v},function(a,b){a.exports="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(295),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=this._options.saturation,i=0;i<d.width;i++)for(var j=0;j<d.height;j++){var k=4*(d.width*j+i),l=.2125*g.data[k]+.7154*g.data[k+1]+.0721*g.data[k+2];g.data[k]=l*(1-h)+g.data[k]*h,g.data[k+1]=l*(1-h)+g.data[k+1]*h,g.data[k+2]=l*(1-h)+g.data[k+2]*h}f.putImageData(g,0,0)}}]),b}();r.prototype.availableOptions={saturation:{type:o.OptionType.NUMBER,default:0,uniformType:o.UniformType.FLOAT}};var s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setSaturation(this._options.saturation)}}]),b}();s.prototype.availableOptions=r.prototype.availableOptions,b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(297),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=0;h<d.width;h++)for(var i=0;i<d.height;i++){var j=4*(d.width*i+h);g.data[j]=Math.max(255*this._options.color.r,g.data[j]),g.data[j+1]=Math.max(255*this._options.color.g,g.data[j+1]),g.data[j+2]=Math.max(255*this._options.color.b,g.data[j+2])}f.putImageData(g,0,0)}}]),b}();r.prototype.availableOptions={color:{type:o.OptionType.COLOR,default:o.Color.WHITE,uniformType:o.UniformType.FLOAT3}};var s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),q(b,[{key:"update",value:function(){this._filter.setColor(this._options.color)}}]),b}();s.prototype.availableOptions=r.prototype.availableOptions,b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(146)),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._options.rgbControlPoints||(f._options.rgbControlPoints={red:f._options.controlPoints,green:f._options.controlPoints,blue:f._options.controlPoints}),f._updateLookupTable(),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"_updateLookupTable",value:function(){var a=this._calculateSplineCurve(this._options.rgbControlPoints.red),b=this._calculateSplineCurve(this._options.rgbControlPoints.green),c=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(a,b,c)}},{key:"_buildLookupTable",value:function(a,b,c){for(var d=[],e=0;e<256;e++)d.push(Math.min(Math.max(e+a[e],0),255)),d.push(Math.min(Math.max(e+b[e],0),255)),d.push(Math.min(Math.max(e+c[e],0),255)),d.push(255);return d}},{key:"_calculateSplineCurve",value:function(a){a=a.sort(function(a,b){return a[0]>b[0]});var b,c=this._getSplineCurve(a),d=c[0];if(d[0]>0)for(b=0;b<d[0];b++)c.unshift([0,0]);var e=[];for(b=0;b<c.length;b++){var f=c[b],g=[f[0],f[0]],h=Math.sqrt(Math.pow(g[0]-f[0],2)+Math.pow(g[1]-f[1],2));g[1]>f[1]&&(h=-h),e.push(h)}return e}},{key:"_getSplineCurve",value:function(a){var b,c=this._secondDerivative(a),d=c.length,e=[];for(b=0;b<d;b++)e[b]=c[b];var f=[];for(b=0;b<d-1;b++)for(var g=a[b],h=a[b+1],i=g[0];i<h[0];i++){var j=(i-g[0])/(h[0]-g[0]),k=1-j,l=j,m=h[0]-g[0],n=k*g[1]+l*h[1]+m*m/6*((k*k*k-k)*e[b]+(l*l*l-l)*e[b+1]);n>255?n=255:n<0&&(n=0),f.push([i,n])}return 255===f.length&&f.push(a[a.length-1]),f}},{key:"_secondDerivative",value:function(a){var b=a.length;if(b<=0||1===b)return null;var c,d,e=[],f=[];for(e[0]=[0,1,0],c=1;c<b-1;c++){var g=a[c-1],h=a[c],i=a[c+1];e[c]=e[c]||[],e[c][0]=(h[0]-g[0])/6,e[c][1]=(i[0]-g[0])/3,e[c][2]=(i[0]-h[0])/6,f[c]=(i[1]-h[1])/(i[0]-h[0])-(h[1]-g[1])/(h[0]-g[0])}for(f[0]=0,f[b-1]=0,e[b-1]=[0,1,0],c=1;c<b;c++)d=e[1][0]/e[c-1][1],e[c][1]-=d*e[c-1][2],e[c][0]=0,f[c]-=d*f[c-1];for(c=b-2;c>0;c--)d=e[c][2]/e[c+1][1],e[c][1]-=d*e[c+1][0],e[c][2]=0,f[c]-=d*f[c+1];var j=[];for(c=0;c<b;c++)j[c]=f[c]/e[c][1];return j}}]),b}();o.prototype.availableOptions={rgbControlPoints:{type:l.OptionType.OBJECT},controlPoints:{type:l.OptionType.ARRAY,default:[]},textureGLUnit:{type:l.OptionType.NUMBER,default:1}},b.a=o},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=(c.n(o),c(11)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._fragmentSource=c(300),a}return f(b,o.Engine.Filter),q(b,[{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=b.getCanvas(),e=b.getContext(),f=c.getContext(),g=e.getImageData(0,0,d.width,d.height),h=0;h<d.width;h++)for(var i=0;i<d.height;i++){var j=4*(d.width*i+h),k=g.data[j]/255*.3+g.data[j+1]/255*.3+g.data[j+2]/255*.3;k-=.2,k=Math.max(0,Math.min(1,k)),k+=.15,k*=1.4,k*=255,g.data[j]=k,g.data[j+1]=k,g.data[j+2]=k}f.putImageData(g,0,0)}}]),b}(),s=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._filter=new r,h}return f(b,p.a),b}();b.a=s},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=n()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(l.a?l()(a,b):a.__proto__=b)}var g=c(5),h=c.n(g),i=c(0),j=c.n(i),k=c(2),l=c.n(k),m=c(3),n=c.n(m),o=c(1),p=c.n(o),q=c(4),r=(c.n(q),c(11)),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=q.Math.Vector2,u=q.Math.Vector3,v=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||p()(b)).call(this));return a._precomputeQuads(),a._fragmentSource=c(302),a}return f(b,q.Engine.Filter),s(b,[{key:"_precomputeQuads",value:function(){this._quads=[];for(var a=0;a<256;a++){var b=a/255*63,c=new t;c.y=.125*(0|b)|0,c.x=(0|b)-8*c.y,this._quads.push(c)}}},{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var d=this._options,e=d.resolution,f=d.horizontalTileCount,g=d.verticalTileCount,h=b.getCanvas(),i=b.getContext(),j=c.getContext(),k=this._options.lookupTableImage,l=this._createImageCanvas(k).getContext("2d"),m=i.getImageData(0,0,h.width,h.height),n=l.getImageData(0,0,k.width,k.height),o=new u(e/f-1|0,e/g-1|0,f*g-1|0),p=new q.Color,r=new q.Color,s=new q.Color,v=new q.Color,w=new q.Color,x=new q.Color,y=new q.Color,z=new q.Color,A=new t,B=new t,C=function(a,b,c,d){a.r=b.r*(1-d)+c.r*d,a.g=b.g*(1-d)+c.g*d,a.b=b.b*(1-d)+c.b*d},D=function(a,b,c){var d=4*((c=.5+c|0)*e+(b=.5+b|0));a.r=n.data[d]/255,a.g=n.data[d+1]/255,a.b=n.data[d+2]/255,a.a=n.data[d+3]/255},E=new q.Color,F=new q.Color,G=function(a,b,c,d,e,f,g){C(E,b,d,f),C(F,c,e,f),C(a,E,F,g)},H=new t(e,e).divide(f,g).floor(),I=0;I<h.width*h.height*4;I+=4){p.set(m.data[I]/255,m.data[I+1]/255,m.data[I+2]/255,m.data[I+3]/255);var J=new u(p.r*o.x,p.g*o.y,p.b*o.z),K=J.clone().floor().toInt(),L=J.clone().ceil().toInt(),M=J.clone().fract();A.y=K.z/f|0,A.x=K.z-A.y*f|0,B.y=L.z/f|0,B.x=L.z-B.y*f|0,A.multiply(H),B.multiply(H),D(w,A.x+K.x,A.y+K.y),D(x,A.x+K.x,A.y+L.y),D(y,A.x+L.x,A.y+K.y),D(z,A.x+L.x,A.y+L.y),G(s,w,x,y,z,M.x,M.y),D(w,B.x+K.x,B.y+K.y),D(x,B.x+K.x,B.y+L.y),D(y,B.x+L.x,B.y+K.y),D(z,B.x+L.x,B.y+L.y),G(v,w,x,y,z,M.x,M.y),C(r,s,v,M.z),m.data[I]=Math.ceil(255*r.r),m.data[I+1]=Math.ceil(255*r.g),m.data[I+2]=Math.ceil(255*r.b)}j.putImageData(m,0,0)}},{key:"_createImageCanvas",value:function(a){var b=q.Utils.createCanvas();return b.width=a.width,b.height=a.height,b.getContext("2d").drawImage(a,0,0),b}}]),b}();v.prototype.availableOptions={lookupTable:{type:q.OptionType.NUMBER,default:3,uniformType:q.UniformType.INT},lookupTableImage:{type:q.OptionType.IMAGE,uniformType:null},resolution:{type:q.OptionType.NUMBER,default:128,uniformType:q.UniformType.FLOAT},horizontalTileCount:{type:q.OptionType.NUMBER,default:5,uniformType:q.UniformType.FLOAT},verticalTileCount:{type:q.OptionType.NUMBER,default:5,uniformType:q.UniformType.FLOAT}};var w=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var h=e(this,(a=b.__proto__||p()(b)).call.apply(a,[this].concat(f)));return h._filter=new v,h._textures={},h}return f(b,r.a),s(b,[{key:"update",value:function(a){var b=a.getRenderer();b.isOfType(q.RendererType.WEBGL)?this._updateWebGLTexture(a):b.isOfType(q.RendererType.CANVAS)&&this._filter.setLookupTableImage(this._options.image);var c=this._options,d=c.resolution,e=c.verticalTileCount,f=c.horizontalTileCount;this._filter.set({resolution:d,verticalTileCount:e,horizontalTileCount:f})}},{key:"_updateWebGLTexture",value:function(a){var b=a.getRenderer(),c=b.id;this._textures[c]||(this._textures[c]=new q.Engine.BaseTexture);var d=this._textures[c];d.setSource(this._options.image),d.setGLUnit(3),d.setMinFilter(q.Engine.BaseTexture.NearestFilter),b.updateTexture(d)}},{key:"dispose",value:function(){for(var a in function a(b,c,d){null===b&&(b=Function.prototype);var e=h()(b,c);if(void 0===e){var f=p()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||p()(b.prototype),"dispose",this).call(this),this._textures)delete this._textures[a]}}]),b}();w.prototype.availableOptions={image:{type:q.OptionType.IMAGE},resolution:{type:q.OptionType.NUMBER,default:128},horizontalTileCount:{type:q.OptionType.NUMBER,default:5},verticalTileCount:{type:q.OptionType.NUMBER,default:5}},b.a=w},function(a,b){a.exports="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(145);c.d(b,"IdentityFilter",function(){return d.a});var e=c(304);c.d(b,"A15Filter",function(){return e.a});var f=c(305);c.d(b,"BreezeFilter",function(){return f.a});var g=c(306);c.d(b,"BWFilter",function(){return g.a});var h=c(307);c.d(b,"BWHardFilter",function(){return h.a});var i=c(308);c.d(b,"CelsiusFilter",function(){return i.a});var j=c(309);c.d(b,"ChestFilter",function(){return j.a});var k=c(310);c.d(b,"DuoToneFilter",function(){return k.a});var l=c(311);c.d(b,"FixieFilter",function(){return l.a});var m=c(312);c.d(b,"FoodFilter",function(){return m.a});var n=c(313);c.d(b,"FridgeFilter",function(){return n.a});var o=c(314);c.d(b,"FrontFilter",function(){return o.a});var p=c(315);c.d(b,"GlamFilter",function(){return p.a});var q=c(316);c.d(b,"GobblinFilter",function(){return q.a});var r=c(317);c.d(b,"K1Filter",function(){return r.a});var s=c(318);c.d(b,"K2Filter",function(){return s.a});var t=c(319);c.d(b,"K6Filter",function(){return t.a});var u=c(320);c.d(b,"KDynamicFilter",function(){return u.a});var v=c(321);c.d(b,"LeninFilter",function(){return v.a})
;var w=c(322);c.d(b,"LomoFilter",function(){return w.a});var x=c(323);c.d(b,"MellowFilter",function(){return x.a});var y=c(324);c.d(b,"MetalFilter",function(){return y.a});var z=c(325);c.d(b,"MorningFilter",function(){return z.a});var A=c(326);c.d(b,"OrchidFilter",function(){return A.a});var B=c(327);c.d(b,"PolaFilter",function(){return B.a});var C=c(328);c.d(b,"Pola669Filter",function(){return C.a});var D=c(329);c.d(b,"QuoziFilter",function(){return D.a});var E=c(330);c.d(b,"SemiredFilter",function(){return E.a});var F=c(331);c.d(b,"SunnyFilter",function(){return F.a});var G=c(332);c.d(b,"TexasFilter",function(){return G.a});var H=c(333);c.d(b,"X400Filter",function(){return H.a});var I=c(334);c.d(b,"LUTFilter",function(){return I.a});var J=c(335);c.d(b,"ThreeDLUTFilter",function(){return J.a})},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Contrast({contrast:.63})),f._stack.push(new k.Brightness({brightness:.12})),f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="a15",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Desaturation({desaturation:.5})),f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="breeze",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Grayscale),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="bw",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Grayscale),f._stack.push(new k.Contrast({contrast:1.5})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="bwhard",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="celsius",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="chest",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(4),k=(c.n(j),c(7)),l=c(8),m=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d,[{intensity:{type:j.OptionType.NUMBER,default:.5,required:!0,setter:function(a){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(a),this._stack.setIntensity(1)),this._dirty=!0,a}}}])));return f._filterPrimitive=new l.DuoTone({lightColor:f._options.lightColor||j.Color.WHITE,darkColor:f._options.darkColor||j.Color.BLACK,intensity:f._options.intensity||.5}),f._stack.push(f._filterPrimitive),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,k.a),b}();m.prototype.availableOptions={lightColor:{type:j.OptionType.COLOR,default:j.Color.WHITE,required:!0,setter:function(a){return this._filterPrimitive&&this._filterPrimitive.setLightColor(a),this.setDirty&&this.setDirty(!0),a}},darkColor:{type:j.OptionType.COLOR,default:j.Color.BLACK,required:!0,setter:function(a){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(a),this.setDirty&&this.setDirty(!0),a}},intensity:{type:j.OptionType.NUMBER,default:.5,required:!0}},m.identifier="duotone",b.a=m},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="fixie",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Saturation({saturation:1.35})),f._stack.push(new k.Contrast({contrast:1.1})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="food",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="fridge",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="front",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Contrast({contrast:1.1})),f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="glam",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Gobblin),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="gobblin",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),f._stack.push(new k.Saturation({saturation:.9})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="k1",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(4),k=(c.n(j),c(7)),l=c(8),m=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new l.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),f._stack.push(new l.SoftColorOverlay({color:new j.Color(40/255,40/255,40/255)})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,k.a),b}();m.identifier="k2",b.a=m},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Saturation({saturation:.5})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="k6",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),f._stack.push(new k.Saturation({saturation:.7})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="kdynamic",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Desaturation({desaturation:.4})),f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="lenin",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="lomo",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="mellow",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(4),k=(c.n(j),c(7)),l=c(8),m=j.Math.ColorMatrix,n=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d))),g=new m(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);f._stack.push(new l.ColorMatrixPrimitive({colorMatrix:g}));var h=new j.Color(.8,.6,.9);return f._stack.push(new l.Gamma({gamma:h})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,k.a),b}();n.identifier="metal",b.a=n},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),f._stack.push(new k.Glow),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="morning",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),f._stack.push(new k.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),f._stack.push(new k.Desaturation({desaturation:.65})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="orchid",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),f._stack.push(new k.Saturation({saturation:.8})),f._stack.push(new k.Contrast({contrast:1.5})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="pola",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),f._stack.push(new k.Saturation({saturation:.8})),f._stack.push(new k.Contrast({contrast:1.5})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="pola669",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.Desaturation({desaturation:.65})),f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="quozi",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),f._stack.push(new k.Glow),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="semired",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),f._stack.push(new k.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="sunny",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="texas",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7),k=c(8),l=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._stack.push(new k.X400),f}return function(a,b){
if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();l.identifier="x400",b.a=l},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(4),k=(c.n(j),c(7)),l=c(8),m=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d)));return f._lutPrimitive=new l.LookupTableImage({image:f._options.image}),f._stack.push(f._lutPrimitive),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,k.a),b}();m.prototype.availableOptions={image:{type:j.OptionType.IMAGE,required:!0,setter:function(a){return this._lutPrimitive&&this._lutPrimitive.setImage(a),this.setDirty(!0),a}}},m.identifier="lut",b.a=m},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(4),k=(c.n(j),c(7)),l=c(8),m=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||i()(b)).call.apply(a,[this].concat(d))),g=f._options,h=g.image,j=g.resolution,k=g.verticalTileCount,m=g.horizontalTileCount;return f._lutPrimitive=new l.ThreeDLookupTableImage({image:h,resolution:j,verticalTileCount:k,horizontalTileCount:m}),f._stack.push(f._lutPrimitive),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,k.a),b}();m.prototype.availableOptions={image:{type:j.OptionType.IMAGE,required:!0,setter:function(a){return this._lutPrimitive&&this._lutPrimitive.setImage(a),this.setDirty(!0),a}},resolution:{type:j.OptionType.NUMBER,default:128},horizontalTileCount:{type:j.OptionType.NUMBER,default:5},verticalTileCount:{type:j.OptionType.NUMBER,default:5}},m.identifier="3d-lut",b.a=m},function(a,b,c){var d=c(36),e=c.n(d),f=c(40),g=c.n(f),h=c(0),i=c.n(h),j=c(5),k=c.n(j),l=c(2),m=c.n(l),n=c(3),o=c.n(n),p=c(1),q=c.n(p),r=c(4),s=c.n(r),t="function"==typeof g.a&&"symbol"==typeof e.a?function(a){return typeof a}:function(a){return a&&"function"==typeof g.a&&a.constructor===g.a&&a!==g.a.prototype?"symbol":typeof a},u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),i()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=r.Math.Vector2,w=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||q()(b)).call.apply(a,[this].concat(d)));return f._colorOverlayFilter=new r.Engine.Filters.ColorOverlayFilter({color:f.getTintColor()}),f._frameContainer=new r.Engine.Container,f._resetSprites(),f._options.frame&&f._createSpritesForFrame(f._options.frame),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=o()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(m.a?m()(a,b):a.__proto__=b)}(b,r.Operation),u(b,[{key:"_resetSprites",value:function(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}},{key:"_createSpritesForFrame",value:function(a){var b=this;if(!a)return this._disposeSprites();var c=a.imageGroups,d=a.layoutMode;this._layoutMode=d||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach(function(a){void 0!==c[a]&&["start","mid","end"].forEach(function(d){if(void 0!==c[a][d]){var e=c[a][d];"image"in e&&(e=e.image);var f=r.Engine.Texture.fromImage(e),g=new r.Engine.Sprite(f);b._spriteGroups[a][d]=g,b._sprites.push(g),b._frameContainer.addChild(g)}})})}},{key:"_render",value:function(a){var b=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(a)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(b):(this._frameRenderTexture=new r.Engine.RenderTexture(this._sdk.getRenderer(),b.x,b.y),this._frameSprite=new r.Engine.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),r.Promise.resolve(this._renderTexture)}},{key:"_updateSprites",value:function(a){var b=a.getDimensions();this._frameWidth=Math.ceil(a.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(a,"top",0),this._updateHorizontalSpriteGroup(a,"bottom",b.y-this._frameWidth),this._updateVerticalSpriteGroup(a,"left",0),this._updateVerticalSpriteGroup(a,"right",b.x-this._frameWidth)}},{key:"_updateHorizontalSpriteGroup",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=a.getDimensions(),e="vertical-inside"===this._layoutMode,f=this._spriteGroups[b].start,g=this._spriteGroups[b].mid,h=this._spriteGroups[b].end,i=0,j=0,k=void 0,l=void 0;if(f){l=(k=f.getTexture().getDimensions()).y/k.x,i=Math.floor(this._frameWidth/l);var m=new v(0,c);m.x=e?this._frameWidth:0,f.setPosition(m),f.setHeight(this._frameWidth),f.setWidth(i)}if(h){l=(k=h.getTexture().getDimensions()).y/k.x,j=Math.floor(this._frameWidth*l);var n=new v(d.x-j,c);n.x-=e?this._frameWidth:0,h.setPosition(n),h.setHeight(this._frameWidth),h.setWidth(j)}if(g){l=(k=g.getTexture().getDimensions()).y/k.x;var o=new v(i,c),p=d.x-i-j;if(e&&(o.x+=this._frameWidth,p-=2*this._frameWidth),g.setPosition(o),g.setWidth(p),g.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[b].mid.mode){var q=this._frameWidth/l,r=Math.ceil(p/q),s=0;if(-1!==r){var t=Math.round(p/r);g.setWidth(t),s+=t,this._ensureRepeatSpritesExist(r-1,b,g);for(var u=0;u<r-1;u++){t=Math.round((p-s)/(r-u-1));var w=this._repeatSprites[b][u],x=o.clone().add(s,0).floor();w.setPosition(x),w.setWidth(t),w.setHeight(this._frameWidth),s+=t}}}}}},{key:"_ensureRepeatSpritesExist",value:function(a,b,c){var d=this;c.getTexture().setMaxListeners(a+1);var e=this._repeatSprites[b].length;if(a>e)for(var f=a-e,g=0;g<f;g++){var h=new r.Engine.Sprite(c.getTexture());this._repeatSprites[b].push(h),this._frameContainer.addChild(h),this._sprites.push(h)}else a<e&&this._repeatSprites[b].splice(a).forEach(function(a){var b=d._sprites.indexOf(a);-1!==b&&(d._sprites.splice(b,1),d._frameContainer.removeChild(a),a.dispose())})}},{key:"_updateVerticalSpriteGroup",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=a.getDimensions(),e="horizontal-inside"===this._layoutMode,f=this._spriteGroups[b].start,g=this._spriteGroups[b].mid,h=this._spriteGroups[b].end,i=0,j=0,k=void 0,l=void 0;if(f){l=(k=f.getTexture().getDimensions()).y/k.x,i=Math.floor(this._frameWidth*l);var m=new v(c,0);m.y=e?this._frameWidth:0,f.setPosition(m),f.setWidth(this._frameWidth),f.setHeight(i)}if(h){l=(k=h.getTexture().getDimensions()).y/k.x,j=Math.floor(this._frameWidth*l);var n=new v(c,d.y-j);n.y-=e?this._frameWidth:0,h.setPosition(n),h.setWidth(this._frameWidth),h.setHeight(j)}if(g){l=(k=g.getTexture().getDimensions()).y/k.x;var o=new v(c,i),p=d.y-i-j;if(e&&(o.y+=this._frameWidth,p-=2*this._frameWidth),g.setPosition(o),g.setHeight(p),g.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[b].mid.mode){var q=this._frameWidth*l,r=Math.ceil(p/q),s=0;if(-1!==r){var t=Math.round(p/r);g.setHeight(t),s+=t,this._ensureRepeatSpritesExist(r-1,b,g);for(var u=0;u<r-1;u++){t=Math.round((p-s)/(r-u-1));var w=this._repeatSprites[b][u],x=o.clone().add(0,s).floor();w.setPosition(x),w.setHeight(t),w.setWidth(this._frameWidth),s+=t}}}}}},{key:"_disposeSprites",value:function(){var a=this;this._sprites.forEach(function(b){a._frameContainer.removeChild(b),b.getTexture().getBaseTexture().dispose(),b.dispose()}),this._resetSprites()}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=k()(b,c);if(void 0===e){var f=q()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||q()(b.prototype),"dispose",this).call(this),this._disposeSprites()}}],[{key:"validateFrame",value:function(a){if(a){var b=a.imageGroups,c=a.layoutMode;if("string"!=typeof a.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!==t(a.imageGroups))throw new Error("Frame needs a property `imageGroups` of type Object.");var d=function(a){var c=b[a],d=c.start,e=c.end,f=c.mid;if(void 0!==b[a]){if("object"!==t(b[a]))throw new Error("Frame: `imageGroups."+a+"` needs to be of type Object.");if(void 0!==d&&!(d instanceof r.Image||"undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+a+".start` needs to be of type Image.");if(void 0!==f&&!(d instanceof r.Image||"undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement)&&"object"!==(void 0===f?"undefined":t(f)))throw new Error("Frame: `imageGroups."+a+".mid` needs to be of type Image or Object.");if(void 0!==e&&!(e instanceof r.Image||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement))throw new Error("Frame: `imageGroups."+a+".end` needs to be of type Image.")}};if(void 0!==c&&-1===["vertical-inside","horizontal-inside"].indexOf(c))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");d("top"),d("left"),d("right"),d("bottom")}}}]),b}();w.identifier="frame",w.prototype.availableOptions={frame:{type:r.OptionType.OBJECT,validation:w.validateFrame,setter:function(a,b){return b||this._createSpritesForFrame(a),a},default:null},alpha:{type:r.OptionType.NUMBER,default:1},tintColor:{type:r.OptionType.COLOR,default:new r.Color(1,1,1,0)},scale:{type:r.OptionType.NUMBER,default:.1}},s.a.Operations.FrameOperation=w,b.a=w},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c.n(l),n=c(338),o=c(340),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._applyWatermarkFilter=function(){return f._watermarkFilter||(f._watermarkFilter=new n.a({watermarkImage:f._watermarkImage})),f._sprite.setFilters([f._watermarkFilter]),f._renderTexture.render(f._container),l.Promise.resolve()},f._loadWatermarkImage=function(){return f._watermarkImage?l.Promise.resolve():new l.Promise(function(a,b){f._watermarkImage=new l.Image,f._watermarkImage.onload=a,f._watermarkImage.src=o.a})},f._watermarkFilter=null,f._watermarkImage=null,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Operation),p(b,[{key:"_render",value:function(a){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}}]),b}();q.identifier="license-watermark",q.prototype.availableOptions={},m.a.Operations.LicenseWatermarkOperation=q,b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(e)));return g._fragmentSource=c(339),g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Engine.Filter),m(b,[{key:"_applyWebGL",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=a.getContext(),f=(e.canvas,this.getShaderForRenderer(a)),g=b.getFrame();this._createWatermarkCanvas(g.width,g.height);var h=l.Engine.Texture.fromCanvas(this._watermarkCanvas),i=h.getBaseTexture();a.updateTexture(i),i.setGLUnit(1),a.setRenderTarget(c),d&&c.clear(),a.setShader(f);var j=a.getCurrentRenderTarget().getProjectionMatrix().toArray();f.setUniform("u_projMatrix",j),f.syncUniforms(),e.uniform1i(e.getUniformLocation(f.getProgram(),"u_watermarkTex"),1),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,b.getTexture()),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i.getGLTextureForRenderer(a)),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),h.dispose()}},{key:"_createWatermarkCanvas",value:function(a,b){var c=this._options.watermarkImage,d=l.Utils.createCanvas();d.width=a,d.height=b;var e=d.getContext("2d"),f=void 0,g=void 0,h=void 0;a>b?(f=a/c.width,h=(b-c.height*f)/2,g=0):(f=b/c.height,h=0,g=(a-c.width*f)/2),e.drawImage(c,0,0,c.width,c.height,g,h,c.width*f,c.height*f),this._watermarkCanvas=d,this._watermarkContext=e}},{key:"_applyCanvas",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=b.getCanvas(),e=b.getContext(),f=c.getContext();this._options.watermarkImage,this._createWatermarkCanvas(d.width,d.height);for(var g=e.getImageData(0,0,d.width,d.height),h=this._watermarkContext.getImageData(0,0,d.width,d.height),i=new l.Color,j=new l.Color,k=new l.Color,m=0;m<d.width*d.height*4;m+=4)i.set(g.data[m]/255,g.data[m+1]/255,g.data[m+2]/255,g.data[m+3]/255),j.set(h.data[m]/255,h.data[m+1]/255,h.data[m+2]/255,h.data[m+3]/255),j.r>.8?k.copy(i.clone().mix(j,.3)):k.copy(i),g.data[m]=255*k.r,g.data[m+1]=255*k.g,g.data[m+2]=255*k.b,g.data[m+3]=255*k.a;f.putImageData(g,0,0)}}]),b}();n.prototype.availableOptions={watermarkImage:{type:l.OptionType.OBJECT,required:!0}},b.a=n},function(a,b){a.exports="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"},function(a,b,c){b.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDA4NDFGODc4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDA4NDFGODg4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMDg0MUY4NTg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMDg0MUY4Njg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppk6b2UAAAASUExURQAAAP///8zMzDMzM2ZmZpmZmer1GSkAABunSURBVHja7F3rgt6mDlzr8v6v3O5ukqaJbQSS0GDjn+c0+9lomBkJEB8fD3tEPvbz5ocO3oPw6vgfx+aA9z56HBsBL37k+H50D8UrHz6OjYAd/42ANxvAjYC3G8BfD+0ReacB3AjYBmAj4IXPcfJQVVFQaFuQSgNYiwBW2uxTbADrEMDyA4p7RaLUABYhgP8D4i5H1xrAAgT8mvzbgWIYgLkI4D9VaGtAuQGYiAD5G4NbAxAEYAoCvmz/rkJAVQAmxoKvCGhrAIABSEeAXP/81oDiDDAfASx36NvFQAgDkIcA1kLh2U+HAKTMx1b4twlAyADTEMBUgLn9DAtAcDyYCo3HfroywAQEiFl2tgbgCEAYAuzh34lgUQaokheRnvBvE1BjAOiuNiATw79NQE0GyB9JCOgN/zYBJQIgd/+nIybcH/5tAgoEQO/hMYqAofBvDZgvANTOEAYWh1mPYwNgCQFgQ45Is8K/TcB0ARBTlaAPAY7wbxNQJgD3oevIz+3WX8+YYmtAlQDEIMAcfhI+p6WtAVUCcI8AEzWzPfyXvLQBME8A1F4ssiDA7P1Ibn5tV4PnCUBPubA9NcUafr79N9sEFArALY3flwOs4q/ceDPaGhD+aJev44Fk0Mr+ym2+2QCYIwDUSxg38iyD4T8FwK4EzHGA/BGFAKP3V7ZBZ5uAUgG4n9EyXPhTtmJtA2CGA6RBR89j5k+5g562CZggADJEG395dHaGf5uAIgfYrraoJRUQb/i3CUh/OkpAtoKQ9k1/5W6F2gBId4AmkqWGEZTOqp/domwTkOwA1fFvf8bHMv1NRb3tAqFKAFYEGKY/yShH7fWgXAcovn/+ObMNub+Mk9Q2AakOkLwAOgK83wZAnQNk91+IEf9tApAdYCsVCBD/XQoqcYAU8UdC9/XKdoHfbCs8gwAk5K9EiP82AX9NNSJhxiKATiNIEgPUF5qAX8NAGgMCiTp4I3nsv13gxTwg8usBhTVg0Azvf//35eUACGACCTx6SVnsf/mqLzQB5wEbBgEHUrTJCGog9l8JALo9QxVD2xQYoqjpf/7tGwBOIuDgo9eS2ttpu0CDzvYRgUaHSdOm//kffx0ALDJL5iJLNAHcAtRfttu1QHPBzSgGGt96gbOm/3aBvdWWthhwRvcdyWvtuAHQu+7awACl9F7RvKY+2wX2L7rdYCCFAD6MXWY2ACYB4AYDlDRROU0EZBeDx9oqnmIgiwDMjYZCoPWyNICP4cdy5D6KUTVJBLYLdADgz/oAZ3n1a6LShL+7ATAqBZrZf5OTROD1LlAO9/OjIpNKAGki8HoA0BHwfElBKgF8jJ4232nADAB80UAuAWSJwOvTgCgA5BXrGmql4QCglwOAhKJQoTPAKuED8B86fnvkt+f3//15ScDn97MQHAEMNh0acYGi9P1YtO/7UZUl8XAtgcxKWATgPnM8QwO/0SDLYIFvx9OJgfghoPjf0TQD9BMJqwHgj25c42KgU17X9UMBNGcGwjJ1II4aJZ7zvqO/xHFm14oDQBhYd0UOYCAnm4o5dzg7+L/DAAsDHZXQXgzwLM3q9IFTaH/6uGRkwT4M0DzO6vixoPzWQwEfCwOgBwNpFXXHr5VH/wEA+DDe0ZD3naOHT4uZH3OpabASbiBSmQlaw+8JRPThLMD4UkgLAzz1pVuvDRN+tIuJXIuhd5yauqTae/wIJ/xwFoCd3H05tDz5rW9GFin8cJsN2B26cxpIxrnYKQAr/HD7zSTgDaXA6lopgMHC/0gAaMFnim1sFS38cLuNAhokcInQWXRH4KY/3n7DgE3RFQpgoQD2Tf9f+3z+t//r/4+IdmwdgtxxHAAAquE5akwvGY770HaeH4jQFhoYHgC9weOie9hPA+yY/t+r9THx+cLCKRDgNhwHAKAK5nRDsNIZ+5yNGitcSeMHgFbBXK5toHbEXvM26axwHYEfAFQGc7rgHnPuTzK9XsmPA0DhV8q5DbTRf+bMv34/OAvgPxdV+JV8utamtujXMJQ+DwCVXzmY6CuX4ZMXAIC6ASCFb1+t+68DQO1XDnS4mze2uoAFcG8HKDY6ghv+Re6kcwOg9isZN/yLXEjl3g9S3GGnQwNmG/A1bqPxAqC6vYZZA+ZvxaQNACAKEISRRWw+5QVA+X0LBJT4N7mJnweA8iZ7Ajn9V0kCHwAAhpz+H8tcTC7hAKD6gUYY9VVuJXYCAKDHnmKew1pEARIAoABTDWDxbYWVwBwACBAA6kR3kSTQDQCpFzqGPIari1gAbwQB7t1UyBMYtIgF8AKgvtc+Qx7AWEYB4gGAkgUK2rCC3kKxOgAEswvHMgqwPAAwT+CuowCrA0AxD+CuowCLA4Ax47+QAiwOAELk/6UUYG0ABDYOf2cV6MO9HFwLAALtwLGQAiwNAFQCWEkBVgYAAxaAllOAlQGgmA5wLQVYGACwBLCUAngX9AsBQKgEsJQCrAsAVAe4mAJ493TVLQejpoBFXROrAFC2IWQpAgBWAO+23qotYbAO8LxtzQfw41NxLgIAbAq4mgIsCgBcAlhNARIAIEWjjEEADGpNJwJgwufiOsDFigABmXxJIQA2BTzdogZtAd2ZfAUAzveBQYymLKcArUz+99sRQAAA7ADXs4CnmP3tGgz6+woN+r5CI4ZAnpUCrlcE+BhrtvnzYo1/cTC/FMjA93DoakWAz/tfD9cznwGAHeDHsZACfM7ejquOeloxvzUFXMYCfoX+SHto+iRDGWV8C3h1k9E6AAB2gOAW8Cv2x5Rn9r3xKD4L1gJOjH02AGgxAqhXAD6/2zv1yUM9sgO8UCcpfLvJE3/CjEROAT+gGlUmG/0iAEATgMD0Kq1g/SkhgXaA9x1L50GAEW5MT4oJcgrYbFo9AwJVmj+JAhYmgAkQqOf9dF+GnALa1tT00byfTQHQDtB4hWXKtVVQUz9xYkKngOZF9WAIMGT0U6T5CQTwDQFeg/h/bglSVZHPPUKnm4Sun1c5wL5dNUFuUJOCLtcbAH/SDkt7K4FOmGIwS21aYZI1NvByG/SBaiNvAsi1AhwTehVmnw7RBB9IjyKAICtA3tAzx8xS1mwKwHaAg1PRbQWkatbPV2jkfWAOMZbpwPua9utVaYGPAvm02KkDhBD7CRyN7QDP4WnN0V06YL85O39fSmadDtsB8tXbMaXrAFVP/CkUwNAO8DwI329ng4BDB7Q98bl0HAidXBIJoAMCEjs3ZrH+JKGWZQnADoFhEiCM4GemgoydAkr7q00Q0Lifr7owK4kCsFPAJgF8h8li1sZGCokdU7h6xRTwhPYsENCoFyCo2aAJfxM7BTzHvOaQAD+cAlZ0gBeQZ00hAUJySPHTldZzgNfwNLjBfhKAooBwwX4QAVitgEa8RJlHCk4FV3SADXhqeE1AoLKk2KRdF3SALXgarID6x7xskoRyNjgBjDqetg70kQBUJhjq2lbcBybj/3QU5Qw1TQKX7lbcB2aEZzsf0GUpIE63sVNA8sGzqQMdMoDVmyZMuBWaADRl3g7+McKngKMOSBPNbt9XchgJCNZUiaFu6BSQYzZ2aJQXxKKAEPO2YjeI/iFvkoA+hwJo/t+YrHJDIy4xMoDllwNm74r9wMboqUkCsiAF+PUbeR+YBJ+FlAAZ4IdRAPI+MA4/Dd0iAYsMKBYFOBkc2QFyxjm/VjrAq1GAMxUEdoCccxi+RQLyKgoAPgp0GSj326nTCCxBATSDPkriH3EAhnxGAIwCODilgSCAy/jHoFNdCECjgOFU8GKdleufy3wtyp6IywgsQQHqnQeQD6dTjGX0GMw6DzI5rxd/ySZOYzjBKGDQy9Fy8dcJ88YEADQKGMrmZLn4R4/w3bZhHqAPAaMAehgBxM8wHfYaa1CAPIsABCf+eBTQvaazoAOMvhhOPVBDo4DuVd0FU8CvL2KM+ONRQO/x2WPVJ6otizP+eMsofT6QjuPdEFC31VCwgnCXD5Rj6ccPAfLXGuAooGdJgI7j1RAIiD/edvoOCtBj/cdjB0Pif2G80Sjg7IX4eMQzCgEOir+lcyHmkoAeD3mkNP4XA46fCvLxmGeg3RsHrjXBbaixpYJ0POhRros/3pY6kw+U41lPwDmo4bgtmQqef720n3N+kZyn455WLYs/3rZ6AwWMZ6+T4W6/q9d3ut/F23AHa5q2xPPG0ysfZgw43t+p27qED9QYzqqAu/VGqKL4412y0KAAX+JSkvbYaKAtA5QR/+VSQWfeUpT2mGiAR8s/zg9Yygd64VoGd0sHeBlL/70AFjQRuNkd5hfxOrizp+mnRNeT29oCeVDIb+Mr0x4e7veXGn9fJ9OpPjAieqWL4E0IaK/9D8GuFs6KLp6O4O/iygcPHO7Pjv8qIsAxlbzqtKcBAe2x/1HAFTQROJ/qQTlc+QrY/cFe7fiPw2CLJgIdK/4cxS/1LucMAXLMiP/VgIO1D4wCKUDl41YH1DYOofe+womAdR0tvNSEQAJqiv8E1S0UAckSgEapCcMJSFv+o00LnAhQGgF8oLSX1XsEyDEx/ldvUycCnEcAMCtgcvdlk+N/NeXq1gRy7s9FSQWbKKcjP/03vYwAU0B4qWn+Rw7tcJapU67MBkjmOMCcixtAAM99F7CbJYNeDGczZO8xJ+LZpKugFMAJ4/4BjwAteBWBpADN+OOKjgAtGfEqG8CZSgi0GVKr7V9rxMtsgGZOBaDNkAoS/8s3ITgKoKw/XqN3VGz/miNeZQRl+k6oIqwbEECV411mBClxMJAoIPaW+Iy8S6AogBP/eI3l5XL5b1kRBqIAyhz0Irnj6tFvkhDSzJBMxDMU2VXbv3J7pJM9QF3OI6jyXzwwaRRAaI63MAlXhDrkZKsmaEi/hKRU/TAIAmhiJbCWArjGfnFKP6PsYeE0AsBb/aAS2OEgIMMHMiDVXcNS5/8k0tBkpIKKmPNWpKbdfXcVZlQyaQ9tHxTBxH9OVcKUCmr4MANvhtWZcMNDQHQqaNC9MgqQeSJwb/8FSSGDU0HYlHeqCHBjmgsQQcamgibhqzsWN2nM22ePBGh+RKaCtsQX7lgcT4y/NP+b2UYgMhU0Oh+09gg0L/5s4UqIA/WZlS+0HjmhI25tPaE42UCYDzSnPnA9cubEX+1+SespgGO5D1sEdH78GwggqaYAiplcinZ7Tmrrvj5lV5SqUIwPvEgn0LqmZ/Zv7e08pyiFwYhU8BJFaF3T01r33ZX/LmLZ7HDL61DAZZzhbs+hHB94G//hytkkCPh5+uYvrHGXsibGXz3OeY4QuK3azR+Ao4CM+5yGL54w5E4zMoLUG0PgLtCa1RjFBHVL+YyESyiAfN8v4aWmVLhLSfytW0ezzYCPpxsyv+hdyiHx59Hhm00DHqvWRM+CF6nGlECNDs5aRE3FgMMbN+P7aB8YsbRrP0GQh4Fxnjb8S7RUMNCWSMyyZ8cmUkp6hn/MwB2rXaQaEv++z5OhfaS4T9aAg/nAyM1d+qT4Sx7nZvpALoz/aIdjyIfyOBch7THkf2MO9zE6wOm5d1LaI6Xxf4wOaHruneUDqTj+tuuwVyQApDbSd5wkxfF/BAQ0vNQ0zwdSefwfAIHs3BuBAm4ce4SsLQ0BmbQGk5QKOsATaWvWhQAl597ZqaBAxP9zuBZNCjk394agAHUt/z67LqDTlmGzKEBh4v8x2GkClQBW2R3Gw/Gfe9R8LQeIuSQgA++jARsA/Lnmcg5wpVSQxyelvDv+7e9HSwX7KaCRn+mrDQANglpWooBppzovf4cAnmETrMtTQNOaSeKbFXumADe3BgWMF4K/xiGCBHhaqhHHTjwObMaigDEvExokQo6/axov0TPCUQyK+R5Fjr9PyJ9BAS0j4DzSycj679VxtFSQxl6ntYdTw2kJJf7eCKL5QBl9nQYCHAmhQsffzeH6DAow9HiJFQDCiL9/bxfaQaFhCmgu1gySwHiZpS4FnMshKBTQPsyhYSOMEv8QBacFKIBd0XKQACMngEEenh9DAYY1e40YYRQDGMXeYD7QQwFtGeirCQi0AYwib7RUkFxf1SYBdo4MigGIs29gB4XE91kcd1uWQhuAwAQOTOi8b9Pcxm80g4wtAIHSDZYKipeQ2vs3TXgiaAEIVW6sJQF2f1lbBmh0iQlFAGJjBuYD1f9pAZ1/CVoAgllb8Smg89sMTV6UJ44waAq4EAVkdHqSKR57AQJAwzuHvIyBBK6tgEILQMKExVoSoJiXMZDAhRVgbAeYAE8sCpCg0pSl3ZuaLxHSBxMAmumlqA+0NHdQ4whjO0BCRFUoBYx9oYUE/rIC+i4HCGd7+PzUH0eO1x0EPB1r1ksBwSjg3+BT9L4+6oSArucAI/Sp3gfeBN83B03dHX5BgN+WAkKkgq3g+77S1unrBwT0bSlgufdlIdMBfM9n2ro8fUJgRQIIClJBKvg58e3dFzh86pxAQN+XAtb4QLZO/Cg9ctwC8NRVQNskgYh9SByGu/3BEED2GlX6Ghj3cf6cakcy86SngOkME3JDmjP0YeUOWpgAJmj01fCQMo9HXvyhD6x30LIEMMGl3zXEo08UcE/gP+d8bIc1zeM5fAKYUqprb6omEvkMLp/H/N/5/jnhKaW1XtAF7n0d4J92FGicAv6GgqllXVTwIy9r7YHAqwgA9bYsCr+13ewGUQhg2jZFekH0e9wgyirAtPV6rMbolHlTuwUC2ASQgk56+tTvgsCjukGE+8BVp74dAigEMHW3hr4l+AYIQBNAVoWK3xP8JgT4hQRQB4CK4N9DAKQKPHvDJtUYvtLZJgRMALO3bNP8ic+QLEvvJICJpQCqnvj3qAd+tVRw8stif/XNIAQwf8M+vyv2lzIrwASg838yKPQCF/tLzDMsNLPfjRIi37edBIFmH3EpSBgAnKv9uKFHt4Alp3blbDT4azf3IBDAAYBrAWvOa/Ed53xt+1I9u8VS9Wu3mCwHAFwLWNO5g32CyMsBAFYBis5ssw90jLuqZudZDAtYtUJB7wKAohJAWSv3cADoagRAqC82ZzKFA4CQASCoFrCudxv5KJHWAgCqBSxsV6dvAgCsAhQ27ZE3AQBVASrbdvGbAECYBFDauO9NAEAtApS27nwTAATTAtZ27nSWcpYCAKgC1LbvfhEAQBWguHGrs5anC60GgZaBi6/weBEAMBWgunPzewDAkEWA+t7tPhVfaEcIpgLU397wGgBAKgDA5Q1vAQCkAiDcW/0WACBWgQRgX63TBK4DAEAFEIST6m8BAKACXPVn+dgAeIUCEEavGmcpeBkAoCnAZfvK2W/lXA1cBQBoCiAwJ6vkHQAAUwDF6Van7wCAIinAXffi6W9F7wAAAa0EC9ThWueC/iIAYCAFUKiOtd6THYsAAEcBms3rdQPgyQrQbstG5S8kzqkFCACUJNB0d8Xc8fMGcA0AgCSBtq6Mc5FJrwAARBnQenXN1Ddzn+6lFQBwNvTTFcDemp/XBgDgtnCAJLDnEkuphaU+DwDlSWDfNbYz383N4EsAoDgJ7L7FmBfixhUAUKsAAzfZz0OnuPlnBQBIHcuyDHXb5HW4cQUAlCWBpmtrqdIG+tOjRQEgM6Jvmvxc2bYmQBwXAECBBWBj9A/i872BkyggID1aAACTLYA5+D/jXHiFkd8CrNAncGIS2BP87+n/+ZTZwABuXKFT6BQL8NlWvbO/vt4Q8ZxpFKAACwCAL641oa9+9+yP/NfdCv0Xq8j9G/Ia3LhAs2hp3nDzfb1RDxz4+yaF4Us1/hhoqqGAiF0SC9wX0BOi/12I8eP5N9I/nv+uzjicD0kbo1yhAN2/+jAATHrU8o4Vd4X0/yj+lkCGCz+xTaakQBvleQAQtPCfjnHFqnBI53T8HWEEzv5lFHBOjequBG8A3IWfu3LV6Rbwm6Ie1SqYVwj/VTikaGBINgDitf+eXKdfGSKet10IAIps/ZovqoXSaMMAPAAInfuLKEBssOX+t6atAGOmSqb6QIp5e/i1IF4k+le1gCwfyEHfAL8WJLW2j/3vmiMCGoRj+KUACVi5GQp+XzZ9Q8sEQoznH7REd4CBvRrzg39NAVJPANcYWOm2gO+NG9lAEM8Wk/OXQ3JGf+aGtA4AfgeC5gGB4wMTb6sljOAWuzn4DyD83NQTCQZJoOZwEYgray4MgL/BIPrfhqDWjiH93CnEEj5djxk+UOKczkMAcAGJkye7DiYzRCDQ7h5PBUDZWhjli0BubURfDgCvCeYEb2kgAO060ZJngjYALnwgJRMAfww1MjjWywLT7ZQkgCp0Yt3gK4IG3gWAjMWw5Iuk9P6Ps24A+ABAOSGKEoH25kN2ScG7koCcPJgz7bVp76EDAxsAARwoef7avPt41A5sAESIoKbJa8/m4yEM6MsAICkTlbNmV+/xg34MyMsAkLQpMutKUeqPWScGeAMgRAUpZX4N7jvtwcDbAJCzHHbdW5bjYWX6k9a84G0eMMcFStIA+zaef26o2gCw2GrvcpAmueyAoydNMXgfAML3hEiazdaQiN2LgbwOAMEu0FCK5zoC+PmXromANwBcAJBEn0WhinLhCN4HgEgXyJlOO+Hc0QkINgAco6Cp5VbKKdz+HwTv84BxLjD5VilNPHPyubv+vQCIMQGd+zA44C1jPfunMaTXLQVdDS0H0EgsAuacO+UXWoAIEzCw/YIiAPbKcE0BQBe1ju3C6yPbXbWb6wJ7hnZ0E6a6f2MTAIALNLA/uVOBWYeOtwb0Ti5L+PnDjYBZbQc2ADrX2MlG9OxMBeY1HnnpM3YBt8n7yW2SSDacbQcIaAJM4f/VjkU8ySBtB4hXCtLOgq+OpwKyHSCcCTAVfv7fjYlGEXBhIHbQkgGgzvD/2VyaR9eFaDtArFKQreyr1pnciqVsB1jkAtkRfmJzKBsImNBvZD92E2Bc9JFO48hbAAABIKPhv75boB8BWwBgTID5ZI10G7rrgtAWABQTYF7xlZGU7nJO0y4BQJgAc/h14IKWGwRsAYCoBJjDb6nsS8fuAN5ndwBMgNjv5hn9oSsEbAGoNQFHT/jt81KtCNDtAKsTQXtbhZ4Le40I2AJQDoAjI/x3P6VbAKBMQKD360fAFgAAExDo/Yy/JQ08bgEA0wCSYLTJ7X+wBQALADQ8IaWBANoCgG8CSFJ+Ta4NwBYAIBNAkoU32QKArwEkiYxzUX3aawDJj84M/0f/mcJtAEA0gGQ64rYATAEATQ1/JwK2AECYAIo14roFYKlEkLgAczsDRDEByjWsswUAQQNIefpv7oNgMIkgSQnqtgHA0ABKFWBD8rEzwEoN0Ozp10TANgB1GkAygX1bCNgCUKUBOmno7xGwM8CJAKAJvr8TAdsAlJgA5TLkbQNQ+Mg85TciYBuA2SaAtGTMeXcCwMgDykb8FAHbALy7CrENwLsRsOP/cgRsA/g+C7IN4EbANoAbAdsAbATs+L/2kW0ANwK2AXz1w4+L/z8CDADebzi4XHs84QAAAABJRU5ErkJggg=="},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c.n(n),p=c(342),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=n.Math.Vector2,s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));f._lastBlurRadius=f._options.blurRadius,f._lastControlPoint1=f._options.controlPoint1.clone(),f._lastControlPoint2=f._options.controlPoint2.clone();var g={blurQuality:{type:n.OptionType.STRING}};return f._horizontalFilter=new p.a({},g),f._verticalFilter=new p.a({},g),f._sprite.setFilters([f._horizontalFilter,f._verticalFilter]),f._horizontalFilter.setDelta(new r(.5,.5)),f._verticalFilter.setDelta(new r(-.5,.5)),f._filter=new p.a({},g),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Operation),q(b,[{key:"rotate",value:function(a){var b=this._options.controlPoint1,c=this._options.controlPoint2;90===a?(b.flip(),b.x=1-b.x,c.flip(),c.x=1-c.x):-90===a&&(b.flip(),b.y=1-b.y,c.flip(),c.y=1-c.y),this.set({controlPoint1:b,controlPoint2:c})}},{key:"flip",value:function(a){var b=this._options.controlPoint1,c=this._options.controlPoint2;switch(a){case"horizontal":b.x=1-b.x,c.x=1-c.x;break;case"vertical":b.y=1-b.y,c.y=1-c.y}this.set({controlPoint1:b,controlPoint2:c})}},{key:"transform",value:function(a){var b=this,c={};["controlPoint1","controlPoint2"].forEach(function(d){var e=b.getOption(d);c[d]=a.applyToRelativePoint(e)}),["blurRadius"].forEach(function(d){var e=b.getOption(d);c[d]=a.applyToRelativeSize(e)}),this.set(c,!1)}},{key:"_renderWebGL",value:function(a){return this._renderBlur(a)}},{key:"_renderCanvas",value:function(a){return this._options.highQualityCanvasBlur?this._renderBlur(a):this._renderLQCanvasBlur(a)}},{key:"_renderBlur",value:function(a){var b=a.getDimensions(),c=b.min(),d=this._options,e=d.blurRadius,f=d.controlPoint1,g=d.controlPoint2,h={blurRadius:e*c,controlPoint1:f.clone(),controlPoint2:g.clone(),texSize:b,blurQuality:"high"};return this._horizontalFilter.set(h),this._verticalFilter.set(h),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(a){var b=a.getDimensions(),c=this._options,d=c.blurRadius,e=c.controlPoint1,f=c.controlPoint2;return this._filter.set({blurRadius:d,controlPoint1:e.clone(),controlPoint2:f.clone(),texSize:b,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),b}();s.identifier="linear-focus",s.prototype.availableOptions={controlPoint1:{type:n.OptionType.VECTOR2,default:new r(0,.5)},controlPoint2:{type:n.OptionType.VECTOR2,default:new r(1,.5)},blurRadius:{type:n.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:n.OptionType.BOOLEAN,default:!1}},o.a.Operations.LinearFocusOperation=s,b.a=s},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(76)),p=c.n(o),q=c(56),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=n.Math.Vector2,t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=function(a,b){
if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(e)));return g._fragmentSource=c(343),g._lastBlurRadius=null,g._lastControlPoint1=new s,g._lastControlPoint2=new s,g._blurFilter=new q.a,g._blurredRenderTarget=new n.Engine.CanvasRenderTarget(100,100,1),g._maskRenderTarget=new n.Engine.CanvasRenderTarget(100,100,1),g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Engine.Filter),r(b,[{key:"_applyCanvas",value:function(a,b,c){var d=this,e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var f=b.getDimensions(),g=!c.getDimensions().equals(f);if(b.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||g){var h=new s(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(h);var i={blurRadius:this._options.blurRadius,texSize:f},j=function(a,b,c){return Math.min(Math.max(a,b),c)},k=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),l=this._options.blurRadius;this._blurFilter.set(i),this._blurFilter._applyCanvas(a,b,c,e,function(a,b){return function(a,b,c){var d=j((c-0)/1,0,1);return d*d*(3-2*d)}(0,0,Math.abs(j(new s(a,b).subtract(d._options.controlPoint1).dot(k)/k.dot(k),0,1)))*l}),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(a,b,c,e)}},{key:"_renderLQBlur",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=b.getDimensions(),e=!this._blurredRenderTarget.getDimensions().equals(d);this._blurredRenderTarget.setPixelRatio(b.getPixelRatio()),this._blurredRenderTarget.resizeTo(b.getDimensions()),this._maskRenderTarget.setPixelRatio(b.getPixelRatio()),this._maskRenderTarget.resizeTo(b.getDimensions());var f=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||e,g=b.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||e;f&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),g&&(this._blurImage(b),this._lastBlurRadius=this._options.blurRadius),this._applyMask(b,c)}},{key:"_blurImage",value:function(a){var b=a.getCanvas(),c=a.getContext(),d=new s(b.width,b.height),e=c.getImageData(0,0,b.width,b.height);p.a.stackBlurCanvasRGBA(e,0,0,b.width,b.height,this._options.blurRadius*d.min()),this._blurredRenderTarget.getContext().putImageData(e,0,0)}},{key:"_renderMask",value:function(){var a=this._maskRenderTarget.getCanvas(),b=this._maskRenderTarget.getContext(),c=new s(a.width,a.height),d=this._options.controlPoint1.clone().multiply(c),e=this._options.controlPoint2.clone().multiply(c),f=b.createLinearGradient(d.x,d.y,e.x,e.y);f.addColorStop(0,"#FFFFFF"),f.addColorStop(1,"#000000"),b.fillStyle=f,b.fillRect(0,0,a.width,a.height)}},{key:"_applyMask",value:function(a,b){for(var c=b.getContext(),d=a.getCanvas(),e=a.getContext(),f=this._blurredRenderTarget.getContext(),g=this._maskRenderTarget.getContext(),h=e.getImageData(0,0,d.width,d.height),i=h.data,j=f.getImageData(0,0,d.width,d.height).data,k=g.getImageData(0,0,d.width,d.height).data,l=void 0,m=0;m<d.width*d.height*4;m+=4)l=k[m]/255,i[m]=l*i[m]+(1-l)*j[m],i[m+1]=l*i[m+1]+(1-l)*j[m+1],i[m+2]=l*i[m+2]+(1-l)*j[m+2];c.putImageData(h,0,0)}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}]),b}();t.prototype.availableOptions={blurRadius:{type:n.OptionType.NUMBER,default:30,uniformType:n.UniformType.FLOAT},controlPoint1:{type:n.OptionType.VECTOR2,default:new s(0,.5),uniformType:n.UniformType.FLOAT2},controlPoint2:{type:n.OptionType.VECTOR2,default:new s(1,.5),uniformType:n.UniformType.FLOAT2},delta:{type:n.OptionType.VECTOR2,default:new s(1,1),uniformType:n.UniformType.FLOAT2},texSize:{type:n.OptionType.VECTOR2,default:new s(100,100),uniformType:n.UniformType.FLOAT2}},b.a=t},function(a,b){a.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c.n(n),p=c(345),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=n.Math.Vector2,s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));f._lastBlurRadius=f._options.blurRadius,f._lastSize=f._options.size,f._lastGradientSize=f._options.gradientSize;var g={blurQuality:{type:n.OptionType.STRING}};return f._horizontalFilter=new p.a({},g),f._verticalFilter=new p.a({},g),f._sprite.setFilters([f._horizontalFilter,f._verticalFilter]),f._horizontalFilter.setDelta(new r(.5,.5)),f._verticalFilter.setDelta(new r(-.5,.5)),f._filter=new p.a({},g),f._renderBlur.bind(f),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Operation),q(b,[{key:"rotate",value:function(a){var b=this._options.start,c=this._options.end;90===a?(b.flip(),b.x=1-b.x,c.flip(),c.x=1-c.x):-90===a&&(b.flip(),b.y=1-b.y,c.flip(),c.y=1-c.y),this.set({start:b,end:c})}},{key:"flip",value:function(a){var b=this._options.start,c=this._options.end;switch(a){case"horizontal":b.x=1-b.x,c.x=1-c.x;break;case"vertical":b.y=1-b.y,c.y=1-c.y}this.set({start:b,end:c})}},{key:"transform",value:function(a){var b=this,c={};["start","end"].forEach(function(d){var e=b.getOption(d);c[d]=a.applyToRelativePoint(e)}),["blurRadius","size","gradientSize"].forEach(function(d){var e=b.getOption(d);c[d]=a.applyToRelativeSize(e)}),this.set(c,!1)}},{key:"_renderWebGL",value:function(a){return this._renderBlur(a)}},{key:"_renderCanvas",value:function(a){return this._options.highQualityCanvasBlur?this._renderBlur(a):this._renderLQCanvasBlur(a)}},{key:"_renderBlur",value:function(a){var b=a.getDimensions(),c=b.min(),d=this._options.start.clone(),e=this._options.end.clone(),f=this._options,g={blurRadius:f.blurRadius*c,size:f.size*c,gradientSize:f.gradientSize*c,start:d.clone().multiply(b),end:e.clone().multiply(b),texSize:b,blurQuality:"high"};return this._horizontalFilter.set(g),this._verticalFilter.set(g),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(a){var b=a.getDimensions(),c=this._options,d=c.blurRadius,e=c.size,f=c.gradientSize,g=c.start,h=c.end;return this._filter.set({blurRadius:d,gradientSize:f,size:e,start:g.clone(),end:h.clone(),texSize:b,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),b}();s.identifier="mirrored-focus",s.prototype.availableOptions={start:{type:n.OptionType.VECTOR2,default:new r(0,.5)},end:{type:n.OptionType.VECTOR2,default:new r(1,.5)},blurRadius:{type:n.OptionType.NUMBER,default:.025},size:{type:n.OptionType.NUMBER,default:.1},gradientSize:{type:n.OptionType.NUMBER,default:.1},highQualityCanvasBlur:{type:n.OptionType.BOOLEAN,default:!1}},o.a.Operations.MirroredFocusOperation=s,b.a=s},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(76)),p=c.n(o),q=c(56),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=n.Math.Vector2,t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(e)));return g._fragmentSource=c(346),g._lastBlurRadius=null,g._lastGradientRadius=null,g._lastStart=new s,g._lastEnd=new s,g._blurFilter=new q.a,g._blurredRenderTarget=new n.Engine.CanvasRenderTarget(100,100,1),g._maskRenderTarget=new n.Engine.CanvasRenderTarget(100,100,1),g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Engine.Filter),r(b,[{key:"_applyCanvas",value:function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var e=b.getDimensions(),f=!c.getDimensions().equals(e);if(b.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||f){var g=new s(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(g);var h={blurRadius:this._options.blurRadius,texSize:e},i=function(a,b,c){var d=function(a,b,c){return Math.min(Math.max(a,0),1)}((c-a)/(b-a));return d*d*(3-2*d)},j=this._options,k=j.blurRadius,l=j.gradientSize,m=j.size,n=j.start,o=j.end,p=j.texSize,q=new s(n.y-o.y,o.x-n.x);q.divide(q.len()),this._blurFilter.set(h),this._blurFilter._applyCanvas(a,b,c,d,function(a,b){return i(0,1,(Math.abs(p.clone().multiply(a,b).subtract(n).dot(q))-m)/l)*k}),this._lastBlurRadius=this._options.blurRadius}}else this._renderLQBlur(a,b,c,d)}},{key:"_renderLQBlur",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=b.getDimensions(),e=!this._blurredRenderTarget.getDimensions().equals(d);this._blurredRenderTarget.setPixelRatio(b.getPixelRatio()),this._blurredRenderTarget.resizeTo(b.getDimensions()),this._maskRenderTarget.setPixelRatio(b.getPixelRatio()),this._maskRenderTarget.resizeTo(b.getDimensions());var f=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||e,g=b.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||e;f&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),g&&(this._blurImage(b),this._lastBlurRadius=this._options.blurRadius),this._applyMask(b,c)}},{key:"_blurImage",value:function(a){var b=a.getCanvas(),c=a.getContext(),d=new s(b.width,b.height),e=c.getImageData(0,0,b.width,b.height);p.a.stackBlurCanvasRGBA(e,0,0,b.width,b.height,this._options.blurRadius*d.min()),this._blurredRenderTarget.getContext().putImageData(e,0,0)}},{key:"_renderMask",value:function(){var a=this._maskRenderTarget.getCanvas(),b=this._maskRenderTarget.getContext(),c=this._maskRenderTarget.getPixelRatio(),d=new s(a.width,a.height),e=this._options.size*d.min()*c,f=this._options.gradientSize*d.min()*c,g=this._options.start.clone().multiply(d),h=this._options.end.clone().multiply(d).clone().subtract(g),i=g.clone().add(h.clone().divide(2)),j=h.len(),k=h.clone().divide(j),l=i.clone().add((e+f)*k.y,-(e+f)*k.x),m=i.clone().add(-(e+f)*k.y,(e+f)*k.x),n=b.createLinearGradient(l.x,l.y,m.x,m.y),o=m.clone().subtract(l).len();n.addColorStop(0,"#000000"),n.addColorStop(f/2/o,"#FFFFFF"),n.addColorStop(1-f/2/o,"#FFFFFF"),n.addColorStop(1,"#000000"),b.fillStyle=n,b.fillRect(0,0,a.width,a.height)}},{key:"_applyMask",value:function(a,b){for(var c=b.getContext(),d=a.getCanvas(),e=a.getContext(),f=this._blurredRenderTarget.getContext(),g=this._maskRenderTarget.getContext(),h=e.getImageData(0,0,d.width,d.height),i=h.data,j=f.getImageData(0,0,d.width,d.height).data,k=g.getImageData(0,0,d.width,d.height).data,l=void 0,m=0;m<d.width*d.height*4;m+=4)l=k[m]/255,i[m]=l*i[m]+(1-l)*j[m],i[m+1]=l*i[m+1]+(1-l)*j[m+1],i[m+2]=l*i[m+2]+(1-l)*j[m+2];c.putImageData(h,0,0)}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}]),b}();t.prototype.availableOptions={blurRadius:{type:n.OptionType.NUMBER,default:30,uniformType:n.UniformType.FLOAT},size:{type:n.OptionType.NUMBER,default:50,uniformType:n.UniformType.FLOAT},gradientSize:{type:n.OptionType.NUMBER,default:50,uniformType:n.UniformType.FLOAT},start:{type:n.OptionType.VECTOR2,default:new s(0,.5),uniformType:n.UniformType.FLOAT2},end:{type:n.OptionType.VECTOR2,default:new s(1,.5),uniformType:n.UniformType.FLOAT2},delta:{type:n.OptionType.VECTOR2,default:new s(1,1),uniformType:n.UniformType.FLOAT2},texSize:{type:n.OptionType.VECTOR2,default:new s(100,100),uniformType:n.UniformType.FLOAT2}},b.a=t},function(a,b){a.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c.n(l),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=l.Math.Vector2,p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Operation),n(b,[{key:"_render",value:function(a){var b=this._options.rotation%360*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(b),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();var c=this._sprite.getBounds();return this._renderTexture.resizeTo(new o(c.width,c.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),l.Promise.resolve()}},{key:"getNewDimensions",value:function(a){return a=a.clone(),this._options.rotation%180&&a.flip(),a}},{key:"flip",value:function(a){var b=this._options.rotation;switch(90!==b&&270!==b||(a="vertical"===a?"horizontal":"vertical"),a){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}]),b}();p.identifier="orientation",p.prototype.availableOptions={rotation:{type:l.OptionType.NUMBER,default:0,validation:function(a){if(a%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(a){return(a+360)%360}},flipVertically:{type:l.OptionType.BOOLEAN,default:!1},flipHorizontally:{type:l.OptionType.BOOLEAN,default:!1}},m.a.Operations.OrientationOperation=p,b.a=p},function(a,b,c){var d=c(70),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=c.n(p),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},t=p.Engine.Filters.OverlayFilter,u=p.Math.Vector2,v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f._overlayTexture=p.Engine.Texture.fromImage(f._options.image),f._overlayContainer=new p.Engine.Container,f._overlaySprite=new p.Engine.Sprite,f._overlaySprite.setTexture(f._overlayTexture),f._overlaySprite.setAnchor(0,0),f._overlayContainer.addChild(f._overlaySprite),f._overlayFilter=new p.Engine.Filters.OverlayFilter({overlayImage:f._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:f._overlayTexture}),f._sprite.setFilters([f._overlayFilter]),f._renderedOverlaySprite=new p.Engine.Sprite,f._renderedOverlayContainer=new p.Engine.Container,f._renderedOverlayContainer.addChild(f._renderedOverlaySprite),f._overlayRendered=!1,f._lastInputDimensions=new u(0,0),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,p.Operation),r(b,[{key:"setOption",value:function(a,c){if(s(b.prototype.__proto__||o()(b.prototype),"setOption",this).call(this,a,c),"image"===a&&c&&this._sdk){var d=this._sdk.getRenderer(),e=this._overlayTexture.getBaseTexture();e.setSource(c),d.isOfType(p.RendererType.WEBGL)&&d.updateTexture(e),this._overlayRendered=!1}}},{key:"_render",value:function(a){var b=a.getDimensions(),c=this._options,d=c.image,e=c.alpha,f=c.blendMode;return d?(this._overlayRendered&&this._lastInputDimensions.equals(b)||(this._renderOverlayToRenderTexture(a),this._overlayRendered=!0,this._lastInputDimensions.copy(b)),this._overlayFilter.set({blendMode:f,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:e}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),p.Promise.resolve(this._renderTexture)):(this._sprite.setFilters([]),this._renderTexture.render(this._container),p.Promise.resolve())}},{key:"_renderOverlayToRenderTexture",value:function(a){var b=this._sdk.getRenderer(),c=a.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new p.Engine.RenderTexture(b,c.x,c.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));var d=this._options.image,e=d.width,f=d.height,g=p.Utils.resizeVectorToFill(new u(e,f),c);this._overlaySprite.setWidth(g.x),this._overlaySprite.setHeight(g.y);var h=this._overlayRenderTexture.getBaseTexture();b.isOfType(p.RendererType.WEBGL)&&(h.setGLUnit(4),b.updateTexture(h,!1)),this._overlayRenderTexture.resizeTo(c),this._overlayRenderTexture.render(this._overlayContainer)}},{key:"dispose",value:function(){s(b.prototype.__proto__||o()(b.prototype),"dispose",this).call(this),this._overlaySprite.dispose()}}]),b}();v.identifier="overlay",v.BLEND_MODES=t.BLEND_MODES,v.prototype.availableOptions={identifier:{type:p.OptionType.STRING},image:{type:p.OptionType.IMAGE},blendMode:{type:p.OptionType.NUMBER,default:t.BLEND_MODES.MULTIPLY,available:e()(t.BLEND_MODES).map(function(a){return t.BLEND_MODES[a]})},alpha:{type:p.OptionType.NUMBER,default:1}},q.a.Operations.OverlayOperation=v,b.a=v},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c.n(n),p=c(350),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=n.Math.Vector2,s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));f._lastBlurRadius=f._options.blurRadius,f._lastGradientRadius=f._options.gradientRadius;var g={blurQuality:{type:n.OptionType.STRING}};return f._horizontalFilter=new p.a({},g),f._verticalFilter=new p.a({},g),f._sprite.setFilters([f._horizontalFilter,f._verticalFilter]),f._horizontalFilter.setDelta(new r(.5,.5)),f._verticalFilter.setDelta(new r(-.5,.5)),f._filter=new p.a({},g),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Operation),q(b,[{key:"rotate",value:function(a){var b=this._options.position;90===a?(b.flip(),b.x=1-b.x):-90===a&&(b.flip(),b.y=1-b.y),this.set({position:b})}},{key:"flip",value:function(a){var b=this._options.position;switch(a){case"horizontal":b.x=1-b.x;break;case"vertical":b.y=1-b.y}this.set({position:b})}},{key:"transform",value:function(a){var b=this,c={},d=this.getPosition();c.position=a.applyToRelativePoint(d),["radius","blurRadius","gradientRadius"].forEach(function(d){var e=b.getOption(d);c[d]=a.applyToRelativeSize(e)}),this.set(c,!1)}},{key:"_renderWebGL",value:function(a){return this._renderBlur(a)}},{key:"_renderCanvas",value:function(a){return this._options.highQualityCanvasBlur?this._renderBlur(a):this._renderLQCanvasBlur(a)}},{key:"_renderBlur",value:function(a){var b=a.getDimensions(),c=b.min(),d=this._options,e=d.position,f={blurRadius:d.blurRadius*c,radius:d.radius*c,gradientRadius:d.gradientRadius*c,position:e.clone().multiply(b),texSize:b,blurQuality:"high"};return this._horizontalFilter.set(f),this._verticalFilter.set(f),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"_renderLQCanvasBlur",value:function(a){var b=this._options,c=b.blurRadius,d=b.radius,e=b.gradientRadius,f=b.position,g=a.getDimensions();return this._filter.set({blurRadius:c,radius:d,gradientRadius:e,position:f,texSize:g,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}},{key:"hasChanges",value:function(){return!0}}]),b}();s.identifier="radial-focus",s.prototype.availableOptions={position:{type:n.OptionType.VECTOR2,default:new r(.5,.5)},radius:{type:n.OptionType.NUMBER,default:.25},gradientRadius:{type:n.OptionType.NUMBER,default:.125},blurRadius:{type:n.OptionType.NUMBER,default:.025},highQualityCanvasBlur:{type:n.OptionType.BOOLEAN,default:!1}},o.a.Operations.RadialFocusOperation=s,b.a=s},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(76)),p=c.n(o),q=c(56),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=n.Math.Vector2,t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(e)));return g._fragmentSource=c(351),g._lastBlurRadius=null,g._lastGradientRadius=null,g._lastPosition=new s,g._blurFilter=new q.a,g._blurredRenderTarget=new n.Engine.CanvasRenderTarget(100,100,1),g._maskRenderTarget=new n.Engine.CanvasRenderTarget(100,100,1),g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Engine.Filter),r(b,[{key:"_applyCanvas",value:function(a,b,c){var d=this,e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("low"!==this._options.blurQuality){var f=b.getDimensions(),g=!c.getDimensions().equals(f),h=this._options,i=h.blurRadius,j=h.position,k=h.texSize,l=h.gradientRadius;if(b.getBaseTexture().isDirty()||this._lastBlurRadius!==i||g){var m=new s(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(m);var n={blurRadius:i,texSize:f},o=function(a,b,c){var d=function(a,b,c){return Math.min(Math.max(a,0),1)}((c-a)/(b-a));return d*d*(3-2*d)};this._blurFilter.set(n),this._blurFilter._applyCanvas(a,b,c,e,function(a,b){return o(0,1,(Math.abs(k.clone().multiply(a,b).subtract(j).len())-d._options.radius)/(2*l))*i}),this._lastBlurRadius=i}}else this._renderLQBlur(a,b,c,e)}},{key:"_renderLQBlur",value:function(a,b,c){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d=b.getDimensions(),e=!this._blurredRenderTarget.getDimensions().equals(d);this._blurredRenderTarget.setPixelRatio(b.getPixelRatio()),this._blurredRenderTarget.resizeTo(b.getDimensions()),this._maskRenderTarget.setPixelRatio(b.getPixelRatio()),this._maskRenderTarget.resizeTo(b.getDimensions());var f=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||e,g=b.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||e;f&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),g&&(this._blurImage(b),this._lastBlurRadius=this._options.blurRadius),this._applyMask(b,c)}},{key:"_blurImage",value:function(a){var b=a.getCanvas(),c=a.getContext(),d=new s(b.width,b.height),e=c.getImageData(0,0,b.width,b.height);p.a.stackBlurCanvasRGBA(e,0,0,b.width,b.height,this._options.blurRadius*d.min()),this._blurredRenderTarget.getContext().putImageData(e,0,0)}},{key:"_renderMask",value:function(){var a=this._maskRenderTarget.getCanvas(),b=this._maskRenderTarget.getContext(),c=new s(a.width,a.height),d=this._maskRenderTarget.getPixelRatio(),e=this._options.position.clone().multiply(c),f=this._options,g=f.radius,h=f.gradientRadius;g*=a.height,h*=a.height;var i=b.createRadialGradient(e.x,e.y,0,e.x,e.y,(g+h)*d);i.addColorStop(0,"#FFFFFF"),i.addColorStop(g/(g+h),"#FFFFFF"),i.addColorStop(1,"#000000"),b.fillStyle=i,b.fillRect(0,0,c.x,c.y)}},{key:"_applyMask",value:function(a,b){for(var c=b.getContext(),d=a.getCanvas(),e=a.getContext(),f=this._blurredRenderTarget.getContext(),g=this._maskRenderTarget.getContext(),h=e.getImageData(0,0,d.width,d.height),i=h.data,j=f.getImageData(0,0,d.width,d.height).data,k=g.getImageData(0,0,d.width,d.height).data,l=void 0,m=0;m<d.width*d.height*4;m+=4)l=k[m]/255,i[m]=l*i[m]+(1-l)*j[m],i[m+1]=l*i[m+1]+(1-l)*j[m+1],i[m+2]=l*i[m+2]+(1-l)*j[m+2];c.putImageData(h,0,0)}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._blurFilter.dispose()}}]),b}();t.prototype.availableOptions={blurRadius:{type:n.OptionType.NUMBER,default:30,uniformType:n.UniformType.FLOAT},radius:{type:n.OptionType.NUMBER,default:50,uniformType:n.UniformType.FLOAT},gradientRadius:{type:n.OptionType.NUMBER,default:25,uniformType:n.UniformType.FLOAT},position:{type:n.OptionType.VECTOR2,default:new s(.5,.5),uniformType:n.UniformType.FLOAT2},delta:{type:n.OptionType.VECTOR2,default:new s(1,1),
uniformType:n.UniformType.FLOAT2},texSize:{type:n.OptionType.VECTOR2,default:new s(100,100),uniformType:n.UniformType.FLOAT2}},b.a=t},function(a,b){a.exports="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n"},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c.n(n),p=c(147),q=c(56),r=c(149),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},u=n.Math.Vector2,v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d))),g=f._sdk.getRenderer();f._lastBlurRadius=null,f._blurredRenderTexture=new n.Engine.RenderTexture(g,100,100,1),f._maskRenderTexture=new n.Engine.RenderTexture(g,100,100,1),f._brushSprite=new p.a(f),f._brushSpriteContainer=new n.Engine.Container;var h=f._brushSprite.getDisplayObject();if(f._brushSpriteContainer.addChild(h),f._outputSprite=new n.Engine.Sprite,f._outputContainer=new n.Engine.Container,f._outputContainer.addChild(f._outputSprite),f._maskFilter=new r.a,g.isOfType(n.RendererType.WEBGL)){f._horizontalFilter=new q.a,f._verticalFilter=new q.a,f._sprite.setFilters([f._horizontalFilter,f._verticalFilter]),f._horizontalFilter.setDelta(new u(1,1)),f._verticalFilter.setDelta(new u(-1,1));var i=f._maskRenderTexture.getBaseTexture();i.setGLUnit(f._maskFilter.getMaskImage()),g.updateTexture(i,!1),(i=f._blurredRenderTexture.getBaseTexture()).setGLUnit(f._maskFilter.getFilterImage()),g.updateTexture(i,!1)}else g.isOfType(n.RendererType.CANVAS)&&(f._blurFilter=new q.a,f._sprite.setFilters([f._blurFilter]),f._maskFilter.setMaskCanvas(f._maskRenderTexture.getRenderTarget().getCanvas()),f._maskFilter.setFilterCanvas(f._blurredRenderTexture.getRenderTarget().getCanvas()));return f._outputSprite.setFilters([f._maskFilter]),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Operation),s(b,[{key:"flip",value:function(a){this._brushSprite.applyFlip(a),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"rotate",value:function(a){this._brushSprite.applyRotation(a),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"transform",value:function(a,b){this._brushSprite.applyTransform(a,b),this.setDirty(!0,!0),this._lastBlurRadius=null}},{key:"_render",value:function(a){return this._renderBlur(a),this._renderMask(a),this._outputSprite.setTexture(a),this._renderTexture.render(this._outputContainer),n.Promise.resolve()}},{key:"_renderMask",value:function(a){var b=a.getDimensions();this._maskRenderTexture.getDimensions().equals(b)||this._maskRenderTexture.resizeTo(b),this._brushSprite.update(this._sdk,b),this._maskRenderTexture.clear(n.Color.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);var c=this._sdk.getRenderer();c.isOfType(n.RendererType.WEBGL)&&c.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}},{key:"_renderBlur",value:function(a){var b=a.getDimensions(),c=this._blurredRenderTexture.getDimensions();c.equals(b)||this._blurredRenderTexture.resizeTo(b);var d=this._options.blurRadius;if(this._lastBlurRadius!==d||!c.equals(b)){var e=this._sdk.getRenderer(),f=void 0;e.isOfType(n.RendererType.WEBGL)?(f={blurRadius:d*b.min(),texSize:b},this._horizontalFilter.set(f),this._verticalFilter.set(f)):e.isOfType(n.RendererType.CANVAS)&&(f={blurRadius:d},this._blurFilter.set(f)),this._blurredRenderTexture.render(this._container),this._lastBlurRadius=d}}},{key:"getBrush",value:function(){return this._brushSprite}},{key:"createPath",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=new p.a.Brushes.RadialBrush({size:a,hardness:b,color:n.Color.WHITE}),d=this._brushSprite.createPath(c);return this._options.paths.push(d),this.setDirty(!0),d}},{key:"setDirtyForRenderer",value:function(a,c,d){t(b.prototype.__proto__||m()(b.prototype),"setDirtyForRenderer",this).call(this,a,c,d),this._brushSprite.setDirtyForRenderer(a,c,d)}},{key:"dispose",value:function(){t(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._sdk.getRenderer().isOfType(n.RendererType.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}},{key:"hasChanges",value:function(){return!0}}]),b}();v.identifier="selective-blur",v.prototype.availableOptions={blurRadius:{type:n.OptionType.NUMBER,default:.05},paths:{type:n.OptionType.ARRAY,default:[],setter:function(a){return this._brushSprite&&this._brushSprite.setPaths(a),a}}},o.a.Operations.SelectiveBlurOperation=v,b.a=v},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(354)),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},r=function(a){function b(a,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var e=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this,c));return e._operation=a,e._canvas=d||n.Utils.createCanvas(),e._context=e._canvas.getContext("2d"),e}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Configurable),p(b,[{key:"serializeOption",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"controlPoints"===a?this._options.controlPoints.map(function(a){var b=a.getPosition();return c?b.toObject():b.clone()}):q(b.prototype.__proto__||m()(b.prototype),"serializeOption",this).call(this,a,c)}},{key:"_optionEquals",value:function(a,c){if("controlPoints"===a){for(var d=this._options.controlPoints,e=0,f=d.length;e<f;e++)if(!d[e].getPosition().equals(c[e]))return!1;return!0}return q(b.prototype.__proto__||m()(b.prototype),"_optionEquals",this).call(this,a,c)}},{key:"render",value:function(a){var b=this._options,c=b.controlPoints,d=b.size;if(!(c.length<2)){n.Utils.ensureCanvasDimensions(this._canvas,a),this._brush&&this._lastBrushSize===d&&a.equals(this._brushInputDimensions)||(this._brushInputDimensions=a.clone(),this._lastBrushSize=d);for(var e=void 0,f=void 0,g=void 0,h=void 0,i=0;i<c.length;i++)e=c[i-2],f=c[i-1],g=c[i],h=c[i+1],g.renderToCanvas(this._options.brush.getBrushImage(a),this._canvas,e,f,h,this.getBrush().getHardness())}}},{key:"_createBrush",value:function(a){var b=this._options,c=b.size,d=b.hardness,e=b.color,f=n.Utils.createCanvas();f.width=f.height=Math.ceil(c*a.min());var g=f.getContext("2d");if((e=e.clone()).a=1,1===f.width)g.fillStyle=e.toRGBA(),g.fillRect(0,0,1,1);else{var h=g.createRadialGradient(f.width/2,f.height/2,Math.min(f.width/2-1,f.width/2*d),f.width/2,f.height/2,f.width/2);h.addColorStop(0,e.toRGBA());var i=e.clone();i.a=0,h.addColorStop(1,i.toRGBA()),g.fillStyle=h,g.fillRect(0,0,f.width,f.height)}return f}},{key:"addControlPoint",value:function(a){var b=new o.a(this,a);this._options.controlPoints.push(b),this.emit("update",this)}},{key:"getCanvas",value:function(){return this._canvas}},{key:"setCanvas",value:function(a){this._canvas=a,this._context=a.getContext("2d")}},{key:"setDirty",value:function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach(function(a){a.setDirty()})}},{key:"forEachControlPoint",value:function(a){this._options.controlPoints.forEach(a)}},{key:"renderToCanvas",value:function(a){var b=a.getContext("2d");b.save(),b.globalAlpha=this._options.brush.getColor().a,b.drawImage(this._canvas,0,0),b.restore()}},{key:"getCanvasDimensions",value:function(){return this._canvasDimensions}}]),b}();r.prototype.availableOptions={id:{type:n.OptionType.STRING,default:function(){return n.Utils.getUUID()}},brush:{type:n.OptionType.OBJECT,required:!0},controlPoints:{type:n.OptionType.ARRAY,default:[]},closed:{type:n.OptionType.BOOLEAN,default:!1}},b.a=r},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=(c.n(f),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),h=f.Math.Vector2,i=f.Math.CubicBezierCurve,j=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._path=b,this._drawnCanvases=[],this._position=c,this._smooth=d}return g(a,[{key:"getBezierCurve",value:function(a,b,c,d){if(!b)return null;var e=void 0,f=void 0;d?(e=(d.x-b.x)/this._smooth,f=(d.y-b.y)/this._smooth):(e=(c.x-b.x)/this._smooth,f=(c.y-b.y)/this._smooth);var g=void 0,h=void 0;a?(g=(c.x-a.x)/this._smooth,h=(c.y-a.y)/this._smooth):(g=(c.x-b.x)/this._smooth,h=(c.y-b.y)/this._smooth);var j=b.clone().add(g,h),k=c.clone().subtract(e,f);return new i(b,j,k,c)}},{key:"renderToCanvas",value:function(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(-1===this._drawnCanvases.indexOf(b)){var g=new h(b.width,b.height),i=b.getContext("2d"),j=this._position.clone().multiply(g),k=d?d.getPosition().clone().multiply(g):null,l=c?c.getPosition().clone().multiply(g):null,m=e?e.getPosition().clone().multiply(g):null,n=(j.clone().subtract(k).len(),a.width/10),o=this.getBezierCurve(l,k,j,m),p=void 0;if(o){o.calculateSegments(20);var q=o.getLength();p=o.arcLengthApproxSample(Math.ceil(q/n))}else p=[j];for(var r=0;r<p.length;r++){var s=p[r],t=.5*a.width/(2*n);t=1/(1+(t*=1-f)),i.globalAlpha=t,i.drawImage(a,s.x-a.width/2,s.y-a.height/2,a.width,a.height)}i.globalAlpha=1,this._drawnCanvases.push(b)}}},{key:"setPosition",value:function(a){this._position=a}},{key:"getPosition",value:function(){return this._position.clone()}},{key:"setDirty",value:function(){this._drawnCanvases=[]}}]),a}();b.a=j},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(148)),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"getBrushImage",value:function(a){if(this._brush&&this.optionsEqual(this._lastOptions)&&a.equals(this._lastInputDimensions))return this._brush;var b=this._options,c=b.size,d=b.hardness,e=b.color,f=l.Utils.createCanvas();f.width=f.height=Math.ceil(c*a.min());var g=f.getContext("2d");if((e=e.clone()).a=1,1===f.width)g.fillStyle=e.toRGBA(),g.fillRect(0,0,1,1);else{var h=g.createRadialGradient(f.width/2,f.height/2,Math.min(f.width/2-1,f.width/2*d),f.width/2,f.height/2,f.width/2);h.addColorStop(0,e.toRGBA());var i=e.clone();i.a=0,h.addColorStop(1,i.toRGBA()),g.fillStyle=h,g.fillRect(0,0,f.width,f.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=f,this._lastInputDimensions=a.clone(),f}}]),b}();b.a=o,o.identifier="imgly_brush_radial",o.prototype.availableOptions=l.Utils.extend(m.a.prototype.availableOptions,{hardness:{type:l.OptionType.NUMBER,default:1}})},function(a,b){a.exports="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"},function(a,b,c){var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=c.n(p),r=c(57),s=(c(149),c(358)),t=c(359),u=c(147),v=c(360),w=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},z=p.Math.Vector2,A=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f.setSmoothDownscaling(f._sdk.getOptions().smoothDownscaling),f._onSpriteUpdate=f._onSpriteUpdate.bind(f),f._options.sprites.slice().forEach(function(a){f.removeSprite(a),f.addSprite(a)}),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,p.Operation),x(b,[{key:"getSpritesOfType",value:function(a){return this._options.sprites.filter(function(b){return b instanceof a})}},{key:"rotate",value:function(a){this._options.sprites.forEach(function(b){b.applyRotation(a)})}},{key:"flip",value:function(a){this._options.sprites.forEach(function(b){b.applyFlip(a)})}},{key:"_onSpriteUpdate",value:function(a,b){this.emit("update",this),this.setDirty(!0)}},{key:"_applyRotation",value:function(a,b){this._options.sprites.forEach(function(c){return c.applyRotation(a,b)})}},{key:"transform",value:function(a){this._options.sprites.forEach(function(b){return b.applyTransform(a)})}},{key:"scale",value:function(a){this._options.sprites.forEach(function(b){return b.applyScale(a)})}},{key:"serializeOption",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"sprites"===a?this._options.sprites.map(function(a){return a.serializeOptions(void 0,c)}):y(b.prototype.__proto__||o()(b.prototype),"serializeOption",this).call(this,a,c)}},{key:"createSticker",value:function(a){return new s.a(this,a)}},{key:"createText",value:function(a){return new t.a(this,a)}},{key:"createBrush",value:function(a){return new u.a(this,a)}},{key:"createTextDesign",value:function(a){return new v.a(this,a)}},{key:"addSprite",value:function(a){this._options.sprites.push(a);var b=this.getSmoothDownscaling();a.setSmoothDownscaling&&a.setSmoothDownscaling(b),this._container.addChild(a.getDisplayObject()),this.setDirty(!0),a.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}},{key:"removeSprite",value:function(a){var b=this._options.sprites,c=b.indexOf(a);return-1!==c&&(a.off("update",this._onSpriteUpdate),this._container.removeChild(a.getDisplayObject()),b.splice(c,1),this.setDirty(!0),!0)}},{key:"_getOrientatedStageSize",value:function(){var a=this._sdk.getSprite().getTexture().getFrame(),b=this._sdk.getOperationsStack().getByIdentifier("orientation"),c=b?b.getRotation():0;return 270===c||90===c?new z(a.height,a.width):new z(a.width,a.height)}},{key:"_render",value:function(a){var b=this,c=this._container,d=this._options.sprites,e=a.getDimensions().clone().floor(),f=new p.Engine.Container;return f.addChild(this._sprite),p.Promise.all(d.map(function(a){return a.validateSettings()})).then(function(){d.forEach(function(a){return a.update(b._sdk,e)})}).then(function(){b._renderTexture.clear(),d.forEach(function(a){a.getInverted&&a.getInverted()?(b._renderTexture.render(f),b._renderTexture.render(b._renderMaskedSprite(a.getDisplayObject(),a.getColor?a.getColor():p.Color.WHITE,a.getPadding?a.getPadding():-1)),f=new p.Engine.Container):f.addChild(a.getDisplayObject())}),b._renderTexture.render(f),c.addChild(b._sprite),d.forEach(function(a){return c.addChild(a.getDisplayObject())})})}},{key:"_renderMaskedSprite",value:function(a,b,c){var d=p.Utils.createCanvas(),e=a.getWorldTransform(),f=this._getOrientatedStageSize();p.Utils.ensureCanvasDimensions(d,f);var g=d.getContext("2d");if(g.save(),g.fillStyle=b.toRGBA(),c<0)g.fillRect(0,0,f.x,f.y);else{var h=a.getWidth()/a.getScale().x,i=a.getHeight()/a.getScale().y,j=h*c;g.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),g.fillRect(-j,-j,h+2*j,i+2*j)}g.restore(),g.globalCompositeOperation="destination-out",a._renderCanvas({getCurrentRenderTarget:function(){return{getPixelRatio:function(){return 1}}},getContext:function(){return g}});var k=new p.Engine.Container,l=new p.Engine.Sprite(p.Engine.Texture.fromCanvas(d));return k.addChild(l),k}},{key:"takeSpriteToFront",value:function(a){var b=this._options.sprites,c=b.indexOf(a);if(-1!==c){p.Utils.moveArrayItem(b,c,b.length-1);var d=a.getDisplayObject();this._container.removeChild(d),this._container.addChild(d),this.setDirty(!0)}}},{key:"getSpritesAtPosition",value:function(a,b){var c=this,d=[];this._options.sprites.forEach(function(a){return a.update(c._sdk,b)});var e=this._sdk.getSprite(),f=e.getWorldTransform().applyInverseToVector(a),g=e.getTexture().getFrame(),h=g.width,i=g.height,j=e.getAnchor().clone().multiply(-h,-i);f.subtract(j);for(var k=this._options.sprites.slice(0).reverse(),l=0,m=k.length;l<m;l++){var n=k[l];n.getHitTestDisplayObject().isAtPosition(f)&&d.push(n)}return d}},{key:"setDirtyForRenderer",value:function(a,c,d){y(b.prototype.__proto__||o()(b.prototype),"setDirtyForRenderer",this).call(this,a,c,d),this._options.sprites.forEach(function(b){b.setDirtyForRenderer(a,c,d)})}},{key:"dispose",value:function(){y(b.prototype.__proto__||o()(b.prototype),"dispose",this).call(this),this._options.sprites.forEach(function(a){a.dispose()})}}]),b}();A.StickerSprite=s.a,A.TextSprite=t.a,A.BrushSprite=u.a,A.TextDesignSprite=v.a,A.identifier="sprite",A.prototype.availableOptions={sprites:{type:p.OptionType.ARRAY,default:[],setter:function(a,b){var c=this;return a=a.map(function(a,b){if(a instanceof r.a)return a;var d=w({},a);switch(delete d.type,a.type){case"text":return new t.a(c,d);case"sticker":return new s.a(c,d);case"brush":return new u.a(c,d);case"text-design":return new v.a(c,d);default:p.Log.error(c.constructor.name,"Invalid sprite type: "+a.type)}}),b||(this._options.sprites&&this._options.sprites.slice().forEach(function(a){a.dispose(),c.removeSprite(a)}),a.forEach(function(a){c.addSprite(a)})),a}},smoothDownscaling:{type:p.OptionType.BOOLEAN,default:!1}},q.a.Operations.SpriteOperation=A,b.a=A},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(57)),p=c(144),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},s=n.Math.Vector2,t=n.Math.ColorMatrix,u=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d))),g=f._options.image,h=g.src||g.filePath;return f._isSVG=h&&!!h.match(/\w+\.svg(?=\?|$)/i),f._isSVG&&(f._canvas=n.Utils.createCanvas(),f._context=f._canvas.getContext("2d"),f._options.smoothDownscaling=!1),g&&f._onImageUpdate(),f._tintFilter=new n.Engine.Filters.TintFilter,f._adjustmentsFilter=new p.a,f._lastRenderedDimensions=s.NULL,f._lastRenderedInputDimensions=s.NULL,f._onOptionsChange=f._onOptionsChange.bind(f),f._options.adjustments.on("update",f._onOptionsChange),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),q(b,[{key:"applyScale",value:function(a){this.setDimensions(this.getDimensions().multiply(a))}},{key:"serializeOptions",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=r(b.prototype.__proto__||m()(b.prototype),"serializeOptions",this).call(this,a,c);return a||(d.type="sticker"),d}},{key:"_rendersToRenderTexture",value:function(a){return this._options.smoothDownscaling&&!this._isSVG&&a.getRenderer().isOfType(n.RendererType.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}},{key:"_getTexture",value:function(){return this._inputTexture}},{key:"update",value:function(a,b){var c=this._options,d=c.dimensions,e=c.image;d.equals(s.NULL)&&d.set(e.width,e.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling()),(!this._lastRenderedInputDimensions.equals(b)||!this._lastRenderedDimensions.equals(d)||this._lastRenderedImage!==e)&&this._isSVG&&a.getRenderer().isOfType(n.RendererType.WEBGL)&&(e.width=d.x,e.height=d.y,this._canvas.width=e.width,this._canvas.height=e.height,this._context.clearRect(0,0,e.width,e.height),this._context.drawImage(e,0,0,e.width,e.height),this._inputTexture.getBaseTexture().update()),this._rendersToRenderTexture(a)&&this._prepareRenderTexture(a);var f=[];if(this._rendersToRenderTexture(a)){if(this._hasAdjustments()){f.push(this._adjustmentsFilter);var g=this._options.adjustments,h=new t;h.multiply(t.createBrightnessMatrix(g.getBrightness())),h.multiply(t.createSaturationMatrix(g.getSaturation())),h.multiply(t.createContrastMatrix(g.getContrast())),this._adjustmentsFilter.set({colorMatrix:h})}this._options.tintMode&&"none"!==this._options.tintMode&&(f.push(this._tintFilter),this._tintFilter.set({mode:n.Engine.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor})),this._renderTextureSprite.setFilters(f)}this._rendersToRenderTexture(a)?this._renderToRenderTexture(a):this._sprite.setTexture(this._inputTexture),this._updateSprite(b),this._applyFlip(),this._lastRenderedDimensions.copy(d),this._lastRenderedInputDimensions.copy(b),this._lastRenderedImage=e}},{key:"_applyFlip",value:function(){var a=this._sprite.getScale();this._options.flipVertically&&(a.y*=-1),this._options.flipHorizontally&&(a.x*=-1),this._sprite.setScale(a)}},{key:"applyFlip",value:function(a){r(b.prototype.__proto__||m()(b.prototype),"applyFlip",this).call(this,a);var c={rotation:this._options.rotation},d=c.rotation/Math.PI*180*-1;switch(c.rotation=d*Math.PI/180,a){case"horizontal":c.flipHorizontally=!this._options.flipHorizontally,this.set(c);break;case"vertical":c.flipVertically=!this._options.flipVertically,this.set(c)}}},{key:"_hasAdjustments",value:function(){var a=this._options.adjustments;return 0!==a.getBrightness()||1!==a.getSaturation()||1!==a.getContrast()}},{key:"_onImageUpdate",value:function(){var a=this._options.image,b=this._operation.getSDK().getRenderer();this._isSVG&&b.isOfType(n.RendererType.WEBGL)&&(a=this._canvas),this._inputTexture=n.Engine.Texture.fromImage(a),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}},{key:"setOption",value:function(a,c){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r(b.prototype.__proto__||m()(b.prototype),"setOption",this).call(this,a,c,d),"image"===a&&this._identitySprite&&this._onImageUpdate()}},{key:"_onOptionsChange",value:function(){var a=this._dirtiness;for(var b in a)a[b]=!0}},{key:"dispose",value:function(){r(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._inputTexture&&this._inputTexture.getBaseTexture().dispose(),this._inputTexture=null,this._options.adjustments.off("updated",this._onOptionsChange)}}]),b}();u.prototype.availableOptions={id:{type:n.OptionType.STRING,default:function(){return n.Utils.getUUID()}},identifier:{type:n.OptionType.STRING,default:""},image:{type:n.OptionType.IMAGE,required:!0},position:{type:n.OptionType.VECTOR2,default:s.NULL},dimensions:{type:n.OptionType.VECTOR2,default:s.NULL},anchor:{type:n.OptionType.VECTOR2,default:new s(0,0)},pivot:{type:n.OptionType.VECTOR2,default:new s(.5,.5)},rotation:{type:n.OptionType.NUMBER,default:0},flipHorizontally:{type:n.OptionType.BOOLEAN,default:!1},flipVertically:{type:n.OptionType.BOOLEAN,default:!1},smoothDownscaling:{type:n.OptionType.BOOLEAN,default:!1},tintColor:{type:n.OptionType.COLOR,default:n.Color.WHITE},tintMode:{type:n.OptionType.STRING,default:"none",available:["none","solid","colorized"]},alpha:{type:n.OptionType.NUMBER,default:1},adjustments:{type:n.OptionType.CONFIGURABLE,structure:{brightness:{type:n.OptionType.NUMBER,default:0},saturation:{type:n.OptionType.NUMBER,default:1},contrast:{type:n.OptionType.NUMBER,default:1}}}},u.type="sticker",b.a=u},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(57)),p=c(150),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},s=n.Math.Vector2,t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._textRenderer=new p.a(f,f._operation),f._textRenderer.rotation=f.getRotation(),f._sprite.setTexture(f._textRenderer.getFinalTexture()),f._hitTestSprite.setTexture(f._textRenderer.getTexture()),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),q(b,[{key:"serializeOptions",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=r(b.prototype.__proto__||m()(b.prototype),"serializeOptions",this).call(this,a,c);return a||(d.type="text"),d}},{key:"getDOMStyle",value:function(a,b){var c=this.getFontSize()*b.y;return{fontWeight:this._options.fontWeight,fontSize:c+"px",fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(b)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}},{key:"getAbsoluteTextHeight",value:function(a){var b=this.getFontSize()*a.y,c=this.getTextMetrics();if(c){var d=1/c.unitsPerEm*b,e=c.ascender*d,f=c.descender*d;return e+Math.abs(f)}return b*this.getLineHeight()*1.1}},{key:"getDimensions",value:function(a,b){return this._textRenderer.getDimensions(a,b)}},{key:"applyFlip",value:function(a){r(b.prototype.__proto__||m()(b.prototype),"applyFlip",this).call(this,a);var c=this._options.rotation;switch(a){case"horizontal":c+=2*(Math.PI-c),this.setRotation(c);break;case"vertical":c+=2*(Math.PI/2-c),this.setRotation(c)}}},{key:"applyTransform",value:function(a){r(b.prototype.__proto__||m()(b.prototype),"applyTransform",this).call(this,a),this.set({fontSize:a.scaleSize(this.getFontSize(),"y"),maxWidth:a.scaleSize(this.getMaxWidth(),"x")},!1)}},{key:"applyRotation",value:function(a){r(b.prototype.__proto__||m()(b.prototype),"applyRotation",this).call(this,a);var c=(a+360)%360,d=this._operation.getInputDimensions();90!==c&&270!==c||(this.setMaxWidth(this.getMaxWidth()/d.x*d.y),this.setFontSize(this.getFontSize()/d.y*d.x))}},{key:"setOption",value:function(a,c){if("rotation"===a)return this._options.rotation=c,this._textRenderer&&(this._textRenderer.rotation=c),this._rotation=c,void this.emit("update")
;r(b.prototype.__proto__||m()(b.prototype),"setOption",this).call(this,a,c)}},{key:"getOption",value:function(a){return"rotation"===a?this._rotation:r(b.prototype.__proto__||m()(b.prototype),"getOption",this).call(this,a)}},{key:"getHitTestDisplayObject",value:function(){return this._hitTestSprite}},{key:"update",value:function(a,c){if(this._sprite.setVisible(this._options.visible),this._options.visible){this._textRenderer.update(a,c);var d=this._textRenderer.getFinalTexture();d.getBaseTexture().update();var e=a.getRenderer();e.isOfType(n.RendererType.WEBGL)&&e.updateTexture(d.getBaseTexture()),r(b.prototype.__proto__||m()(b.prototype),"update",this).call(this,a,c),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform()}}},{key:"_getTexture",value:function(){return this._textRenderer.getFinalTexture()}},{key:"dispose",value:function(){r(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._textRenderer.dispose()}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canAdjustPadding",value:function(){return!1}}]),b}();t.prototype.availableOptions={id:{type:n.OptionType.STRING,default:function(){return n.Utils.getUUID()}},fontSize:{type:n.OptionType.NUMBER,default:.1},characterSpacing:{type:n.OptionType.NUMBER,default:0},lineHeight:{type:n.OptionType.NUMBER,default:1.1},fontIdentifier:{type:n.OptionType.STRING},fontFamily:{type:n.OptionType.STRING,default:"Times New Roman"},fontWeight:{type:n.OptionType.ALL,default:"normal"},fontStyle:{type:n.OptionType.STRING,default:"normal"},textMetrics:{type:n.OptionType.OBJECT,default:null},outlineWidth:{type:n.OptionType.NUMBER,default:0},outlineColor:{type:n.OptionType.COLOR,default:n.Color.BLACK},alignment:{type:n.OptionType.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:n.OptionType.STRING,default:"top",available:["top","center","bottom"]},color:{type:n.OptionType.COLOR,default:new n.Color(1,0,0,1)},backgroundColor:{type:n.OptionType.COLOR,default:n.Color.TRANSPARENT},position:{type:n.OptionType.VECTOR2,default:new s(.5,.5)},anchor:{type:n.OptionType.VECTOR2,default:new s(0,0)},pivot:{type:n.OptionType.VECTOR2,default:new s(.5,.5)},rotation:{type:n.OptionType.NUMBER,default:0},text:{type:n.OptionType.STRING,required:!0},maxWidth:{type:n.OptionType.NUMBER,default:.5},maxHeight:{type:n.OptionType.NUMBER,default:0},visible:{type:n.OptionType.BOOLEAN,default:!0}},t.type="text",b.a=t},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(57)),p=c(16),q=c(58),r=c(369),s=c(370),t=c(152),u=c(371),v=c(154),w=c(373),x=c(43),y=c(375),z=c(108),A=c(376),B=c(377),C=c(378),D=c(156),E=c(379),F=c(384),G=c(20),H=c(386),I=c(23),J=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),K=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},L=n.Math.Vector2,M=function(a){function b(a,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this,a,c));return d._renderer=new H.a,d._canvas=n.Utils.createCanvas(),d._context=d._canvas.getContext("2d"),d._texture=n.Engine.Texture.fromCanvas(d._canvas),d._sprite.setTexture(d._texture),d._aspect=1,d.getSeed()<0&&d.setSeed(p.a.TimeSeed()),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),J(b,[{key:"seed",value:function(a){this.setSeed(a||p.a.TimeSeed())}},{key:"_updateLayout",value:function(){var a=this.getLayout();return a?(this._renderer.createLayout(a,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}},{key:"applyTransform",value:function(a){K(b.prototype.__proto__||m()(b.prototype),"applyTransform",this).call(this,a);var c={};this._options.dimensions&&(c.width=a.applyToRelativeSize(this.getWidth())),this.set(c,!1)}},{key:"applyFlip",value:function(a){K(b.prototype.__proto__||m()(b.prototype),"applyFlip",this).call(this,a);var c=this._options.rotation;switch(a){case"horizontal":c+=2*(Math.PI-c),this.setRotation(c);break;case"vertical":c+=2*(Math.PI/2-c),this.setRotation(c)}}},{key:"update",value:function(a,c){if(!this._isLayoutDirty||this._updateLayout()){var d=this.getWidth()*c.min()/a.getTextureScale(),e=d/this._aspect,f=new L(d,e);f.clamp(new L(1,1),new L(1/0,1/0)),n.Utils.ensureCanvasDimensions(this._canvas,f),this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new I.a(f.x,f.y),this.getColor(),this.getInverted()),this.setDimensions(f),this._texture.getBaseTexture().update();var g=a.getRenderer();g.isOfType(n.RendererType.WEBGL)&&g.updateTexture(this._texture.getBaseTexture()),K(b.prototype.__proto__||m()(b.prototype),"update",this).call(this,a,c)}}},{key:"_optionEquals",value:function(a,c){if("layout"===a){var d=this._options.layout;return!(!d&&c||!c&&d||!c.constructor||!d.constructor||d.constructor.identifier!==c.constructor.identifier)}return K(b.prototype.__proto__||m()(b.prototype),"_optionEquals",this).call(this,a,c)}},{key:"serializeOptions",value:function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a&&this.getPadding()<0){var d=a.indexOf("padding");d>-1&&a.splice(d,1)}var e=K(b.prototype.__proto__||m()(b.prototype),"serializeOptions",this).call(this,a,c);return a||(e.type="text-design"),e}},{key:"_getTexture",value:function(){return this._texture}},{key:"canBeFlippedHorizontally",value:function(){return!1}},{key:"canBeDuplicated",value:function(){return!0}},{key:"canMaskCanvas",value:function(){return!0}},{key:"canAdjustPadding",value:function(){return!0}}]),b}();M.Layouts={TextDesignBlocks:q.a,TextDesignBlocksCondensed:r.a,TextDesignBlocksLight:s.a,TextDesignCelebrate:t.a,TextDesignCelebrateSimple:u.a,TextDesignEqualWidth:v.a,TextDesignEqualWidthFat:w.a,TextDesignMasked:x.a,TextDesignMaskedBadge:y.a,TextDesignMaskedSpeechBubble:z.a,TextDesignMaskedSpeechBubbleComic:A.a,TextDesignMultiline:B.a,TextDesignWatercolor:C.a,TextDesignSunshine:D.a,TextDesignParticles:E.a,TextDesignRotated:F.a},M.AssetManager=G.a,M.prototype.availableOptions={id:{type:n.OptionType.STRING,default:function(){return n.Utils.getUUID()}},position:{type:n.OptionType.VECTOR2,default:new L(.5,.5)},dimensions:{type:n.OptionType.VECTOR2,default:L.NULL},anchor:{type:n.OptionType.VECTOR2,default:new L(0,0)},pivot:{type:n.OptionType.VECTOR2,default:new L(.5,.5)},rotation:{type:n.OptionType.NUMBER,default:0},flipHorizontally:{type:n.OptionType.BOOLEAN,default:!1},flipVertically:{type:n.OptionType.BOOLEAN,default:!1},layout:{type:n.OptionType.OBJECT,default:null,setter:function(a){return this._isLayoutDirty=!0,a}},text:{type:n.OptionType.STRING,default:"",setter:function(a){return this._isLayoutDirty=!0,a}},color:{type:n.OptionType.COLOR,default:n.Color.BLACK},padding:{type:n.OptionType.NUMBER,default:.01,minValue:.01},width:{type:n.OptionType.NUMBER,default:.8},inverted:{type:n.OptionType.BOOLEAN,default:!1},seed:{type:n.OptionType.NUMBER,default:-1}},b.a=M},function(a,b,c){a.exports={default:c(362),__esModule:!0}},function(a,b,c){c(363),a.exports=9007199254740991},function(a,b,c){var d=c(13);d(d.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(a,b,c){c.d(b,"a",function(){return p});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(17)),n=(c(60),c(23)),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();l.Math.Rectangle;var p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),o(b,[{key:"getSize",value:function(){var a=this.getRows(),b=this.getWidth(),c=a.length-1,d=a.reduce(function(a,b){return a+b.getSize().height},0);d+=(c+1)*this.getRelativeLineSpacing()*b;var e=this.getRelativeInsets().clone().scale(b);return d+=e.top+e.bottom,new n.a(b,d)}}]),b}();p.prototype.availableOptions={text:{type:l.OptionType.STRING,default:""},lines:{type:l.OptionType.ARRAY,default:[]},relativeInsets:{type:l.OptionType.OBJECT,default:new m.a},relativeLineSpacing:{type:l.OptionType.NUMBER,default:0},rows:{type:l.OptionType.OBJECT,default:[]},background:{type:l.OptionType.OBJECT,default:null},width:{type:l.OptionType.NUMBER,default:0}}},function(a,b,c){a.exports=c(366)},function(a,b,c){var d=function(){return this}()||Function("return this")(),e=d.regeneratorRuntime&&Object.getOwnPropertyNames(d).indexOf("regeneratorRuntime")>=0,f=e&&d.regeneratorRuntime;if(d.regeneratorRuntime=void 0,a.exports=c(367),e)d.regeneratorRuntime=f;else try{delete d.regeneratorRuntime}catch(a){d.regeneratorRuntime=void 0}},function(a,b){!function(b){function c(a,b,c,f){var g=b&&b.prototype instanceof e?b:e,h=Object.create(g.prototype),i=new m(f||[]);return h._invoke=function(a,b,c){var e=y;return function(f,g){if(e===A)throw new Error("Generator is already running");if(e===B){if("throw"===f)throw g;return o()}for(c.method=f,c.arg=g;;){var h=c.delegate;if(h){var i=j(h,c);if(i){if(i===C)continue;return i}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(e===y)throw e=B,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);e=A;var k=d(a,b,c);if("normal"===k.type){if(e=c.done?B:z,k.arg===C)continue;return{value:k.arg,done:c.done}}"throw"===k.type&&(e=B,c.method="throw",c.arg=k.arg)}}}(a,c,i),h}function d(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}function e(){}function f(){}function g(){}function h(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function i(a){var b;this._invoke=function(c,e){function f(){return new Promise(function(b,f){!function b(c,e,f,g){var h=d(a[c],a,e);if("throw"!==h.type){var i=h.arg,j=i.value;return j&&"object"==typeof j&&r.call(j,"__await")?Promise.resolve(j.__await).then(function(a){b("next",a,f,g)},function(a){b("throw",a,f,g)}):Promise.resolve(j).then(function(a){i.value=a,f(i)},g)}g(h.arg)}(c,e,b,f)})}return b=b?b.then(f,f):f()}}function j(a,b){var c=a.iterator[b.method];if(c===p){if(b.delegate=null,"throw"===b.method){if(a.iterator.return&&(b.method="return",b.arg=p,j(a,b),"throw"===b.method))return C;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var e=d(c,a.iterator,b.arg);if("throw"===e.type)return b.method="throw",b.arg=e.arg,b.delegate=null,C;var f=e.arg;return f?f.done?(b[a.resultName]=f.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=p),b.delegate=null,C):f:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,C)}function k(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function l(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function m(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(k,this),this.reset(!0)}function n(a){if(a){var b=a[t];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function b(){for(;++c<a.length;)if(r.call(a,c))return b.value=a[c],b.done=!1,b;return b.value=p,b.done=!0,b};return d.next=d}}return{next:o}}function o(){return{value:p,done:!0}}var p,q=Object.prototype,r=q.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},t=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",v=s.toStringTag||"@@toStringTag",w="object"==typeof a,x=b.regeneratorRuntime;if(x)w&&(a.exports=x);else{(x=b.regeneratorRuntime=w?a.exports:{}).wrap=c;var y="suspendedStart",z="suspendedYield",A="executing",B="completed",C={},D={};D[t]=function(){return this};var E=Object.getPrototypeOf,F=E&&E(E(n([])));F&&F!==q&&r.call(F,t)&&(D=F);var G=g.prototype=e.prototype=Object.create(D);f.prototype=G.constructor=g,g.constructor=f,g[v]=f.displayName="GeneratorFunction",x.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===f||"GeneratorFunction"===(b.displayName||b.name))},x.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,g):(a.__proto__=g,v in a||(a[v]="GeneratorFunction")),a.prototype=Object.create(G),a},x.awrap=function(a){return{__await:a}},h(i.prototype),i.prototype[u]=function(){return this},x.AsyncIterator=i,x.async=function(a,b,d,e){var f=new i(c(a,b,d,e));return x.isGeneratorFunction(b)?f:f.next().then(function(a){return a.done?a.value:f.next()})},h(G),G[v]="Generator",G[t]=function(){return this},G.toString=function(){return"[object Generator]"},x.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function c(){for(;b.length;){var d=b.pop();if(d in a)return c.value=d,c.done=!1,c}return c.done=!0,c}},x.values=n,m.prototype={constructor:m,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(l),!a)for(var b in this)"t"===b.charAt(0)&&r.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=p)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,d&&(c.method="next",c.arg=p),!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=r.call(e,"catchLoc"),h=r.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&r.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?(this.method="next",this.next=e.finallyLoc,C):this.complete(f)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),C},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),l(c),C}},catch:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;l(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:n(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=p),C}}}}(function(){return this}()||Function("return this")())},function(a,b,c){c.d(b,"a",function(){return u});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(60)),p=c(61),q=c(42),r=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=n.Math.Rectangle,u=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),s(b,[{key:"_calculateLayoutElements",value:function(){if(this.getWords().size()<=0)return[];var a=this.serializeOptions(),c=a.orientation,d=a.width,e=a.size,f=a.relativeRowOffset,g=a.attributes.fontIdentifier,h=this.getWords().joined(3),i=c===b.Orientations.Left?[h[0],h[1],h[2]]:[h[1],h[2],h[0]],j=n.Utils.Array.range(0,2).map(function(a){return new p.a({text:i[a],fontIdentifier:g,fontSize:60})}),k=j.map(function(a){return a.getSizeValue()}),l=k[0].width>k[1].width?0:1,m=(l+1)%2;j[m].fitWidth(k[l].width),k[m]=j[m].getSizeValue();var o=(k[m].height+k[l].height)/(1-f),r=new p.a({text:i[2],fontIdentifier:g});r.fitHeight(o);var s=r.getSizeValue().width,u=k[l].width,v=d/(s+u),w=v*s,x=v*u,y=v*o,z=f*y;e.set(d,y);var A=n.Utils.Array.range(0,3).map(function(a){return new p.a({text:i[a],fontIdentifier:g})});A[0].fitWidth(x),A[1].fitWidth(x),A[2].fitWidth(w);var B=c===b.Orientations.Left?0:w,C=[B,B,c===b.Orientations.Left?x:0],D=[0,A[0].getSizeValue().height+z,0],E=A.map(function(a,b){return new t(C[b],D[b],a.getSizeValue().width,a.getSizeValue().height)});return A.map(function(a,b){return new q.a({text:i[b],font:A[b],frame:E[b]})})}}]),b}();u.Orientations={Right:"RIGHT",Left:"LEFT"},u.prototype.availableOptions=r({},o.a.prototype.availableOptions,{orientation:{type:n.OptionType.STRING,default:u.Orientations.Left,available:[u.Orientations.Right,u.Orientations.Left]},relativeRowOffset:{type:n.OptionType.NUMBER,default:.05}})},function(a,b,c){c.d(b,"a",function(){return v});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(58)),r=c(19),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f._exclusiveFont=null,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),t(b,[{key:"generateLayoutData",value:function(a,c){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),u(b.prototype.__proto__||o()(b.prototype),"generateLayoutData",this).call(this,a,c)}},{key:"_fontForRow",value:function(a,c){return this._exclusiveFont||u(b.prototype.__proto__||o()(b.prototype),"_fontForRow",this).call(this,a,c)}},{key:"_layoutRow",value:function(a,b,c,d){return new r.a({words:a,width:b,attributes:c})}}]),b}();v.defaultFontIdentifiers=["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"],v.identifier="imgly_text_design_blocks_condensed",v.prototype.availableOptions=s({},q.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:v.defaultFontIdentifiers}})},function(a,b,c){c.d(b,"a",function(){return s});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(58)),p=c(19),q=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),r(b,[{key:"_layoutRow",value:function(a,b,c,d){return new p.a({words:a,width:b,attributes:c})}}]),b}();s.defaultFontIdentifiers=["imgly_font_summer_font_light"],s.identifier="imgly_text_design_blocks_light",s.prototype.availableOptions=q({},o.a.prototype.availableOptions,{fontIdentifiers:{type:n.OptionType.ARRAY,default:s.defaultFontIdentifiers}})},function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return h()(a)}c.d(b,"a",function(){return A});var e=c(6),f=c.n(e),g=c(15),h=c.n(g),i=c(0),j=c.n(i),k=c(5),l=c.n(k),m=c(2),n=c.n(m),o=c(3),p=c.n(o),q=c(1),r=c.n(q),s=c(4),t=(c.n(s),c(58),c(19),c(104),c(34),c(106),c(152)),u=c(153),v=c(20),w=c(16),x=f.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},y=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),z=function a(b,c,d){null===b&&(b=Function.prototype);var e=l()(b,c);if(void 0===e){var f=r()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},A=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,e=Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||r()(b)).call.apply(a,[this].concat(e)));return g.getImagePaths=function(){var a=g.getBanderoles();return[].concat(d(a&&a.map(function(a){return a.getImagePath()})||[]),d(g._celebrateTypes))},g.onImagesLoaded=function(){var a=g.getBanderoles();a&&a.forEach(function(a){var b=v.a.getImage(a.getImagePath());b?a.setImage(b):s.Log.warn("TextDesignBlocks#onImagesLoaded: Image not found '"+a.getImagePath()+"'")})},g._celebrateTypes=[u.a.RowImages.celebrate1,u.a.RowImages.celebrate2,u.a.RowImages.celebrate3],g._exclusiveFont=null,g._typeRandomizer=new w.a(0),g._useMaskedRandomizer=new w.a(0),g._seedPool.push(g._typeRandomizer),g._seedPool.push(g._useMaskedRandomizer),g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=p()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(n.a?n()(a,b):a.__proto__=b)}(b,t.a),y(b,[{key:"_fontForRow",value:function(a,b){var c=this.getFontIdentifiers();return c[a%(c.length-1)]}},{key:"_layoutRows",value:function(a,c){var e=this._typeRandomizer.pickNext(this._celebrateTypes),f=v.a.getImage(e);return f||s.Log.warn("TextDesignCelebrateSimple#_layoutRows: Image not fount '"+e+"'"),[new u.a({width:c,height:.5*c,drawingModeAspectFit:!0,image:f}).layout()].concat(d(z(b.prototype.__proto__||r()(b.prototype),"_layoutRows",this).call(this,a,c)))}},{key:"_randomLayoutRow",value:function(a,c,d,e){var f=a.countNumberOfCharacters();f<4&&e.setFontIdentifier("imgly_font_rasa_regular");var g=this._useMaskedRandomizer.nextBool(2,1);return f<13&&g&&!this.getHasMaskedText()?this._layoutRow(a,d,e,!0):z(b.prototype.__proto__||r()(b.prototype),"_randomLayoutRow",this).call(this,a,c,d,e)}}]),b}();A.identifier="imgly_text_design_celebrate_simple",A.defaultFontIdentifiers=["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"],A.prototype.availableOptions=x({},t.a.prototype.availableOptions,{fontIdentifiers:{type:s.OptionType.ARRAY,default:A.defaultFontIdentifiers}})},function(a,b,c){c.d(b,"a",function(){return r});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(155)),n=c(20),o=c(35),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=l.Math.Rectangle,r=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),p(b,[{key:"getImagePaths",value:function(){var a=this._options;return[a.topImagePath,a.bottomImagePath,a.leftImagePath,a.rightImagePath].filter(function(a){return""!==a})}},{key:"render",value:function(a,b,c,d,e){var f=c.clone().scale(b.width),g=b.rectangle(0,0),h=n.a.getImage(this.getTopImagePath()),i=n.a.getImage(this.getLeftImagePath()),j=n.a.getImage(this.getRightImagePath()),k=n.a.getImage(this.getBottomImagePath());if(h){var l=h.width/h.height,m=f.top*this.getTopImageFillRate(),p=m*l,r=g.width/2,s=new q(r-p/2,0,p,m);Object(o.a)(a,h,s,d)}if(k){var t=k.width/k.height,u=f.bottom*this.getBottomImageFillRate(),v=u*t,w=g.width/2,x=new q(w-v/2,g.height-u,v,u);Object(o.a)(a,k,x,d)}if(i){var y=i.width/i.height,z=f.left*this.getLeftImageFillRate(),A=z/y,B=g.height/2,C=new q(0,B-A/2,z,A);Object(o.a)(a,i,C,d)}if(j){var D=j.width/j.height,E=f.right*this.getRightImageFillRate(),F=E/D,G=g.height/2-F/2,H=new q(g.width-E,G,E,F);Object(o.a)(a,j,H,d)}}}]),b}();r.prototype.availableOptions={topImagePath:{type:l.OptionType.STRING,default:""},leftImagePath:{type:l.OptionType.STRING,default:""},bottomImagePath:{type:l.OptionType.STRING,default:""},rightImagePath:{type:l.OptionType.STRING,default:""},topImageFillRate:{type:l.OptionType.NUMBER,default:1},leftImageFillRate:{type:l.OptionType.NUMBER,default:1},bottomImageFillRate:{type:l.OptionType.NUMBER,default:1},rightImageFillRate:{type:l.OptionType.NUMBER,default:1}},r.Backgrounds=[new r({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new r({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new r({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new r({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})]},function(a,b,c){c.d(b,"a",function(){return s});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(154)),p=c(17),q=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._relativeInsets=new p.a,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),r(b,[{key:"_getBackground",value:function(){return null}}]),b}();s.defaultFontIdentifiers=["imgly_font_ultra"],s.identifier="imgly_text_design_equal_width_fat",s.prototype.availableOptions=q({},o.a.prototype.availableOptions,{fontIdentifiers:{type:n.OptionType.ARRAY,default:s.defaultFontIdentifiers}})},function(a,b,c){c.d(b,"a",function(){return w});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(20)),r=c(151),s=c(23),t=e.a||function(a){for(var b=1;b<arguments.length;b++){
var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=p.Math.Vector2,w=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).call(this,a));return c._textOptions={},c._createCanvas(),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,p.Configurable),u(b,[{key:"_createCanvas",value:function(){this._canvas=p.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new r.a(this._context),this._finalCanvas=p.Utils.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}},{key:"setOption",value:function(a,c){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||o()(b.prototype),"setOption",this).call(this,a,c,d,e),"fontIdentifier"!==a||e||this.updateFontVariation()}},{key:"updateFontVariation",value:function(){var a=q.a.getVariation(this.getFontIdentifier());return a||p.Log.warn("TextDesignFont: Unable to find font '"+this._fontIdentifier+"'"),this.setFontVariation(a),a}},{key:"_applyTextOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._context,c=t({},this._options,a),d=c.fontSize,e=c.fontVariation,f=(c.lineHeight,c.textColor),g=c.alignment,h=e.serializeOptions(),i=h.fontStyle,j=h.fontWeight,k=h.fontFamily;b.font=i+" "+j+" "+d+'px "'+k+'"',b.fillStyle=f,b.textBaseline="top",b.textAlign=g||"left"}},{key:"_buildOutputLines",value:function(a){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(a),this._textSplitter.getLines()}},{key:"_renderTextLine",value:function(a,b){var c=this.getAlignment(),d=new v(0,b);switch(c){case"center":d.x=this._canvas.width/2;break;case"right":d.x=this._canvas.width}this._context.fillText(a,d.x,d.y)}},{key:"update",value:function(){var a=this.calculateFontStyles();if(a){var b=this._calculateText(a),c=b.dimensions,d=b.lines;this._dimensions=c,this._renderText(c,d,a)}}},{key:"draw",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.update(),a.drawImage(this._canvas,b,c,this._dimensions.x,this._dimensions.y)}},{key:"_renderText",value:function(a,b,c){this._canvas.width=a.x,this._canvas.height=a.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(c,this._context);for(var d=0;d<b.length;d++){var e=b[d];this._renderTextLine(e,c.topPadding+c.lineHeight*d)}}},{key:"getFontFamily",value:function(){return this.getFontVariation().getFontFamily()}},{key:"calculateFontStyles",value:function(){var a=this.getFontFamily(),b=this.getFontSize(),c=this.getAbsoluteTextHeight(),d={fontFamily:a,fontSize:b,textHeight:c,lineHeight:c*this.getLineHeight(),topPadding:c*(this.getLineHeight()-1)/2};return this._textOptions=t({},d),d}},{key:"getTextMetrics",value:function(){return this.getFontVariation().getTextMetrics()}},{key:"getAbsoluteTextHeight",value:function(){var a=this.getFontSize(),b=this.getTextMetrics();if(b){var c=1/b.unitsPerEm*a,d=b.ascender*c,e=b.descender*c;return d+Math.abs(e)}return a*this.getLineHeight()*1.1}},{key:"_calculateText",value:function(a){this._applyTextOptions(a,this._context);for(var b=new v,c=this.getText().split("\n"),d=0;d<c.length;d++){var e=c[d];b.x=Math.max(b.x,this._context.measureText(e).width)}var f=a.lineHeight;return b.y=c.length*f,{dimensions:b,lines:c}}},{key:"getDimensions",value:function(){var a=this.calculateFontStyles();return this._calculateText(a).dimensions}},{key:"fitMaxHeight",value:function(){this.update();var a=this.getDimensions();this.getText().split("\n"),this.getMaxHeight(),a.y}},{key:"fitMaxWidth",value:function(){var a=this.getDimensions().x,b=this.getMaxWidth()/a;this.setFontSize(this.getFontSize()*b),this._textOptions.fontSize=this.getFontSize()}},{key:"fitInFrame",value:function(a){this.setMaxWidth(a.width),this.setMaxHeight(a.height),this.fitMaxWidth(),this.fitMaxHeight()}},{key:"getSize",value:function(){var a=this.getDimensions();return new s.a(a.x,a.y)}}]),b}();w.prototype.availableOptions={text:{type:p.OptionType.STRING,default:""},fontIdentifier:{type:p.OptionType.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:p.OptionType.OBJECT,default:null},lineHeight:{type:p.OptionType.NUMBER,default:1},fontSize:{type:p.OptionType.NUMBER,default:22},textColor:{type:p.OptionType.STRING,default:"black"},strokeStyle:{type:p.OptionType.STRING,default:"black"},outlineWidth:{type:p.OptionType.NUMBER,default:0},textBaseline:{type:p.OptionType.STRING,default:"alphabetic"},excludeAccents:{type:p.OptionType.BOOLEAN,default:!0},maxWidth:{type:p.OptionType.NUMBER,default:100},maxHeight:{type:p.OptionType.NUMBER,default:0},alignment:{type:p.OptionType.STRING,default:"left",available:["left","center","right"]}}},function(a,b,c){c.d(b,"a",function(){return v});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(62)),r=c(43),s=c(16),t=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f._possibleRowTypes=[q.a.Badge1,q.a.Badge2,q.a.Badge3,q.a.Badge4],f._rowTypesRandomizer=new s.a(0),f._isMaskedRandomizer=new s.a(0),f._seedPool.push(f._rowTypesRandomizer),f._seedPool.push(f._isMaskedRandomizer),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,r.a),u(b,[{key:"getImagePaths",value:function(){return this._possibleRowTypes.map(function(a){return a.getImagePath()})}},{key:"_randomLayoutRow",value:function(a,c,d,e){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),e.setLineSpacing(.9);var f=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||o()(b.prototype),"_randomLayoutRow",this).call(this,a,c,d,e);return f.set({textScaleFactor:.9}),f}}]),b}();v.defaultFontIdentifiers=["imgly_font_campton_bold"],v.identifier="imgly_text_design_masked_badge",v.ValidAlignments=[r.a.Alignment.Center],v.prototype.availableOptions=t({},r.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:v.defaultFontIdentifiers}})},function(a,b,c){c.d(b,"a",function(){return s});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(62)),p=(c(43),c(108)),q=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._possibleRowTypes=[o.a.SpeechBubble2,o.a.SpeechBubble4,o.a.SpeechBubble2,o.a.SpeechBubble4,o.a.SpeechBubble5],f._possibleRowTypesForMin15=f._possibleRowTypes.slice(0,2),f._possibleRowTypesForMax14=f._possibleRowTypes.slice(2),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.a),r(b,[{key:"_rowTypes",value:function(a){return a.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}]),b}();s.defaultFontIdentifiers=["imgly_font_gagalin_regular"],s.identifier="imgly_text_design_masked_speech_bubble_comic",s.prototype.availableOptions=q({},p.a.prototype.availableOptions,{fontIdentifiers:{type:n.OptionType.ARRAY,default:s.defaultFontIdentifiers}})},function(a,b,c){c.d(b,"a",function(){return u});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(5),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=(c.n(p),c(43)),r=c(107),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),t(b,[{key:"_modifiedText",value:function(a){return function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||o()(b.prototype),"_modifiedText",this).call(this,a).toUpperCase()}},{key:"_randomLayoutRow",value:function(a,b,c,d){var e=this._alignmentRandomizer.pickNext(q.a.ValidAlignments);return d.setAlignment(e),new r.a({words:a,width:c,attributes:d,image:null,backgroundColor:p.Color.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}]),b}();u.defaultFontIdentifiers=["imgly_font_abril_fatface_regular"],u.identifier="imgly_text_design_multiline",u.prototype.availableOptions=s({},q.a.prototype.availableOptions,{fontIdentifiers:{type:p.OptionType.ARRAY,default:u.defaultFontIdentifiers}})},function(a,b,c){c.d(b,"a",function(){return q});var d=c(6),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),c(62)),n=c(43),o=c(108),p=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._possibleRowTypes=[m.a.Watercolor1,m.a.Watercolor2,m.a.Watercolor3],f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,o.a),b}();q.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"],q.identifier="imgly_text_design_watercolor",q.prototype.availableOptions=p({},o.a.prototype.availableOptions,{fontIdentifiers:{type:l.OptionType.ARRAY,default:q.defaultFontIdentifiers},alignment:{type:l.OptionType.STRING,default:n.a.Alignment.Center,available:n.a.ValidAlignments}})},function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return h()(a)}c.d(b,"a",function(){return A});var e=c(6),f=c.n(e),g=c(15),h=c.n(g),i=c(0),j=c.n(i),k=c(2),l=c.n(k),m=c(3),n=c.n(m),o=c(1),p=c.n(o),q=c(4),r=(c.n(q),c(20)),s=c(17),t=c(156),u=c(380),v=c(382),w=c(383),x=c(16),y=f.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},z=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),A=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||p()(b)).call.apply(a,[this].concat(d)));return f._relativeInsets=new s.a(.3,.3,.3,.3),f._backgroundRandomizer=new x.a(0),f._decoTypeRandomizer=new x.a(0),f._seedPool.push(f._backgroundRandomizer),f._seedPool.push(f._decoTypeRandomizer),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=n()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(l.a?l()(a,b):a.__proto__=b)}(b,t.a),z(b,[{key:"getImagePaths",value:function(){return[].concat(d(t.a.RowImages),d(q.Utils.Array.flatten(b.Backgrounds.map(function(a){return a.getImagePaths()}))),d(b.DecoratorImages))}},{key:"_getBackground",value:function(){return this._backgroundRandomizer.pickNext(b.Backgrounds)}},{key:"_randomDecoratorImages",value:function(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return b.DecoratorImages.slice(0,2).map(function(a){return r.a.getImage(a)});case 1:case 2:return b.DecoratorImages.slice(2).map(function(a){return r.a.getImage(a)});default:return q.Log.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),b.DecoratorImages.slice(2).map(function(a){return r.a.getImage(a)})}}}]),b}();A.defaultFontIdentifiers=["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"],A.identifier="imgly_text_design_particles",A.Backgrounds=[new u.a,new v.a,new w.a],A.DecoratorImages=["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"],A.prototype.availableOptions=y({},t.a.prototype.availableOptions,{fontIdentifiers:{type:q.OptionType.ARRAY,default:A.defaultFontIdentifiers},decorationsVisible:{type:q.OptionType.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:q.OptionType.BOOLEAN,default:!0}})},function(a,b,c){c.d(b,"a",function(){return q});var d=c(15),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(109)),p=g.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),b}();q.Images=["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"],q.prototype.availableOptions=p({},o.a.prototype.availableOptions,{imagePaths:{type:n.OptionType.ARRAY,default:[].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return e()(a)}(q.Images))},relativeParticleSize:{type:n.OptionType.NUMBER,default:.12}})},function(a,b,c){c.d(b,"a",function(){return o});var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.Math.Rectangle,o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),m(b,[{key:"getContentFrame",value:function(){var a=this.getFrame().clone(),b=.1*a.width;return a.insetBy(b,b)}},{key:"intersects",value:function(a){return this.getFrame().intersects(a.getFrame())}}]),b}();o.prototype.availableOptions={frame:{type:l.OptionType.OBJECT,default:new n}}},function(a,b,c){c.d(b,"a",function(){return q});var d=c(15),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(109)),p=g.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),b}();q.Images=["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"],q.prototype.availableOptions=p({},o.a.prototype.availableOptions,{imagePaths:{type:n.OptionType.ARRAY,default:[].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return e()(a)}(q.Images))},relativeParticleSize:{type:n.OptionType.NUMBER,default:.12}})},function(a,b,c){c.d(b,"a",function(){return q});var d=c(15),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(109)),p=g.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),b}();q.Images=["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"],q.prototype.availableOptions=p({},o.a.prototype.availableOptions,{imagePaths:{type:n.OptionType.ARRAY,default:[].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return e()(a)}(q.Images))}})},function(a,b,c){c.d(b,"a",function(){return z});var d=c(6),e=c.n(d),f=c(15),g=c.n(f),h=c(0),i=c.n(h),j=c(5),k=c.n(j),l=c(2),m=c.n(l),n=c(3),o=c.n(n),p=c(1),q=c.n(p),r=c(4),s=(c.n(r),c(59)),t=c(17),u=c(385),v=c(16),w=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),i()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=function a(b,c,d){null===b&&(b=Function.prototype);var e=k()(b,c);if(void 0===e){var f=q()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},z=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||q()(b)).call.apply(a,[this].concat(d)));return f._relativeInsets=new t.a(.1,0,0,0),f._rowTypeRandomizer=new v.a(0),f._seedPool.push(f._rowTypeRandomizer),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=o()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(m.a?m()(a,b):a.__proto__=b)}(b,s.a),x(b,[{key:"_modifiedText",value:function(a){return y(b.prototype.__proto__||q()(b.prototype),"_modifiedText",this).call(this,a).toUpperCase()}},{key:"_randomLayoutRow",value:function(a,c,d,e){var f=y(b.prototype.__proto__||q()(b.prototype),"_randomLayoutRow",this).call(this,a,c,d,e);return f.setShearingAngle(this.getShearingAngle()),f}},{key:"_layoutRows",value:function(a,c){var d=y(b.prototype.__proto__||q()(b.prototype),"_layoutRows",this).call(this,a,c),e=r.Utils.values(u.a.FormType),f=new u.a({width:c,height:30,type:this._rowTypeRandomizer.pickNext(e),shearingAngle:this.getShearingAngle()}).layout(),h=new u.a({width:c,height:30,type:this._rowTypeRandomizer.pickNext(e),shearingAngle:this.getShearingAngle()}).layout();return[f].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return g()(a)}(d),[h])}}]),b}();z.defaultFontIdentifiers=["imgly_font_campton_bold"],z.identifier="imgly_text_design_rotated",z.prototype.availableOptions=w({},s.a.prototype.availableOptions,{fontIdentifiers:{type:r.OptionType.ARRAY,default:z.defaultFontIdentifiers},relativeLineSpacing:{type:r.OptionType.NUMBER,default:.025/3},shearingAngle:{type:r.OptionType.NUMBER,default:-.1}})},function(a,b,c){c.d(b,"a",function(){return v});var d=c(6),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=(c.n(n),c(42)),p=c(60),q=c(23),r=c(35),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=n.Math.Rectangle,v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f.setSize(new q.a(f.getWidth(),f.getHeight())),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.a),t(b,[{key:"_calculateLayoutElements",value:function(){return[new o.a({frame:this._getTextFrame()})]}},{key:"render",value:function(a){var c=this._getFrame(),d=this.getType(),e=this.getAttributes().getTextColor(),f=c.height/3,g=new u(c.x,c.y,c.width,f),h=new u(c.x,c.y+2*f,c.width,f);switch(d){case b.FormType.Rect:Object(r.c)(a,c,e);break;case b.FormType.DoubleRect:Object(r.c)(a,g,e),Object(r.c)(a,h,e);break;case b.FormType.DoubleRectFirstPunctuated:Object(r.d)(a,g,e),Object(r.c)(a,h,e);break;case b.FormType.DoubleRectSecondPunctuated:Object(r.c)(a,g,e),Object(r.d)(a,h,e)}}}]),b}();v.FormType={Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED"},v.prototype.availableOptions=s({},p.a.prototype.availableOptions,{height:{type:n.OptionType.NUMBER,default:100},type:{type:n.OptionType.STRING,default:v.FormType.Rect,available:n.Utils.values(v.FormType)}})},function(a,b,c){c.d(b,"a",function(){return n});var d=c(0),e=c.n(d),f=c(4),g=(c.n(f),c(23)),h=c(105),i=c(35),j=c(16),k=c(107),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=f.Math.Rectangle,n=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new j.a}return l(a,[{key:"createLayout",value:function(a,b,c){this._layout=a,this._text=b,this._seed=c,a.seed(c),this._layoutData=a.generateLayoutData(b,1e3)}},{key:"calculateAspect",value:function(){return this._layoutData?this._layoutData.getSize().aspect():(f.Log.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}},{key:"draw",value:function(a,b,c,d){var e=this,j=new g.a(1e3,1e3/b.aspect()),l=b.width/1e3,n=this._layoutData.getRelativeInsets().clone().scale(j.width),o=this._layoutData.getRelativeLineSpacing()*j.width,p=n.top;a.save(),this.randomizer.seed(this._seed);var q=this._layoutData.getBackground();q&&q.render(a,b,this._layoutData.getRelativeInsets(),d?f.Color.WHITE:c,this.randomizer),a.scale(l,l),this._layoutData.getRows().forEach(function(b){a.save();var g=b.getAttributes();if(a.transform(1,b.getShearingAngle(),0,1,n.left,p),g.setTextColor(d?f.Color.WHITE:c.clone()),g.setTintColor(d?f.Color.WHITE:c.clone()),(b instanceof h.a||b instanceof k.a)&&(b.setBackgroundColor(d?f.Color.WHITE:c.clone()),b.setIsUsedInInvertedLayout(d)),e._debugMode&&(b._debugMode=!0),b.willRender(a),b.render(a),b.didRender(a),e._debugMode){var j=b._getFrame(),l=b._getTextFrame();Object(i.e)(a,j,f.Color.GREEN),Object(i.e)(a,l,f.Color.BLUE),b._getLayoutElements().forEach(function(c){var d=c.getFrame(),e=b._getTextFrameForElement(c);Object(i.e)(a,d,new f.Color(1,1,0)),Object(i.e)(a,e,new f.Color(0,1,1))})}p+=b.getSize().height+o,a.restore()}),this._debugMode&&Object(i.e)(a,new m(0,0,j.width,j.height),f.Color.RED),a.restore()}}]),a}()},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c.n(l),n=c(388),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=l.Math.Vector2,q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),
b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Operation),o(b,[{key:"_render",value:function(a){this._sprite.setRotation(0);var b=a.getDimensions(),c=this._options,d=c.start,e=c.end,f=c.rotation,g=c.textureScale,h=e.clone().subtract(d).clone().divide(2),i=d.clone().add(h),j=this.calculateScale()*g,k=b.clone().multiply(j).multiply(h);return this._sprite.setAnchor(i),this._sprite.setRotation(f),this._sprite.setScale(j,j),this._sprite.setPosition(k),this._renderTexture.render(this._container),l.Promise.resolve()}},{key:"calculateScale",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.rotation,b=this.getInputDimensions(!1),c=new p(Math.abs(b.x*Math.cos(a))+Math.abs(b.y*Math.sin(a)),Math.abs(b.x*Math.sin(a))+Math.abs(b.y*Math.cos(a))),d=b.clone().subtract(c.clone()).divide(2).abs();return d.y>d.x?2*d.y/b.y+1:2*d.x/b.x+1}},{key:"getNewDimensions",value:function(a){var b=this._options,c=b.start,d=b.end,e=b.textureScale,f=this.calculateScale();return a.clone().multiply(e*f).multiply(d.clone().subtract(c)).round()}},{key:"flip",value:function(a){var b=this._options,c=b.start,d=b.end,e=c.clone();"horizontal"===a?(c.set(1-d.x,c.y),d.set(1-e.x,d.y)):"vertical"===a&&(c.set(c.x,1-d.y),d.set(d.x,1-e.y))}},{key:"rotate",value:function(a){for(var b=this._options,c=b.start,d=b.end,e=(a+360)%360,f=Math.floor(e/90),g=0;g<f;g++){var h=c.clone();c.set(1-d.y,h.x),d.set(1-h.y,d.x)}}},{key:"_onBeforeExport",value:function(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}},{key:"_onAfterExport",value:function(){this.setEnabled(this._wasEnabledBeforeExport,!0)}}]),b}();q.identifier="transform",q.prototype.availableOptions={start:{type:l.OptionType.VECTOR2,default:new p(0,0)},end:{type:l.OptionType.VECTOR2,default:new p(1,1)},textureScale:{type:l.OptionType.NUMBER,default:1},rotation:{type:l.OptionType.NUMBER,default:0}},q.TransformChange=n.a,m.a.Operations.TransformOperation=q,b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=(c.n(f),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),h=f.Math.Vector2,i=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._options=c,this._oldOptions={start:b.getStart().clone(),end:b.getEnd().clone(),rotation:b.getRotation(),textureScale:b.getTextureScale()},this._inputDimensions=b.getInputDimensions(!1),this._rotationDelta=c.rotation-b.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=c.end.clone().subtract(c.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(c.start).multiply(this._inputDimensions),this._scaleRatio=b.calculateScale(c.rotation)/b.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/b.getTextureScale()}return g(a,[{key:"applyToRelativePoint",value:function(a){var b=this._oldOptions.start,c=this._oldOptions.end,d=b.clone().add(c.clone().subtract(b).divide(2)).multiply(this._inputDimensions),e=a.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),f=d.clone().add(e).clone().subtract(this._inputDimensions.clone().divide(2)),g=new h(f.x*this._deltaCos-f.y*this._deltaSin,f.x*this._deltaSin+f.y*this._deltaCos),i=this._inputDimensions.clone().divide(2).add(g),j=this._options.start.clone().multiply(this._inputDimensions);return i.clone().subtract(j).divide(this._newAbsoluteSize)}},{key:"applyToRelativeSize",value:function(a){return a*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}},{key:"applyToDimensions",value:function(a){return a=a.clone().multiply(this._scaleRatio),this._options.textureScale&&a.multiply(this._textureScaleFactor),a}},{key:"scaleSize",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return a/this._sizeFactor[b]}},{key:"applyToRotation",value:function(a){return(a+this._rotationDelta)%(2*Math.PI)}},{key:"invert",value:function(){var a=this._options.start.clone(),b=this._options.end.clone(),c=this._inputDimensions,d=-this._rotationDelta,e=Math.cos(d),f=Math.sin(d),g=this._oldAbsoluteSize,i=this._newAbsoluteSize,j=a.clone().subtract(b).multiply(c),k=1/this._scaleRatio,l=new h(1/this._sizeFactor.x,1/this._sizeFactor.y),m=1/this._textureScaleFactor,n=this._oldOptions;return this._oldOptions=this._options,this._options=n,this._inputDimensions=c,this._rotationDelta=d,this._deltaCos=e,this._deltaSin=f,this._oldAbsoluteSize=i,this._newAbsoluteSize=g,this._absoluteStartDiff=j,this._scaleRatio=k,this._sizeFactor=l,this._textureScaleFactor=m,this}}]),a}();b.a=i},function(a,b,c){var d=c(0),e=c.n(d),f=c(5),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c.n(n),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=n.Math.Vector2,r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._watermarkSprite=new n.Engine.Sprite,f._watermarkSprite.setAnchor(.5,.5),f._container.addChild(f._watermarkSprite),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.Operation),p(b,[{key:"_render",value:function(a){this._watermarkTexture||(this._watermarkTexture=n.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var b=a.getDimensions(),c=this._options.image,d=c.width,e=c.height,f=n.Utils.resizeVectorToFit(new q(d,e),b);return this._watermarkSprite.setPosition(b.clone().divide(2)),this._watermarkSprite.setWidth(f.x),this._watermarkSprite.setHeight(f.y),this._renderTexture.render(this._container),n.Promise.resolve()}},{key:"dispose",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"dispose",this).call(this),this._watermarkSprite.dispose()}}]),b}();r.identifier="watermark",r.prototype.availableOptions={image:{type:n.OptionType.OBJECT,required:!0}},o.a.Operations.WatermarkOperation=r,b.a=r}])}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("photoeditorsdk/js/PhotoEditorSDK"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["photoeditorsdk","react","react-dom"],b):"object"==typeof exports?exports.PhotoEditorDesktopUI=b(require("photoeditorsdk/js/PhotoEditorSDK"),require("react"),require("react-dom")):a.PhotoEditorDesktopUI=b(a.PhotoEditorSDK,a.React,a.ReactDOM)}("undefined"!=typeof self?self:this,function(a,b,c){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=139)}([function(a,b,c){a.exports={default:c(141),__esModule:!0}},function(a,b,c){a.exports={default:c(151),__esModule:!0}},function(a,b,c){a.exports={default:c(143),__esModule:!0}},function(a,b,c){a.exports={default:c(146),__esModule:!0}},function(a,b,c){(function(a){c.d(b,"j",function(){return B}),c.d(b,"v",function(){return G}),c.d(b,"q",function(){return C}),c.d(b,"e",function(){return z}),c.d(b,"c",function(){return y}),c.d(b,"a",function(){return x}),c.d(b,"o",function(){return D}),c.d(b,"i",function(){return A}),c.d(b,"p",function(){return F}),c.d(b,"y",function(){return I}),c.d(b,"f",function(){return E}),c.d(b,"n",function(){return H}),c.d(b,"w",function(){return w});var d=c(7),e=c.n(d),f=c(32),g=c.n(f),h=c(153),i=c.n(h),j=c(33),k=c.n(j),l=c(90),m=c(159),n=c.n(m),o=c(91),p=c(175),q=c(210),r=c(216),s=c(15),t=c(47),u=c(27),v=c(75);c.d(b,"u",function(){return p.a}),c.d(b,"l",function(){return g.a}),c.d(b,"b",function(){return o.a}),c.d(b,"d",function(){return q.a}),c.d(b,"s",function(){return r.a}),c.d(b,"m",function(){return i.a}),c.d(b,"z",function(){return s.b}),c.d(b,"x",function(){return s.a}),c.d(b,"h",function(){return t.a}),c.o(m,"withTheme")&&c.d(b,"A",function(){return m.withTheme}),c.o(m,"ThemeProvider")&&c.d(b,"t",function(){return m.ThemeProvider}),c.d(b,"g",function(){return u.a}),c.d(b,"k",function(){return k.a}),c.d(b,"r",function(){return v.b});var w=new n.a(a.adonisOptions||{injection:!1,theme:l.a,minified:!0,cssSelectorPrefix:".pesdk-desktop-editor ",classNamePrefix:"pesdk-",hashedStyles:!0}),x=e.a.Base64,y=e.a.Color,z=(e.a.Math.ColorMatrix,e.a.EventEmitter),A=(e.a.EXIF,e.a.OptionType),B=e.a.Promise,C=e.a.Utils,D=e.a.RenderType,E=e.a.ImageFormat,F=e.a,G=(e.a.UniformType,e.a.Math.Vector2),H=e.a.Math.Rectangle,I="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):c(106)}).call(b,c(25))},function(a,b,c){a.exports=c(140).default},function(a,b,c){a.exports={default:c(222),__esModule:!0}},function(b,c){b.exports=a},function(a,b,c){a.exports={default:c(160),__esModule:!0}},function(a,b,c){a.exports={default:c(181),__esModule:!0}},function(a,b){var c=a.exports={version:"2.5.3"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(65)("wks"),e=c(43),f=c(13).Symbol,g="function"==typeof f;(a.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))}).store=d},function(a,b,c){var d=c(13),e=c(10),f=c(23),g=c(19),h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=r.prototype,t=m?d:n?d[b]:(d[b]||{}).prototype;for(i in m&&(c=b),c)(j=!l&&t&&void 0!==t[i])&&i in r||(k=j?t[i]:c[i],r[i]=m&&"function"!=typeof t[i]?c[i]:p&&j?f(k,d):q&&t[i]==k?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b.prototype=a.prototype,b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r.virtual||(r.virtual={}))[i]=k,a&h.R&&s&&!s[i]&&g(s,i,k)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,a.exports=h},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b,c){var d=c(17);a.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},function(a,b,c){(function(a){c.d(b,"b",function(){return e}),c.d(b,"a",function(){return f});for(var d="undefined"==typeof window?a:window,e=d.requestAnimationFrame,f=d.cancelAnimationFrame,g=0,h=["ms","moz","webkit","o"],i=0;i<h.length&&!e;++i)e=d[h[i]+"RequestAnimationFrame"],f=d[h[i]+"CancelAnimationFrame"]||d[h[i]+"CancelRequestAnimationFrame"];e&&(e=e.bind(d)),f&&(f=f.bind(d)),e||(e=function(a,b){var c=(new Date).getTime(),d=Math.max(0,16-(c-g)),e=setTimeout(function(){a(c+d)},d);return g=c+d,e}),f||(f=function(a){clearTimeout(a)})}).call(b,c(25))},function(a,b,c){var d=c(14),e=c(85),f=c(58),g=Object.defineProperty;b.f=c(18)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){a.exports=!c(24)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(a,b,c){var d=c(16),e=c(28);a.exports=c(18)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},function(a,b,c){var d=c(86),e=c(60);a.exports=function(a){return d(e(a))}},function(a,b){var c={}.hasOwnProperty;a.exports=function(a,b){return c.call(a,b)}},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(6),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onDragStart","_onDragMove","_onDragEnd"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,p.b),r(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||o()(b.prototype),"componentDidMount",this).call(this),this.refs.element&&(this._element=this.refs.element)}},{key:"_onDragStart",value:function(a){if(!this.props.disabled){a.preventDefault(),a.stopPropagation(),this._initialMousePosition=p.u.getEventPosition(a),window.MSInputMethodContext&&document.documentMode?(document.addEventListener("mousemove",this._onDragMove),document.addEventListener("touchmove",this._onDragMove)):(document.addEventListener("mousemove",this._onDragMove,{passive:!1}),document.addEventListener("touchmove",this._onDragMove,{passive:!1})),document.addEventListener("mouseup",this._onDragEnd),document.addEventListener("touchend",this._onDragEnd);var b=this._element.getBoundingClientRect(),c=new p.v(b.left,b.top);this._lastMousePosition=this._initialMousePosition.clone();var d=this._initialMousePosition.clone().subtract(c);this.props.onStart&&this.props.onStart(d,this._initialMousePosition.clone(),a)}}},{key:"_onDragMove",value:function(a){a.preventDefault(),a.stopPropagation();var b=p.u.getEventPosition(a);if(b){var c=b.clone().subtract(this._initialMousePosition),d=b.clone().subtract(this._lastMousePosition);this._lastMousePosition=b.clone(),this.props.onDrag&&this.props.onDrag(c,b,d,a)}}},{key:"_onDragEnd",value:function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),this._onDragMove(a),document.removeEventListener("mousemove",this._onDragMove),document.removeEventListener("touchmove",this._onDragMove),document.removeEventListener("mouseup",this._onDragEnd),document.removeEventListener("touchend",this._onDragEnd),this.props.onStop&&this.props.onStop(a)}},{key:"render",value:function(){var a=this;if(!this.props.children||this.props.children instanceof Array)throw new Error("DraggableComponent expects exactly one child.");var b={onMouseDown:this._onDragStart,onTouchStart:this._onDragStart,style:q({},this.props.children.props.style||{},{touchAction:"none"}),onClick:function(b){if(a.props.disabled){var c=a.props.children.props.onClick;c&&c(b)}else b.stopPropagation()}};if("string"==typeof this.props.children.type)b.ref="element";else{var c=this.props.children.props.innerRef;b.innerRef=function(b){a._element=b,c&&c(b)}}return p.l.cloneElement(this.props.children,b)}}]),b}();s.contextTypes=p.b.contextTypes,s.propTypes={onStart:p.k.func,onDrag:p.k.func,onStop:p.k.func,disabled:p.k.bool},b.a=s},function(a,b,c){var d=c(41);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){try{return!!a()}catch(a){return!0}}},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b){a.exports={}},function(a,b,c){var d=c(104),e=c.n(d),f=c(105),g=c.n(f),h=c(8),i=c.n(h),j=function(){return function(a,b){if(Array.isArray(a))return a;if(e()(Object(a)))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var h,i=g()(a);!(d=(h=i.next()).done)&&(c.push(h.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&i.return&&i.return()}finally{if(e)throw f}}return c}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();b.a={load:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymous"};return(a.substr(0,5),i.a.resolve([a,a])).then(function(a){var d=j(a,2),e=d[0],f=d[1];return b._createAndLoadImage(e,f,c)})},_createAndLoadImage:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{cors:!0,value:"anonymous"};return new i.a(function(a,e){var f=new i.a(function(a,c){var e=new window.Image;e.addEventListener("load",function(){a(e)}),e.addEventListener("error",function(){c(new Error("Failed to load image at "+b))}),d.cors&&(e.crossOrigin=d.value),e.src=b}),g=new i.a(function(a,e){c._loadAsDataURL(b,d).then(function(b){var c=new window.Image;c.addEventListener("load",function(){a(c)}),c.src=b,c.rawSource=b}).catch(function(b){f.then(function(b){return a(b)})})});return b.endsWith(".svg")?f.then(function(b){return a(b)}):g.then(function(b){return a(b)})})},_loadAsDataURL:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{cors:!0,value:"anonymus"};return new i.a(function(c,d){var e=new XMLHttpRequest;e.onload=function(){var a=new FileReader;a.onloadend=function(){a.error&&d(a.error),c(a.result)},a.readAsDataURL(e.response)},e.open("GET",a),e.responseType="blob",e.withCredentials=b.cors&&"use-credentials"===b.value,e.send()})},loadXHR:function(a,b){return new i.a(function(c,d){var e=void 0;window.XDomainRequest?(e=new window.XDomainRequest,b&&e.overrideMimeType(b),e.onload=function(){c(e)},e.onerror=function(a){d(a)}):window.XMLHttpRequest&&(e=new window.XMLHttpRequest,b&&e.overrideMimeType(b),e.onreadystatechange=function(a){4===e.readyState&&(200===e.status?c(e):d(new Error("HTTP Status "+e.status)))}),e.open("GET",a,!0),e.send()})}}},function(a,b){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(a,b){var c={}.toString;a.exports=function(a){return c.call(a).slice(8,-1)}},function(a,b,c){var d=c(87),e=c(66);a.exports=Object.keys||function(a){return d(a,e)}},function(a,b,c){var d=c(60);a.exports=function(a){return Object(d(a))}},function(a,c){a.exports=b},function(a,b,c){a.exports=c(154)()},function(a,b,c){var d=c(161)(!0);c(93)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},function(a,b,c){a.exports={default:c(176),__esModule:!0}},function(a,b,c){a.exports={default:c(184),__esModule:!0}},function(a,b,c){a.exports={default:c(185),__esModule:!0}},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(a,c,f){var g=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,b);var i=e(this,(b.__proto__||n()(b)).call(this));return i.id=o.q.getUUID(),i.type=a,i.title=c,i.text=f,i.overlay=g,i.closeOnOverlayClick=h,i.visible=!0,i.data=null,i}return f(b,o.e),p(b,[{key:"setData",value:function(a){this.data=a,this.emit("update")}},{key:"close",value:function(){this.visible=!1,this.emit("close")}},{key:"remove",value:function(){this.emit("remove")}}]),b}(),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||n()(b)).call(this));return a._modals=[],a}return f(b,o.e),p(b,[{key:"displayLoading",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=new q("loading",a,null,b);return this.addModal(c),c}},{key:"displayProgress",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=new q("progress",null,a);return c.setData({progress:b}),this.addModal(c),c}},{key:"displayInput",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=new q("input",a,null,c,!0);return d.setData({text:b}),this.addModal(d),d}},{key:"displayWarning",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["OK"],d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],e=new q("warning",a,b,d);return e.setData({buttons:c}),this.addModal(e),e}},{key:"displayError",value:function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=new q("error",a,b,c);return this.addModal(d),d}},{key:"addModal",value:function(a){var b=this;this._modals.push(a),a.on("close",function(){b.emit("update")}),a.on("remove",function(){b.removeModal(a)}),a.on("update",function(){b.emit("update")}),this.emit("update")}},{key:"removeModal",value:function(a){var b=this._modals.indexOf(a);this._modals.splice(b,1),this.emit("update")}},{key:"getModals",value:function(){return this._modals}}],[{key:"instance",get:function(){return this._instance||(this._instance=new b),this._instance}}]),b}();b.a=r},function(a,b,c){c.d(b,"f",function(){return r}),c.d(b,"b",function(){return s}),c.d(b,"d",function(){return t}),c.d(b,"a",function(){return w}),c.d(b,"e",function(){return x}),c.d(b,"c",function(){return y});var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._buttons=[],f.state={visible:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),o(b,[{key:"componentDidMount",value:function(){for(var a,c=this,d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];(a=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this)).call.apply(a,[this].concat(e));var h=this.props.modal;h.on("close",function(){c.setState({visible:!1}),setTimeout(function(){h.remove()},1e3*c.context.theme.transitionDuration)}),Object(n.z)(function(){c.setState({visible:!0})})}},{key:"_onButtonClick",value:function(a){}},{key:"_renderButtons",value:function(){var a=this;return this._buttons.map(function(b,c){return n.l.createElement(v,{key:c,onClick:a._onButtonClick.bind(a,c)},b)})}},{key:"render",value:function(){var a,b,c,d=this.props.modal,f=(a={},b=d.type,c=!0,b in a?e()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a),g=this._buttons.length?n.l.createElement(u,null,this._renderButtons()):null,h=this._renderContent&&this._renderContent();return h?n.l.createElement(q,{visible:this.state.visible,large:this.state.large},h,n.l.createElement(z,{onClick:this._onClickOverlay,visible:!this.state.visible})):n.l.createElement(q,{visible:this.state.visible},n.l.createElement(r,f,n.l.createElement(s,null,n.l.createElement(w,{src:this._getAssetPath("shared/modals/icon.png",!0)})),n.l.createElement(t,null,n.l.createElement(x,null,d.title),n.l.createElement(y,null,d.text))),g,n.l.createElement(z,{onClick:this._onClickOverlay,visible:!this.state.visible}))}}]),b}();p.propTypes={modal:n.k.object},p.contextTypes=n.b.contextTypes,b.g=p;var q=n.w.div("1jkivgb",{visible:"7bce9v",large:"1mlpyuc"},"Modal"),r=n.w.div("1udylfs",{error:"120drhm",warning:"120drhm",loading:"120drhm"},"Top"),s=n.w.div("z6arf2","IconContainer"),t=n.w.div("245la5","TextContainer"),u=n.w.div("1943606","Buttons"),v=n.w.div("1kylmay","Button"),w=n.w.img("jsue2c","Icon"),x=n.w.div("1fx19is","Title"),y=n.w.div("1id6172","Text"),z=n.w.div("mv80g2",{visible:"2jlos"},"BlockingOverlay")},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(4),i=c(242),j=c(47),k=c(114),l=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._options=c,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}return m(a,[{key:"_initFonts",value:function(){var a=this,b=this._options,c=b.fonts,d=b.replaceFonts,e=b.availableVariations,f=h.d.DEFAULTS.FONTS,g=void 0;f=(f=d?c:f.concat(c||[])).map(function(b){var c=b.fontFamily,d=b.variations;if(e&&(d=d.filter(function(a){return-1!==e.indexOf(a.identifier)})),0===d.length)return null;var f=new i.a({fontFamily:c});return d=d.map(function(b){var d=new k.a(b);return d.setFontFamily(c),d.setFont(f),b.default&&!g&&(g=d),null==d.getTextMetrics()&&j.a.warn("Missing font metrics for "+d.getIdentifier()+". The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details."),a._variationsByIdentifier[d.getIdentifier()]=d,d}),f.setVariations(d),a._fontsByFontFamily[c]=f,f}).filter(function(a){return a}),g||(g=f[0].getVariations()[0]),this._defaultVariation=g,this._fonts=f}},{key:"getFonts",value:function(){return this._fonts}},{key:"getFontByFontFamily",value:function(a){return this._fontsByFontFamily[a]}},{key:"getVariationByIdentifier",value:function(a){return this._variationsByIdentifier[a]}},{key:"getVariationsByIdentifier",value:function(){return l({},this._variationsByIdentifier)}},{key:"getDefaultVariation",value:function(){return this._defaultVariation}}]),a}();b.a=n},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){b.f={}.propertyIsEnumerable},function(a,b){var c=0,d=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++c+d).toString(36))}},function(a,b){a.exports=!0},function(a,b,c){var d=c(16).f,e=c(21),f=c(11)("toStringTag");a.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},function(a,b,c){c(163);for(var d=c(13),e=c(19),f=c(26),g=c(11)("toStringTag"),h="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),i=0;i<h.length;i++){var j=h[i],k=d[j],l=k&&k.prototype;l&&!l[g]&&e(l,g,j),f[j]=f.Array}},function(a,b,c){(function(a){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return f()(a)}var e=c(35),f=c.n(e),g=c(0),h=c.n(g),i=c(102),j=c.n(i),k=c(180),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],n=function(){return console&&console.group&&console.groupCollapsed&&console.groupEnd},o=new(function(){function b(){var a=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"warn",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),this._levels=[].concat(d(e)),this._maxLevel=this.getLevelIndexByName(c),this._consoleFuncs={trace:function(){var a,b;n()?((a=console).groupCollapsed.apply(a,arguments),console.trace(),console.groupEnd()):(b=console).trace.apply(b,arguments)}},this._levels.forEach(function(b){var c=b.name;a[c]=function(b){for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];a._log.apply(a,[c,b].concat(e))}})}return l(b,[{key:"getLevelIndexByName",value:function(a){return k.a.Array.findIndex(this._levels,function(b){return b.name===a})}},{key:"getLevelObjectByName",value:function(a){return k.a.Array.find(this._levels,function(b){return b.name===a})}},{key:"canLog",value:function(a){var b=this.getLevelIndexByName(a);return!(b<0)&&b>=this._maxLevel}},{key:"setLevel",value:function(a){var b=this.getLevelIndexByName(a);b<0||(this._maxLevel=b)}},{key:"_log",value:function(b,c){
for(var e=arguments.length,f=Array(e>2?e-2:0),g=2;g<e;g++)f[g-2]=arguments[g];var h=this.getLevelObjectByName(b);if(h&&this.canLog(b)){h.name;var i,l=h.type,m=h.background,o=h.color,p=f.filter(function(a){return void 0!==a}).map(function(a){return a.toObject?JSON.parse(j()(a.toObject())):a}),q=this._consoleFuncs[l]||console[l]?function(){var a;return(a=console)[l].apply(a,arguments)}:function(){var a;return(a=console).log.apply(a,arguments)},r=p.length,s=function(a,b){return["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0","background: "+a+"; color: "+b+"; line-height: 20px; padding: 4px 0; font-weight: bold","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"]}(m,o);if(!(!a||a&&a.browser)||"undefined"==typeof navigator||!navigator.userAgent.match(/Gecko|WebKit/i)||navigator.userAgent.match(/Trident/)){var t=p.length;return t<=0?void q("PhotoEditorSDK | "+c+" "):1===t&&"string"==typeof p[0]?void q("PhotoEditorSDK | "+c+" | "+p[0]):void q.apply(void 0,["PhotoEditorSDK | "+c+" | "].concat(d(p)))}r<=0?q.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+c+" %c %c  "].concat(d(s))):1!==r||"string"!=typeof p[0]?n()?((i=console).groupCollapsed.apply(i,["%c  %c PhotoEditorSDK %c  %c "+c+" %c"].concat(d(k.a.Array.init(s)))),q.apply(void 0,d(p)),console.groupEnd()):q.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+c+" %c"].concat(d(k.a.Array.init(s)),d(p))):q.apply(void 0,["%c  %c PhotoEditorSDK %c  %c "+c+" %c  "+p[0]+"  %c  "].concat(d(s)))}}},{key:"image",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments[1],c=new window.Image,d=function(){var b=c.width,d=c.height;a&&console.log(a),console.log("%c+","\n        font-size: 1px;\n        padding: 0px "+Math.floor(b/2)+"px;\n        line-height: "+d+"px;\n        background: url("+c.src+");\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: "+b+"px "+d+"px;")};return c.onload=d,b instanceof window.HTMLCanvasElement?c.src=b.toDataURL():b instanceof window.Image?(c=b,d()):"string"==typeof b?c.src=b:this.log(a,b),c}},{key:"texture",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments[1];if(b){var c=b.getBaseTexture(),d=c.getRenderers(),e=k.a.Array.find(d,function(a){return a&&"WebGL"===a.constructor.type}),f=c.getFrame(),g=f.width,h=f.height;if(e){var i=e.getContext(),j=c.getGLTextureForRenderer(e);this.logGlTexture(i,j,g,h,a)}else o.image(a,c.getSource())}else this.log(a,"texture: null or undefined")}},{key:"logGlTexture",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,e=arguments[4];a.bindTexture(a.TEXTURE_2D,b);var f=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,f),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,b,0);var g=new Uint8Array(c*d*4);a.readPixels(0,0,c,d,a.RGBA,a.UNSIGNED_BYTE,g),a.deleteFramebuffer(f);var h=document.createElement("canvas");h.width=c,h.height=d;var i=h.getContext("2d"),j=i.createImageData(c,d);return j.data.set(g),i.putImageData(j,0,0),o.image(e,h)}}]),b}())("warn");b.a=o}).call(b,c(101))},function(a,b,c){a.exports={default:c(193),__esModule:!0}},function(a,b,c){(function(a){var d=c(0),e=c.n(d),f=c(198),g=c(202),h=c.n(g),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j="undefined"!=typeof window?window:a,k=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._url=b,this._parsedUrl=h.a.parse(this._url,!0)}return i(a,[{key:"_isJSONPRequest",value:function(){var a=this._parsedUrl.query;for(var b in a)if("?"===a[b])return!0;return!1}},{key:"load",value:function(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}},{key:"_loadJSON",value:function(){var a=this;return new f.a(function(b,c){var d=void 0;j.XDomainRequest?((d=new j.XDomainRequest).onload=function(){var a=JSON.parse(d.responseText);b(a)},d.onerror=function(a){c(a)},d.open("GET",a._url,!0),d.send()):j.XMLHttpRequest&&((d=new XMLHttpRequest).onreadystatechange=function(a){if(4===d.readyState)if(200===d.status){var e=JSON.parse(d.responseText);b(e)}else c(new Error("HTTP Status "+d.status))},d.open("GET",a._url,!0),d.send())})}},{key:"_loadJSONP",value:function(){var a=this,b=!1,c=!1,d="pesdk"+Math.round(99999999999999*Math.random());return new f.a(function(e,f){var g=a._createJSONPNode(d);j[d]=function(d){a._removeJSONPNode(g),b||(c=!0,e(d))},j.setTimeout(function(){c||(a._removeJSONPNode(g),b=!0,f(new Error("Timeout of 5 seconds exceeded.")))},5e3)})}},{key:"_createJSONPNode",value:function(a){var b=this._buildJSONPUrl(a),c=document.querySelector("head"),d=document.createElement("script");return d.src=b,c.appendChild(d),d}},{key:"_removeJSONPNode",value:function(a){a.parentNode.removeChild(a)}},{key:"_buildJSONPUrl",value:function(a){var b=this._parsedUrl.query,c=null;for(var d in b)if("?"===b[d]){c=d;break}return delete this._parsedUrl.search,b[c]=a,h.a.format(this._parsedUrl)}}]),a}();b.a=k}).call(b,c(25))},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(32),m=c.n(l),n=c(33),o=c.n(n),p=c(15),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._timeout=null,f.state={enter:!1,appear:!1,leave:!1},f.props.active&&(f.state.enter=!0,f.state.appear=!0),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Component),q(b,[{key:"componentWillReceiveProps",value:function(a){this.props.active&&!a.active?this._leave():!this.props.active&&a.active&&(this._enter(),this._appear())}},{key:"_cancelTimeout",value:function(){this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)}},{key:"_enter",value:function(){this.setState({enter:!0})}},{key:"_leave",value:function(){var a=this;this._timeout&&this._cancelTimeout(),this.setState({appear:!1,leave:!0}),this._timeout=window.setTimeout(function(){a._cancelTimeout(),a.setState({enter:!1})},this.props.leaveDuration)}},{key:"_appear",value:function(){var a=this;this._timeout&&this._cancelTimeout(),Object(p.b)(function(){a.setState({appear:!0,leave:!1}),a._timeout=window.setTimeout(function(){a._cancelTimeout()},a.props.appearDuration)})}},{key:"_buildStateProps",value:function(){var a=this.props,b=a.enterProp,c=a.appearProp,d=a.leaveProp,e={};return b&&(e[b]=this.state.enter),c&&(e[c]=this.state.appear),d&&(e[d]=this.state.leave),e}},{key:"render",value:function(){if(!this.props.children)return null;var a=this._buildStateProps();return m.a.cloneElement(this.props.children,a)}}]),b}();r.propTypes={active:o.a.bool,enterProp:o.a.string,enterDuration:o.a.number,appearProp:o.a.string,appearDuration:o.a.number,leaveProp:o.a.string,leaveDuration:o.a.number},r.defaultProps={active:!0,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300},b.a=r},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=c(75),h=c(49),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._options=c,this._categoriesById={},this._categories=[],this._stickersById={},this._addCategories(g.b.DEFAULTS.STICKER_CATEGORIES);var d=this._options,e=d.categories,f=d.replaceCategories;this._options.categories?this._addCategories(e,f):(this._updateCategoriesMap(),this._updateAllCategory())}return i(a,[{key:"loadExternal",value:function(a){var b=this;return new h.a(a).load().then(function(a){b._addCategories(a.categories,b._options.replaceCategories)})}},{key:"_addCategories",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=b?a.slice(0):f.u.mergeCategories(this._categories,a,"stickers"),this._updateCategoriesMap(),this._updateAllCategory()}},{key:"_updateCategoriesMap",value:function(){var a=this;this._categoriesById={},this._categories.forEach(function(b){a._categoriesById[b.identifier]=b}),this._categories.forEach(function(b){b.stickers.forEach(function(b){a._stickersById[b.identifier]=b})}),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach(function(b){b.stickers=b.stickers.filter(function(b){return-1!==a._options.availableStickers.indexOf(b.identifier)})}),this._categories=this._categories.filter(function(a){return a.stickers.length>0})),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map(function(a){return a.stickers}).reduce(function(a,b){return a.concat(b)},[])},this._categoriesById.all=this._allCategory}},{key:"getStickersForCategory",value:function(a){if(!this._categoriesById[a])throw new Error("Unknown sticker category '"+a+"'");return this._categoriesById[a].stickers}},{key:"getStickerByIdentifier",value:function(a){return this._stickersById[a]}},{key:"getCategories",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?[this._allCategory].concat(this._categories):this._categories}},{key:"getCategory",value:function(a){return this._categoriesById[a]}}],[{key:"getURLForSticker",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",c=a.images,d="base"===b&&c.mediaBase||c.mediaThumb,e=d.uris||[d.uri];if(void 0===f.u.Browser||f.u.Browser.getIEVersion()){var g=e.filter(function(a){return!/\.svg$/i.test(a)});return g.length?g[0]:e[0]}var h=e.filter(function(a){return/\.svg$/i.test(a)});return h.length?h[0]:e[0]}}]),a}();b.a=j},function(a,b,c){var d=c(35),e=c.n(d),f=c(0),g=c.n(f),h=c(48),i=c.n(h),j=c(4),k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._options=c,this._defaultLayouts=j.p.Operations.SpriteOperation.TextDesignSprite.Layouts,this._layouts=[],this._init()}return k(a,[{key:"_init",value:function(){var a=this,b=this._options.availableLayouts;this._layouts=i()(this._defaultLayouts).map(function(b){return{identifier:a._defaultLayouts[b].identifier,layout:a._defaultLayouts[b]}}),b&&(this._layouts=this._layouts.filter(function(a){return b.indexOf(a.identifier)>=0}))}},{key:"getLayoutByIdentifier",value:function(a){var b=j.q.Array.find(this._layouts,function(b){return b.identifier===a});return b&&b.layout}},{key:"getLayouts",value:function(){return[].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return e()(a)}(this._layouts))}},{key:"getDefaultLayout",value:function(){return this.getLayouts()[0]}}]),a}();b.a=l},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onSharedStateUpdate"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),o(b,[{key:"componentDidMount",value:function(){p(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this.context.sharedState&&this.context.sharedState.on("update",this._onSharedStateUpdate)}},{key:"componentWillUnmount",value:function(){p(b.prototype.__proto__||m()(b.prototype),"componentWillUnmount",this).call(this),this.context.sharedState&&this.context.sharedState.off("update",this._onSharedStateUpdate)}},{key:"_onSharedStateUpdate",value:function(a,b){this.shouldSharedComponentUpdate(a,b)?(this.sharedComponentWillUpdate(a,b),this.forceUpdate(),this.sharedStateDidChange(a,b)):this.sharedStateDidChange(a,b)}},{key:"sharedComponentWillUpdate",value:function(a,b){}},{key:"shouldSharedComponentUpdate",value:function(a,b){return!0}},{key:"sharedStateDidChange",value:function(a,b){}},{key:"sharedStateWillChange",value:function(a,b){}},{key:"setSharedState",value:function(a,b){this.context.sharedState.set(a,b)}},{key:"getSharedState",value:function(a){return this.context.sharedState.get(a)}},{key:"forceSharedUpdate",value:function(){this.context.sharedState.broadcastUpdate()}},{key:"sharedState",get:function(){return this.context.sharedState.state}}]),b}();q.contextTypes={editor:n.k.object,ui:n.k.object,options:n.k.object,mediator:n.k.object,sharedState:n.k.object,theme:n.k.object,screen:n.k.object,appComponent:n.k.object,globalState:n.k.object},q.propTypes={sharedState:n.k.any},b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(81),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onKeyDown","_onInputBlur","_onInputChange"),f.state={},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),n(b,[{key:"shouldComponentUpdate",value:function(a,b){return this.props.value!==a.value||this.props.disabled!==a.disabled}},{key:"_onInputChange",value:function(a){this.props.onLiveChange&&this.props.onLiveChange(a)}},{key:"_onInputBlur",value:function(a){this.props.onChange&&this.props.onChange(a)}},{key:"_onKeyDown",value:function(a){13!==a.keyCode&&27!==a.keyCode||this._input.blur(),this.props.onKeyDown&&this.props.onKeyDown()}},{key:"focus",value:function(){this._input.focus()}},{key:"_getInputStyle",value:function(){return{}}},{key:"render",value:function(){var a=this,b=this.constructor.RootElement;return l.l.createElement(b,{value:this.props.value,onChange:this._onInputChange,onBlur:this._onInputBlur,innerRef:function(b){a._input=b},onKeyDown:this._onKeyDown,name:this.props.name,styles:this.props.styles,className:this.props.className,style:this._getInputStyle(),disabled:this.props.disabled})}}]),b}();o.contextTypes=l.b.contextTypes,b.a=o,o.RootElement=Object(l.w)(m.a).input("120drhm","NumericInputComponent")},function(a,b,c){function d(a,b,c){return b in a?h()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(9),f=c.n(e),g=c(0),h=c.n(g),i=c(6),j=c.n(i),k=c(2),l=c.n(k),m=c(3),n=c.n(m),o=c(1),p=c.n(o),q=c(7),r=(c.n(q),c(5)),s=(c.n(r),c(319)),t=c(320),u=c(321),v=c(322),w=f.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=q.Math.Vector2,z=function(a){function b(){var a,c;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||p()(b)).call.apply(a,[this].concat(f)));return h._bindAll("_onZoomDone","_onWindowResize","_onHistoryChange","_onAfterTransform"),h._events=(d(c={},r.Constants.EVENTS.ZOOM_DONE,h._onZoomDone),d(c,r.Constants.EVENTS.WINDOW_RESIZE,h._onWindowResize),d(c,r.Constants.EVENTS.HISTORY_UNDO,h._onHistoryChange),d(c,r.Constants.EVENTS.HISTORY_REDO,h._onHistoryChange),c),h.state=q.Utils.extend(h.state,{visible:!1,canvasClickDisabled:!1}),h}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=n()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(l.a?l()(a,b):a.__proto__=b)}(b,r.CanvasControlsComponent),x(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=j()(b,c);if(void 0===e){var f=p()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||p()(b.prototype),"componentDidMount",this).call(this),this.forceUpdate()}},{key:"_onAfterTransform",value:function(a){var b="sprite-transform-"+a.getId();this.props.controls.addLocalHistorySnapshot(b,!0)}},{key:"_onHistoryChange",value:function(){var a=this.getSharedState("operation");if(a){var b=this.getSharedState("selectedSprite");-1===a.getSprites().indexOf(b)&&this._selectNextSprite()}}},{key:"_onWindowResize",value:function(){var a=this;this.context.editor.once("rendered",function(){a.forceUpdate()})}},{key:"_onZoomDone",value:function(){this.context.editor.render(),this.setState({visible:!0})}},{key:"_onItemBlur",value:function(){}},{key:"_onCanvasClick",value:function(a){this.state.canvasClickDisabled||this._performHitTest(r.Utils.getEventPosition(a))||(this.getSharedState("selectedSprite")&&this._onItemBlur(),this.context.screen.switchToControls("default"))}},{key:"_onSpriteDelete",value:function(a){this.getSharedState("operation").removeSprite(a),a.dispose(),this._selectNextSprite(),this.props.controls.addLocalHistorySnapshot("sprite-deletion",!1),this.context.editor.render()}},{key:"_onSpriteTakeToFront",value:function(a){this.getSharedState("operation").takeSpriteToFront(a),this.props.controls.addLocalHistorySnapshot("sprite-order",!1),this.forceUpdate(),this.context.editor.render()}},{key:"_onSpriteMaskCanvas",value:function(a){var b=this.context.editor;a?(a.setInverted(!a.getInverted()),this.props.controls.addLocalHistorySnapshot("inverted-layout"),b.render()):this.sharedState.set({textAsMask:!this.sharedState.get("textAsMask")})}},{key:"_onSpriteFlipHorizontally",value:function(a,b){b.stopPropagation(),a.setFlipHorizontally(!a.getFlipHorizontally()),this.props.controls.addLocalHistorySnapshot("sprite-flip-horizontally",!1),this.forceUpdate(),this.context.editor.render()}},{key:"_onSpriteDuplicate",value:function(a,b){b.stopPropagation();var c=this.getSharedState("operation"),d=a.serializeOptions();delete d.id,delete d.type,a.hasOption("image")&&(d.image=a.getImage());var e=c.getInputDimensions();d.position.add(new y(10,10).divide(e));var f=this._createSprite(d);this.setSharedState({selectedSprite:f}),c.addSprite(f),this.props.controls.addLocalHistorySnapshot("sprite-creation",!1),this.context.editor.render()}},{key:"_selectNextSprite",value:function(){var a=this.getSharedState("operation").getSprites(),b=a[a.length-1];b?this.setSharedState({selectedSprite:b}):(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default"))}},{key:"_getComponentTypeForSprite",value:function(a){var b=q.Operations.SpriteOperation;switch(a.constructor){case b.StickerSprite:return s.a;case b.TextSprite:return t.a;case b.BrushSprite:return u.a;case b.TextDesignSprite:return v.a}}},{key:"_getPropsForSprite",value:function(a){return{hideContent:!0,isTextMaskingInverted:a.getInverted&&a.getInverted()}}},{key:"_renderSpriteItems",value:function(a){var b=this,c=this.getSharedState("selectedSprite");return a.map(function(a){var d=b._getComponentTypeForSprite(a),e=b._getPropsForSprite(a),f=c===a;return r.React.createElement(d,w({sprite:a,selected:f,onClick:b._onCanvasClick,onAfterChange:b._onAfterTransform.bind(b,a),onCanvasClickDisabled:b._onCanvasClickDisabled,onCanvasClickEnabled:b._onCanvasClickEnabled,onDelete:b._onSpriteDelete.bind(b,a),onTakeToFront:b._onSpriteTakeToFront.bind(b,a),onMaskCanvas:b._onSpriteMaskCanvas.bind(b,a),onFlipHorizontally:b._onSpriteFlipHorizontally.bind(b,a),onDuplicate:b._onSpriteDuplicate.bind(b,a),snapRotation:b.props.options.snapRotation,snapRotationTolerance:b.props.options.snapRotationTolerance,canvasControls:b,key:a.getId()},e))})}},{key:"_renderOverlayControls",value:function(){return null}},{key:"_renderControls",value:function(){var a=this;if(this.state.visible){var b=this.getSharedState("operation").getSprites(),c=this._container&&this._getContainerStyle();return r.React.createElement(A,{className:void 0},r.React.createElement(B,{innerRef:function(b){a._innerContainer=b},style:c,className:void 0},!this.state.canvasClickDisabled&&r.React.createElement(C,{onClick:this._onCanvasClick}),r.React.createElement("div",null,this._renderSpriteItems(b),this._renderOverlayControls())))}}}]),b}();z.contextTypes=r.CanvasControlsComponent.contextTypes,b.a=z;var A=r.adonis.div("120drhm","CanvasControls"),B=r.adonis.div("1anj0of","Container"),C=r.adonis.div("o35414","ClickHandlerForInternetExplorer")},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(33),o=(c.n(n),c(7)),p=(c.n(o),c(5)),q=(c.n(p),e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=o.Math.Vector2,t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f.CONTROLS_MARGIN=0,f._bindAll("_onDragStart","_onDrag","_onDragStop","_onRotateDragStart","_onRotateDrag","_onRotateDragStop","_onCornerDrag","_onCornerDragStop","_onPaddingAdjustmentArrowMouseDown","_onPaddingAdjustmentArrowDrag","_onPaddingAdjustmentArrowMouseUp","_onSpriteUpdate","_onTakeToFront","_onMaskCanvas","_onFlipHorizontally","_onDuplicate","_onDelete"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.BaseComponent),r(b,[{key:"componentDidMount",value:function(){this.props.sprite.on("update",this._onSpriteUpdate)}},{key:"componentWillUnmount",value:function(){this.props.sprite.off("update",this._onSpriteUpdate)}},{key:"componentWillReceiveProps",value:function(a){this.props.sprite.off("update",this._onSpriteUpdate),a.sprite.on("update",this._onSpriteUpdate)}},{key:"_onSpriteUpdate",value:function(){this.forceUpdate()}},{key:"_onTakeToFront",value:function(a){a.stopPropagation(),this.props.onTakeToFront&&this.props.onTakeToFront(a)}},{key:"_onMaskCanvas",value:function(a){a.stopPropagation(),this.props.onMaskCanvas&&this.props.onMaskCanvas(a)}},{key:"_onFlipHorizontally",value:function(a){a.stopPropagation(),this.props.onFlipHorizontally&&this.props.onFlipHorizontally(a)}},{key:"_onDelete",value:function(a){a.stopPropagation(),this.props.onDelete&&this.props.onDelete(a)}},{key:"_onDuplicate",value:function(a){a.stopPropagation(),this.props.onDuplicate&&this.props.onDuplicate(a)}},{key:"_onBeforeScale",value:function(){}},{key:"_onScale",value:function(a){}},{key:"_onRotateDragStart",value:function(){this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onRotateDrag",value:function(a,b){var c=this.context.editor,d=this.props.sprite,e=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y).clone(),f=b.clone().subtract(this._containerOffset).subtract(e),g=Math.atan2(f.y,f.x)-Math.PI/2,h=this.props,i=h.snapRotation,j=h.snapRotationTolerance,k=Math.round(180*g/Math.PI),l=Math.round(k/i)*i,m=k-l;Math.abs(m)<j&&(g=l*Math.PI/180),d.setRotation(g),c.render(),this.forceUpdate()}},{key:"_onRotateDragStop",value:function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_onCornerDragStart",value:function(a,b,c,d){var e=this.context.editor,f=this.props.sprite,g=f.getDimensions(e.getSDK(),e.getOutputDimensions()).x,h=new s(this.CONTROLS_MARGIN,this.CONTROLS_MARGIN);this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset().subtract(h);var i=f.getPivot(),j=f.getAnchor(),k=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),l=f.getDimensions(e.getSDK(),e.getOutputDimensions()),m=new s(l.width,l.height),n=k.clone().subtract(m.clone().multiply(j)).add(m.clone().multiply(i)).round(),o=d.clone().subtract(this._containerOffset).subtract(n);this._initialScaleSettings={width:g,mouseDistanceFromPivot:o},this._onBeforeScale(),this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onCornerDrag",value:function(a){var b=this.context.editor,c=this.props.sprite.getRotation(),d=this._initialScaleSettings,e=d.width,f=d.mouseDistanceFromPivot.clone().add(a),g=Math.cos(c),h=Math.sin(c),i=Math.max(Math.abs(2*(f.x*g+f.y*h)),this.constructor.MIN_WIDTH)/e;b.render(),this._onScale(i)}},{key:"_onCornerDragStop",value:function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_onPaddingAdjustmentArrowMouseDown",value:function(a,b){var c=this;a.preventDefault(),a.stopPropagation(),this._initialDragPaddingMousePos=new s(a.pageX,a.pageY),"left"===b?this._initialDragPaddingMousePos.x+=this._getPaddingArrowsPos():"right"===b&&(this._initialDragPaddingMousePos.x+=-1*this._getPaddingArrowsPos()),this._handlePaddingAdjustmentArrowDrag=function(a){return c._onPaddingAdjustmentArrowDrag(a,b)},this.context.options.container.addEventListener("mousemove",this._handlePaddingAdjustmentArrowDrag),this.context.options.container.addEventListener("mouseup",this._onPaddingAdjustmentArrowMouseUp)}},{key:"_onPaddingAdjustmentArrowDrag",value:function(a,c){var d=this.props.sprite,e=this.context.editor,f=b.PADDING_MULTIPLIER,g=new s(a.pageX,a.pageY),h=d.getRotation(),i=Math.cos(h),j=Math.sin(h),k="left"===c?-1:1,l=new s(k*i,k*j),m=g.clone().subtract(this._initialDragPaddingMousePos),n=l.clone().multiply(l.clone().dot(m.clone())/Math.sqrt(l.len(),2)),p=n.x*l.x>=0&&n.y*l.y>=0,q=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)),r=p?q:0,t=e.getOutputDimensions(),u=Math.min(t.x,t.y),v=d.getDimensions(),w=v.x,x=v.y,y=Math.sqrt(Math.pow(w,2)+Math.pow(x,2))/Math.min(w,x),z=Math.max(r/u,0)/d.getWidth()*f;z=o.Utils.clamp(z,b.PADDING_MIN_VALUE,y),this.props.sprite.setPadding(z),this.context.editor.render()}},{key:"_onPaddingAdjustmentArrowMouseUp",value:function(a){this._initialDragPaddingMousePos=null,this.context.options.container.removeEventListener("mousemove",this._handlePaddingAdjustmentArrowDrag),this.context.options.container.removeEventListener("mouseup",this._onPaddingAdjustmentArrowMouseUp)}},{key:"_getPaddingArrowsPos",value:function(){var a=b.PADDING_MIN_VALUE,c=b.PADDING_MULTIPLIER,d=this.props.sprite.getPadding(),e=this.context.editor.getOutputDimensions(),f=Math.min(e.x,e.y);return d*this.props.sprite.getWidth()/c*f-a}},{key:"_isDraggingDisabled",value:function(){return!this.props.selected}},{key:"_onDragStart",value:function(){var a=this.props.sprite;this._initialPosition=a.getPosition(),this.props.onBeforeChange&&this.props.onBeforeChange()}},{key:"_onDrag",value:function(a){var b=this.props.sprite,c=this.context.editor,d=c.getOutputDimensions(),e=this._initialPosition.clone().add(a.divide(d));this._dragEndPosition=e.clone(),b.setPosition(e),c.render(),this.forceUpdate()}},{key:"_onDragStop",value:function(){this._dragEndPosition&&0!==this._dragEndPosition.clone().subtract(this._initialPosition).len()&&this.props.onAfterChange&&this.props.onAfterChange()}},{key:"_getAbsoluteSpritePosition",value:function(){var a=this.context.editor.getOutputDimensions();return this.props.sprite.getPosition().clone().multiply(a)}},{key:"_getContainerStyle",value:function(){return{}}},{key:"_renderControls",value:function(){var a=this,b=[];if(["top","bottom"].forEach(function(c){["left","right"].forEach(function(d){var e=c+"-"+d,f=function(a,b,c){return b in a?g()(a,b,{value:!0,enumerable:!0,configurable:!0,writable:!0}):a[b]=!0,a}({},e);b.push(p.React.createElement(p.DraggableComponent,{key:e,onStart:a._onCornerDragStart.bind(a,c,d),onDrag:a._onCornerDrag,onStop:a._onCornerDragStop},p.React.createElement(D,f)))})}),this.props.sprite.canAdjustPadding()&&this.props.sprite.getInverted()){var c=this._getPaddingArrowsPos()
;b.push(p.React.createElement(x,{key:"masking-padding-arrow-left",onMouseDown:function(b){return a._onPaddingAdjustmentArrowMouseDown(b,"left")},style:{transform:"translate("+-c+"px, -50%)",backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/arrow-left.png",!0)+"')"}})),b.push(p.React.createElement(y,{key:"masking-padding-arrow-right",onMouseDown:function(b){return a._onPaddingAdjustmentArrowMouseDown(b,"right")},style:{transform:"translate("+c+"px, -50%)",backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/arrow-right.png",!0)+"')"}}))}return b}},{key:"_getSpriteDimensions",value:function(){var a=this.context.editor,b=this.props.sprite,c=a.getOutputDimensions();return b.getDimensions(a.getSDK(),c)}},{key:"_getOverlayPosition",value:function(){var a=this.context.editor,b=this.props.sprite,c=a.getOutputDimensions(),d=this._getSpriteDimensions(),e=b.getPosition().clone().multiply(c),f=b.getRotation(),g=Math.sin(f),h=Math.cos(f),i=new s(Math.abs(d.x*h)+Math.abs(d.y*g),Math.abs(d.x*g)+Math.abs(d.y*h));return new s(e.x,e.y-i.y/2-70).clamp(new s(80,20),c.clone().subtract(80,70))}},{key:"_renderOverlayControls",value:function(){if(this.props.selected)return p.React.createElement(p.CanvasOverlayControlsComponent,q({},this.props,{takeToFront:this.props.sprite.canBeTakenToFront(),flipHorizontally:this.props.sprite.canBeFlippedHorizontally(),duplicate:this.props.sprite.canBeDuplicated(),maskCanvas:this.props.sprite.canMaskCanvas(),delete:this.props.sprite.canBeDeleted(),position:this._getOverlayPosition(),onTakeToFront:this._onTakeToFront,onMaskCanvas:this._onMaskCanvas,onFlipHorizontally:this._onFlipHorizontally,onDuplicate:this._onDuplicate,onDelete:this._onDelete}))}},{key:"_getItemControlsProps",value:function(){return{}}},{key:"render",value:function(){var a=this,b=this.props,c=b.selected,d=b.sprite,e=this.state.editing,f=!e,g=[this._renderControls(),p.React.createElement(A,{key:"rotateControls"},p.React.createElement(p.DraggableComponent,{onStart:this._onRotateDragStart,onDrag:this._onRotateDrag,onStop:this._onRotateDragStop},p.React.createElement(C,null)))],h=this._getItemControlsProps(),i=p.React.createElement(w,q({style:this._getContainerStyle()},h),g);return p.React.createElement(p.DraggableComponent,{onStart:this._onDragStart,onStop:this._onDragStop,onDrag:this._onDrag,disabled:this._isDraggingDisabled()},p.React.createElement(u,{onClick:this.props.onClick,"data-type":d.constructor.type,"data-selected":c,className:void 0},this._renderOverlayControls(),p.React.createElement(v,{style:this._getContainerStyle(),editing:c&&e,innerRef:function(b){a._container=b},className:void 0},p.React.createElement(z,null,this._renderContent()),c&&!f&&g),c&&f&&i))}}]),b}();t.contextTypes=p.BaseComponent.contextTypes,t.defaultProps={snapRotation:90,snapRotationTolerance:5},t.MIN_WIDTH=1,t.PADDING_MULTIPLIER=4,t.PADDING_MIN_VALUE=.01,b.a=t;var u=p.adonis.div("120drhm","OuterContainer"),v=p.adonis.div("bkf7u8",{editing:"64zghi"},"Container"),w=p.adonis.div("36haff","ItemControls"),x=p.adonis.div("1wn24iy","PaddingAdjustmentArrowLeft"),y=Object(p.adonis)(x)("1md0hz0","PaddingAdjustmentArrowRight"),z=p.adonis.div("120drhm","Content"),A=p.adonis.div("77tiy3","RotateControl"),B=p.adonis.div("mznefm","Knob"),C=Object(p.adonis)(B)("1y58ox1","RotateKnob"),D=Object(p.adonis)(B)("bdmepn",{"top-left":"1dtvxe8","top-right":"1tu191k","bottom-left":"1we5ut6","bottom-right":"f2wva1"},"CornerKnob")},function(a,b,c){var d=c(17),e=c(13).document,f=d(e)&&d(e.createElement);a.exports=function(a){return f?e.createElement(a):{}}},function(a,b,c){var d=c(17);a.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},function(a,b,c){var d=c(42),e=c(28),f=c(20),g=c(58),h=c(21),i=c(85),j=Object.getOwnPropertyDescriptor;b.f=c(18)?j:function(a,b){if(a=f(a),b=g(b,!0),i)try{return j(a,b)}catch(a){}if(h(a,b))return e(!d.f.call(a,b),a[b])}},function(a,b){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(a,b,c){var d=c(14),e=c(148),f=c(66),g=c(64)("IE_PROTO"),h=function(){},i=function(){var a,b=c(57)("iframe"),d=f.length;for(b.style.display="none",c(88).appendChild(b),b.src="javascript:",(a=b.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),i=a.F;d--;)delete i.prototype[f[d]];return i()};a.exports=Object.create||function(a,b){var c;return null!==a?(h.prototype=d(a),c=new h,h.prototype=null,c[g]=a):c=i(),void 0===b?c:e(c,b)}},function(a,b,c){var d=c(63),e=Math.min;a.exports=function(a){return a>0?e(d(a),9007199254740991):0}},function(a,b){var c=Math.ceil,d=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?d:c)(a)}},function(a,b,c){var d=c(65)("keys"),e=c(43);a.exports=function(a){return d[a]||(d[a]=e(a))}},function(a,b,c){var d=c(13),e=d["__core-js_shared__"]||(d["__core-js_shared__"]={});a.exports=function(a){return e[a]||(e[a]={})}},function(a,b){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(a,b,c){var d=c(12),e=c(10),f=c(24);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(29),e=c(11)("toStringTag"),f="Arguments"==d(function(){return arguments}());a.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=function(a,b){try{return a[b]}catch(a){}}(b=Object(a),e))?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}},function(a,b,c){var d=c(68),e=c(11)("iterator"),f=c(26);a.exports=c(10).getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}},function(a,b,c){var d,e,f,g=c(23),h=c(169),i=c(88),j=c(57),k=c(13),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=k.Dispatch,q=0,r={},s=function(){var a=+this;if(r.hasOwnProperty(a)){var b=r[a];delete r[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return r[++q]=function(){h("function"==typeof a?a:Function(a),b)},d(q),q},n=function(a){delete r[a]},"process"==c(29)(l)?d=function(a){l.nextTick(g(s,a,1))}:p&&p.now?d=function(a){p.now(g(s,a,1))}:o?(f=(e=new o).port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d="onreadystatechange"in j("script")?function(a){i.appendChild(j("script")).onreadystatechange=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),a.exports={set:m,clear:n}},function(a,b,c){var d=c(41);a.exports.f=function(a){return new function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=d(b),this.reject=d(c)}(a)}},function(a,b){b.f=Object.getOwnPropertySymbols},function(a,b,c){b.f=c(11)},function(a,b,c){var d=c(13),e=c(10),f=c(44),g=c(73),h=c(16).f;a.exports=function(a){var b=e.Symbol||(e.Symbol=f?{}:d.Symbol||{});"_"==a.charAt(0)||a in b||h(b,a,{value:g.f(a)})}},function(a,b,c){c.d(b,"a",function(){return d});var d={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};b.b={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_analog",defaultName:"Analog",filters:[{identifier:"imgly_lut_cool",defaultName:"Cool",lutImage:"filters/imgly_lut_cool_5_5_128.png"},{identifier:"imgly_lut_blues",defaultName:"Blues",lutImage:"filters/imgly_lut_blues_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Blue Shadows",lutImage:"filters/imgly_lut_blueshadows_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"KDynamic",lutImage:"filters/imgly_lut_kdynamic_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"}]},{identifier:"imgly_filters_bw",defaultName:"Black & White",filters:[{identifier:"imgly_lut_sin",defaultName:"Sin",lutImage:"filters/imgly_lut_sin_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"B & W",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Plate",lutImage:"filters/imgly_lut_plate_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"X400",lutImage:"filters/imgly_lut_x400_5_5_128.png"}]},{identifier:"imgly_filters_retro",defaultName:"Retro",filters:[{identifier:"imgly_lut_celsius",defaultName:"Celsius",lutImage:"filters/imgly_lut_celsius_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_k2",defaultName:"K2",lutImage:"filters/imgly_lut_k2_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia High",lutImage:"filters/imgly_lut_sepiahigh_5_5_128.png"},{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Eighties",lutImage:"filters/imgly_lut_eighties_5_5_128.png"},{identifier:"imgly_lut_elder",defaultName:"Elder",lutImage:"filters/imgly_lut_elder_5_5_128.png"},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Orchid",lutImage:"filters/imgly_lut_orchid_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"}]},{identifier:"imgly_filters_special",defaultName:"Special",filters:[{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Cotton Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"High Contrast",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_nogreen",defaultName:"No Green",lutImage:"filters/imgly_lut_nogreen_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Pola 669",lutImage:"filters/imgly_lut_pola669_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"}]},{identifier:"imgly_filters_summer",defaultName:"Summer",filters:[{identifier:"imgly_lut_texas",defaultName:"Texas",lutImage:"filters/imgly_lut_texas_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_chest",defaultName:"Chest",lutImage:"filters/imgly_lut_chest_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Evening",lutImage:"filters/imgly_lut_evening_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Fall",lutImage:"filters/imgly_lut_fall_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Front",lutImage:"filters/imgly_lut_front_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_sunset",defaultName:"Sunset",lutImage:"filters/imgly_lut_sunset_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"}]},{identifier:"imgly_filters_winter",defaultName:"Winter",filters:[{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_bleached",defaultName:"Bleached",lutImage:"filters/imgly_lut_bleached_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Bleached Blue",lutImage:"filters/imgly_lut_bleachedblue_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Breeze",lutImage:"filters/imgly_lut_breeze_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lenin",lutImage:"filters/imgly_lut_lenin_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_winter",defaultName:"Winter",lutImage:"filters/imgly_lut_winter_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{
uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}}},function(a,b,c){var d=c(36),e=c.n(d),f=c(37),g=c.n(f),h=c(0),i=c.n(h),j=c(8),k=c.n(j),l=c(243),m=c(246),n="function"==typeof g.a&&"symbol"==typeof e.a?function(a){return typeof a}:function(a){return a&&"function"==typeof g.a&&a.constructor===g.a&&a!==g.a.prototype?"symbol":typeof a},o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),i()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._fonts=c,this._loadedFonts=[]}return o(a,[{key:"setFonts",value:function(a){this._fonts=a}},{key:"needsToLoad",value:function(){for(var a=this,b=0;b<this._fonts.length;b++){var c=function(b){var c=void 0;return a._fonts[b].getVariations().forEach(function(a){c=c||a.getProvider()}),c?{v:!0}:"continue"}(b);switch(c){case"continue":continue;default:if("object"===(void 0===c?"undefined":n(c)))return c.v}}}},{key:"fontLoaded",value:function(a){var b=a.getFontFamily();return-1!==this._loadedFonts.indexOf(b)}},{key:"setFontLoaded",value:function(a){if(!this.fontLoaded(a)){var b=a.getFontFamily();this._loadedFonts.push(b)}}},{key:"load",value:function(){var a=this,b=this._fonts,c={google:new l.a(this._ui),file:new m.a(this._ui)},d=function(){for(var a in c)c[a].dispose()};b.filter(function(b){return!a.fontLoaded(b)}).forEach(function(a){a.getVariations().forEach(function(a){var b=a.getProvider();b&&c[b].add(a)})});var e=[];for(var f in c)e.push(c[f].load());return k.a.all(e).then(function(){d(),b.forEach(function(b){a.setFontLoaded(b)})}).catch(function(a){throw d(),a})}}]),a}();b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(116),o=c(118),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},r=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.a),p(b,[{key:"_serializeSticker",value:function(a,c){var d=a.getInputDimensions(!1),e=q(b.prototype.__proto__||m()(b.prototype),"_serializeSticker",this).call(this,a,c);return"none"!==c.getTintMode()&&(e.options.tintColor=c.serializeOption("tintColor",!0)),e.options.dimensions=c.getDimensions().clone().divide(d.min()).toObject(),e.options.identifier=e.options.name,delete e.options.name,e}},{key:"_serializePath",value:function(a){var c=q(b.prototype.__proto__||m()(b.prototype),"_serializePath",this).call(this,a),d=a.getBrush();return d.hasOption("hardness")&&(c.hardness=d.getOption("hardness")),c}},{key:"_serializeOperation",value:function(a,c){return"frame"===a.constructor.identifier?(this._serializeFrameOperation(a,c),null):"overlay"===a.constructor.identifier?(this._serializeOverlayOperation(a,c),null):q(b.prototype.__proto__||m()(b.prototype),"_serializeOperation",this).call(this,a,c)}},{key:"_serializeFrameOperation",value:function(a,b){var c=b.filter(function(a){return"sprite"===a.type}),d=void 0;c.length?d=c.pop():(d={type:"sprite",options:{sprites:[]}},b.push(d)),d.options.sprites.push({type:"frame",options:this._getFrameOptions(a)})}},{key:"_serializeOverlayOperation",value:function(a,b){if(a.getIdentifier()){var c=b.filter(function(a){return"sprite"===a.type}),d=void 0;c.length?d=c.pop():(d={type:"sprite",options:{sprites:[]}},b.push(d)),d.options.sprites.push({type:"overlay",options:{identifier:a.getIdentifier(),intensity:a.getAlpha(),blendMode:o.a[a.getBlendMode()]}})}}},{key:"_getFrameOptions",value:function(a){return{identifier:a.getFrame().identifier}}},{key:"_serializeOrientationOperation",value:function(a){var c=q(b.prototype.__proto__||m()(b.prototype),"_serializeOrientationOperation",this).call(this,a);return 90!==c.options.rotation&&270!==c.options.rotation||(c.options.flipHorizontally=!c.options.flipHorizontally,c.options.flipVertically=!c.options.flipVertically),c}},{key:"_serializeTransformOperation",value:function(a){var c=this._editor.operations;if(c.exists("orientation")){a=a.clone();var d=c.get("orientation");a.rotate(-d.getRotation()),d.getFlipVertically()&&(a.flip("vertical"),a.setRotation(-1*a.getRotation())),d.getFlipHorizontally()&&(a.flip("horizontal"),a.setRotation(-1*a.getRotation()))}var e=q(b.prototype.__proto__||m()(b.prototype),"_serializeTransformOperation",this).call(this,a);return e.type="transform",e}},{key:"_serializeText",value:function(a,c){var d=q(b.prototype.__proto__||m()(b.prototype),"_serializeText",this).call(this,a,c),e=a.getInputDimensions(!1);return d.options.fontIdentifier=c.getFontIdentifier(),d.options.maxWidth=d.options.maxWidth*e.x/e.min(),delete d.options.fontFamily,d}},{key:"_serializeFilterOperation",value:function(a){var c=q(b.prototype.__proto__||m()(b.prototype),"_serializeFilterOperation",this).call(this,a);return c?(c.options.identifier=c.options.name,delete c.options.name,c):null}},{key:"_serializeRadialFocusOperation",value:function(a){var c=q(b.prototype.__proto__||m()(b.prototype),"_serializeRadialFocusOperation",this).call(this,a),d=c.options.options;return d.start=d.position,delete d.position,d.end={x:d.start.x+d.radius,y:d.start.y},delete d.radius,c}}]),b}();b.a=r,r.version="2.0.0"},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(8),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=c(117),r=c(119),s=c(120),t=c(51),u=c(121),v=c(76),w=c(27),x=c(118),y=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),z=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},A=p.q.flipObject(x.a),B=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));f._frameManager=new r.a(f._ui,f._getOptions("frame"));var g=f._getOptions("overlay");return g&&(f._overlayManager=new s.a(f._ui,g)),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,q.a),y(b,[{key:"_deserializeSprite",value:function(a,c){return"frame"===c.type?this._deserializeFrame(a,c):"overlay"===c.type?this._deserializeOverlay(a,c):z(b.prototype.__proto__||o()(b.prototype),"_deserializeSprite",this).call(this,a,c)}},{key:"_deserializeOperation",value:function(a){return"transform"===a.type?this._deserializeTransformOperation(a):z(b.prototype.__proto__||o()(b.prototype),"_deserializeOperation",this).call(this,a)}},{key:"_deserializeOrientationOperation",value:function(a){return 90!==a.options.rotation&&270!==a.options.rotation||(a.options.flipHorizontally=!a.options.flipHorizontally,a.options.flipVertically=!a.options.flipVertically),z(b.prototype.__proto__||o()(b.prototype),"_deserializeOrientationOperation",this).call(this,a)}},{key:"_deserializeTransformOperation",value:function(a){var c=this
;return z(b.prototype.__proto__||o()(b.prototype),"_deserializeCropOperation",this).call(this,a).then(function(a){if(a){var b=p.q.Array.find(c._data.operations,function(a){return"orientation"===a.type});if(b){var d=b.options,e=d.rotation,f=d.flipHorizontally,g=d.flipVertically;90!==e&&270!==e||(!f&&g||f&&!g)&&(f=!f,g=!g),a.rotate(d.rotation),f&&(a.flip("horizontal"),a.setRotation(-1*a.getRotation())),g&&(a.flip("vertical"),a.setRotation(-1*a.getRotation()))}return a}})}},{key:"_deserializeFrame",value:function(a,b){var c=this,d=b.options.identifier,e=this._frameManager.getFrameByIdentifier(d);if(!e)return p.h.warn("Deserializer","Unknown frame `"+d+"`. Skipping frame."),m.a.resolve();var f=new u.a(this._ui,e);return f.load().then(function(){c._editor.operations.getOrCreate("frame",{frame:f.getFrame()})})}},{key:"_deserializeOverlay",value:function(a,b){var c=this,d=b.options,e=d.blendMode,f=d.intensity,g=d.identifier,h=this._overlayManager.getOverlayByIdentifier(g);if(!h)return p.h.warn("Deserializer","Unknown overlay `"+g+"`. Skipping overlay."),m.a.resolve();var i=this._editor.getUI().getAssetPath(h.image);return w.a.load(i).then(function(a){c._editor.operations.getOrCreate("overlay",{alpha:f,identifier:g,blendMode:parseInt(A[e||h.blendMode],10),image:a})})}},{key:"_createBrushForPath",value:function(a){var c=z(b.prototype.__proto__||o()(b.prototype),"_createBrushForPath",this).call(this,a);return void 0!==a.hardness&&c.hasOption("hardness")&&c.setHardness(a.hardness),c}},{key:"_deserializeSticker",value:function(a,b){var c=this,d=p.p.Operations.SpriteOperation,e=b.options,f=this._stickerManager.getStickerByIdentifier(e.identifier),g=t.a.getURLForSticker(f,"base");if(!f)return p.h.warn("Deserializer","Unknown sticker `"+e.identifier+"`. Skipping sprite."),m.a.resolve();var h=a.getInputDimensions(!1);return new m.a(function(b,i){var j=new window.Image;j.addEventListener("load",function(){var c=d.StickerSprite.prototype.availableOptions.adjustments.structure,g=e.rotation,i=e.flipHorizontally,k=e.flipVertically,l={identifier:e.identifier,image:j,position:p.v.fromObject(e.position),dimensions:p.v.fromObject(e.dimensions).multiply(h.min()),rotation:g,flipHorizontally:i,flipVertically:k,adjustments:{}};void 0!==e.adjustments&&["brightness","contrast","saturation"].forEach(function(a){void 0!==e.adjustments[a]&&(l.adjustments[a]=e.adjustments[a]+c[a].default)}),void 0!==e.tintColor&&void 0!==f.tintMode&&(l.tintColor=p.c.fromArray(e.tintColor),l.tintMode=f.tintMode),b(a.createSticker(l))}),j.crossOrigin=c._editor.getCrossOrigin(),j.src=c._editor.getUI().getAssetPath(g)})}},{key:"_deserializeFilterOperation",value:function(a){var b=this,c=a.options;return this._filterManager.getFilterByIdentifier(c.identifier)?this._filterManager.instantiateFilterWithIdentifier(c.identifier).then(function(a){var d=b._editor.operations.getOrCreate("filter");if(d)return d.set({identifier:c.identifier,filter:a,intensity:c.intensity}),d}):(p.h.warn("Deserializer","Unknown filter `"+c.identifier+"`"),m.a.resolve())}},{key:"_deserializeFocusOperation",value:function(a){var c=a.options,d=c.options;if("radial"!==c.type)return z(b.prototype.__proto__||o()(b.prototype),"_deserializeFocusOperation",this).call(this,a);var e=d.start,f=d.end,g=d.gradientRadius,h=d.blurRadius,i=p.v.fromObject(f).subtract(p.v.fromObject(e)).len();return m.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:p.v.fromObject(e),radius:i,gradientRadius:g,blurRadius:h}))}},{key:"_deserializeText",value:function(a,b){var c=b.options,d=c.fontSize,e=c.lineHeight,f=c.fontIdentifier,g=c.alignment,h=c.rotation,i=c.maxWidth,j=c.color,k=c.backgroundColor,l=new v.a(this._ui),m=this._fontManager.getVariationByIdentifier(f);return m?l.setFonts([m.getFont()]):m=this._fontManager.getDefaultFont(),l.load().then(function(){var b=a.getInputDimensions(!1),f=i*b.min()/b.x;return a.createText({fontSize:d,lineHeight:e,fontFamily:m.getFontFamily(),fontWeight:m.getFontWeight(),fontIdentifier:m.getIdentifier(),alignment:g,rotation:h,maxWidth:f,text:c.text,color:p.c.fromArray(j),backgroundColor:p.c.fromArray(k),position:p.v.fromObject(c.position)})})}}]),b}();b.a=B,B.version="2.0.0"},function(a,b,c){function d(a,b,c){return b in a?f()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(0),f=c.n(e),g=c(6),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=c(53),q=c(261),r=c(22),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function a(b,c,d){null===b&&(b=Function.prototype);var e=h()(b,c);if(void 0===e){var f=n()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},u=function(a){function b(){var a,c;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._needsStyleFixes=!0,h._bindAll("_onZoom","_onZoomDone","_onCanvasDrag","_onCanvasDragStart","_onCanvasDragStop","_onCanvasClick","_onCanvasClickDisabled","_onCanvasClickEnabled"),h._initialRerender=!0,h._events=(d(c={},o.d.EVENTS.ZOOM,h._onZoom),d(c,o.d.EVENTS.ZOOM_DONE,h._onZoomDone),c),h.state={canvasClickDisabled:!1,displayHeader:!0},h}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}(b,p.a),s(b,[{key:"setSharedState",value:function(a){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t(b.prototype.__proto__||n()(b.prototype),"setSharedState",this).call(this,a,c),d&&this.props.controls.updateSharedState()}},{key:"fixStyles",value:function(){if(o.u.Browser.isIElte(11)){var a=this._outerContainer.offsetHeight;this._container.style.height=a+"px"}}},{key:"componentDidMount",value:function(){t(b.prototype.__proto__||n()(b.prototype),"componentDidMount",this).call(this),this._initialRerender&&this.forceUpdate()}},{key:"_performHitTest",value:function(a){var b=this.context.appComponent.getBounds(),c=a.subtract(b.left,b.top),d=this.context.editor,e=d.controls.getAvailable();if(this.props.controls){var f=this.props.controls.constructor.clickAtPosition(a,d);if(f)return this.setSharedState(f),!0}if(d.operations.get("sprite")){var g=this._getTopSpriteAtPosition(c);if(g){if(g.selectedSprite===this.getSharedState("selectedSprite"))return!0;var h=g.selectedSprite.serializeOptions().type;if(h){var i=e[h];if(i&&i.clickAtPosition(c,d))return this.context.screen.switchToControls(h,g),!0}}}for(var j in e){var k=e[j].clickAtPosition(c,d);if(k)return k.selectedSprite===this.getSharedState("selectedSprite")||(this.context.screen.switchToControls(j,k),!0)}return!1}},{key:"_getTopSpriteAtPosition",value:function(a){var b=this.context.editor,c=b.operations.get("sprite");if(!c)return!1;var d=c.getSpritesAtPosition(a,b.getOutputTextureDimensions());return!!d[0]&&{selectedSprite:d[0]}}},{key:"_onCanvasClickDisabled",value:function(){this.setState({canvasClickDisabled:!0})}},{key:"_onCanvasClickEnabled",value:function(){var a=this;Object(o.z)(function(){a.setState({canvasClickDisabled:!1})})}},{key:"_onCanvasClick",value:function(a){var b=o.u.getEventPosition(a);this._performHitTest(b)}},{key:"_onZoom",value:function(){this.forceUpdate()}},{key:"_onZoomDone",value:function(){this.forceUpdate()}},{key:"_onCanvasDragStart",value:function(){var a=this.context.editor;this._initialOffset=a.offset.clone()}},{key:"_onCanvasDrag",value:function(a){var b=this.context.editor,c=b.offset;b.offset=c.copy(this._initialOffset).add(a),b.render()}},{key:"_onCanvasDragStop",value:function(){this.forceUpdate()}},{key:"getImageBoundingRect",value:function(){var a=this.context.editor.getSDK(),b=a.getContainer(),c=a.getSprite(),d=b.getPosition(),e=c.getTexture();if(a.getTextureScale(),!e)return new o.n;var f=a.getOutputDimensions(),g=this._outerContainer.getBoundingClientRect(),h=this.context.appComponent.getBounds();return new o.n(Math.floor(d.x-f.x/2-(g.left-h.left)),Math.floor(d.y-f.y/2-(g.top-h.top)),Math.ceil(f.x),Math.ceil(f.y))}},{key:"getContainerOffset",value:function(){var a=this._outerContainer.getBoundingClientRect();return new o.v(a.left,a.top)}},{key:"_getContainerStyle",value:function(){var a=this.getImageBoundingRect();return{left:a.x,top:a.y,width:a.width,height:a.height}}},{key:"_renderControls",value:function(){var a=this,b=this._imageContainer&&this._getContainerStyle();return o.l.createElement(v,{innerRef:function(b){a._imageContainer=b},style:b,onClick:this._onCanvasClick})}},{key:"render",value:function(){var a=this,b=this.context.editor;return o.l.createElement(w,{draggable:!b.isShallow&&b.isDraggable,className:void 0,innerRef:function(b){a._outerContainer=b}},o.l.createElement(r.a,{disabled:b.isShallow||!b.isDraggable,onStart:this._onCanvasDragStart,onDrag:this._onCanvasDrag,onStop:this._onCanvasDragStop},o.l.createElement("div",null,o.l.createElement(x,{innerRef:function(b){a._container=b}},this.state.displayHeader&&o.l.createElement(q.a,null),this._renderControls()))))}},{key:"container",get:function(){return this._container}}]),b}();u.contextTypes=p.a.contextTypes,u.propTypes={options:o.k.object},b.a=u;var v=o.w.div("55byom","Container"),w=o.w.div("1ebx3lr",{draggable:"ovipzq"},"CanvasControls"),x=o.w.div("1h6ank1","CanvasControlsContainer")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(22),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var a=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this));return a.constructor.NATIVE_SCROLLBAR_WIDTH||(a.constructor.NATIVE_SCROLLBAR_WIDTH=n.u.getScrollbarWidth()),a._isDragging=!1,a._bindAll("_onButtonDragStart","_onButtonDrag","_onButtonDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop","_onListScroll"),a.state={buttonSize:0,buttonPosition:0,buttonVisible:!1},a}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),p(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this.update()}},{key:"_onListScroll",value:function(){if(!this._isDragging){var a=this._getDirection(),c=void 0,d=void 0,e=void 0;a===b.HORIZONTAL?(c=this._list.scrollWidth-this._list.offsetWidth,d=this._list.scrollLeft,e=this._root.offsetWidth-this.state.buttonSize):a===b.VERTICAL&&(c=this._list.scrollHeight-this._list.offsetHeight,d=this._list.scrollTop,e=this._root.offsetHeight-this.state.buttonSize);var f=d/c;this.setState({buttonPosition:e*f}),this.props.onScroll&&this.props.onScroll(d)}}},{key:"_onButtonDragStart",value:function(a){this._isDragging=!0,this._initialButtonPosition=this.state.buttonPosition||0}},{key:"_onButtonDrag",value:function(a){var c=this._getDirection(),d=void 0;c===b.HORIZONTAL?d=this._initialButtonPosition+a.x:c===b.VERTICAL&&(d=this._initialButtonPosition+a.y),this._setButtonPosition(d)}},{key:"_onButtonDragStop",value:function(){this._isDragging=!1}},{key:"_onBarDragStart",value:function(a){var c=n.u.getEventPosition(a);this._initialPosition=c.clone();var d=this._root.getBoundingClientRect(),e=new n.v(d.left,d.top),f=c.clone().subtract(e),g=this._getDirection();g===b.HORIZONTAL?this._setButtonPosition(f.x-this.state.buttonSize/2):g===b.VERTICAL&&this._setButtonPosition(f.y-this.state.buttonSize/2),document.addEventListener("mousemove",this._onBarDrag),document.addEventListener("touchmove",this._onBarDrag),document.addEventListener("mouseup",this._onBarDragStop),document.addEventListener("touchend",this._onBarDragStop)}},{key:"_onBarDrag",value:function(a){var c=n.u.getEventPosition(a),d=this._root.getBoundingClientRect(),e=new n.v(d.left,d.top),f=c.clone().subtract(e),g=this._getDirection();g===b.HORIZONTAL?this._setButtonPosition(f.x-this.state.buttonSize/2):g===b.VERTICAL&&this._setButtonPosition(f.y-this.state.buttonSize/2)}},{key:"_onBarDragStop",value:function(){document.removeEventListener("mousemove",this._onBarDrag),document.removeEventListener("touchmove",this._onBarDrag),document.removeEventListener("mouseup",this._onBarDragStop),document.removeEventListener("touchend",this._onBarDragStop)}},{key:"_setButtonPosition",value:function(a){var c=this._getDirection(),d=void 0,e=void 0;c===b.HORIZONTAL?(d=this._root.offsetWidth-this.state.buttonSize,e=this._list.scrollWidth-this._list.offsetWidth):c===b.VERTICAL&&(d=this._root.offsetHeight-this.state.buttonSize,e=this._list.scrollHeight-this._list.offsetHeight),a=Math.max(0,a),a=Math.min(a,d),this.setState({buttonPosition:a});var f=e*(a/d);c===b.HORIZONTAL?this._list.scrollLeft=f:c===b.VERTICAL&&(this._list.scrollTop=f),this.props.onScroll&&this.props.onScroll(f)}},{key:"_updateButtonSize",value:function(a){var c,d,e=void 0,f=void 0,g=this._getDirection();g===b.HORIZONTAL?(e=this._list.clientWidth,f=this._list.scrollWidth):g===b.VERTICAL&&(e=this._list.offsetHeight,f=this._list.scrollHeight),c=e/f*e,d=f>e,this.setState({buttonSize:c,buttonVisible:d},a)}},{key:"_updateListSize",value:function(){if(this._list){var a=this._getDirection();if(a===b.HORIZONTAL){this._list.style.height="";var c=this._getFullListDimensions();this._listSize=c.y}else if(a===b.VERTICAL){this._list.style.width="";var d=this._getFullListDimensions();this._listSize=d.x}}}},{key:"_getFullListDimensions",value:function(){var a=this._list.getBoundingClientRect();return new n.v(a.width,a.height)}},{key:"update",value:function(){var a=this;if(!n.u.isMobile()){if(n.u.Browser.isIElte(11)){var c=this._container.offsetHeight;this._list.style.height=c+"px"}var d=this._getDirection();this._updateButtonSize(function(){a._listSize||a._updateListSize();var c=a._listSize;a.state.buttonVisible&&(c+=a.constructor.NATIVE_SCROLLBAR_WIDTH),d===b.HORIZONTAL?(a._root.style.top=a._listSize-12+"px",a._root.style.width=a._list.offsetWidth+"px"):d===b.VERTICAL&&(a._list.style.width=c+"px",a._root.style.left=a._listSize-12+"px",a._root.style.height=a._list.offsetHeight+"px")}),this._list.addEventListener("scroll",this._onListScroll)}}},{key:"_getDirection",value:function(){return this.props.direction||"horizontal"}},{key:"_getGradientOpacity",value:function(){if(!this._list)return!1;var a=void 0;return a=this._getDirection()===b.HORIZONTAL?this._list.scrollWidth-this._list.offsetWidth-this._list.scrollLeft:this._list.scrollHeight-this._list.offsetHeight-this._list.scrollTop,Math.min(Math.max(a/15,0),1)}},{key:"_getButtonStyle",value:function(){return"horizontal"===this._getDirection()?{left:this.state.buttonPosition,width:this.state.buttonSize}:{top:this.state.buttonPosition,height:this.state.buttonSize}}},{key:"getList",value:function(){return this.refs.list}},{key:"getRoot",value:function(){return this.refs.root}},{key:"_renderChild",value:function(a){var b=this;return n.l.cloneElement(a,{innerRef:function(c){a.props.innerRef&&a.props.innerRef(c),b._list=c}})}},{key:"render",value:function(){var a=this;if(n.u.isMobile())return this.props.children;var c=this._getButtonStyle(),d=this._renderChild(this.props.children),e=this._getDirection(),f=this._getGradientOpacity();return n.l.createElement(r,{innerRef:function(b){a._container=b},styles:this.props.styles},d,this.props.noGradient||0===f?null:n.l.createElement(u,{style:{opacity:f},horizontal:e===b.HORIZONTAL,vertical:e===b.VERTICAL}),n.l.createElement(s,{innerRef:function(b){a._root=b},onMouseDown:this._onBarDragStart,onTouchStart:this._onBarDragStart,vertical:"vertical"===this.props.direction,horizontal:"horizontal"===this.props.direction},n.l.createElement(o.a,{onStart:this._onButtonDragStart,onDrag:this._onButtonDrag,onStop:this._onButtonDragStop},n.l.createElement(t,{style:c,visible:this.state.buttonVisible,onMouseDown:this._onButtonDown,vertical:"vertical"===this.props.direction,horizontal:"horizontal"===this.props.direction}))))}}]),b}();q.HORIZONTAL="horizontal",q.VERTICAL="vertical",q.contextTypes=n.b.contextTypes,b.a=q;var r=n.w.div("120drhm","ScrollbarContainer");q.RootElement=r;var s=n.w.div("1s3c4f0",{vertical:"1dvqwqc",horizontal:"1hu63yp"},"Scrollbar"),t=n.w.div("zxujnb",{vertical:"gma9v3",horizontal:"1h5ccdj",visible:"2jlos"},"ScrollbarButton"),u=n.w.div("pc5361",{horizontal:"felmtl",vertical:"1enskgl"},"Gradient")},function(a,b,c){c.d(b,"a",function(){return d});var d=c(4).w.css("nsck4j","Input")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(284),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(53),p=c(54),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onInputLiveChange","_onInputChange"),f.state={value:f.props.value},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,o.a),q(b,[{key:"componentWillReceiveProps",value:function(a){a.value!==this.state.value&&this.setState({value:a.value})}},{key:"_onInputLiveChange",value:function(a){this.setState({value:a.target.value})}},{key:"_onInputChange",value:function(a){var b=parseFloat(a.target.value);if(k()(b))return this.setState({value:this.props.value});var c=this.props,d=c.minValue,e=c.maxValue;b=n.u.toFixed(Math.max(d,Math.min(b,e)),1),this.props.onValueChange&&this.props.onValueChange(b),this.setState({value:b})}},{key:"_renderRightPart",value:function(){var a=this;return n.l.createElement(w,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:void 0,innerRef:function(b){a._input=b},disabled:this.props.disabled})}},{key:"render",value:function(){var a=this.props,b=a.label,c=a.inputLabel,d=a.className,e=a.disabled,f=a.styles,g="function"==typeof this._renderLeftPart;return n.l.createElement(s,{styles:f,className:d,disabled:e},n.l.createElement(t,null,g&&n.l.createElement(u,null,b&&n.l.createElement(v,{left:!0},b),this._renderLeftPart()),n.l.createElement(u,null,c&&n.l.createElement(v,null,c||" "),this._renderRightPart())))}}]),b}();r.contextTypes=o.a.contextTypes,b.a=r;var s=n.w.div("12okzzb",{disabled:"1voy7lm"},"ValueSelection");r.RootElement=s;var t=n.w.div("15u7gri","Row"),u=n.w.div("1hy9z1m",{bottomAligned:"17xdalt"},"Column"),v=n.w.div("ts1901",{left:"1ff3rj6"},"Title"),w=Object(n.w)(p.a)("myl4ow",{disabled:"18if3pn"},"InputField")},function(a,b,c){c.d(b,"a",function(){return e}),c.d(b,"b",function(){return f}),c.d(b,"c",function(){return g});var d=c(4),e=d.w.css("1ht9t4w","CircleSlider"),f=d.w.css("1ldv9bx","CircleSliderBackground"),g=d.w.css("7g0rty","CircleSliderKnob")},function(a,b,c){var d=c(7),e=(c.n(d),d.Engine.Filters.OverlayFilter);b.a={normal:e.BLEND_MODES.NORMAL,overlay:e.BLEND_MODES.OVERLAY,hardLight:e.BLEND_MODES.HARD_LIGHT,softLight:e.BLEND_MODES.SOFT_LIGHT,multiply:e.BLEND_MODES.MULTIPLY,darken:e.BLEND_MODES.DARKEN,lighten:e.BLEND_MODES.LIGHTEN,screen:e.BLEND_MODES.SCREEN,colorBurn:e.BLEND_MODES.COLOR_BURN}},function(a,b,c){a.exports=!c(18)&&!c(24)(function(){return 7!=Object.defineProperty(c(57)("div"),"a",{get:function(){return 7}}).a})},function(a,b,c){var d=c(29);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},function(a,b,c){var d=c(21),e=c(20),f=c(149)(!1),g=c(64)("IE_PROTO");a.exports=function(a,b){var c,h=e(a),i=0,j=[];for(c in h)c!=g&&d(h,c)&&j.push(c);for(;b.length>i;)d(h,c=b[i++])&&(~f(j,c)||j.push(c));return j}},function(a,b,c){var d=c(13).document;a.exports=d&&d.documentElement},function(a,b,c){var d=c(21),e=c(31),f=c(64)("IE_PROTO"),g=Object.prototype;a.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},function(a,b,c){c.d(b,"a",function(){return f});var d=c(158),e=c.n(d),f=e.a;e.a},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(32),o=c.n(n),p=c(33),q=c.n(p),r=c(7),s=(c.n(r),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._events={},f._needsStyleFixes=!1,f._bindAll("fixStyles"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,o.a.Component),s(b,[{key:"fixStyles",value:function(){return k.a.resolve()}},{key:"componentDidMount",value:function(){this._bindEvents(),this._needsStyleFixes&&(this.fixStyles(),this.context.options.responsive&&window.addEventListener("resize",this.fixStyles))}},{key:"componentWillUnmount",value:function(){this._unbindEvents(),(this.context&&this.context.options||this.props.options).responsive&&this._needsStyleFixes&&window.removeEventListener("resize",this.fixStyles)}},{key:"_bindAll",value:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){if("function"!=typeof a[b])throw new Error("_bindAll: `"+a.constructor.name+"."+b+"` is not a function.");a[b]=a[b].bind(a)})}},{key:"_t",value:function(a,b){return this.context.ui.translate(a,b)}},{key:"_getAssetPath",value:function(){var a;return(a=this.context.ui).getAssetPath.apply(a,arguments)}},{key:"_bindEvents",value:function(){for(var a in this._events){var b=this._events[a];this.context.mediator.on(a,b)}}},{key:"_unbindEvents",value:function(){for(var a in this._events){var b=this._events[a];this.context.mediator.off(a,b)}}},{key:"_emitEvent",value:function(a){for(var b,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(b=this.context.mediator).emit.apply(b,[a].concat(d))}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),b}();t.contextTypes={appComponent:q.a.object,editor:q.a.object,ui:q.a.object,options:q.a.object,mediator:q.a.object,screen:q.a.object,theme:q.a.object,globalState:q.a.object},b.a=t},function(a,b){},function(a,b,c){var d=c(44),e=c(12),f=c(94),g=c(19),h=c(21),i=c(26),j=c(162),k=c(45),l=c(89),m=c(11)("iterator"),n=!([].keys&&"next"in[].keys()),o=function(){return this};a.exports=function(a,b,c,p,q,r,s){j(c,b,p);var t,u,v,w=function(a){if(!n&&a in A)return A[a];switch(a){case"keys":case"values":return function(){return new c(this,a)}}return function(){return new c(this,a)}},x=b+" Iterator",y="values"==q,z=!1,A=a.prototype,B=A[m]||A["@@iterator"]||q&&A[q],C=!n&&B||w(q),D=q?y?w("entries"):C:void 0,E="Array"==b&&A.entries||B;if(E&&(v=l(E.call(new a)))!==Object.prototype&&v.next&&(k(v,x,!0),d||h(v,m)||g(v,m,o)),y&&B&&"values"!==B.name&&(z=!0,C=function(){return B.call(this)}),d&&!s||!n&&!z&&A[m]||g(A,m,C),i[b]=C,i[x]=o,q)if(t={values:y?C:w("values"),keys:r?C:w("keys"),entries:D},s)for(u in t)u in A||f(A,u,t[u]);else e(e.P+e.F*(n||z),b,t);return t}},function(a,b,c){a.exports=c(19)},function(a,b,c){var d=c(14);a.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}}},function(a,b,c){var d=c(26),e=c(11)("iterator"),f=Array.prototype;a.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},function(a,b,c){var d=c(14),e=c(41),f=c(11)("species");a.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},function(a,b){a.exports=function(a){try{return{e:!1,v:a()}}catch(a){return{e:!0,v:a}}}},function(a,b,c){var d=c(14),e=c(17),f=c(71);a.exports=function(a,b){if(d(a),e(b)&&b.constructor===a)return b;var c=f.f(a);return(0,c.resolve)(b),c.promise}},function(a,b,c){var d=c(11)("iterator"),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}a.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(j===setTimeout)return setTimeout(a,0);if((j===c||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=e(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,function(a){if(k===clearTimeout)return clearTimeout(a);if((k===d||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};!function(){try{j="function"==typeof setTimeout?setTimeout:c}catch(a){j=c}try{k="function"==typeof clearTimeout?clearTimeout:d}catch(a){k=d}}();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||e(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(a){return[]},l.binding=function(a){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(a){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(a,b,c){a.exports={default:c(179),__esModule:!0}},function(a,b,c){var d=c(87),e=c(66).concat("length","prototype");b.f=Object.getOwnPropertyNames||function(a){return d(a,e)}},function(a,b,c){a.exports={default:c(217),__esModule:!0}},function(a,b,c){a.exports={default:c(219),__esModule:!0}},function(a,b,c){(function(b){(function(){var c,d,e;"undefined"!=typeof performance&&null!==performance&&performance.now?a.exports=function(){return performance.now()}:void 0!==b&&null!==b&&b.hrtime?(a.exports=function(){return(c()-e)/1e6},d=b.hrtime,e=(c=function(){var a;return 1e9*(a=d())[0]+a[1]})()):Date.now?(a.exports=function(){return Date.now()-e},e=Date.now()):(a.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime())}).call(this)}).call(b,c(101))},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(102),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(231),p=c(232),q=c(108),r=c(233),s=c(234),t=c(235),u=c(236),v=c(238),w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function(a){function b(a,c,d){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this));if(f._ui=a,f._options=c,f._mediator=d,f._ready=!1,f._padding=[0,0,0,0],f._offset=new n.v(0,0),f._shallow=e,e||(f._initSDK(),f._onZoom=f._onZoom.bind(f),f._onUndo=f._onUndo.bind(f),f._onRedo=f._onRedo.bind(f),f.history=new v.a(f,f._sdk,f._mediator),f.history.on("undo",f._onUndo),f.history.on("redo",f._onRedo),f.zoom=new u.a(f,f._sdk,f._mediator),f.zoom.on("set",f._onZoom),f._initSerializers()),f.operations=new r.a(f,f._sdk,f._mediator),f.controls=new s.a(f,f._sdk,f._mediator),f.features=new t.a(f,f._sdk,f._mediator),f._sdk){var g=[];for(var h in f._operations)g.push(f._operations[h]);f._sdk.registerOperations(g)}return f._running=!1,f._renderRequested=!0,f._renderCallbacks=[],f._animationFrameRequest=null,f.render=f.render.bind(f),f._tick=f._tick.bind(f),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.e),w(b,[{key:"setImage",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this._sdk.getRenderer(),e=new n.v(b.naturalWidth,b.naturalHeight),f=1e6*this.getMaxMegapixels(),g=d.getMaxDimensions();c&&this.reset();var h=new p.a(b,f,g),i=null,j=function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,d=void(arguments.length>2&&void 0!==arguments[2]&&arguments[2]),f=void 0;a._sdk.getImage()&&(d=a.getInputDimensions(),f=c.clone().divide(d)),a._setImage(b,i,c),f&&a.broadcastScale(f),a._initWatermark(),a._ready=!0,a.emit("ready")};h.needsResize()?(this.emit("resize"),i=this._sdk.parseExif(b),h.resize().then(function(b){var c=b.canvas,d=b.dimensions,e=b.reason;c.src="data:image/jpeg;base64,",a.emit("resized",{dimensions:d,reason:e}),j(c,d,e)})):j(b)}},{key:"_initWatermark",value:function(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}},{key:"_initSDK",value:function(){
var a=this._options,b=a.logLevel,c=a.displayWelcomeMessage,d=a.debug,e=a.license,f=a.crossOrigin,g=this._options.editor,h=g.smoothDownscaling,i=g.smoothUpscaling,j=g.preferredRenderer,k=g.pixelRatio,l=g.transparent,m=g.clearColor,o=void 0;Array.isArray(m)?o=n.c.fromArray(m):"string"==typeof m?o=n.c.fromHex(m):m instanceof n.c&&(o=m.clone());var p={logLevel:b,debug:d,displayWelcomeMessage:c,pixelRatio:k,smoothDownscaling:h,smoothUpscaling:i,transparent:l,crossOrigin:f,clearColor:o,license:e};this._sdk=new n.p(j,p)}},{key:"_onZoom",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.fixOffset(),this.render(function(){b&&b()})}},{key:"fixOffset",value:function(){this._offset=this._clampOffset(this._offset)}},{key:"_onUndo",value:function(){this.render()}},{key:"_onRedo",value:function(){this.render()}},{key:"getRotation",value:function(){return this._sdk.getRotation()}},{key:"setRotation",value:function(a){this._sdk.setRotation(a)}},{key:"getSpriteScale",value:function(){return this._sdk.getSpriteScale()}},{key:"setSpriteScale",value:function(a){this._sdk.setSpriteScale(a)}},{key:"getCrossOrigin",value:function(){return n.q.getCrossOriginValue(this._options.crossOrigin||"anonymous")}},{key:"isToolAllowed",value:function(a){return!!this._shallow||this._sdk._l.isToolAllowed(a)}},{key:"isToolEnabled",value:function(a){return-1!==this._options.editor.tools.indexOf(a)}},{key:"getMaxMegapixels",value:function(){var a=this._options.editor.maxMegaPixels;return n.u.isMobile()?a.mobile:a.desktop}},{key:"getOutputDimensions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputDimensions(a)}},{key:"getOutputTextureDimensions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getOutputTextureDimensions(a)}},{key:"getFinalDimensions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sdk.getFinalDimensions(a)}},{key:"getCanvasDimensions",value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],b=this._sdk.getCanvas(),c=new n.v(b.offsetWidth,b.offsetHeight);return a&&c.subtract(this._padding[1]+this._padding[3],this._padding[0]+this._padding[2]),c}},{key:"_setImage",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options.editor.image,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._sdk.setAllOperationsToDirty(),this._options.editor.image=a,this._sdk.setImage(a,b,c),this.zoom.auto(!0,!0),this.emit("new-image")}},{key:"export",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty();var c=this._options.editor.export;return new o.a(this._sdk,c,b).export().then(function(b){return a.emit(n.d.EVENTS.EXPORT,b),a._mediator.emit(n.d.EVENTS.EXPORT,b,a),a._watermarkOperation&&(a._watermarkOperation.setEnabled(!0),a._sdk.render()),a._sdk.setAllOperationsToDirty(),b})}},{key:"save",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this._options.editor.save;return this.serialize({image:c.image}).then(function(d){var e=k()(d);if(a.emit(n.d.EVENTS.SAVE,d),a._mediator.emit(n.d.EVENTS.SAVE,d,a),b){var f="data:text/json;charset=utf-8;base64,"+window.encodeURI(window.btoa(e));q.a.downloadDataURL(f,c.fileBasename)}return e})}},{key:"load",value:function(a){var b=this,c=window.JSON.parse(a);return this.deserialize(c).then(function(a){return b.emit(n.d.EVENTS.LOAD,a),b._mediator.emit(n.d.EVENTS.LOAD,a,b),a})}},{key:"_initSerializers",value:function(){this._serializers={"1.0.0":c(239).default,"1.0.1":c(247).default,"2.0.0":c(248).default,"2.0.1":c(249).default,"3.0.0":c(252).default,"3.1.0":c(253).default,"3.2.0":c(254).default}}},{key:"serialize",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3.2.0",c=this._serializers[b];return c?new c(this).serialize(a):n.j.reject(new Error("No serializer for version "+b+" found."))}},{key:"deserialize",value:function(a){var b=this,c=this._serializers[a.version];return c?new c(this).deserialize(a).then(function(){b.zoom.auto(!0,!0)}):n.j.reject(new Error("No serializer for version "+a.version+" found."))}},{key:"_applyOffset",value:function(){var a=this._offset.clone();a.x-=this._padding[1]/2,a.x+=this._padding[3]/2,a.y-=this._padding[2]/2,a.y+=this._padding[0]/2,this._sdk.setOffset(a)}},{key:"start",value:function(){this._animationFrameRequest=Object(n.z)(this._tick)}},{key:"stop",value:function(){this._running=!1,this._animationFrameRequest&&(Object(n.x)(this._animationFrameRequest),this._renderCallbacks=[])}},{key:"render",value:function(a){this._renderRequested=!0,a&&this._renderCallbacks.push(a)}},{key:"_tick",value:function(){var a=this;if(this.zoom.tick(),this._renderRequested){var b=this._renderCallbacks.slice(0);this._renderCallbacks=[],this._render().then(function(){b.forEach(function(a){return a()}),a._animationFrameRequest=Object(n.z)(a._tick)}),this._renderRequested=!1}else this._animationFrameRequest=Object(n.z)(this._tick)}},{key:"_render",value:function(){var a=this;return this._ready?(this._applyOffset(),this._sdk.render().then(function(){a._lastOutputBounds=a._sdk.getSprite().getBounds(),a.emit("rendered")}).catch(function(b){n.h.error(a.constructor.name,"An error occurred while rendering: "+b.message),a.emit("render-error",b)})):n.j.resolve()}},{key:"reset",value:function(){this._sdk.reset(),this.history.reset(),this.operations.reset(),this.features.reset(),this.emit("reset")}},{key:"dispose",value:function(){this.stop(),this._sdk.dispose()}},{key:"isReady",value:function(){return this._ready}},{key:"getRenderer",value:function(){return this._sdk.getRenderer()}},{key:"getSDK",value:function(){return this._sdk}},{key:"getInputDimensions",value:function(){return this._sdk.getInputDimensions()}},{key:"getPadding",value:function(){return this._padding}},{key:"setPadding",value:function(a){this._padding=a||[0,0,0,0]}},{key:"getImage",value:function(){return this._options.editor.image}},{key:"getOptions",value:function(){return this._options}},{key:"getUI",value:function(){return this._ui}},{key:"broadcastScale",value:function(a){var b=this;["sprite"].forEach(function(c){var d=b.operations.get(c);d&&d.scale(a)})}},{key:"broadcastTransform",value:function(a,b){var c=this,d=new n.p.Operations.TransformOperation.TransformChange(a,b);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(function(a){var b=c.operations.get(a);b&&b.transform(d)})}},{key:"broadcastTemporaryTransform",value:function(a,b){var c=this,d=new n.p.Operations.TransformOperation.TransformChange(a,b),e=new n.p.Operations.TransformOperation.TransformChange(a,b).invert();["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach(function(a){var b=c.operations.get(a);b&&b.setTemporaryTransformChange(d,e)})}},{key:"broadcastFlip",value:function(a){var b=this;["mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(c){var d=b.operations.get(c);d&&d.flip(a)})}},{key:"broadcastRotate",value:function(a){var b=this;["transform","mirrored-focus","radial-focus","sprite","selective-blur"].forEach(function(c){var d=b.operations.get(c);d&&d.rotate(a)})}},{key:"_clampOffset",value:function(a){var b=this.getCanvasDimensions(),c=this._sdk.getOutputDimensions(!1),d=b.clone().subtract(c).divide(2).clamp(null,new n.v(0,0)),e=c.clone().subtract(b).divide(2).clamp(new n.v(0,0),null);return a.clone().clamp(d,e).round()}},{key:"getSnapshot",value:function(){return{operations:this.operations.getSnapshot(),zoom:this.zoom.getSnapshot(),canvasDimensions:this.getCanvasDimensions()}}},{key:"restoreSnapshot",value:function(a){this.operations.restoreSnapshot(a.operations),this.zoom.restoreSnapshot(a.zoom),a.canvasDimensions.equals(this.getCanvasDimensions())||this.zoom.auto(!0,!0)}},{key:"getMediator",value:function(){return this._mediator}},{key:"addSticker",value:function(a,b){var c=this._options.editor,d=n.q.getDeepProperty(c,["controlsOptions","sticker","categories"]);if(!d)return!1;var e=n.q.getDeepProperty(d,[function(b){return b.filter(function(b){return b.identifier===a})[0]},"stickers"]);return!!e&&(e.push(b),this._mediator.emit(n.d.EVENTS.ADDED_STICKER,d),!0)}},{key:"offset",get:function(){return this._offset},set:function(a){this._offset=this._clampOffset(a)}},{key:"isDraggable",get:function(){var a=this.zoom.targetLevel>this.zoom.defaultLevel;return this.features.isEnabled("drag")&&a}},{key:"isShallow",get:function(){return this._shallow}}]),b}();b.a=x},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return g(a,null,[{key:"downloadDataURL",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export",c=this.createBlobURLFromDataURL(a),d=this.getExtensionFromDataURL(a),e=document.createElement("a");e.download=b+"."+d,e.href=c,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"downloadMSBlob",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"photoeditorsdk-export";navigator.msSaveBlob(a,b+".png")}},{key:"getExtensionFromDataURL",value:function(a){return a.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}},{key:"createBlobURLFromDataURL",value:function(a){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return a;for(var b=f.a.decode(a.split(",")[1]),c=a.split(",")[0].split(":")[1].split(";")[0],d=new ArrayBuffer(b.length),e=new Uint8Array(d),g=0;g<b.length;g++)e[g]=b[g];var h=new window.Blob([d],{type:c});return window.URL.createObjectURL(h)}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(8),g=c.n(f),h=c(4),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=2*Math.PI,k=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b,this._serializeOperations=this._serializeOperations.bind(this)}return i(a,[{key:"serialize",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._options=h.q.defaults(a,{image:!0});var b={version:this.constructor.version};return this._serializeInputImage(b).then(this._serializeOperations)}},{key:"_serializeInputImage",value:function(a){var b=this._editor.getImage(),c=b.width,d=b.height;if(!this._options.image)return a.inputImage={width:c,height:d},g.a.resolve(a);var e=h.q.createCanvas();e.width=b.width,e.height=b.height,e.getContext("2d").drawImage(b,0,0);var f=e.toDataURL(h.f.PNG);return a.inputImage={type:h.f.PNG,data:f.replace(/^data:image\/(.*?);base64,/,""),width:c,height:d},g.a.resolve(a)}},{key:"_serializeOperations",value:function(a){var b=this,c=[];return this._editor.operations.getStack().forEach(function(a){var d=b._serializeOperation(a,c);d&&c.push(d)}),a.operations=c.filter(function(a){return a}),g.a.resolve(a)}},{key:"_serializeOperation",value:function(a,b){switch(a.constructor.identifier){case"transform":return this._serializeTransformOperation(a);case"orientation":return this._serializeOrientationOperation(a);case"filter":return this._serializeFilterOperation(a);case"adjustments":return this._serializeAdjustmentsOperation(a);case"sprite":return this._serializeSpriteOperation(a,b);case"radial-focus":return this._serializeRadialFocusOperation(a);case"mirrored-focus":return this._serializeLinearFocusOperation(a);default:h.h.warn("Unable to serialize operation of type "+a.constructor.identifier)}}},{key:"_serializeTransformOperation",value:function(a){var b=a.serializeOptions(["start","end","rotation"],!0);return b.rotation=(b.rotation+j)%j,{type:"crop",options:b}}},{key:"_serializeOrientationOperation",value:function(a){return{type:"orientation",options:a.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}},{key:"_serializeFilterOperation",value:function(a){return"identity"===a.getIdentifier()?null:{type:"filter",options:{intensity:a.getIntensity(),name:a.getIdentifier()}}}},{key:"_serializeAdjustmentsOperation",value:function(a){var b=a.availableOptions,c={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach(function(d){var e=b[d],f=a.getOption(d),g=e.minValue,h=e.midValue,i=e.maxValue;c[d]=f<=h?(f-g)/(h-g)-1:(f-h)/(i-h)}),{type:"adjustments",options:c}}},{key:"_serializeSpriteOperation",value:function(a,b){var c=this,d=b.filter(function(a){return"sprite"===a.type}),e=void 0,f=!0;if(d.length?(e=d.pop(),f=!1):e={type:"sprite",options:{sprites:[]}},a.getSprites().forEach(function(b){var d=null;b instanceof a.constructor.StickerSprite?d=c._serializeSticker(a,b):b instanceof a.constructor.TextSprite?d=c._serializeText(a,b):b instanceof a.constructor.BrushSprite?d=c._serializeBrush(a,b):b instanceof a.constructor.TextDesignSprite&&(d=c._serializeTextDesign&&c._serializeTextDesign(a,b)),d&&e.options.sprites.push(d)}),f)return e}},{key:"_serializeSticker",value:function(a,b){var c=b.getAdjustments(),d=b.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);d.name=d.identifier,delete d.identifier,d.rotation=(d.rotation+j)%j;var e=c.availableOptions;return d.adjustments={brightness:c.getBrightness()-e.brightness.default,saturation:c.getSaturation()-e.saturation.default,contrast:c.getContrast()-e.contrast.default},{type:"sticker",options:d}}},{key:"_serializeText",value:function(a,b){var c=b.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return c.rotation=(c.rotation+j)%j,{type:"text",options:c}}},{key:"_serializeBrush",value:function(a,b){var c=this;return{type:"brush",options:{paths:b.getPaths().map(function(a){return c._serializePath(a)})}}}},{key:"_serializePath",value:function(a){var b=a.getBrush().serializeOptions(["color","size"],!0);return b.points=a.getControlPoints().map(function(a){return a.getPosition().toObject()}),b}},{key:"_serializeRadialFocusOperation",value:function(a){return{type:"focus",options:{type:"radial",options:a.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(a){return{type:"focus",options:{type:"linear",options:a.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_getInputDimensionsForOperation",value:function(a){var b=!1,c=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(d){d===a&&(b=!0),b||(c=d.getNewDimensions(c))}),c}}]),a}();b.a=k,k.version="1.0.0"},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=c(2),f=c.n(e),g=c(3),h=c.n(g),i=c(0),j=c.n(i),k=c(1),l=c.n(k),m=c(111),n=c.n(m),o=c(8),p=c.n(o),q=c(4),r=c(112),s=c(51),t=c(113),u=c(40),v=c(76),w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=void 0;void 0!==q.p.Operations.SpriteOperation&&(x=q.p.Operations.SpriteOperation.BrushSprite);var y=function(){function a(b,c){d(this,a),this._editor=b,this._ui=this._editor.getUI(),this._data=c,this._filterManager=new r.a(this._ui,this._getOptions("filter")),this._stickerManager=new s.a(this._ui,this._getOptions("sticker")),this._brushManager=new t.a(this._ui,this._getOptions("brush")),this._fontManager=new u.a(this._ui,this._getOptions("text"))}return w(a,[{key:"_getOptions",value:function(a){var b=this._editor.controls,c={};b&&b.get(a)&&(c=b.get(a).defaultOptions);var d=this._editor.getOptions();return q.q.deepDefaults({},d.editor.controlsOptions[a]||{},c)}},{key:"deserialize",value:function(){var a=this;return this._validateVersion().then(function(){return a._deserializeInputImage()}).then(function(){return a._deserializeOperations()})}},{key:"_validateVersion",value:function(){return this._data.version!==this.constructor.version?p.a.reject(new Error("Invalid version "+this._data.version+", expected "+this.constructor.version)):p.a.resolve()}},{key:"_deserializeInputImage",value:function(){var a=this;return new p.a(function(b,c){var d=a._data.inputImage,e=d.data,f=d.type;if(e&&f){var g=new window.Image;g.addEventListener("load",function(){a._editor.setImage(g),b()}),g.src="data:"+f+";base64,"+e}else b()})}},{key:"_deserializeOperations",value:function(){var a,b=(a=n.a.mark(function a(){var b,c,d,e,f;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b=this._data.operations,c=[],d=0;case 3:if(!(d<b.length)){a.next=12;break}return e=b[d],a.next=7,this._deserializeOperation(e);case 7:f=a.sent,c.push(f);case 9:d++,a.next=3;break;case 12:return a.abrupt("return",c);case 13:case"end":return a.stop()}},a,this)}),function(){var b=a.apply(this,arguments);return new p.a(function(a,c){return function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}if(!g.done)return p.a.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)});a(h)}("next")})});return function(){return b.apply(this,arguments)}}()},{key:"_deserializeOperation",value:function(a){switch(a.type){case"crop":return this._deserializeCropOperation(a);case"orientation":return this._deserializeOrientationOperation(a);case"filter":return this._deserializeFilterOperation(a);case"adjustments":return this._deserializeAdjustmentsOperation(a);case"sprite":return this._deserializeSpriteOperation(a);case"focus":return this._deserializeFocusOperation(a)}}},{key:"_deserializeCropOperation",value:function(a){var b=a.options,c=b.rotation,d=q.v.fromObject(b.start),e=q.v.fromObject(b.end);c>Math.PI&&(c-=2*Math.PI);var f={start:d,end:e};void 0!==c&&(f.rotation=c);var g=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(g,f),g.set(f),p.a.resolve(g)}},{key:"_deserializeOrientationOperation",value:function(a){var b=a.options,c=this._editor.operations.getOrCreate("orientation");return c?(c.set(b),p.a.resolve(c)):p.a.resolve()}},{key:"_deserializeFilterOperation",value:function(a){var b=this,c=a.options;return this._filterManager.getFilterByIdentifier(c.name)?this._filterManager.instantiateFilterWithIdentifier(c.name).then(function(a){var d=b._editor.operations.getOrCreate("filter");return d.set({identifier:c.name,filter:a,intensity:c.intensity}),d}):(q.h.warn("Deserializer","Unknown filter `"+c.name+"`"),p.a.resolve())}},{key:"_deserializeAdjustmentsOperation",value:function(a){var b=q.p.Operations.AdjustmentsOperation,c=a.options,d={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach(function(a){if(void 0!==c[a]){var e=b.prototype.availableOptions[a],f=e.minValue,g=e.midValue,h=e.maxValue,i=c[a];i=i<0?g+(g-f)*i:g+(h-g)*i,d[a]=i}}),p.a.resolve(this._editor.operations.getOrCreate("adjustments",d))}},{key:"_deserializeSpriteOperation",value:function(a){var b=this,c=a.options,d=this._editor.operations.getOrCreate("sprite");if(!d)return p.a.resolve();var e=c.sprites.map(function(a){return b._deserializeSprite(d,a)}).filter(function(a){return a});return p.a.all(e).then(function(a){return d.setSprites(a.filter(function(a){return a})),d})}},{key:"_deserializeSprite",value:function(a,b){switch(b.type){case"sticker":return this._deserializeSticker(a,b);case"text":return this._deserializeText(a,b);case"brush":return this._deserializeBrush(a,b);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(a,b)}}},{key:"_deserializeSticker",value:function(a,b){var c=this,d=q.p.Operations.SpriteOperation,e=b.options,f=this._stickerManager.getStickerByIdentifier(e.name),g=this._stickerManager.getURLForSticker(f);return f?new p.a(function(b,f){var h=new window.Image;h.addEventListener("load",function(){var c=d.StickerSprite.prototype.availableOptions.adjustments.structure,f=e.rotation,g=e.flipHorizontally,i=e.flipVertically,j={identifier:e.name,image:h,position:q.v.fromObject(e.position),dimensions:q.v.fromObject(e.dimensions),rotation:f,flipHorizontally:g,flipVertically:i,adjustments:{}};void 0!==e.adjustments&&["brightness","contrast","saturation"].forEach(function(a){void 0!==e.adjustments[a]&&(j.adjustments[a]=e.adjustments[a]+c[a].default)}),b(a.createSticker(j))}),h.crossOrigin=c._editor.getCrossOrigin(),h.src=c._editor.getUI().getAssetPath(g)}):(q.h.warn("Deserializer","Unknown sticker '"+e.name+"'. Skipping sprite."),p.a.resolve())}},{key:"_deserializeText",value:function(a,b){var c=b.options,d=c.fontSize,e=c.lineHeight,f=c.fontFamily,g=c.fontWeight,h=c.alignment,i=c.rotation,j=c.maxWidth,k=c.color,l=c.backgroundColor,m=new v.a(this._ui),n=this._fontManager.getFontByFontFamily(f);return n||(n=this._fontManager.getDefaultFont()),m.setFonts([n]),m.load().then(function(){return a.createText({fontSize:d,lineHeight:e,fontFamily:f,fontWeight:g,alignment:h,rotation:i,maxWidth:j,text:c.text,color:q.c.fromArray(k),backgroundColor:q.c.fromArray(l),position:q.v.fromObject(c.position)})})}},{key:"_deserializeBrush",value:function(a,b){var c=this,d=b.options.paths,e=a.createBrush();return d.forEach(function(a){c._deserializeBrushPath(e,a)}),p.a.resolve(e)}},{key:"_deserializeBrushPath",value:function(a,b){var c=b.points,d=this._createBrushForPath(b),e=a.createPath(d);e.setClosed(!0),c.forEach(function(a){e.addControlPoint(q.v.fromObject(a))})}},{key:"_createBrushForPath",value:function(a){var b=a.color,c=a.size,e={color:q.c.fromArray(b),size:c},g=this._brushManager.getFirstBrush();if(g.prototype&&g.prototype instanceof x)return new g(e);var i=q.q.extend({},g);delete i.image;var j=function(a){function b(){return d(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||l()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=h()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(f.a?f()(a,b):a.__proto__=b)}(b,x),b}();return j.identifier=g.identifier,new j(q.q.extend({},i,e))}},{key:"_deserializeFocusOperation",value:function(a){var b=a.options.options;switch(a.options.type){case"radial":var c=b.position,d=b.radius,e=b.gradientRadius,f=b.blurRadius;return p.a.resolve(this._editor.operations.getOrCreate("radial-focus",{position:q.v.fromObject(c),radius:d,gradientRadius:e,blurRadius:f}));case"linear":var g=b.start,h=b.end,i=b.size,j=b.gradientSize,k=b.blurRadius;return p.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:q.v.fromObject(g),end:q.v.fromObject(h),size:i,gradientSize:j,blurRadius:k}))}}},{key:"_getInputDimensionsForOperation",value:function(a){var b=!1,c=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach(function(d){d===a&&(b=!0),b||(c=d.getNewDimensions(c))}),c}}]),a}();b.a=y,y.version="1.0.0"},function(a,b,c){a.exports=c(240)},function(a,b,c){var d=c(0),e=c.n(d),f=c(8),g=c.n(f),h=c(4),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._options=c,this._categoriesById={},this._filtersByIdentifier={identity:h.p.Operations.FilterOperation.Filters.IdentityFilter},this._categories=h.r.DEFAULTS.FILTERS.slice(0),this._initCategories()}return i(a,[{key:"instantiateFilterWithIdentifier",value:function(a){var b=this,c=this.getFilterByIdentifier(a);if(!c)return g.a.reject(new Error("Unknown filter with identifier `"+a+"`!"));if(c.prototype instanceof h.p.Operations.FilterOperation.Filter)return g.a.resolve(new c);var d=c.lutImage,e=c.resolution,f=c.horizontalTileCount,i=c.verticalTileCount,j=c.lightColor,k=c.darkColor;if(j&&k)return j=h.c.fromHex(j),k=h.c.fromHex(k),g.a.resolve(new h.p.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:j,darkColor:k}));var l=void 0;return this._ui.getPreloader&&(l=this._ui.getPreloader().getAsset(d)),(l?g.a.resolve(l):h.g.load(this._ui.getAssetPath(d))).then(function(a){return h.g.load(b._ui.getAssetPath(d)).then(function(a){return new h.p.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:a,resolution:e,horizontalTileCount:f,verticalTileCount:i})})})}},{key:"_initCategories",value:function(){var a=this;if(this._options.categories&&(this._options.replaceCategories?this._categories=this._options.categories:this._categories=h.u.mergeCategories(this._categories,this._options.categories,"filters")),this._options.availableFilters){var b=[];this._categories.forEach(function(c){var d=c.filters.filter(function(b){return-1!==a._options.availableFilters.indexOf(b.identifier)});d.length>0&&b.push({identifier:c.identifier,defaultName:c.defaultName,filters:d})}),this._categories=b}var c={identifier:"all",defaultName:"All",filters:this._categories.length<=0?[]:this._categories.map(function(a){return a.filters}).reduce(function(a,b){return a.concat(b)})};this._categories.unshift(c),this._categoriesById.all=c,this._categories.forEach(function(b){a._categoriesById[b.identifier]=b}),c.filters.forEach(function(b){a._filtersByIdentifier[b.identifier]=b})}},{key:"getFiltersForCategory",value:function(a){if(!this._categoriesById[a])throw new Error("Unknown filter category '"+a+"'");return this._categoriesById[a].filters}},{key:"getFilterByIdentifier",value:function(a){return this._filtersByIdentifier[a]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategoryByIdentifier",value:function(a){return this._categoriesById[a]}}]),a}();b.a=j},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._options=c,this._brushes=[],this._brushesById={},this._addBrushes(f.d.DEFAULTS.BRUSHES);var d=this._options,e=d.brushes,g=d.replaceBrushes,h=d.availableBrushes;this._options.brushes&&this._addBrushes(e,g),h&&(this._brushes=this._brushes.filter(function(a){return-1!==h.indexOf(a.identifier)}))}return g(a,[{key:"_addBrushes",value:function(a,b){var c=this;b&&(this._brushes=[],this._brushesById={}),a.forEach(function(a){c._brushes.push(a),c._brushesById[a.identifier]=a})}},{key:"getBrushByIdentifier",value:function(a){return this._brushesById[a]}},{key:"getBrushes",value:function(){return this._brushes}},{key:"getFirstBrush",value:function(){return this._brushes[0]}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(7),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.Configurable),m(b,[{key:"getLabel",value:function(){var a=n[this._options.fontWeight];switch(this._options.fontStyle){case"italic":a+=" Italic"}return a}}]),b}();b.a=o,o.prototype.availableOptions={identifier:{type:l.OptionType.STRING,required:!0},fontFamily:{type:l.OptionType.STRING,required:!0},fontWeight:{type:l.OptionType.ALL,default:400},fontStyle:{type:l.OptionType.STRING,default:"normal"},textMetrics:{type:l.OptionType.OBJECT,default:null},provider:{type:l.OptionType.STRING,available:["google","file"]},filePath:{type:l.OptionType.STRING},default:{type:l.OptionType.BOOLEAN,default:!1},font:{type:l.OptionType.OBJECT}}},function(a,b,c){var d=c(0),e=c.n(d),f=c(8),g=c.n(f),h=c(244),i=c(7),j=(c.n(i),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),k=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._fonts=[],this._observers=[]}return j(a,[{key:"add",value:function(a){this._fonts.push(a)}},{key:"load",value:function(){var a=this;return 0===this._fonts.length?g.a.resolve():(this._observers=[],this._fonts.forEach(function(b){a._observers.push(new h.a(b))}),i.Utils.executePromises(this._observers.map(function(a){return a.observe()})))}},{key:"dispose",value:function(){this._observers.forEach(function(a){return a.dispose()})}}]),a}();b.a=k},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(109),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=2*Math.PI,o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.a),m(b,[{key:"_serializeTransformOperation",value:function(a){var b=a.serializeOptions(["start","end","rotation","textureScale"],!0);return b.rotation=(b.rotation+n)%n,1!==b.textureScale&&(b.dimensions=a.getNewDimensions(a.getInputDimensions(!1))),delete b.textureScale,{type:"crop",options:b}}}]),b}();b.a=o,o.version="1.0.1"},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(8),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=c(110),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),
d&&a(b,d),b}}(),s=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,q.a),r(b,[{key:"_deserializeOperation",value:function(a){return"selective-blur"===a.type?this._deserializeSelectiveBlurOperation(a):function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||o()(b.prototype),"_deserializeOperation",this).call(this,a)}},{key:"_deserializeCropOperation",value:function(a){var b=a.options,c=b.rotation,d=p.v.fromObject(b.start),e=p.v.fromObject(b.end),f=b.dimensions?p.v.fromObject(b.dimensions):null;c>Math.PI&&(c-=2*Math.PI);var g={start:d,end:e};void 0!==c&&(g.rotation=c);var h=this._editor.operations.getOrCreate("transform");if(!h)return m.a.resolve();if(this._editor.broadcastTransform(h,g),h.set(g),f){var i=e.clone().subtract(d),j=h.getInputDimensions(!1).multiply(i);h.setTextureScale(f.x/j.x)}return m.a.resolve(h)}}]),b}();b.a=s,s.version="1.0.1"},function(a,b,c){function d(a,b,c){return b in a?g()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e,f=c(0),g=c.n(f),h=c(4).p.Engine.Filters.OverlayFilter;b.a=(d(e={},h.BLEND_MODES.NORMAL,"normal"),d(e,h.BLEND_MODES.OVERLAY,"overlay"),d(e,h.BLEND_MODES.HARD_LIGHT,"hard light"),d(e,h.BLEND_MODES.SOFT_LIGHT,"soft light"),d(e,h.BLEND_MODES.MULTIPLY,"multiply"),d(e,h.BLEND_MODES.DARKEN,"darken"),d(e,h.BLEND_MODES.LIGHTEN,"lighten"),d(e,h.BLEND_MODES.SCREEN,"screen"),d(e,h.BLEND_MODES.COLOR_BURN,"color burn"),e)},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._options=c,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(f.r.DEFAULTS.FRAME_CATEGORIES);var d=this._options,e=d.categories,g=d.replaceCategories;this._options.categories?this._addCategories(e,g):this._updateAllCategory()}return g(a,[{key:"_addCategories",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._categories=c?a.slice(0):f.u.mergeCategories(this._categories,a,"frames"),this._categoriesById={},this._categories.forEach(function(a){b._categoriesById[a.identifier]=a});var d=this._options.availableFrames;d&&this._categories.forEach(function(a){a.frames=a.frames.filter(function(a){return-1!==d.indexOf(a.identifier)})}),this._categories.forEach(function(a){a.frames.forEach(function(a){b._framesById[a.identifier]=a})}),this._updateAllCategory()}},{key:"_updateAllCategory",value:function(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map(function(a){return a.frames}).reduce(function(a,b){return a.concat(b)},[])},this._categoriesById.all=this._allCategory}},{key:"getFramesForCategory",value:function(a){if(!this._categoriesById[a])throw new Error("Unknown frame category '"+a+"'");return this._categoriesById[a].frames}},{key:"getFrameByIdentifier",value:function(a){return this._framesById[a]}},{key:"getCategories",value:function(){return this._categories}},{key:"getCategory",value:function(a){return this._categoriesById[a]}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b,c){var d=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._ui=b,this._options=c,this._overlays=f.r.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={},c.overlays&&(c.replaceOverlays?this._overlays=c.overlays:this._overlays=this._overlays.concat(c.overlays)),c.availableOverlays&&(this._overlays=this._overlays.filter(function(a){return-1!==c.availableOverlays.indexOf(a.identifier)})),this._overlays.forEach(function(a){d._overlaysByIdentifier[a.identifier]=a})}return g(a,[{key:"getOverlays",value:function(){return this._overlays}},{key:"getOverlayByIdentifier",value:function(a){return this._overlaysByIdentifier[a]}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=n.p.OptionType,q=function(a){function b(a){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this,c));return d._loaded=!1,d._loading=!1,d._ui=a,d._frame=n.p.Utils.deepClone(d._options),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.p.Configurable),o(b,[{key:"load",value:function(){var a=this;if(this._loaded)return k.a.resolve();if(this._loading)return k.a.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;var b=this._frame.imageGroups,c=[];return["top","left","right","bottom"].forEach(function(d){if(d in b){var e=b[d];["start","mid","end"].forEach(function(b){b in e&&c.push(a._loadPart(d,b))})}}),k.a.all(c).then(function(){a._loaded=!0,a._loading=!1}).catch(function(b){a._loaded=!1,a._loading=!1})}},{key:"_loadPart",value:function(a,b){var c=this;return new k.a(function(d,e){var f=c._frame.imageGroups[a][b],g=f;"string"!=typeof f&&"image"in f&&(g=f.image);var h=new window.Image;h.addEventListener("load",function(){"string"!=typeof f?c._frame.imageGroups[a][b].image=h:c._frame.imageGroups[a][b]=h,d(h)}),h.addEventListener("error",function(){e(new Error("Failed to load image at "+g))}),h.crossOrigin=c._ui.getEditor().getCrossOrigin(),h.src=c._ui.getAssetPath(g)})}},{key:"getFrame",value:function(){return this._frame}}]),b}();b.a=q,q.prototype.availableOptions={identifier:{type:p.STRING,required:!0},defaultName:{type:p.STRING},thumbnail:{type:p.STRING},tintable:{type:p.BOOLEAN,default:!1},layoutMode:{type:p.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:p.OBJECT,required:!0}}},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(6),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=c(77),r=c(123),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},v=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),t(b,[{key:"serialize",value:function(){var a=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(b.prototype.__proto__||o()(b.prototype),"serialize",this).call(this,c).then(function(b){return b.meta={platform:"html5",version:a._editor.getSDK().version,createdAt:p.q.ISODateString(new Date)},b.image=b.inputImage,delete b.inputImage,b})}},{key:"_serializeSticker",value:function(a,c){var d=u(b.prototype.__proto__||o()(b.prototype),"_serializeSticker",this).call(this,a,c);return d.options.alpha=c.getAlpha(),d.options.tintColor&&(d.options.tintColor={rgba:d.options.tintColor}),d}},{key:"_serializeText",value:function(a,c){var d=u(b.prototype.__proto__||o()(b.prototype),"_serializeText",this).call(this,a,c);return d.options.color={rgba:d.options.color},d.options.backgroundColor={rgba:d.options.backgroundColor},d.options.flipHorizontally=!1,d.options.flipVertically=!1,delete d.options.fontWeight,d}},{key:"_serializePath",value:function(a){var c=u(b.prototype.__proto__||o()(b.prototype),"_serializePath",this).call(this,a);delete c.hardness,delete c.size,delete c.color;var d=a.getBrush();c.brush=d.serializeOptions(["identifier","size","color"],!0),void 0===c.brush.identifier&&delete c.brush.identifier,c.brush.color={rgba:c.brush.color};var e=d.getOption("hardness");return"undefined"!==e&&(c.brush.hardness=e),c}},{key:"_serializeFrameOperation",value:function(a,c){u(b.prototype.__proto__||o()(b.prototype),"_serializeFrameOperation",this).call(this,a,c);var d=c.filter(function(a){return"sprite"===a.type});if(d.length){var e=d.pop().options.sprites.filter(function(a){return"frame"===a.type})[0];a.getTintColor().equals(new p.c(1,1,1,0))||(e.options.tintColor={rgba:a.serializeOption("tintColor",!0)});var f=a.serializeOptions(["scale","alpha"],!0);e.options=p.q.extend(e.options,f),e.options.size=e.options.scale,delete e.options.scale}}},{key:"_serializeTransformOperation",value:function(a){var c=u(b.prototype.__proto__||o()(b.prototype),"_serializeTransformOperation",this).call(this,a);if(a._ratio){var d=void 0;d=a._ratio instanceof r.a?a._ratio.getIdentifier():a._ratio.identifier,c.options.meta={identifier:d}}return delete c.options.scale,c}},{key:"_serializeAdjustmentsOperation",value:function(a){var c=u(b.prototype.__proto__||o()(b.prototype),"_serializeAdjustmentsOperation",this).call(this,a),d=a.availableOptions,e={};return["gamma","whites","blacks","temperature"].forEach(function(b){var c=d[b],f=a.getOption(b),g=c.minValue,h=c.midValue,i=c.maxValue;e[b]=f<=h?(f-g)/(h-g)-1:(f-h)/(i-h)}),c.options=s({},c.options,e),c}},{key:"_serializeOperation",value:function(a,c){switch(a.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(a);case"linear-focus":return this._serializeLinearFocusOperation(a);case"blur":return this._serializeBlurOperation(a);default:return u(b.prototype.__proto__||o()(b.prototype),"_serializeOperation",this).call(this,a,c)}}},{key:"_serializeMirroredFocusOperation",value:function(a){return{type:"focus",options:{type:"mirrored",options:a.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}},{key:"_serializeLinearFocusOperation",value:function(a){var b=a.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return b.start=b.controlPoint1,delete b.controlPoint1,b.end=b.controlPoint2,delete b.controlPoint2,{type:"focus",options:{type:"linear",options:b}}}},{key:"_serializeBlurOperation",value:function(a){return{type:"focus",options:{type:"gaussian",options:a.serializeOptions(["blurRadius"],!0)}}}}]),b}();b.a=v,v.version="3.0.0"},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7);c.n(j);var k=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.Configurable),b}();b.a=k,k.prototype.availableOptions={identifier:{type:j.OptionType.STRING,required:!0},defaultName:{type:j.OptionType.STRING,required:!0},ratio:{type:j.OptionType.ALL,required:!1,default:null},selected:{type:j.OptionType.BOOLEAN,required:!1},dimensions:{type:j.OptionType.VECTOR2,required:!1},lockDimensions:{type:j.OptionType.BOOLEAN,required:!1,default:null},forceDimensions:{type:j.OptionType.BOOLEAN,required:!1,default:null}}},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=p()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(n.a?n()(a,b):a.__proto__=b)}var g=c(9),h=c.n(g),i=c(0),j=c.n(i),k=c(6),l=c.n(k),m=c(2),n=c.n(m),o=c(3),p=c.n(o),q=c(8),r=c.n(q),s=c(1),t=c.n(s),u=c(4),v=c(78),w=c(51),x=c(52),y=c(27),z=c(40),A=h.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},B=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),j()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),C=function a(b,c,d){null===b&&(b=Function.prototype);var e=l()(b,c);if(void 0===e){var f=t()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},D=void 0;void 0!==u.p.Operations.SpriteOperation&&(D=u.p.Operations.SpriteOperation.BrushSprite.Brush);var E=function(a){function b(){return d(this,b),e(this,(b.__proto__||t()(b)).apply(this,arguments))}return f(b,v.a),B(b,[{key:"_deserializeSticker",value:function(a,b){var c=u.p.Operations.SpriteOperation,d=b.options,e=this._stickerManager.getStickerByIdentifier(d.identifier);if(!e)return u.h.warn("Deserializer","Unknown sticker `"+d.identifier+"`. Skipping sprite."),r.a.resolve();var f=w.a.getURLForSticker(e,"base"),g=this._editor.getUI().getAssetPath(f),h=a.getInputDimensions(!1);return y.a.load(g).then(function(b){var f=c.StickerSprite.prototype.availableOptions.adjustments.structure,g=d.rotation,i=d.flipHorizontally,j=d.flipVertically,k={identifier:d.identifier,image:b,position:u.v.fromObject(d.position),dimensions:u.v.fromObject(d.dimensions).multiply(h.min()),rotation:g||0,flipHorizontally:i,flipVertically:j,adjustments:{}};return void 0!==d.adjustments&&["brightness","contrast","saturation"].forEach(function(a){void 0!==d.adjustments[a]&&(k.adjustments[a]=d.adjustments[a]+f[a].default)}),void 0!==d.tintColor&&void 0!==e.tintMode&&(k.tintColor=u.c.fromArray(d.tintColor.rgba),k.tintMode=e.tintMode),void 0!==d.alpha&&(k.alpha=d.alpha),a.createSticker(k)})}},{key:"_deserializeTransformOperation",value:function(a){return C(b.prototype.__proto__||t()(b.prototype),"_deserializeTransformOperation",this).call(this,a).then(function(a){if(a)return a._ratio=null,a})}},{key:"_deserializeInputImage",value:function(){var a=this,b=this._data.image,c=b.data,d=b.type,e=b.uri;return c&&d&&(e="data:"+d+";base64,"+c),e?y.a.load(e).then(function(b){a._editor.setImage(b)}):r.a.resolve()}},{key:"_deserializeAdjustmentsOperation",value:function(a){var c=u.p.Operations.AdjustmentsOperation;return C(b.prototype.__proto__||t()(b.prototype),"_deserializeAdjustmentsOperation",this).call(this,a).then(function(b){if(!b)return null;var d=a.options,e={};return["gamma","whites","blacks","temperature"].forEach(function(a){if(void 0!==d[a]){var b=c.prototype.availableOptions[a],f=b.minValue,g=b.midValue,h=b.maxValue,i=d[a];i=i<0?g+(g-f)*i:g+(h-g)*i,e[a]=i}}),b.set(e),b})}},{key:"_deserializeFocusOperation",value:function(a){var c=a.options.options;switch(a.options.type){case"radial":return C(b.prototype.__proto__||t()(b.prototype),"_deserializeFocusOperation",this).call(this,a);case"linear":var d=c.start,e=c.end,f=c.blurRadius;return r.a.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:u.v.fromObject(d),controlPoint2:u.v.fromObject(e),blurRadius:f}));case"mirrored":var g=c.start,h=c.end,i=c.size,j=c.gradientSize,k=c.blurRadius;return r.a.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:u.v.fromObject(g),end:u.v.fromObject(h),size:i,gradientSize:j,blurRadius:k}));case"gaussian":var l=c.blurRadius;return r.a.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:l}))}}},{key:"_deserializeText",value:function(a,b){var c=b.options,d=c.fontSize,e=c.lineHeight,f=c.fontIdentifier,g=c.alignment,h=c.rotation,i=c.maxWidth,j=c.color,k=c.backgroundColor,l=this._ui.getFontLoader(),m=this._fontManager.getVariationByIdentifier(f);return m?l.setFonts([m.getFont()]):m=this._fontManager.getDefaultVariation(),l.load().then(function(){var b=a.getInputDimensions(!1),f=i*b.min()/b.x;return a.createText({fontSize:d,lineHeight:e,fontFamily:m.getFontFamily(),fontWeight:m.getFontWeight(),fontIdentifier:m.getIdentifier(),textMetrics:m.getTextMetrics(),alignment:g,rotation:h,maxWidth:f,text:c.text,color:u.c.fromArray(j.rgba),backgroundColor:u.c.fromArray(k.rgba),position:u.v.fromObject(c.position)})})}},{key:"_createBrushForPath",value:function(a){var b=a.brush,c=b.identifier,g=b.color,h=b.size,i=b.hardness,j={color:u.c.fromArray(g.rgba),size:h};void 0!==i&&(j.hardness=i);var k=this._brushManager.getBrushByIdentifier(c);if(k||(k=this._brushManager.getFirstBrush()),k.prototype&&k.prototype instanceof D)return new k(j);var l=u.q.extend({},k);delete l.image;var m=function(a){function b(){return d(this,b),e(this,(b.__proto__||t()(b)).apply(this,arguments))}return f(b,D),b}();return m.identifier=k.identifier,new m(u.q.extend({},l,j))}},{key:"_deserializeFrame",value:function(a,c){var d=this;return C(b.prototype.__proto__||t()(b.prototype),"_deserializeFrame",this).call(this,a,c).then(function(){var a=d._editor.operations.get("frame"),b=c.options,e=b.size,f=b.alpha,g=b.tintColor,h={};void 0!==e&&(h.scale=e),void 0!==f&&(h.alpha=f),void 0!==g&&(h.tintColor=u.c.fromArray(g.rgba)),a.set(h)})}},{key:"_deserializeTextDesign",value:function(a,b){var c=this,d=b.options,e=d.position,f=d.rotation,g=d.flipHorizontally,h=d.flipVertically,i=d.text,j=d.color,k=d.width,l=d.seed,m=d.inverted,n=d.identifier,o=new x.a(this._ui,this._getOptions("textdesign")),p=new z.a(this._ui,{fonts:u.d.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),q=a.constructor.TextDesignSprite.AssetManager,r=this._ui.getFontLoader(),s=new(o.getLayoutByIdentifier(n));return r.setFonts(p.getFonts()),q.setFonts(A({},q.getFonts(),p.getVariationsByIdentifier())),r.load().then(function(){var b=s.getImagePaths().map(function(a){return{path:a,fullPath:c._ui.getAssetPath(a),image:null}});return q.loadImages(b).then(function(){return s.onImagesLoaded(),a.createTextDesign({position:e,rotation:f,flipHorizontally:g,flipVertically:h,text:i,color:u.c.fromArray(j.rgba),width:k,seed:l,inverted:m,layout:s})})})}}]),b}();b.a=E,E.version="3.0.0"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=(c(4),c(122)),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.a),m(b,[{key:"_serializeTextDesign",value:function(a,b){var c=b.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);c.color={rgba:c.color};var d=b.getLayout();return d&&(c.identifier=d.constructor.identifier),{type:"textdesign",options:c}}}]),b}();b.a=n,n.version="3.1.0"},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(124),p=c(52),q=c(40),r=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),s(b,[{key:"_deserializeTextDesign",value:function(a,b){var c=this,d=b.options,e=d.position,f=d.rotation,g=d.flipHorizontally,h=d.flipVertically,i=d.text,j=d.color,k=d.width,l=d.seed,m=d.inverted,o=d.identifier,s=new p.a(this._ui,this._getOptions("textdesign")),t=new q.a(this._ui,{fonts:n.d.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),u=a.constructor.TextDesignSprite.AssetManager,v=this._ui.getFontLoader(),w=new(s.getLayoutByIdentifier(o));return v.setFonts(t.getFonts()),u.setFonts(r({},u.getFonts(),t.getVariationsByIdentifier())),v.load().then(function(){var b=w.getImagePaths().map(function(a){return{path:a,fullPath:c._ui.getAssetPath(a),image:null}});return u.loadImages(b).then(function(){return w.onImagesLoaded(),a.createTextDesign({position:e,rotation:f,flipHorizontally:g,flipVertically:h,text:i,color:n.c.fromArray(j.rgba),width:k,seed:l,inverted:m,layout:w})})})}}]),b}();b.a=t,t.version="3.1.0"},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=c(260),h=c(123),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._options=b,this._categoriesById={},this._categories=[],this._initCategories()}return i(a,[{key:"_initCategories",value:function(){var a=this,b=this._options,c=b.replaceCategories,d=b.categories,e=void 0===d?[]:d,i=f.u.cloneCategories(f.d.DEFAULTS.TRANSFORM_RATIO_CATEGORIES,"ratios");i=c?f.u.cloneCategories(e,"ratios"):f.u.mergeCategories(e,i,"ratios"),this._categories=i.map(function(a){var b=a.ratios,c=void 0===b?[]:b,d=function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(a,["ratios"]),e=new g.a(d);return e.setRatios(c.map(function(a){var b=new h.a(a);return b.getDimensions()&&(null==b.getForceDimensions()&&b.setForceDimensions(!0),null==b.getLockDimensions()&&b.setLockDimensions(!0)),b})),e}),this._categoriesById={},this._categories.forEach(function(b){a._categoriesById[b.getIdentifier()]=b})}},{key:"getCategories",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._categories.slice(0);if(a){var c=new g.a({name:"all",ratios:this._categories.map(function(a){return a.getRatios()}).reduce(function(a,b){return a.concat(b)})});b.unshift(c)}return b}},{key:"getRatiosForCategory",value:function(a){var b=this._options.availableRatios;return b?a.getRatios().filter(function(a){return-1!==b.indexOf(a.getIdentifier())}):a.getRatios()}},{key:"hasRatioValue",value:function(a){var b=this,c=!1;return this._categories.forEach(function(d){b.getRatiosForCategory(d).forEach(function(b){if(b.getRatio())"*"===b.getRatio()?c=!0:b.getRatio()===a&&(c=!0);else if(b.getDimensions()){var d=b.getDimensions();d.y/d.x===a&&(c=!0)}})}),c}}]),a}();b.a=j},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(6),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(8),o=c.n(n),p=c(1),q=c.n(p),r=c(4),s=c(53),t=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||q()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onBackButtonClick"),f._needsStyleFixes=!0,f.state={backButton:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,s.a),u(b,[{key:"_onBackButtonClick",value:function(){}},{key:"setSharedState",value:function(a){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=q()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||q()(b.prototype),"setSharedState",this).call(this,a,c),d&&this.props.controls.updateSharedState()}},{key:"fixStyles",value:function(){var a=this;return r.u.Browser.isIElte(10)?(this._table&&(this._table.style.height="100%"),this._container&&(this._container.style.height="100%"),new o.a(function(b){Object(r.z)(function(){if(a._root){var c=a._root.offsetHeight;if(a._container&&a._header){var d=a._header.offsetHeight;a._container.style.height=c-d+"px"}a._table&&(a._table.style.height=c+"px"),a._scrollbar&&a._scrollbar.update(),b()}},1e3)})):(this._scrollbar&&this._scrollbar.update(),o.a.resolve())}},{key:"_getRootProps",value:function(){return{}}},{key:"_renderContent",value:function(){return r.l.createElement("div",null)}},{key:"render",value:function(){var a=this,b=this.constructor.RootElement,c=function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(this._getRootProps(),[]),d=this.context.screen.state.currentControl,e=null===d,f={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",!0)+"')"};return r.l.createElement(w,{innerRef:function(b){c.innerRef&&c.innerRef(b),a._root=b}},r.l.createElement(x,{innerRef:function(b){a._table=b}},!e&&r.l.createElement(y,{innerRef:function(b){a._header=b}},this.state.backButton&&r.l.createElement(B,{style:f,onClick:this._onBackButtonClick}),r.l.createElement(A,null,this._t("pesdk."+d+".title.name"))),r.l.createElement(z,null,r.l.createElement(b,t({},c,{innerRef:function(b){a._container=b},className:void 0}),this._renderContent()))))}},{key:"container",get:function(){return this._container}}]),b}();v.contextTypes=s.a.contextTypes,v.propTypes={options:r.k.object},b.a=v;var w=r.w.div("ku10ek","ControlsComponentRoot"),x=r.w.div("rfecls","ControlsComponentTable"),y=r.w.div("1tkmkv6","ControlsComponentHeader"),z=r.w.div("vkb8c9","RootElementContainer");v.RootElement=r.w.div("rfecls",{withBorderTop:"120drhm"},"ControlsComponent");var A=r.w.div("1ru8sfa","ControlsComponentTitle"),B=r.w.button("gyx1pn","BackButton")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),m(b,[{key:"render",value:function(){var a=this.constructor.RootElement,b=function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(this.props,[]);return l.l.createElement(a,b)}}]),b}();n.contextTypes=l.b.contextTypes,b.a=n,n.RootElement=l.w.li("11o197p",{disabled:"16s6vgr"},"CanvasHeaderButtonComponent")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(38),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return c._input=a,c._onFileChange=c._onFileChange.bind(c),c._input.addEventListener("change",c._onFileChange),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)
}(b,l.e),n(b,[{key:"open",value:function(){this._input.value=null,this._input.click()}},{key:"_handleFile",value:function(a){var b=this,c=new window.FileReader;c.onload=function(a){var c=a.target.result,d=new window.Image;d.addEventListener("load",function(){b.emit("file",d)}),d.addEventListener("error",function(a){return m.a.instance.displayError(b._t("errors.title"),b._t("errors.imageLoadingError.text"))}),d.src=c},c.readAsDataURL(a)}},{key:"_onFileChange",value:function(){var a=this._input.files;a.length&&this._handleFile(a[0])}},{key:"dispose",value:function(){this._input.removeEventListener("change",this._onFileChange)}}]),b}();b.a=o},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(22),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onKnobDragStart","_onKnobDrag","_onKnobDragStop","_onBarDragStart","_onBarDrag","_onBarDragStop"),f.state={value:f.props.value||0,sliderPosition:0,foregroundLeft:0,foregroundWidth:0},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),n(b,[{key:"componentDidMount",value:function(){var a=this;Object(l.z)(function(){a._setValue(a.state.value,!1)})}},{key:"componentWillReceiveProps",value:function(a){a.value!==this.state.value&&this._setValue(a.value,!1)}},{key:"_onKnobDragStart",value:function(a){this._previousValue=this.state.value,this._initialSliderPosition=this.state.sliderPosition,this._initialPosition=a}},{key:"_onKnobDrag",value:function(a){var b=this._bar.offsetWidth,c=this._initialSliderPosition+a.x,d=(c=Math.max(0,Math.min(c,b)))/b,e=this.props.minValue+(this.props.maxValue-this.props.minValue)*d;this._setValue(e)}},{key:"_onKnobDragStop",value:function(){this._setValue(this.state.value,!0,!0)}},{key:"_onBarDragStart",value:function(a){this._previousValue=this.state.value,this._initialPosition=a.clone();var b=this._bar.offsetWidth,c=a.x/b,d=this.props.minValue+(this.props.maxValue-this.props.minValue)*c;this._setValue(d)}},{key:"_onBarDrag",value:function(a){var b=this._initialPosition.clone().add(a),c=this._bar.offsetWidth,d=b.x/c,e=this.props.minValue+(this.props.maxValue-this.props.minValue)*d;e=Math.max(this.props.minValue,Math.min(this.props.maxValue,e)),this._setValue(e)}},{key:"_onBarDragStop",value:function(){this._setValue(this.state.value,!0,!0)}},{key:"_getKnobStyle",value:function(){return{left:this.state.sliderPosition}}},{key:"_getForegroundStyle",value:function(){return{left:this.state.foregroundLeft,width:this.state.foregroundWidth}}},{key:"_setValue",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=this.props,e=d.minValue,f=(a-e)/(d.maxValue-e),g=this._bar.offsetWidth,h=g*f,i=f*g,j=0;this.props.middleDot&&(i=Math.abs(f-.5)*g,j=f<.5?.5*g-i:"50%"),this.setState({value:a,sliderPosition:h,foregroundWidth:i,foregroundLeft:j}),b&&this.props.onChange&&this.props.onChange(a,this._previousValue,c)}},{key:"_buildValue",value:function(a){return a%1!=0&&(a=a.toFixed(2)),this.props.positiveValuePrefix&&a>=0&&(a=""+this.props.positiveValuePrefix+a),this.props.valueUnit&&(a+=this.props.valueUnit),a}},{key:"render",value:function(){var a=this,b={style:this._getForegroundStyle()};return l.l.createElement(p,{disabled:this.props.disabled},l.l.createElement(m.a,{onStart:this._onBarDragStart,onDrag:this._onBarDrag,onStop:this._onBarDragStop,disabled:this.props.disabled},l.l.createElement(w,null,l.l.createElement(q,{ref:"foo",innerRef:function(b){a._bar=b}},l.l.createElement("div",null,l.l.createElement(s,{darkBackground:this.props.darkBackground}),l.l.createElement(t,b),l.l.createElement(m.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag,onStop:this._onKnobDragStop,disabled:this.props.disabled},l.l.createElement(v,{style:this._getKnobStyle(),className:void 0},l.l.createElement(u,{idle:0===this.state.value}))))))))}}]),b}();o.propTypes={value:l.k.number.isRequired,minValue:l.k.number.isRequired,maxValue:l.k.number.isRequired,middleDot:l.k.bool,onChange:l.k.func,positiveValuePrefix:l.k.string,valueUnit:l.k.string,label:l.k.string},o.contextTypes=l.b.contextTypes,b.a=o;var p=l.w.div("jc3w8i",{disabled:"1voy7lm"},"Slider"),q=l.w.div("1pvw1zw","Bar"),r=l.w.div("8gacw5","BarSection"),s=Object(l.w)(r)("120drhm",{darkBackground:"120drhm"},"BarBackgroundSection"),t=Object(l.w)(r)("1apine2","BarForegroundSection"),u=l.w.div("8i3bvo",{idle:"6eg4rp"},"Knob"),v=l.w.div("xsaflu","KnobTouchTarget"),w=l.w.div("1ssoezr","BarContainer")},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0}),c.d(b,"ControlGroupList",function(){return e}),c.d(b,"ControlGroup",function(){return f}),c.d(b,"ControlGroupTitle",function(){return g});var d=c(4),e=d.w.css("1f3fuxn","ControlGroupList"),f=d.w.css("1bxndxk","ControlGroup"),g=d.w.css("12fzsea","ControlGroupTitle")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),m(b,[{key:"render",value:function(){var a=this._getAssetPath("editor/controls/shared/checkbox.png",!0),b=this._getAssetPath("editor/controls/shared/checkbox-active.png",!0),c=this.props,d=c.styles,e=c.className,f=c.checked,g=c.onClick;return l.l.createElement(o,{styles:d,className:e,onClick:g,style:{backgroundImage:"url("+(f?b:a)+")"}})}}]),b}();b.a=n;var o=l.w.div("5nuoh","Checkbox");n.RootElement=o},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(82),n=c(54),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),o(b,[{key:"_renderRightPart",value:function(){var a=this,b=[];return this.props.inputClassName&&b.push(this.props.inputClassName),l.l.createElement(q,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:b.join(" "),innerRef:function(b){a._input=b},disabled:this.props.disabled})}},{key:"render",value:function(){var a=this.props,b=a.inputLabel,c=a.className,d=a.disabled,e=a.styles;return l.l.createElement(r,{styles:e,className:c,disabled:d},l.l.createElement(s,null,l.l.createElement(t,null,b&&l.l.createElement(u,null,b||" "),this._renderRightPart())))}}]),b}();p.contextTypes=m.a.contextTypes,b.a=p;var q=Object(l.w)(n.a)("12dz026","InputField"),r=Object(l.w)(m.a.RootElement)("9ngfap","ColorComponentInput"),s=l.w.div("15u7gri","Row"),t=l.w.div("1hy9z1m",{bottomAligned:"17xdalt"},"Column"),u=l.w.div("szltve","Title")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.PlainControlItem,o=l.ControlsStyles.PlainControlItemBackground,p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onWebcamClick","_onDropZoneClick","_onDropZoneDragEnter","_onDropZoneDragLeave","_onDropZoneDragOver","_onDropZoneDrop","_onImage"),f._dragCounter=0,f.state={dropZoneHovered:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseComponent),m(b,[{key:"_onWebcamClick",value:function(){this.props.onWebcamActivated&&this.props.onWebcamActivated()}},{key:"_onImage",value:function(a){this.props.onImage&&this.props.onImage(a)}},{key:"_onDropZoneClick",value:function(){this.refs.upload.open()}},{key:"_onDropZoneDragEnter",value:function(a){a.preventDefault(),this._dragCounter++,this.setState({dropZoneHovered:!0})}},{key:"_onDropZoneDragLeave",value:function(a){a.preventDefault(),0===--this._dragCounter&&this.setState({dropZoneHovered:!1})}},{key:"_onDropZoneDragOver",value:function(a){a.preventDefault()}},{key:"_onDropZoneDrop",value:function(a){var b=this;a.stopPropagation(),a.preventDefault(),(a=a.nativeEvent).returnValue=!1,this.setState({dropZoneHovered:!1},function(){if(a.target||a.dataTransfer){var c=a.target.files||a.dataTransfer.files;if(c&&!(c.length<=0))return c[0].type.match(/^image\//i)?void b._handleFile(c[0]):l.ModalManager.instance.displayError(b._t("pesdk.common.title.error"),b._t("pesdk.editor.text.invalidFileTypeError",{fileType:c[0].type}))}})}},{key:"_handleFile",value:function(a){var b=this,c=new window.FileReader;c.onload=function(a){var c=a.target.result,d=new window.Image;d.addEventListener("load",function(){b._onImage(d)}),d.addEventListener("error",function(a){return l.ModalManager.instance.displayError(b._t("pesdk.common.title.error"),b._t("pesdk.editor.text.imageLoadingError"))}),d.crossOrigin=b.context.editor.getCrossOrigin(),d.src=c},c.readAsDataURL(a)}},{key:"render",value:function(){var a={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return l.React.createElement(q,null,l.React.createElement(l.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onImage}),l.React.createElement(r,null,l.React.createElement(s,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},this.state.dropZoneHovered?this._t("pesdk.library.button.fileDropZoneHovered"):this._t("pesdk.library.button.fileDropZone")),!this.state.dropZoneHovered&&this.props.webcamEnabled&&l.React.createElement(t,{style:a,className:void 0,onClick:this._onWebcamClick})))}}]),b}();b.a=p;var q=Object(l.adonis)(n).li("fujban","Container"),r=Object(l.adonis)(o).div("17hsmc4","Background"),s=l.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),t=l.adonis.div("1y2fyfw","WebcamButton")},function(a,b,c){var d=c(0),e=c.n(d),f=c(8),g=c.n(f),h=c(15),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._queue=[],this._pendingPromises=0,this._maxConcurrency=b,this._maxQueueLength=c,this._minDelay=d,this._tick=this._tick.bind(this),this._lastPromiseDone=Date.now(),this._running=!0,this._animationFrameRequest=null,Object(h.b)(this._tick)}return i(a,[{key:"_tick",value:function(){this._running&&(Date.now()-this._lastPromiseDone>this._minDelay&&this._pendingPromises<this._maxConcurrency&&this._queue.length&&this._dequeue(),this._animationFrameRequest=Object(h.b)(this._tick))}},{key:"add",value:function(a){var b=this;return new g.a(function(c,d){if(b._queue.length>=b._maxQueueLength)return d(new Error("Max queue length reached"));b._queue.push({fn:a,resolve:c,reject:d})})}},{key:"_promisify",value:function(a){return void 0!==a&&"function"==typeof a.then?a:g.a.resolve(a)}},{key:"_dequeue",value:function(){var a=this,b=this._queue.shift(),c=Date.now();this._pendingPromises++;try{this._promisify(b.fn()).then(function(d){a._lastPromiseDone=c,a._pendingPromises--,b.resolve(d)}).catch(function(d){a._lastPromiseDone=c,a._pendingPromises--,b.reject(d)})}catch(a){this._lastPromiseDone=c,this._pendingPromises--,b.reject(a)}return!0}},{key:"dispose",value:function(){this._running=!1,this._animationFrameRequest&&Object(h.a)(this._animationFrameRequest)}}]),a}();b.a=j},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=c.n(l),n=c(327),o=c(329),p=c(4),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseControls),q(b,[{key:"_onEnter",value:function(){var a=this.context.editor;a.zoom.auto(!0,!1,function(){a.features.disable("zoom","drag")},!1)}},{key:"_onLeave",value:function(){this.context.editor.features.enable("zoom","drag")}}],[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,d=b.FOCUS_OPERATIONS.map(function(b){return a.get(b)}).reduce(function(a,b){return a||b}),e=d&&d.getInputDimensions(!1),f=d?d.constructor.identifier:null,g=b.getItemByOperationIdentifier(f),h=g?g.identifier:"none";if(c&&d){var i=c.getOptions(),j=p.q.defaults(i.editor.controlsOptions.focus,this.defaultOptions);d._options.highQualityCanvasBlur=j.highQualityCanvasBlur}return{operation:d||null,inputDimensions:e,operationIdentifier:f,selectedFocus:h,selectedFocusItem:g,blurRadius:d?d.getBlurRadius():0,linearFocus:"linear-focus"===f?{controlPoint1:d.getControlPoint1(),controlPoint2:d.getControlPoint2()}:null,mirroredFocus:"mirrored-focus"===f?{start:d.getStart(),end:d.getEnd(),size:d.getSize(),gradientSize:d.getGradientSize()}:null,radialFocus:"radial-focus"===f?{position:d.getPosition(),radius:d.getRadius(),gradientRadius:d.getGradientRadius()}:null,setSelectedFocus:function(b){b.operationIdentifier!==f&&(f&&a.remove(f),b.operationIdentifier&&a.getOrCreate(b.operationIdentifier))},setBlurRadius:function(a){d&&d.setBlurRadius(a)},setControlPoint1:function(a){"linear-focus"===f&&d.setControlPoint1(a)},setControlPoint2:function(a){"linear-focus"===f&&d.setControlPoint2(a)},setStart:function(a){"mirrored-focus"===f&&d.setStart(a)},setEnd:function(a){"mirrored-focus"===f&&d.setEnd(a)},setPosition:function(a){"radial-focus"===f&&d.setPosition(a)},setRadius:function(a){"radial-focus"===f&&d.setRadius(a)},setOperationOptions:function(a){d&&d.set(a)}}}},{key:"getPreloadAssets",value:function(a){var b=[];return this.ITEMS.forEach(function(a){b.push(a.backgroundImagePath),b.push(a.activeBackgroundImagePath)}),b}},{key:"isEnabled",value:function(a){return a.isToolAllowed("focus")&&a.isToolEnabled("focus")}},{key:"getItemByIdentifier",value:function(a){return b.ITEMS.filter(function(b){return b.identifier===a})[0]}},{key:"getItemByOperationIdentifier",value:function(a){return b.ITEMS.filter(function(b){return b.operationIdentifier===a})[0]}}]),b}();r.clickAtPosition=l.BaseControls.clickAtPosition,r.ITEMS=[{identifier:"none",operationIdentifier:null,backgroundImagePath:"editor/controls/focus/none.png",activeBackgroundImagePath:"editor/controls/focus/none-active.png"},{identifier:"radial",operationIdentifier:"radial-focus",backgroundImagePath:"editor/controls/focus/radial.png",activeBackgroundImagePath:"editor/controls/focus/radial-active.png"},{identifier:"mirrored",operationIdentifier:"mirrored-focus",backgroundImagePath:"editor/controls/focus/mirrored.png",activeBackgroundImagePath:"editor/controls/focus/mirrored-active.png"},{identifier:"linear",operationIdentifier:"linear-focus",backgroundImagePath:"editor/controls/focus/linear.png",activeBackgroundImagePath:"editor/controls/focus/linear-active.png"},{identifier:"gaussian",operationIdentifier:"blur",backgroundImagePath:"editor/controls/focus/gaussian.png",activeBackgroundImagePath:"editor/controls/focus/gaussian-active.png"}],r.FOCUS_OPERATIONS=r.ITEMS.map(function(a){return a.operationIdentifier}).filter(function(a){return a}),r.identifier="focus",r.controlsComponent=n.a,r.canvasControlsComponent=o.a,r.iconPath="editor/controls/focus/icon.png",r.activeIconPath="editor/controls/focus/icon-active.png",r.defaultOptions={availableModes:null,highQualityCanvasBlur:!1},r.requiredOperations=r.ITEMS.map(function(a){return a.operationIdentifier}).filter(function(a){return a}),r.updatableOperations=r.ITEMS.map(function(a){return a.operationIdentifier}).filter(function(a){return a}),r.switchToDefaultControlsOnRemoval=!1,m.a.Controls.FocusControls=r,b.a=r},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.PlainControlItem,o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.SharedStateComponent),m(b,[{key:"_onStickerClick",value:function(a){this.props.onStickerClick&&this.props.onStickerClick(a)}},{key:"_renderListItems",value:function(){var a=this,b=this.props.stickers,c=void 0,d=this.sharedState.selectedSprite;return d&&(c=d.getIdentifier()),b.map(function(b){var d=l.StickerManager.getURLForSticker(b,"thumb"),e=a._getAssetPath(d),f=a.context.editor.getCrossOrigin();return l.React.createElement(q,{selected:b.identifier===c,key:b.identifier,onClick:a._onStickerClick.bind(a,b),className:void 0,threeColumns:!0},l.React.createElement(r,{crossOrigin:f,src:e}))})}},{key:"render",value:function(){return l.React.createElement(p,null,this._renderListItems())}}]),b}();o.contextTypes=l.SharedStateComponent.contextTypes,b.a=o;var p=l.adonis.ul("18qztam","StickerList"),q=Object(l.adonis)(n).li("m4lnou","StickerListItem"),r=l.adonis.img("1382xgm","StickerImage")},function(a,b,c){var d=c(7),e=c(5);c(300),d.UI.DesktopUI=e,a.exports=e},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=c(221),q=c(80),r=c(49),s=c(131),t=c(90),u=c(267),v=c(268),w=c(76),x=c(269),y=c(270),z=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),A=function(a){return o.q.byteArrayToString(o.a.decode(a))};Object(u.a)(o.w,".pesdk-desktop-editor"),Object(v.a)(o.w);var B=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,b);var c=e(this,(b.__proto__||n()(b)).call(this));return c._mediator=new o.e,c._fontLoader=new w.a(c),c._options=a,c._initOptions(),c._initLanguage(),c._initEvents(),c._disposed=!1,c._preloader=new x.a(c,c._options,c._mediator),c._globalState=new o.s,c._isReady=!1,c._mediator.once(o.d.EVENTS.EDITOR_READY,function(){c._isReady=!0}),o.h.setLevel(c._options.logLevel),c._options.autoRun&&c.run(),c}return f(b,o.e),z(b,[{key:"run",value:function(){return!this._options.license||this._v()?(this._theme=this._options.theme,this._injectWebFonts(),this._options.container&&(this._options.container.style.position="relative",this._options.container.className+=" pesdk-desktop-editor"),this._render()):null}},{key:"_render",value:function(){var a=this,b=o.l.createElement(p.a,{ui:this,mediator:this._mediator,ref:function(b){a._component=b},options:this._options,globalState:this._globalState});if(this._options.renderReturnsComponent)return b;o.m.render(b,this._options.container)}},{key:"export",value:function(){var a;return(a=this.getEditor()).export.apply(a,arguments)}},{key:"save",value:function(){var a;return(a=this.getEditor()).save.apply(a,arguments)}},{key:"serialize",value:function(){var a;return(a=this.getEditor()).serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return this.getEditor().deserialize(a)}},{key:"getEditor",value:function(){return this._component.getEditor()}},{key:"isReady",value:function(){return this._isReady}},{key:"onReady",value:function(a){this._isReady?a():this._mediator.once(o.d.EVENTS.EDITOR_READY,a)}},{key:"_initOptions",value:function(){if(this._options=o.q.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,theme:t.a,autoRun:!0}),this._options.editor=o.q.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableSave:!1,enableLoad:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library"],controlsOrder:[["library"],["transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.maxMegaPixels=o.q.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=o.q.defaults(this._options.editor.export||{},{format:"image/png",type:o.o.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=o.q.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=o.q.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=o.q.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){var a=new window.Image;a.src=this._options.editor.image,this._options.editor.image=a}}},{key:"_injectWebFonts",value:function(){var a=[];for(var b in this._theme.fonts){var c=this._theme.fonts[b],d=this.getAssetPath(c.src,!0,!0);a.push('\n        @font-face {\n          font-family: "'+c.fontFamily+"\";\n          src: url('"+d+"') format('woff');\n          font-weight: "+c.fontWeight+";\n          font-style: "+c.fontStyle+";\n        }\n      ")}var e="\n      /* Injected by PhotoEditorSDK */\n      "+a.join("\n")+"\n    ";o.w.global(e,!0)}},{key:"_v",value:function(){return!!this[A("X29wdGlvbnM=")][A("bGljZW5zZQ==")]||(o.h.error(A("TGljZW5zaW5n"),A("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),o.h.error(A("TGljZW5zaW5n"),A("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}},{key:"_initEvents",value:function(){this._mediator.pipeEvents(this)}},{key:"_disposeEvents",value:function(){this._mediator.unpipeEvents(this)}},{key:"_initLanguage",value:function(){this._languages=o.q.deepDefaults(this._options.extensions.languages,{de:c(298),en:c(299)}),this._language=this._languages[this._options.language],this._language||o.h.error(this.constructor.name,"Language `"+this._options.language+"` not found!")}},{key:"translate",value:function(a,b){return o.u.translate(this._language,a,b)}},{key:"setImage",value:function(a){this._component&&this._component.setImage(a)}},{key:"getAssetPath",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=this._options.assets,e=d.baseUrl,f=d.resolver,g=e+"/"+a;return a.match(/(ftp|http|https):\/\//)&&(g=a),b&&(c||("undefined"!=typeof window&&window.devicePixelRatio||1)>1&&(a=a.replace(/\.[\w?=]+$/,function(a){return"@2x"+a})),g=e+"/ui/desktop/"+a),void 0!==f&&null!==f&&(g=f(g)),g}},{key:"getTheme",value:function(){return this._theme}},{key:"getFontLoader",value:function(){return this._fontLoader}},{key:"getPreloader",value:function(){return this._preloader}},{key:"dispose",value:function(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._options.renderReturnsComponent||o.m.unmountComponentAtNode(this._options.container),this._disposeEvents()}}]),b}();B.prototype.identifier="desktop",B.BaseComponent=o.b,B.React=o.l,B.adonis=o.w,B.SharedState=o.s,B.Constants=o.d,B.Events=o.d.EVENTS,B.Utils=o.u,B.ScrollbarComponent=q.a,B.JSONLoader=r.a,B.SliderComponent=s.a;var C=function(a){function b(){return d(this,b),e(this,(b.__proto__||n()(b)).apply(this,arguments))}return f(b,o.l.Component),z(b,[{key:"componentDidMount",value:function(){this._ui=new B(o.q.extend({},this.props,{container:this.refs.container})),this.props.onEditorReady&&this._ui.onReady(this.props.onEditorReady)}},{key:"render",value:function(){var a=o.q.extend({},this.props.style||{});return o.l.createElement("div",{style:a,ref:"container"})}},{key:"ui",get:function(){return this._ui}}]),b}();for(var D in B.ReactComponent=C,B.Controls={},y)B[D]=y[D];o.p.UI=o.p.UI||{},o.p.UI.DesktopUI=B,b.default=B},function(a,b,c){c(142);var d=c(10).Object;a.exports=function(a,b,c){return d.defineProperty(a,b,c)}},function(a,b,c){var d=c(12);d(d.S+d.F*!c(18),"Object",{defineProperty:c(16).f})},function(a,b,c){c(144),a.exports=c(10).Object.setPrototypeOf},function(a,b,c){var d=c(12);d(d.S,"Object",{setPrototypeOf:c(145).set})},function(a,b,c){var d=c(17),e=c(14),f=function(a,b){if(e(a),!d(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};a.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,b,d){try{(d=c(23)(Function.call,c(59).f(Object.prototype,"__proto__").set,2))(a,[]),b=!(a instanceof Array)}catch(a){b=!0}return function(a,c){return f(a,c),b?a.__proto__=c:d(a,c),a}}({},!1):void 0),check:f}},function(a,b,c){c(147);var d=c(10).Object;a.exports=function(a,b){return d.create(a,b)}},function(a,b,c){var d=c(12);d(d.S,"Object",{create:c(61)})},function(a,b,c){var d=c(16),e=c(14),f=c(30);a.exports=c(18)?Object.defineProperties:function(a,b){e(a);for(var c,g=f(b),h=g.length,i=0;h>i;)d.f(a,c=g[i++],b[c]);return a}},function(a,b,c){var d=c(20),e=c(62),f=c(150);a.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if((h=i[k++])!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k||0;return!a&&-1}}},function(a,b,c){var d=c(63),e=Math.max,f=Math.min;a.exports=function(a,b){return(a=d(a))<0?e(a+b,0):f(a,b)}},function(a,b,c){c(152),a.exports=c(10).Object.getPrototypeOf},function(a,b,c){var d=c(31),e=c(89);c(67)("getPrototypeOf",function(){return function(a){return e(d(a))}})},function(a,b){a.exports=c},function(a,b,c){var d=c(155),e=c(156),f=c(157);a.exports=function(){function a(a,b,c,d,g,h){h!==f&&e(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return c.checkPropTypes=d,c.PropTypes=c,c}},function(a,b,c){function d(a){return function(){return a}}var e=function(){};e.thatReturns=d,e.thatReturnsFalse=d(!1),e.thatReturnsTrue=d(!0),e.thatReturnsNull=d(null),e.thatReturnsThis=function(){return this},e.thatReturnsArgument=function(a){return a},a.exports=e},function(a,b,c){a.exports=function(a,b,c,d,e,f,g,h){if(!a){var i;if(void 0===b)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var j=[c,d,e,f,g,h],k=0;(i=new Error(b.replace(/%s/g,function(){return j[k++]}))).name="Invariant Violation"}throw i.framesToPop=1,i}}},function(a,b,c){
a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(a,b){a.exports={primaryColor:"#2D7BFF",primaryColorRGB:"45, 123, 255",backgroundColor:"#141415",backgroundColorRGB:"20, 20, 21",controlsKnobColor:"white",controlsBackgroundColor:"#232326",controlsBackgroundColorRGB:"35, 35, 38",controlsLightBackgroundColor:"#2a2a2e",controlsOutlineColor:"rgba(255, 255, 255, 0.6)",controlsSeparatorColor:"#1b1b1d",navigationBackgroundColor:"#202022",navigationBackgroundColorRGB:"32, 32, 34",textColor:"#FFFFFF",dimmedTextColor:"#888888",dimmedTextColorRGB:"136, 136, 136",filterItemBackgroundColor:"#4b4b4c",secondaryControlsBackgroundColor:"#2a2a2e",secondaryControlsBackgroundColorRGB:"42, 42, 46",focusItemBackgroundColor:"#343437",sliderBackgroundColor:"rgba(255,255,255,0.24)",darkSliderBackgroundColor:"#1B1B1E",sliderKnobColor:"#b5b5be",sliderCircleKnobColor:"#c8c8d2",highlightColor:"#2675F8",highlightColorRGB:"38, 117, 253",darkHighlightColorRGB:"15, 47, 101",buttonBorderColor:"#303034",defaultShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.60)",inputModalButtonBarColor:"#262629",modalErrorColor:"#C23A3A",modalWarningColor:"#C18226",modalLoadingColor:"#2D7BFF",zIndex:function(a){return 5*["background","controls","controlsOverlays","overlays","navigation"].indexOf(a)},transitionDuration:.3,listItemSlideInDelay:100,scrollbarGradientSize:64,uppercaseBoldFontFamily:"sourcesansprobold",uppercaseSemiBoldFontFamily:"sourcesansprosemibold",regularFontFamily:"firasansregular",mediumFontFamily:"firasansmedium",fonts:{firasansmedium:{fontFamily:"firasansmedium",fontWeight:"500",fontStyle:"normal",src:"fonts/FiraSans-Medium.woff"},firasansregular:{fontFamily:"firasansregular",fontWeight:"400",fontStyle:"normal",src:"fonts/FiraSans-Regular.woff"},sourcesansprobold:{fontFamily:"sourcesansprobold",fontWeight:"bolder",fontStyle:"normal",src:"fonts/SourceSansPro-Bold.woff"},sourcesansprosemibold:{fontFamily:"sourcesansprosemibold",fontWeight:"bold",fontStyle:"normal",src:"fonts/SourceSansPro-Semibold.woff"}}}},function(a,b,c){var d;d=function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0}),b.ThemeProvider=b.withTheme=void 0;var e=d(c(1)),f=d(c(27)),g=d(c(28)),h=d(c(29)),i=d(c(30));b.default=function(a){var b=new e.default(a),c=function(a){if(a instanceof g.default){var c=a,d={};return f.default.forEach(function(a){d[a]=function(d,e,f){return"string"==typeof e&&(f=e,e=void 0),b.createComponent(a,{styles:d,variations:e,name:f,baseStyles:c})}}),d}return function(c,d,e){return"string"==typeof d&&(e=d,d=void 0),b.createComponent(a,{styles:c,variations:d,name:e})}};return f.default.forEach(function(a){c[a]=function(c,d,e){return"string"==typeof d&&(e=d,d=void 0),b.createComponent(a,{styles:c,variations:d,name:e})}}),c.global=function(a){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=b.getOptions(),e=d.injection,f=d.theme;if(e||c){"function"==typeof a&&(a=a(f));var g=b.getStylesBuffer();g.bufferCSS(a),g.flushToStyleTag(c)}},c.css=function(a,c,d){return"string"==typeof c&&(d=c,c=void 0),new g.default(b,{styles:a,variations:c,name:d||"baseStyles"})},["renderToStatic"].forEach(function(a){c[a]=b[a].bind(b)}),c},b.withTheme=h.default,b.ThemeProvider=i.default},function(a,b,c){(function(a){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=d(c(3)),g=d(c(5)),h=c(4),i=void 0!==a&&"production"===a.env.NODE_ENV,j=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._options=(0,h.defaults)(b,{injection:!0,batchInjection:!0,minified:!1,autoPrefix:!0,cssSelectorPrefix:"",classNamePrefix:"",hashSeparator:"-",nameSeparator:"__",variationSeparator:"--",styleNode:null,injectionMode:i?"fast":"debug",hashedStyles:!1}),this._stylesBuffer=new f.default(this),this._componentFactory=new g.default(this,this._options)}return e(a,[{key:"createComponent",value:function(a,b){return this._componentFactory.createComponent(a,b)}},{key:"renderToStatic",value:function(a){this._stylesBuffer.disableInjection();var b=a(),c=this._stylesBuffer.flushToString(!0);return this._stylesBuffer.enableInjection(),{css:{content:c},html:b}}},{key:"getStylesBuffer",value:function(){return this._stylesBuffer}},{key:"getOptions",value:function(){return this._options}}]),a}();b.default=j}).call(b,c(2))},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(j===setTimeout)return setTimeout(a,0);if((j===c||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=e(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,function(a){if(k===clearTimeout)return clearTimeout(a);if((k===d||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};!function(){try{j="function"==typeof setTimeout?setTimeout:c}catch(a){j=c}try{k="function"==typeof clearTimeout?clearTimeout:d}catch(a){k=d}}();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||e(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(a){return[]},l.binding=function(a){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(a){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(4),g=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._adonis=b,this._injectionEnabled=!0,this._bufferedSelectors={},this._buffer=[],this._styleNode=this._findStyleNode(),this._sheet=this._findSheet()}return e(a,[{key:"_findSheet",value:function(){if(this._styleNode){if(this._styleNode.sheet)return this._styleNode.sheet;for(var a=document.styleSheets,b=0;b<a.length;b++){var c=a[b];if(c.ownerNode===this._styleNode)return c}}}},{key:"_findStyleNode",value:function(){var a=this._adonis.getOptions().styleNode;return a||("undefined"==typeof document?null:((a=document.createElement("style")).setAttribute("data-adonis",!0),document.head.appendChild(a),a))}},{key:"bufferCSS",value:function(a){this._buffer.push(a)}},{key:"bufferRulesets",value:function(a){var b=this;a.forEach(function(a){var c=d(a,2),e=c[0];c[1],b._bufferedSelectors[e]=!0}),Array.prototype.push.apply(this._buffer,a.map(function(a){return d(a,2)[1]}))}},{key:"isSelectorBuffered",value:function(a){return this._bufferedSelectors[a]}},{key:"disableInjection",value:function(){this._injectionEnabled=!1}},{key:"enableInjection",value:function(){this._injectionEnabled=!0}},{key:"flushToString",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this._adonis.getOptions().minified,c=this._buffer.join(b?"":"\n\n");return this._buffer=[],a&&(this._bufferedSelectors={}),c}},{key:"_injectFast",value:function(){var a=this;this._buffer.forEach(function(b){a._sheet.insertRule(b,a._sheet.cssRules.length)})}},{key:"_injectDebug",value:function(){var a=this.flushToString();if(a){var b=this._adonis.getOptions().minified,c=this._styleNode.innerHTML.length>0;this._styleNode.appendChild(document.createTextNode((b||!c?"":"\n\n")+a))}}},{key:"_flushToStyleTag",value:function(){var a=this._adonis.getOptions().injectionMode;if("fast"===a&&this._sheet.insertRule)this._injectFast();else{if("debug"!==a)throw new Error("Unknown CSS injection mode: `"+a+"`");this._injectDebug()}this._buffer=[]}},{key:"flushToStyleTag",value:function(){var a=this;if(this._injectionEnabled){var b=this._adonis.getOptions().batchInjection;!this._nextTick&&b?this._nextTick=(0,f.requestAnimationFrame)(function(){a._nextTick=null,a._flushToStyleTag()}):b||this._flushToStyleTag()}}}]),a}();b.default=g},function(a,b){(function(a){Object.defineProperty(b,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=(b.defaults=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e={};for(var f in a)e[f]=a[f];for(var g=0;g<c.length;g++){var h=c[g];for(var i in h)void 0===e[i]&&(e[i]=h[i])}return e},b.hashObject=function(a){for(var b=JSON.stringify(a),c=b.length,d=c,e=0,f=void 0;c>=4;)f=1540483477*(65535&(f=255&b.charCodeAt(e)|(255&b.charCodeAt(++e))<<8|(255&b.charCodeAt(++e))<<16|(255&b.charCodeAt(++e))<<24))+((1540483477*(f>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),c-=4,++e;switch(c){case 3:d^=(255&b.charCodeAt(e+2))<<16;case 2:d^=(255&b.charCodeAt(e+1))<<8;case 1:d=1540483477*(65535&(d^=255&b.charCodeAt(e)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),((d^=d>>>15)>>>0).toString(36)},b.flatten=function a(b){return b.reduce(function(b,c){return b.concat(Array.isArray(c)?a(c):c)},[])},b.toStaticStyles=function a(b){var d={};for(var e in b){var f=b[e];"object"===(void 0===f?"undefined":c(f))?d[e]=a(f):"function"!=typeof f&&(d[e]=f)}return d},b.deepMerge=function a(b,d){var e={};for(var f in b)e[f]=b[f];for(var g in d)"object"===c(d[g])&&b[g]?e[g]=a(b[g],d[g]):e[g]=d[g];return e});b.deepMergeAll=function(a){return a.reduce(function(a,b){return d(a,b)},{})},b.resolveStylesObject=function a(b,d){var e={};for(var f in b){var g=b[f];if("object"===(void 0===g?"undefined":c(g)))e[f]=a(g,d);else if("function"==typeof g){if(!d)throw new Error("Trying to resolve a dynamic property without a `theme` given.");e[f]=g(d)}else e[f]=g}return e},b.findAllCombinations=function(a){return function a(b,c){var d=b[0];if(void 0===d)return c;for(var e=0,f=c.length;e<f;++e)c.push(c[e].concat(d));return a(b.slice(1),c)}(a,[[]]).slice(1)},b.requestAnimationFrame=function(){for(var b=0,c=void 0===a?window:a,d=c.requestAnimationFrame,e=["ms","moz","webkit","o"],f=0;f<e.length&&!d;++f)d=c[e[f]+"RequestAnimationFrame"];return!d&&void 0!==c&&c.setImmediate&&(d=c.setImmediate),d&&(d=d.bind(c)),d||(d=function(a){var c=(new Date).getTime(),d=Math.max(0,16-(c-b)),e=setTimeout(function(){a(c+d)},d);return b=c+d,e}),d}()}).call(b,function(){return this}())},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(6),h=d(g),i=c(4),j=d(c(7)),k=d(c(16)),l=d(c(17)),m=d(c(26)),n=function(){function a(b,c){e(this,a),this._adonis=b,this._options=c}return f(a,[{key:"_getName",value:function(a){return"string"==typeof a?a:a.name?a.name:"adonis"}},{key:"_getTargetStyles",value:function(a,b){var c=[a.adonisBaseStyles,a.adonisStyles];return a.adonisTarget&&c.unshift(this._getTargetStyles(a.adonisTarget)),a.RootElement&&c.unshift(this._getTargetStyles(a.RootElement)),(0,i.flatten)(c).filter(function(a){return a})}},{key:"createComponent",value:function(a,b){var c=this._adonis,d=b.name;d||(d=this._getName(a));var n="string"==typeof a,o=a.prototype instanceof j.default,p=!o&&a.prototype instanceof g.Component,q=b.styles,r=b.variations,s=b.baseStyles;r=r||{};var t=new k.default(c,{styles:q,variations:r,name:d}),u=c.getOptions(),v=u.injection,w=u.theme,x=u.hashedStyles;if("pre"===v&&!x){var y;y=this._getTargetStyles(a,d).concat([s,t]).filter(function(a){return a}),new m.default(c,y,w).bufferRulesets(),c.getStylesBuffer().flushToStyleTag()}var z=function(g){function k(){var a;e(this,k);for(var b=arguments.length,d=Array(b),f=0;f<b;f++)d[f]=arguments[f];var g=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=k.__proto__||Object.getPrototypeOf(k)).call.apply(a,[this].concat(d)));return g._updateStylesManager(),g._adonis=c,g}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(k,j.default),f(k,[{key:"_updateStylesManager",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this._allStyles=[s,t].concat(a.styles||[]).filter(function(a){return a});var b=this._getActiveVariationsFromProps(a);this._stylesManager=new l.default(c,this._allStyles,b,this.context.theme)}},{key:"componentWillReceiveProps",value:function(a){var b=this,c=a.styles!==this.props.styles,d=!1;(0,i.flatten)(this._allStyles.map(function(a){return a.getVariations()})).forEach(function(c){a[c]!==b.props[c]&&(d=!0)}),(c||d)&&this._updateStylesManager(a)}},{key:"_cloneProps",value:function(){var a=this,b={};return Object.keys(this.props).forEach(function(c){b[c]=a.props[c]}),b}},{key:"_getActiveVariationsFromProps",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,b={};return this._allStyles.forEach(function(a){return a.getVariations().forEach(function(a){return b[a]=!0})}),Object.keys(b).filter(function(b){return!0===a[b]}).sort()}},{key:"_buildClassName",value:function(){var a=this.props.className,b=[];b.push(a);var c=this._stylesManager.getClassName();return b.push(c),{className:b.filter(function(a){return a}).join(" ")}}},{key:"_shouldInjectCSS",value:function(){return!(!v||x)&&(n||p&&!o)}},{key:"render",value:function(){var c=this._cloneProps(),d=this._buildClassName().className,e=this._adonis.getStylesBuffer();if(this._shouldInjectCSS()&&(this._stylesManager.bufferRulesets(),!0!==v||x||e.flushToStyleTag()),n){var f=b.variations;f&&Object.keys(f).forEach(function(a){delete c[a]}),this.props._activeParentVariations&&this.props._activeParentVariations.forEach(function(a){delete c[a]}),s&&s.getVariations().forEach(function(a){delete c[a]})}n?c.className=d:(c.styles=(0,i.flatten)([t].concat(this.props.styles||[])),c._activeParentVariations=Object.keys(r||{}).concat(this.props._activeParentVariations||[]));var g=this.props,j=g.children,k=g.innerRef;return k&&(p||n?c.ref=k:o&&(c.innerRef=k)),n&&(delete c.styles,delete c.innerRef,delete c._activeParentVariations),h.default.createElement(a,c,j)}}],[{key:"name",get:function(){return d}}]),k}();return z.contextTypes=j.default.contextTypes,z.adonisTarget=a,z.adonisStyles=t,z.adonisBaseStyles=s,z}}]),a}();b.default=n},function(b,c){b.exports=a},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d,e=c(6),f=c(8),g=(d=f)&&d.__esModule?d:{default:d},h=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,e.Component),b}();b.default=h,h.contextTypes={theme:g.default.object}},function(a,b,c){(function(b){if("production"!==b.env.NODE_ENV){var d="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;a.exports=c(9)(function(a){return"object"==typeof a&&null!==a&&a.$$typeof===d},!0)}else a.exports=c(15)()}).call(b,c(2))},function(a,b,c){(function(b){var d=c(10),e=c(11),f=c(12),g=c(13),h=c(14);a.exports=function(a,c){function i(a,b){return a===b?0!==a||1/a==1/b:a!=a&&b!=b}function j(a){this.message=a,this.stack=""}function k(a){function d(d,k,l,m,n,o,p){if(m=m||s,o=o||l,p!==g)if(c)e(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==b.env.NODE_ENV&&"undefined"!=typeof console){var q=m+":"+l;!h[q]&&i<3&&(f(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",o,m),h[q]=!0,i++)}return null==k[l]?d?new j(null===k[l]?"The "+n+" `"+o+"` is marked as required in `"+m+"`, but its value is `null`.":"The "+n+" `"+o+"` is marked as required in `"+m+"`, but its value is `undefined`."):null:a(k,l,m,n,o)}if("production"!==b.env.NODE_ENV)var h={},i=0;var k=d.bind(null,!1);return k.isRequired=d.bind(null,!0),k}function l(a){return k(function(b,c,d,e,f,g){var h=b[c];return n(h)!==a?new j("Invalid "+e+" `"+f+"` of type `"+o(h)+"` supplied to `"+d+"`, expected `"+a+"`."):null})}function m(b){switch(typeof b){case"number":case"string":case"undefined":return!0;case"boolean":return!b;case"object":if(Array.isArray(b))return b.every(m);if(null===b||a(b))return!0;var c=function(a){var b=a&&(q&&a[q]||a[r]);if("function"==typeof b)return b}(b);if(!c)return!1;var d,e=c.call(b);if(c!==b.entries){for(;!(d=e.next()).done;)if(!m(d.value))return!1}else for(;!(d=e.next()).done;){var f=d.value;if(f&&!m(f[1]))return!1}return!0;default:return!1}}function n(a){var b=typeof a;return Array.isArray(a)?"array":a instanceof RegExp?"object":function(a,b){return"symbol"===a||"Symbol"===b["@@toStringTag"]||"function"==typeof Symbol&&b instanceof Symbol}(b,a)?"symbol":b}function o(a){if(void 0===a||null===a)return""+a;var b=n(a);if("object"===b){if(a instanceof Date)return"date";if(a instanceof RegExp)return"regexp"}return b}function p(a){var b=o(a);switch(b){case"array":case"object":return"an "+b;case"boolean":case"date":case"regexp":return"a "+b;default:return b}}var q="function"==typeof Symbol&&Symbol.iterator,r="@@iterator",s="<<anonymous>>",t={array:l("array"),bool:l("boolean"),func:l("function"),number:l("number"),object:l("object"),string:l("string"),symbol:l("symbol"),any:k(d.thatReturnsNull),arrayOf:function(a){return k(function(b,c,d,e,f){if("function"!=typeof a)return new j("Property `"+f+"` of component `"+d+"` has invalid PropType notation inside arrayOf.");var h=b[c];if(!Array.isArray(h)){return new j("Invalid "+e+" `"+f+"` of type `"+n(h)+"` supplied to `"+d+"`, expected an array.")}for(var i=0;i<h.length;i++){var k=a(h,i,d,e,f+"["+i+"]",g);if(k instanceof Error)return k}return null})},element:function(){return k(function(b,c,d,e,f){var g=b[c];if(!a(g)){return new j("Invalid "+e+" `"+f+"` of type `"+n(g)+"` supplied to `"+d+"`, expected a single ReactElement.")}return null})}(),instanceOf:function(a){return k(function(b,c,d,e,f){if(!(b[c]instanceof a)){var g=a.name||s;return new j("Invalid "+e+" `"+f+"` of type `"+function(a){return a.constructor&&a.constructor.name?a.constructor.name:s}(b[c])+"` supplied to `"+d+"`, expected instance of `"+g+"`.")}return null})},node:function(){return k(function(a,b,c,d,e){return m(a[b])?null:new j("Invalid "+d+" `"+e+"` supplied to `"+c+"`, expected a ReactNode.")})}(),objectOf:function(a){return k(function(b,c,d,e,f){if("function"!=typeof a)return new j("Property `"+f+"` of component `"+d+"` has invalid PropType notation inside objectOf.");var h=b[c],i=n(h);if("object"!==i)return new j("Invalid "+e+" `"+f+"` of type `"+i+"` supplied to `"+d+"`, expected an object.");for(var k in h)if(h.hasOwnProperty(k)){var l=a(h,k,d,e,f+"."+k,g);if(l instanceof Error)return l}return null})},oneOf:function(a){return Array.isArray(a)?k(function(b,c,d,e,f){for(var g=b[c],h=0;h<a.length;h++)if(i(g,a[h]))return null;return new j("Invalid "+e+" `"+f+"` of value `"+g+"` supplied to `"+d+"`, expected one of "+JSON.stringify(a)+".")}):("production"!==b.env.NODE_ENV&&f(!1,"Invalid argument supplied to oneOf, expected an instance of array."),d.thatReturnsNull)},oneOfType:function(a){if(!Array.isArray(a))return"production"!==b.env.NODE_ENV&&f(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),d.thatReturnsNull;for(var c=0;c<a.length;c++){var e=a[c];if("function"!=typeof e)return f(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",p(e),c),d.thatReturnsNull}return k(function(b,c,d,e,f){for(var h=0;h<a.length;h++){if(null==(0,a[h])(b,c,d,e,f,g))return null}return new j("Invalid "+e+" `"+f+"` supplied to `"+d+"`.")})},shape:function(a){return k(function(b,c,d,e,f){var h=b[c],i=n(h);if("object"!==i)return new j("Invalid "+e+" `"+f+"` of type `"+i+"` supplied to `"+d+"`, expected `object`.");for(var k in a){var l=a[k];if(l){var m=l(h,k,d,e,f+"."+k,g);if(m)return m}}return null})}};return j.prototype=Error.prototype,t.checkPropTypes=h,t.PropTypes=t,t}}).call(b,c(2))},function(a,b){function c(a){return function(){return a}}var d=function(){};d.thatReturns=c,d.thatReturnsFalse=c(!1),d.thatReturnsTrue=c(!0),d.thatReturnsNull=c(null),d.thatReturnsThis=function(){return this},d.thatReturnsArgument=function(a){return a},a.exports=d},function(a,b,c){(function(b){var c=function(a){};"production"!==b.env.NODE_ENV&&(c=function(a){if(void 0===a)throw new Error("invariant requires an error message argument")}),a.exports=function(a,b,d,e,f,g,h,i){if(c(b),!a){var j;if(void 0===b)j=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[d,e,f,g,h,i],l=0;(j=new Error(b.replace(/%s/g,function(){return k[l++]}))).name="Invariant Violation"}throw j.framesToPop=1,j}}}).call(b,c(2))},function(a,b,c){(function(b){var d=c(10);"production"!==b.env.NODE_ENV&&(d=function(a,b){if(void 0===b)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==b.indexOf("Failed Composite propType: ")&&!a){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];(function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0,f="Warning: "+a.replace(/%s/g,function(){return c[e++]});"undefined"!=typeof console&&console.error(f);try{throw new Error(f)}catch(a){}}).apply(void 0,[b].concat(d))}}),a.exports=d}).call(b,c(2))},function(a,b){a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(a,b,c){(function(b){if("production"!==b.env.NODE_ENV)var d=c(11),e=c(12),f=c(13),g={};a.exports=function(a,c,h,i,j){if("production"!==b.env.NODE_ENV)for(var k in a)if(a.hasOwnProperty(k)){var l;try{d("function"==typeof a[k],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",i||"React class",h,k),l=a[k](c,k,i,h,null,f)}catch(a){l=a}if(e(!l||l instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",i||"React class",h,k,typeof l),l instanceof Error&&!(l.message in g)){g[l.message]=!0;var m=j?j():"";e(!1,"Failed %s type: %s%s",h,l.message,null!=m?m:"")}}}}).call(b,c(2))},function(a,b,c){var d=c(10),e=c(11),f=c(13);a.exports=function(){function a(a,b,c,d,g,h){h!==f&&e(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function b(){return a}a.isRequired=a;var c={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b};return c.checkPropTypes=d,c.PropTypes=c,c}},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=c(4),f=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._adonis=b,this._options=(0,e.defaults)(c,{variations:[],styles:{},name:"Unnamed"});var d=this._adonis.getOptions().hashedStyles;if(d&&"string"!=typeof this._options.styles)throw new Error("Passing style objects with `hashedStyles` set to true is invalid.");this._hash=d?this._options.styles:(0,e.hashObject)(this._options.styles),this._variationHashes=this._hashVariations()}return d(a,[{key:"_hashVariations",value:function(){var a={},b=this._adonis.getOptions().hashedStyles,c=this._options.variations;for(var d in c){var f=c[d];a[d]=b?f:(0,e.hashObject)(f)}return a}},{key:"getIdentifierForVariations",value:function(a){var b=this,c=this._options.name,d=this._adonis.getOptions(),e=d.hashSeparator,f=d.variationSeparator,g=""+c+e+this._hash;return a.sort().forEach(function(a){var c=b._variationHashes[a];c&&(g+=""+f+a+e+c)}),g}},{key:"getStyles",value:function(){return this._options.styles}},{key:"getVariationStyles",value:function(a){var b=this._options.variations;return a?a.map(function(a){return b[a]}).filter(function(a){return a}):b}},{key:"getVariations",value:function(){return Object.keys(this._options.variations||{})}}]),a}();b.default=f},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d,e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(4),g=c(18),h=(d=g)&&d.__esModule?d:{default:d},i=function(){function a(b,c,d,e){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._adonis=b,this._styles=c,this._theme=e,this._activeVariations=d,this._className=this._generateClassName(this._activeVariations),this._baseSelector="."+this._className,this._rulesets=this._generateRulesets()}return e(a,[{key:"generateCSS",value:function(){return this._rulesets.map(function(a){return a.toCSS()}).filter(function(a){return a})}},{key:"bufferRulesets",value:function(){var a=this._adonis.getStylesBuffer(),b=this._rulesets.filter(function(b){return!a.isSelectorBuffered(b.getSelector())&&b.hasDeclarations()}).map(function(a){return[a.getSelector(),a.toCSS()]});a.bufferRulesets(b)}},{key:"_getCombinedStyles",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=(0,f.flatten)(this._styles.map(function(b){return[b.getStyles(),b.getVariationStyles(a)]}));return(0,f.deepMergeAll)(b)}},{key:"_generateClassName",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=this._adonis.getOptions(),c=b.nameSeparator;return b.classNamePrefix+this._styles.map(function(b){return b.getIdentifierForVariations(a)}).join(c)}},{key:"_generateRulesets",value:function(){var a=new h.default(this._adonis,this._baseSelector,this._getCombinedStyles(this._activeVariations),{theme:this._theme});return(0,f.flatten)([a,a.getSubRulesets()])}},{key:"getClassName",value:function(){return this._className}}]),a}();b.default=i},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(4),g=d(c(19)),h=d(c(21)),i=function(){function a(b,c,d,e){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._options=e,this._adonis=b,this._selector=c,this._styles=d,this._resolvedStyles=(0,f.resolveStylesObject)(this._styles,this._options.theme);var g=this._adonis.getOptions().hashedStyles;this._hash=g?this._styles:(0,f.hashObject)(this._styles);var h=this._parseStyles(),i=h.subRulesets,j=h.declarations;this._subRulesets=i,this._declarations=j}return e(a,[{key:"_getSubRuleset",value:function(b,c){for(var d=this,e=this._adonis.getOptions().minified,g=null,i=function(b,e){var h=(0,f.deepMerge)(d._options,{parentSelector:e});g=new a(d._adonis,b,c,h)},j=0;j<h.default.length;j++)if((0,h.default[j])(b,this._selector,i,e),g)return g}},{key:"_parseStyles",value:function(){var a=[],b=[];for(var c in this._resolvedStyles){var d=this._resolvedStyles[c],e=this._getSubRuleset(c,d);e?a.push(e,e.getSubRulesets()):b.push(new g.default(this._adonis,c,d))}return{subRulesets:a,declarations:b}}},{key:"toCSS",value:function(){var a=this._options.parentSelector,b=this._adonis.getOptions(),c=b.minified,d=b.cssSelectorPrefix;if(0===this._declarations.length)return null;var e=a&&a.match(/^@/),f="",g="";a?(d&&!e&&(f+=d),f+=a+(c?"{":" {\n"),g="  "):f+=d;var h="";return d&&e&&(h+=d),h+=this._selector,f+=g+h+(c?"{":" {\n"),this._declarations.forEach(function(a){f+=g+a.toCSS()+(c?"":"\n")}),f+=g+"}",a&&(f+=c?"}":"\n}"),f}},{key:"getSubRulesets",value:function(){return this._subRulesets}},{key:"hasDeclarations",value:function(){return 0!==this._declarations.length}},{key:"getSelector",value:function(){return this._selector}}]),a}();b.default=i},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d,e=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}(a,b)
;throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(20),h=(d=g)&&d.__esModule?d:{default:d},i=function(){function a(b,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._adonis=b,this.key=c,this.value=d,this.cssKey=this.key.replace(/([A-Z])/g,function(a){return"-"+a[0].toLowerCase()})}return f(a,[{key:"_getAutoPrefixedKeyPairs",value:function(){var a=this,b=h.default[this.key],c=[];return b&&b.forEach(function(b){c.push(["-"+b+"-"+a.cssKey,a.value])}),c}},{key:"toCSS",value:function(){var a=this._adonis.getOptions(),b=a.minified,c=a.autoPrefix,d=[[this.cssKey,this.value]];return c&&(d=d.concat(this._getAutoPrefixedKeyPairs())),d.map(function(a){var c=e(a,2),d=c[0],f=c[1];return(b?"":"  ")+d+":"+(b?"":" ")+f+";"}).join(b?"":"\n")}}]),a}();b.default=i},function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c="webkit",d="moz",e="ms";b.default={appearance:[c,d],userSelect:[c,d,e],textEmphasisPosition:[c],textEmphasis:[c],textEmphasisStyle:[c],textEmphasisColor:[c],boxDecorationBreak:[c],clipPath:[c],maskImage:[c],maskMode:[c],maskRepeat:[c],maskPosition:[c],maskClip:[c],maskOrigin:[c],maskSize:[c],maskComposite:[c],mask:[c],maskBorderSource:[c],maskBorderMode:[c],maskBorderSlice:[c],maskBorderWidth:[c],maskBorderOutset:[c],maskBorderRepeat:[c],maskBorder:[c],maskType:[c],textDecorationStyle:[c],textDecorationSkip:[c],textDecorationLine:[c],textDecorationColor:[c],filter:[c],fontFeatureSettings:[c],breakAfter:[c,d,e],breakBefore:[c,d,e],breakInside:[c,d,e],columnCount:[c,d],columnFill:[c,d],columnGap:[c,d],columnRule:[c,d],columnRuleColor:[c,d],columnRuleStyle:[c,d],columnRuleWidth:[c,d],columns:[c,d],columnSpan:[c,d],columnWidth:[c,d],flex:[c],flexBasis:[c],flexDirection:[c],flexGrow:[c],flexFlow:[c],flexShrink:[c],flexWrap:[c],alignContent:[c],alignItems:[c],alignSelf:[c],justifyContent:[c],order:[c],transform:[c],transformOrigin:[c],transformOriginX:[c],transformOriginY:[c],backfaceVisibility:[c],perspective:[c],perspectiveOrigin:[c],transformStyle:[c],transformOriginZ:[c],animation:[c],animationDelay:[c],animationDirection:[c],animationFillMode:[c],animationDuration:[c],animationIterationCount:[c],animationName:[c],animationPlayState:[c],animationTimingFunction:[c],backdropFilter:[c],fontKerning:[c],scrollSnapType:[c,e],scrollSnapPointsX:[c,e],scrollSnapPointsY:[c,e],scrollSnapDestination:[c,e],scrollSnapCoordinate:[c,e],shapeImageThreshold:[c],shapeImageMargin:[c],shapeImageOutside:[c],hyphens:[c,d,e],flowInto:[c,e],flowFrom:[c,e],regionFragment:[c,e],textAlignLast:[d],tabSize:[d],wrapFlow:[e],wrapThrough:[e],wrapMargin:[e],gridTemplateColumns:[e],gridTemplateRows:[e],gridTemplateAreas:[e],gridTemplate:[e],gridAutoColumns:[e],gridAutoRows:[e],gridAutoFlow:[e],grid:[e],gridRowStart:[e],gridColumnStart:[e],gridRowEnd:[e],gridRow:[e],gridColumn:[e],gridColumnEnd:[e],gridColumnGap:[e],gridRowGap:[e],gridArea:[e],gridGap:[e],textSizeAdjust:[c,e],transitionDelay:[c],transitionDuration:[c],transitionProperty:[c],transitionTimingFunction:[c]}},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=d(c(22)),f=d(c(23)),g=d(c(24)),h=d(c(25));b.default=[e.default,f.default,g.default,h.default]},function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b,c,d){if(">"!==(a=a.trim())[0])return null;a=a.slice(1).trim();var e=b;return d||(e+=" "),e+=">",d||(e+=" "),c(e+=a)}},function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b,c,d){if("&"!==(a=a.trim())[0])return null;var e=!a.match(/^&\s+/);return c((a=a.replace(/^&/,"")).split(",").map(function(a){return a.trim()}).map(function(a,c){return b+(0===c&&e?"":" ")+a}).join(", "))}},function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b,c,d){return":"!==(a=a.trim())[0]?null:c(b+a)}},function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b,c,d){return"@"!==(a=a.trim())[0]?null:c(b,a)}},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(4),g=d(c(18)),h=d(c(17)),i=function(a){function b(a,c,d){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,[],d))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,h.default),e(b,[{key:"_generateVariationRulesets",value:function(){var a=this,b=(0,f.flatten)(this._styles.map(function(a){return a.getVariations()}));return(0,f.findAllCombinations)(b).map(function(b){var c="."+a._generateClassName(b),d=new g.default(a._adonis,c,a._getCombinedStyles(b),{theme:a._theme});return[d,d.getSubRulesets()]})}},{key:"_generateRulesets",value:function(){var a=new g.default(this._adonis,this._baseSelector,this._getCombinedStyles(),{theme:this._theme}),b=[a,a.getSubRulesets()];return b.push(this._generateVariationRulesets()),(0,f.flatten)(b)}}]),b}();b.default=i},function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d,e=c(16),f=(d=e)&&d.__esModule?d:{default:d},g=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,f.default),b}();b.default=g},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=d(c(6)),g=d(c(8));b.default=function(a){var b=function(b){function c(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(c,f.default.Component),e(c,[{key:"_cloneProps",value:function(){var a=this,b={};return Object.keys(this.props).forEach(function(c){b[c]=a.props[c]}),b}},{key:"render",value:function(){var b=this._cloneProps(),c=b.innerRef;return c&&(b.ref=c),delete b.innerRef,f.default.createElement(a,b)}}]),c}();return b.contextTypes={theme:g.default.object},b}},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(6),g=d(f),h=d(c(8)),i=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,f.Component),e(b,[{key:"getChildContext",value:function(){var a={};for(var b in this.context)a[b]=this.context;return a.theme=this.props.theme,a}},{key:"render",value:function(){return this.props.children?g.default.Children.only(this.props.children):null}}]),b}();b.default=i,i.childContextTypes={theme:h.default.object.isRequired},i.contextTypes={theme:h.default.object}}])},a.exports=d(c(32))},function(a,b,c){c(92),c(34),c(46),c(166),c(173),c(174),a.exports=c(10).Promise},function(a,b,c){var d=c(63),e=c(60);a.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i))<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):g-56320+(f-55296<<10)+65536}}},function(a,b,c){var d=c(61),e=c(28),f=c(45),g={};c(19)(g,c(11)("iterator"),function(){return this}),a.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)}),f(a,b+" Iterator")}},function(a,b,c){var d=c(164),e=c(165),f=c(26),g=c(20);a.exports=c(93)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):e(0,"keys"==b?c:"values"==b?a[c]:[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},function(a,b){a.exports=function(){}},function(a,b){a.exports=function(a,b){return{value:b,done:!!a}}},function(a,b,c){var d,e,f,g,h=c(44),i=c(13),j=c(23),k=c(68),l=c(12),m=c(17),n=c(41),o=c(167),p=c(168),q=c(97),r=c(70).set,s=c(170)(),t=c(71),u=c(98),v=c(99),w=i.TypeError,x=i.process,y=i.Promise,z="process"==k(x),A=function(){},B=e=t.f,C=!!function(){try{var a=y.resolve(1),b=(a.constructor={})[c(11)("species")]=function(a){a(A,A)};return(z||"function"==typeof PromiseRejectionEvent)&&a.then(A)instanceof b}catch(a){}}(),D=function(a){var b;return!(!m(a)||"function"!=typeof(b=a.then))&&b},E=function(a,b){if(!a._n){a._n=!0;var c=a._c;s(function(){for(var d=a._v,e=1==a._s,f=0;c.length>f;)!function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject,j=b.domain;try{g?(e||(2==a._h&&H(a),a._h=1),!0===g?c=d:(j&&j.enter(),c=g(d),j&&j.exit()),c===b.promise?i(w("Promise-chain cycle")):(f=D(c))?f.call(c,h,i):h(c)):i(d)}catch(a){i(a)}}(c[f++]);a._c=[],a._n=!1,b&&!a._h&&F(a)})}},F=function(a){r.call(i,function(){var b,c,d,e=a._v,f=G(a);if(f&&(b=u(function(){z?x.emit("unhandledRejection",e,a):(c=i.onunhandledrejection)?c({promise:a,reason:e}):(d=i.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=z||G(a)?2:1),a._a=void 0,f&&b.e)throw b.v})},G=function(a){return 1!==a._h&&0===(a._a||a._c).length},H=function(a){r.call(i,function(){var b;z?x.emit("rejectionHandled",a):(b=i.onrejectionhandled)&&b({promise:a,reason:a._v})})},I=function(a){var b=this;b._d||(b._d=!0,(b=b._w||b)._v=a,b._s=2,b._a||(b._a=b._c.slice()),E(b,!0))},J=function(a){var b,c=this;if(!c._d){c._d=!0,c=c._w||c;try{if(c===a)throw w("Promise can't be resolved itself");(b=D(a))?s(function(){var d={_w:c,_d:!1};try{b.call(a,j(J,d,1),j(I,d,1))}catch(a){I.call(d,a)}}):(c._v=a,c._s=1,E(c,!1))}catch(a){I.call({_w:c,_d:!1},a)}}};C||(y=function(a){o(this,y,"Promise","_h"),n(a),d.call(this);try{a(j(J,this,1),j(I,this,1))}catch(a){I.call(this,a)}},(d=function(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=c(171)(y.prototype,{then:function(a,b){var c=B(q(this,y));return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,c.domain=z?x.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&E(this,!1),c.promise},catch:function(a){return this.then(void 0,a)}}),f=function(){var a=new d;this.promise=a,this.resolve=j(J,a,1),this.reject=j(I,a,1)},t.f=B=function(a){return a===y||a===g?new f(a):e(a)}),l(l.G+l.W+l.F*!C,{Promise:y}),c(45)(y,"Promise"),c(172)("Promise"),g=c(10).Promise,l(l.S+l.F*!C,"Promise",{reject:function(a){var b=B(this);return(0,b.reject)(a),b.promise}}),l(l.S+l.F*(h||!C),"Promise",{resolve:function(a){return v(h&&this===g?y:this,a)}}),l(l.S+l.F*!(C&&c(100)(function(a){y.all(a).catch(A)})),"Promise",{all:function(a){var b=this,c=B(b),d=c.resolve,e=c.reject,f=u(function(){var c=[],f=0,g=1;p(a,!1,function(a){var h=f++,i=!1;c.push(void 0),g++,b.resolve(a).then(function(a){i||(i=!0,c[h]=a,--g||d(c))},e)}),--g||d(c)});return f.e&&e(f.v),c.promise},race:function(a){var b=this,c=B(b),d=c.reject,e=u(function(){p(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e.e&&d(e.v),c.promise}})},function(a,b){a.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},function(a,b,c){var d=c(23),e=c(95),f=c(96),g=c(14),h=c(62),i=c(69),j={},k={};(b=a.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if((q=b?s(g(o=a[t])[0],o[1]):s(a[t]))===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if((q=e(p,s,o.value,b))===j||q===k)return q}).BREAK=j,b.RETURN=k},function(a,b){a.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},function(a,b,c){var d=c(13),e=c(70).set,f=d.MutationObserver||d.WebKitMutationObserver,g=d.process,h=d.Promise,i="process"==c(29)(g);a.exports=function(){var a,b,c,j=function(){var d,e;for(i&&(d=g.domain)&&d.exit();a;){e=a.fn,a=a.next;try{e()}catch(d){throw a?c():b=void 0,d}}b=void 0,d&&d.enter()};if(i)c=function(){g.nextTick(j)};else if(!f||d.navigator&&d.navigator.standalone)if(h&&h.resolve){var k=h.resolve();c=function(){k.then(j)}}else c=function(){e.call(d,j)};else{var l=!0,m=document.createTextNode("");new f(j).observe(m,{characterData:!0}),c=function(){m.data=l=!l}}return function(d){var e={fn:d,next:void 0};b&&(b.next=e),a||(a=e,c()),b=e}}},function(a,b,c){var d=c(19);a.exports=function(a,b,c){for(var e in b)c&&a[e]?a[e]=b[e]:d(a,e,b[e]);return a}},function(a,b,c){var d=c(13),e=c(10),f=c(16),g=c(18),h=c(11)("species");a.exports=function(a){var b="function"==typeof e[a]?e[a]:d[a];g&&b&&!b[h]&&f.f(b,h,{configurable:!0,get:function(){return this}})}},function(a,b,c){var d=c(12),e=c(10),f=c(13),g=c(97),h=c(99);d(d.P+d.R,"Promise",{finally:function(a){var b=g(this,e.Promise||f.Promise),c="function"==typeof a;return this.then(c?function(c){return h(b,a()).then(function(){return c})}:a,c?function(c){return h(b,a()).then(function(){throw c})}:a)}})},function(a,b,c){var d=c(12),e=c(71),f=c(98);d(d.S,"Promise",{try:function(a){var b=e.f(this),c=f(a);return(c.e?b.reject:b.resolve)(c.v),b.promise}})},function(a,b,c){var d=c(7),e=c.n(d),f=c(47),g=c(197),h=c(49),i=e.a.Utils,j=e.a.Math.Vector2,k={getInnerDimensionsForElement:function(a){var b=new j(a.offsetWidth,a.offsetHeight),c=window.getComputedStyle(a,null);return b.x-=parseInt(c.getPropertyValue("padding-left"),10),b.x-=parseInt(c.getPropertyValue("padding-right"),10),b.y-=parseInt(c.getPropertyValue("padding-top"),10),b.y-=parseInt(c.getPropertyValue("padding-bottom"),10),b},getEventPosition:function(a){var b=a.clientX,c=a.clientY;if(-1!==a.type.indexOf("touch")){if(!a.touches.length)return;b=a.touches[0].clientX,c=a.touches[0].clientY}return new j(b,c)},createTransparentPatternCanvas:function(){var a=document.createElement("canvas"),b=a.getContext("2d");return a.width=10,a.height=10,b.fillStyle="white",b.fillRect(0,0,a.width,a.height),b.fillStyle="#cccccc",b.fillRect(0,0,a.width/2,a.height/2),b.fillRect(a.width/2,a.height/2,a.width,a.height),a},supportsMSBlob:function(){return void 0!==document.createElement("canvas").msToBlob},translate:function(a,b){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=this.fetch(a,b);if(!e){f.a.info("Utils#translate","Unable to translate `"+b+"`");var g=c(209)[b];return null!=g?(f.a.warn("Utils#translate","Trying to find localized string for old key: `"+g+"`. Please update your localization to use the new key as soon as possible. Support for the old, deprecated key will be dropped with the next major version update."),this.translate(a,g,d)):null}for(var h in d)e=e.replace("${"+h+"}",d[h]);return e},fetch:function(a,b,c){for(var d=(b=(b=b.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split("."),e=0;e<d.length&&(a=a[d[e]]);e++);return void 0!==a&&a},isMobile:function(){var a=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))},select:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c||(c=function(a){return a});var d=[];return b.forEach(function(b){a.forEach(function(a){c(a)===b&&d.push(a)})}),d},getJSONP:function(a){return new h.a(a).load()},cloneCategories:function(a,b){return a.map(function(a){return(a=i.clone(a))[b]=a[b].slice(0),a})},mergeCategories:function(a,b,c){a=this.cloneCategories(a,c);var d=null;return b.forEach(function(b){a.forEach(function(a){b.identifier===a.identifier&&(d=a)}),d?d[c]=d[c].concat(b[c]):a.push(b)}),a},getStyleObject:function(a){var b=window.getComputedStyle(a),c={};for(var d in b){var e=b.getPropertyValue(d),f=d.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()});""!==e&&(c[f]=e)}return c},styleElement:function(a,b){for(var c in b)a.style[c]=b[c]},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(this,f)}},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},findIntegerFraction:function(a){for(var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,c=Number.MAX_VALUE,d=0,e=0,f=1,g=1,h=0;h<b;h++){var i=f/g-a;if(i<0)f++;else{if(!(i>0))return new j(f,g);g++}var k=Math.abs(f/g-a);k<c&&(c=k,d=f,e=g)}return new j(d,e)},toFixed:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,c=a.toFixed(b);return parseFloat(c)},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},flipObject:function(a){var b={};for(var c in a)b[a[c]]=c;return b},Browser:g.a};b.a=k},function(a,b,c){c(34),c(177),a.exports=c(10).Array.from},function(a,b,c){var d=c(23),e=c(12),f=c(31),g=c(95),h=c(96),i=c(62),j=c(178),k=c(69);e(e.S+e.F*!c(100)(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,l,m=f(a),n="function"==typeof this?this:Array,o=arguments.length,p=o>1?arguments[1]:void 0,q=void 0!==p,r=0,s=k(m);if(q&&(p=d(p,o>2?arguments[2]:void 0,2)),void 0==s||n==Array&&h(s))for(c=new n(b=i(m.length));b>r;r++)j(c,r,q?p(m[r],r):m[r]);else for(l=s.call(m),c=new n;!(e=l.next()).done;r++)j(c,r,q?g(l,p,[e.value,r],!0):e.value);return c.length=r,c}})},function(a,b,c){var d=c(16),e=c(28);a.exports=function(a,b,c){b in a?d.f(a,b,e(0,c)):a[b]=c}},function(a,b,c){var d=c(10),e=d.JSON||(d.JSON={stringify:JSON.stringify});a.exports=function(a){return e.stringify.apply(e,arguments)}},function(a,b,c){(function(a){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return h()(a)}var e=c(9),f=c.n(e),g=c(35),h=c.n(g),i=c(36),j=c.n(i),k=c(37),l=c.n(k),m=c(0),n=c.n(m),o=c(8),p=c.n(o),q=c(48),r=c.n(q),s=c(1),t=c.n(s),u=c(195),v=c(196),w=f.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},x="function"==typeof l.a&&"symbol"==typeof j.a?function(a){return typeof a}:function(a){return a&&"function"==typeof l.a&&a.constructor===l.a&&a!==l.a.prototype?"symbol":typeof a},y=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),n()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),z=function(){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b)}return y(b,null,[{key:"isArray",value:function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{key:"isPlainObject",value:function(a){if("object"!==(void 0===a?"undefined":x(a))||!a)return!1;if("function"==typeof t.a){var b=t()(a);return b===Object.prototype||null===b}return"[object Object]"===Object.prototype.toString.call(a)}},{key:"isMobile",value:function(){if("undefined"==typeof navigator)return!1;var a=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}},{key:"isBrowser",value:function(){return"undefined"!=typeof window}},{key:"isNode",value:function(){return"undefined"==typeof window&&void 0!==a}},{key:"values",value:function(a){var b=[];for(var c in a)b.push(a[c]);return b}},{key:"isDOMElement",value:function(a){return"object"===("undefined"==typeof HTMLElement?"undefined":x(HTMLElement))?a instanceof HTMLElement:a&&"object"===(void 0===a?"undefined":x(a))&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName}},{key:"isTouchEvent",value:function(a){return-1!==a.type.indexOf("touch")}},{key:"resizeVectorToFit",value:function(a,b){var c=Math.min(b.x/a.x,b.y/a.y);return a.clone().multiply(c)}},{key:"resizeVectorToFill",value:function(a,b){var c=a.x/a.y;return c>b.x/b.y?b.clone().set(b.y*c,b.y):b.clone().set(b.x,b.x/c)}},{key:"isExtendable",value:function(a){return void 0!==a&&null!==a&&("object"===(void 0===a?"undefined":x(a))||"function"==typeof a)}},{key:"defaults",value:function(a){var b={};for(var c in a)b[c]=a[c];for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];for(var g=0;g<e.length;g++){var h=e[g];for(var i in h)void 0===b[i]&&(b[i]=h[i])}return b}},{key:"deepMerge",value:function(a){for(var c=arguments.length,e=Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];return e.reduce(function a(c,e){if(void 0===e)return a(null,c);if(Array.isArray(e))return[].concat(d(e));if(!b.isPlainObject(e))return e;if(!b.isPlainObject(c))return w({},e);var f=w({},c);return r()(e).forEach(function(b){var d=e[b];void 0!==d&&(f[b]=a(c[b],d))}),f},a)}},{key:"deepDefaults",value:function(a){for(var c=arguments.length,e=Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=[].concat(e).reverse();return b.deepMerge.apply(b,d(g).concat([a]))}},{key:"deepClone",value:function(a){var c={};for(var d in a)b.isExtendable(a[d])?c[d]=b.deepClone(a[d]):c[d]=a[d];return c}},{key:"getDeepProperty",value:function(a,b){return"string"==typeof b?a[b]:Array.isArray(b)?b.reduce(function(a,b){return a?"function"==typeof b?function(a,b){var c=void 0;try{c=b(a)}catch(a){if(!(a instanceof TypeError))throw a}return c}(a,b):a[b]:null},a):void 0}},{key:"extend",value:function(a){var b={};for(var c in a)b[c]=a[c];for(var d=arguments.length,e=Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];for(var g=0;g<e.length;g++){var h=e[g];for(var i in h)b[i]=h[i]}return b}},{key:"clone",value:function(a){return this.extend({},a)}},{key:"createBlobURIFromDataURI",value:function(b){var c="undefined"==typeof window?a:window;if(!(c.Blob&&c.URL&&ArrayBuffer&&Uint8Array))return b;for(var d=u.a.decode(b.split(",")[1]),e=b.split(",")[0].split(":")[1].split(";")[0],f=new ArrayBuffer(d.length),g=new Uint8Array(f),h=0;h<d.length;h++)g[h]=d[h];var i=new c.Blob([f],{type:e});return c.URL.createObjectURL(i)}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"convertHtmlImageToRGBACanvas",value:function(a){var c=b.createCanvas();return c.width=a.width,c.height=a.height,c.getContext("2d").drawImage(a,0,0,a.width,a.height),c}},{key:"isPowerOfTwo",value:function(a){return 0==(a.x&a.x-1)&&0==(a.y&a.y-1)}},{key:"nextLowestPOT",value:function(a){for(var b=1;b<32;b<<=1)a|=a>>b;return a-(a>>1)}},{key:"nextHighestPOT",value:function(a){a--;for(var b=1;b<32;b<<=1)a|=a>>b;return a+1}},{key:"moveArrayItem",value:function(a,b,c){if(c>=a.length)for(var d=c-a.length;1+d--;)a.push(void 0);a.splice(c,0,a.splice(b,1)[0])}},{key:"ensureCanvasDimensions",value:function(a,b){a.width===b.x&&a.height===b.y||(a.width=b.x,a.height=b.y)}},{key:"byteArrayToString",value:function(a){return a.map(function(a){return String.fromCharCode(a)}).join("")}},{key:"clamp",value:function(a,b,c){return Math.max(b,Math.min(a,c))}},{key:"wildCardMatch",value:function(a,b){return new RegExp("^"+b.split("*").join(".*")+"$").test(a)}},{key:"flipObject",value:function(a){var b={};for(var c in a)b[a[c]]=c;return b}},{key:"cloneOptions",value:function(a){var b={};for(var c in a){var d=a[c];Array.isArray(d)?d=d.slice():d.clone&&(d=d.clone()),b[c]=d}return b}},{key:"ISODateString",value:function(a){function b(a){return a<10?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"}},{key:"getCrossOriginValue",value:function(a){return a?"none"!==a?a:void 0:"anonymous"}},{key:"shallowEqual",value:function(a,b){if(a===b)return!0;if("object"!==(void 0===a?"undefined":x(a))||null===a||"object"!==(void 0===b?"undefined":x(b))||null===b)return!1;var c=r()(a),d=r()(b);if(c.length!==d.length)return!1;for(var e=hasOwnProperty.bind(b),f=0;f<c.length;f++)if(!e(c[f])||a[c[f]]!==b[c[f]])return!1;return!0}},{key:"enableIf",value:function(a,b){return a?b:void 0}},{key:"invariant",value:function(a,b){
if(!a)throw new Error(b)}},{key:"executePromises",value:function(a){var b=a.length,c=0,d=[],e=[];return new p.a(function(f,g){var h=function(){++c>=b&&(e.length<=0?f(d):g(e))},i=function(a){d.push(a),h()},j=function(a){e.push(a),h()};a.forEach(function(a){a.then(i).catch(j)})})}}]),b}();z.Array=v.a,b.a=z}).call(b,c(25))},function(a,b,c){c(182),a.exports=c(10).Object.assign},function(a,b,c){var d=c(12);d(d.S+d.F,"Object",{assign:c(183)})},function(a,b,c){var d=c(30),e=c(72),f=c(42),g=c(31),h=c(86),i=Object.assign;a.exports=!i||c(24)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=i({},a)[c]||Object.keys(i({},b)).join("")!=d})?function(a,b){for(var c=g(a),i=arguments.length,j=1,k=e.f,l=f.f;i>j;)for(var m,n=h(arguments[j++]),o=k?d(n).concat(k(n)):d(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:i},function(a,b,c){c(34),c(46),a.exports=c(73).f("iterator")},function(a,b,c){c(186),c(92),c(191),c(192),a.exports=c(10).Symbol},function(a,b,c){var d=c(13),e=c(21),f=c(18),g=c(12),h=c(94),i=c(187).KEY,j=c(24),k=c(65),l=c(45),m=c(43),n=c(11),o=c(73),p=c(74),q=c(188),r=c(189),s=c(14),t=c(17),u=c(20),v=c(58),w=c(28),x=c(61),y=c(190),z=c(59),A=c(16),B=c(30),C=z.f,D=A.f,E=y.f,F=d.Symbol,G=d.JSON,H=G&&G.stringify,I=n("_hidden"),J=n("toPrimitive"),K={}.propertyIsEnumerable,L=k("symbol-registry"),M=k("symbols"),N=k("op-symbols"),O=Object.prototype,P="function"==typeof F,Q=d.QObject,R=!Q||!Q.prototype||!Q.prototype.findChild,S=f&&j(function(){return 7!=x(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(a,b,c){var d=C(O,b);d&&delete O[b],D(a,b,c),d&&a!==O&&D(O,b,d)}:D,T=function(a){var b=M[a]=x(F.prototype);return b._k=a,b},U=P&&"symbol"==typeof F.iterator?function(a){return"symbol"==typeof a}:function(a){return a instanceof F},V=function(a,b,c){return a===O&&V(N,b,c),s(a),b=v(b,!0),s(c),e(M,b)?(c.enumerable?(e(a,I)&&a[I][b]&&(a[I][b]=!1),c=x(c,{enumerable:w(0,!1)})):(e(a,I)||D(a,I,w(1,{})),a[I][b]=!0),S(a,b,c)):D(a,b,c)},W=function(a,b){s(a);for(var c,d=q(b=u(b)),e=0,f=d.length;f>e;)V(a,c=d[e++],b[c]);return a},X=function(a){var b=K.call(this,a=v(a,!0));return!(this===O&&e(M,a)&&!e(N,a))&&(!(b||!e(this,a)||!e(M,a)||e(this,I)&&this[I][a])||b)},Y=function(a,b){if(a=u(a),b=v(b,!0),a!==O||!e(M,b)||e(N,b)){var c=C(a,b);return!c||!e(M,b)||e(a,I)&&a[I][b]||(c.enumerable=!0),c}},Z=function(a){for(var b,c=E(u(a)),d=[],f=0;c.length>f;)e(M,b=c[f++])||b==I||b==i||d.push(b);return d},$=function(a){for(var b,c=a===O,d=E(c?N:u(a)),f=[],g=0;d.length>g;)!e(M,b=d[g++])||c&&!e(O,b)||f.push(M[b]);return f};P||(h((F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var a=m(arguments.length>0?arguments[0]:void 0),b=function(c){this===O&&b.call(N,c),e(this,I)&&e(this[I],a)&&(this[I][a]=!1),S(this,a,w(1,c))};return f&&R&&S(O,a,{configurable:!0,set:b}),T(a)}).prototype,"toString",function(){return this._k}),z.f=Y,A.f=V,c(103).f=y.f=Z,c(42).f=X,c(72).f=$,f&&!c(44)&&h(O,"propertyIsEnumerable",X,!0),o.f=function(a){return T(n(a))}),g(g.G+g.W+g.F*!P,{Symbol:F});for(var _="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),aa=0;_.length>aa;)n(_[aa++]);for(var ba=B(n.store),ca=0;ba.length>ca;)p(ba[ca++]);g(g.S+g.F*!P,"Symbol",{for:function(a){return e(L,a+="")?L[a]:L[a]=F(a)},keyFor:function(a){if(!U(a))throw TypeError(a+" is not a symbol!");for(var b in L)if(L[b]===a)return b},useSetter:function(){R=!0},useSimple:function(){R=!1}}),g(g.S+g.F*!P,"Object",{create:function(a,b){return void 0===b?x(a):W(x(a),b)},defineProperty:V,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),G&&g(g.S+g.F*(!P||j(function(){var a=F();return"[null]"!=H([a])||"{}"!=H({a:a})||"{}"!=H(Object(a))})),"JSON",{stringify:function(a){for(var b,c,d=[a],e=1;arguments.length>e;)d.push(arguments[e++]);if(c=b=d[1],(t(b)||void 0!==a)&&!U(a))return r(b)||(b=function(a,b){if("function"==typeof c&&(b=c.call(this,a,b)),!U(b))return b}),d[1]=b,H.apply(G,d)}}),F.prototype[J]||c(19)(F.prototype,J,F.prototype.valueOf),l(F,"Symbol"),l(Math,"Math",!0),l(d.JSON,"JSON",!0)},function(a,b,c){var d=c(43)("meta"),e=c(17),f=c(21),g=c(16).f,h=0,i=Object.isExtensible||function(){return!0},j=!c(24)(function(){return i(Object.preventExtensions({}))}),k=function(a){g(a,d,{value:{i:"O"+ ++h,w:{}}})},l=a.exports={KEY:d,NEED:!1,fastKey:function(a,b){if(!e(a))return"symbol"==typeof a?a:("string"==typeof a?"S":"P")+a;if(!f(a,d)){if(!i(a))return"F";if(!b)return"E";k(a)}return a[d].i},getWeak:function(a,b){if(!f(a,d)){if(!i(a))return!0;if(!b)return!1;k(a)}return a[d].w},onFreeze:function(a){return j&&l.NEED&&i(a)&&!f(a,d)&&k(a),a}}},function(a,b,c){var d=c(30),e=c(72),f=c(42);a.exports=function(a){var b=d(a),c=e.f;if(c)for(var g,h=c(a),i=f.f,j=0;h.length>j;)i.call(a,g=h[j++])&&b.push(g);return b}},function(a,b,c){var d=c(29);a.exports=Array.isArray||function(a){return"Array"==d(a)}},function(a,b,c){var d=c(20),e=c(103).f,f={}.toString,g="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(a){return g&&"[object Window]"==f.call(a)?function(a){try{return e(a)}catch(a){return g.slice()}}(a):e(d(a))}},function(a,b,c){c(74)("asyncIterator")},function(a,b,c){c(74)("observable")},function(a,b,c){c(194),a.exports=c(10).Object.keys},function(a,b,c){var d=c(31),e=c(30);c(67)("keys",function(){return function(a){return e(d(a))}})},function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e={encode:function(a){var b="",c=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=0;do{g=(c=a[k++])>>2,h=(3&c)<<4|(e=a[k++])>>4,i=(15&e)<<2|(f=a[k++])>>6,j=63&f,isNaN(e)?i=j=64:isNaN(f)&&(j=64),b=b+d.charAt(g)+d.charAt(h)+d.charAt(i)+d.charAt(j),c=e=f="",g=h=i=j=""}while(k<a.length);return b},decode:function(a){var b=void 0,c=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=0,j=[];if(/[^A-Za-z0-9+\/=]/g.exec(a))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");a=a.replace(/[^A-Za-z0-9+\/=]/g,"");do{b=d.indexOf(a.charAt(i++))<<2|(f=d.indexOf(a.charAt(i++)))>>4,c=(15&f)<<4|(g=d.indexOf(a.charAt(i++)))>>2,e=(3&g)<<6|(h=d.indexOf(a.charAt(i++))),j.push(b),64!==g&&j.push(c),64!==h&&j.push(e),b=c=e="",f=g=h=""}while(i<a.length);return j}};b.a=e},function(a,b,c){var d=c(0),e=c.n(d),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return f(a,null,[{key:"head",value:function(a){return a[0]}},{key:"tail",value:function(a){return a.slice(1)}},{key:"last",value:function(a){return a[a.length-1]}},{key:"init",value:function(a){return a.slice(0,a.length-1)}},{key:"remove",value:function(a,b){return a.filter(function(a,c,d){return!b(a,c,d)})}},{key:"findIndex",value:function(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1}},{key:"find",value:function(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return a[c]}},{key:"flatten",value:function(b){return b.reduce(function(b,c){return b.concat(Array.isArray(c)?a.flatten(c):c)},[])}},{key:"range",value:function(a,b){var c=[];if(b>a)for(var d=a;d<b;d++)c.push(d);return c}},{key:"repeat",value:function(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c}},{key:"zip",value:function(a,b){for(var c=Math.min(a.length,b.length),d=[],e=0;e<c;e++)d[e]=[a[e],b[e]];return d}}]),a}();b.a=g},function(a,b,c){b.a={getIEVersion:function(){var a=navigator,b=a.userAgent,c=a.appVersion;return-1!==c.indexOf("MSIE")?c.match(/MSIE\s+?([0-9]+)/i)[1]:-1!==b.indexOf("Trident")&&b.match(/rv:([0-9]+)/i)[1]},isIE10:function(){var a=this.getIEVersion();return!1!==a&&10===a},isIE11:function(){var a=this.getIEVersion();return!1!==a&&11===a},isIElte:function(a){var b=this.getIEVersion();return!1!==b&&b<=a}}},function(a,b,c){(function(a){var d=c(36),e=c.n(d),f=c(37),g=c.n(f),h=c(8),i=c.n(h),j=c(0),k=c.n(j),l=c(199),m=c.n(l),n="function"==typeof g.a&&"symbol"==typeof e.a?function(a){return typeof a}:function(a){return a&&"function"==typeof g.a&&a.constructor===g.a&&a!==g.a.prototype?"symbol":typeof a},o=void 0===a?window:a,p=void 0!==i.a?i.a:function(){function a(a,b){l.add(a,b),j||(j=p(l.drain))}function b(a){var b,c=void 0===a?"undefined":n(a);return null==a||"object"!=c&&"function"!=c||(b=a.then),"function"==typeof b&&b}function c(){for(var a=0;a<this.chain.length;a++)d(this,1===this.state?this.chain[a].success:this.chain[a].failure,this.chain[a]);this.chain.length=0}function d(a,c,d){var e,f;try{!1===c?d.reject(a.msg):(e=!0===c?a.msg:c.call(void 0,a.msg))===d.promise?d.reject(TypeError("Promise-chain cycle")):(f=b(e))?f.call(e,d.resolve,d.reject):d.resolve(e)}catch(a){d.reject(a)}}function e(b){var d=this;d.triggered||(d.triggered=!0,d.def&&(d=d.def),d.msg=b,d.state=2,d.chain.length>0&&a(c,d))}function f(a,b,c,d){for(var e=0;e<b.length;e++)!function(e){a.resolve(b[e]).then(function(a){c(e,a)},d)}(e)}function g(a){this.def=a,this.triggered=!1}function h(d){if("function"!=typeof d)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var f=new function(a){this.promise=a,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(b,d){var e={success:"function"!=typeof b||b,failure:"function"==typeof d&&d};return e.promise=new this.constructor(function(a,b){if("function"!=typeof a||"function"!=typeof b)throw TypeError("Not a function");e.resolve=a,e.reject=b}),f.chain.push(e),0!==f.state&&a(c,f),e.promise},this.catch=function(a){return this.then(void 0,a)};try{d.call(void 0,function(d){(function d(f){var h,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(h=b(f))?a(function(){var a=new g(i);try{h.call(f,function(){d.apply(a,arguments)},function(){e.apply(a,arguments)})}catch(b){e.call(a,b)}}):(i.msg=f,i.state=1,i.chain.length>0&&a(c,i))}catch(d){e.call(new g(i),d)}}}).call(f,d)},function(a){e.call(f,a)})}catch(d){e.call(f,d)}}var i,j,l,o=Object.prototype.toString,p=void 0!==m.a?function(a){return m()(a)}:setTimeout;try{Object.defineProperty({},"x",{}),i=function(a,b,c,d){return k()(a,b,{value:c,writable:!0,configurable:!1!==d})}}catch(j){i=function(a,b,c){return a[b]=c,a}}l={add:function(a,b){s=new function(a,b){this.fn=a,this.self=b,this.next=void 0}(a,b),r?r.next=s:q=s,r=s,s=void 0},drain:function(){var a=q;for(q=r=j=void 0;a;)a.fn.call(a.self),a=a.next}};var q,r,s,t=i({},"constructor",h,!1);return h.prototype=t,i(t,"__NPO__",0,!1),i(h,"resolve",function(a){return a&&"object"==(void 0===a?"undefined":n(a))&&1===a.__NPO__?a:new this(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");b(a)})}),i(h,"reject",function(a){return new this(function(b,c){if("function"!=typeof b||"function"!=typeof c)throw TypeError("Not a function");c(a)})}),i(h,"all",function(a){var b=this;return"[object Array]"!=o.call(a)?b.reject(TypeError("Not an array")):0===a.length?b.resolve([]):new b(function(c,d){if("function"!=typeof c||"function"!=typeof d)throw TypeError("Not a function");var e=a.length,g=Array(e),h=0;f(b,a,function(a,b){g[a]=b,++h===e&&c(g)},d)})}),i(h,"race",function(a){var b=this;return"[object Array]"!=o.call(a)?b.reject(TypeError("Not an array")):new b(function(c,d){if("function"!=typeof c||"function"!=typeof d)throw TypeError("Not a function");f(b,a,function(a,b){c(b)},d)})}),h}();o.Promise=o.Promise||p,b.a=p}).call(b,c(25))},function(a,b,c){a.exports={default:c(200),__esModule:!0}},function(a,b,c){c(201),a.exports=c(10).setImmediate},function(a,b,c){var d=c(12),e=c(70);d(d.G+d.B,{setImmediate:e.set,clearImmediate:e.clear})},function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&g.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}var f=c(203),g=c(205);b.parse=e,b.resolve=function(a,b){return e(a,!1,!0).resolve(b)},b.resolveObject=function(a,b){return a?e(a,!1,!0).resolveObject(b):b},b.format=function(a){return g.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)},b.Url=d;var h=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,j=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,k=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(k),m=["%","/","?",";","#"].concat(l),n=["/","?","#"],o=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,q={javascript:!0,"javascript:":!0},r={javascript:!0,"javascript:":!0},s={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},t=c(206);d.prototype.parse=function(a,b,c){if(!g.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",i=a.split(e);i[0]=i[0].replace(/\\/g,"/");var k=a=i.join(e);if(k=k.trim(),!c&&1===a.split("#").length){var u=j.exec(k);if(u)return this.path=k,this.href=k,this.pathname=u[1],u[2]?(this.search=u[2],this.query=b?t.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var v=h.exec(k);if(v){var w=(v=v[0]).toLowerCase();this.protocol=w,k=k.substr(v.length)}if(c||v||k.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===k.substr(0,2);!x||v&&r[v]||(k=k.substr(2),this.slashes=!0)}if(!r[v]&&(x||v&&!s[v])){for(var y,z,A=-1,B=0;B<n.length;B++)-1!==(C=k.indexOf(n[B]))&&(-1===A||C<A)&&(A=C);for(-1!==(z=-1===A?k.lastIndexOf("@"):k.lastIndexOf("@",A))&&(y=k.slice(0,z),k=k.slice(z+1),this.auth=decodeURIComponent(y)),A=-1,B=0;B<m.length;B++){var C;-1!==(C=k.indexOf(m[B]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=k.length),this.host=k.slice(0,A),k=k.slice(A),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var E=this.hostname.split(/\./),F=(B=0,E.length);B<F;B++){var G=E[B];if(G&&!G.match(o)){for(var H="",I=0,J=G.length;I<J;I++)G.charCodeAt(I)>127?H+="x":H+=G[I];if(!H.match(o)){var K=E.slice(0,B),L=E.slice(B+1),M=G.match(p);M&&(K.push(M[1]),L.unshift(M[2])),L.length&&(k="/"+L.join(".")+k),this.hostname=K.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=f.toASCII(this.hostname));var N=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+N,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==k[0]&&(k="/"+k))}if(!q[w])for(B=0,F=l.length;B<F;B++){var P=l[B];if(-1!==k.indexOf(P)){var Q=encodeURIComponent(P);Q===P&&(Q=escape(P)),k=k.split(P).join(Q)}}var R=k.indexOf("#");-1!==R&&(this.hash=k.substr(R),k=k.slice(0,R));var S=k.indexOf("?");if(-1!==S?(this.search=k.substr(S),this.query=k.substr(S+1),b&&(this.query=t.parse(this.query)),k=k.slice(0,S)):b&&(this.search="",this.query={}),k&&(this.pathname=k),s[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var T=this.search||"";this.path=N+T}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=(a=encodeURIComponent(a)).replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&g.isObject(this.query)&&Object.keys(this.query).length&&(f=t.stringify(this.query));var h=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||s[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),h&&"?"!==h.charAt(0)&&(h="?"+h),b+e+(c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}))+(h=h.replace("#","%23"))+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(g.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var h=e[f];c[h]=this[h]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var i=Object.keys(a),j=0;j<i.length;j++){var k=i[j];"protocol"!==k&&(c[k]=a[k])}return s[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!s[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||r[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var t=c.pathname&&"/"===c.pathname.charAt(0),u=a.host||a.pathname&&"/"===a.pathname.charAt(0),v=u||t||c.host&&a.pathname,w=v,x=c.pathname&&c.pathname.split("/")||[],y=(o=a.pathname&&a.pathname.split("/")||[],c.protocol&&!s[c.protocol]);if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),v=v&&(""===o[0]||""===x[0])),u)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!g.isNullOrUndefined(a.search))return y&&(c.hostname=c.host=x.shift(),(D=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"))&&(c.auth=D.shift(),c.host=c.hostname=D.shift())),c.search=a.search,c.query=a.query,g.isNull(c.pathname)&&g.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var z=x.slice(-1)[0],A=(c.host||a.host||x.length>1)&&("."===z||".."===z)||""===z,B=0,C=x.length;C>=0;C--)"."===(z=x[C])?x.splice(C,1):".."===z?(x.splice(C,1),B++):B&&(x.splice(C,1),B--);if(!v&&!w)for(;B--;B)x.unshift("..");!v||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),A&&"/"!==x.join("/").substr(-1)&&x.push("");var D,E=""===x[0]||x[0]&&"/"===x[0].charAt(0);return y&&(c.hostname=c.host=E?"":x.length?x.shift():"",(D=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"))&&(c.auth=D.shift(),c.host=c.hostname=D.shift())),(v=v||c.host&&x.length)&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),g.isNull(c.pathname)&&g.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=i.exec(a);b&&(":"!==(b=b[0])&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},function(a,b,c){(function(a,d){var e;!function(d){function f(a){throw new RangeError(B[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),d+g((a=a.replace(A,".")).split("."),b).join(".")}function i(a){for(var b,c,d=[],e=0,f=a.length;e<f;)(b=a.charCodeAt(e++))>=55296&&b<=56319&&e<f?56320==(64512&(c=a.charCodeAt(e++)))?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(b+=E((a-=65536)>>>10&1023|55296),a=56320|1023&a),b+=E(a)}).join("")}function k(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?D(a/u):a>>1,a+=D(a/b);a>C*s>>1;d+=q)a=D(a/C);return D(d+(C+1)*a/(a+t))}function m(a){var b,c,d,e,g,h,i,k,m,n,o,t=[],u=a.length,y=0,z=w,A=v;for((c=a.lastIndexOf(x))<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&f("not-basic"),t.push(a.charCodeAt(d));for(e=c>0?c+1:0;e<u;){for(g=y,h=1,i=q;e>=u&&f("invalid-input"),((k=(o=a.charCodeAt(e++))-48<10?o-22:o-65<26?o-65:o-97<26?o-97:q)>=q||k>D((p-y)/h))&&f("overflow"),y+=k*h,!(k<(m=i<=A?r:i>=A+s?s:i-A));i+=q)h>D(p/(n=q-m))&&f("overflow"),h*=n;A=l(y-g,b=t.length+1,0==g),D(y/b)>p-z&&f("overflow"),z+=D(y/b),y%=b,t.splice(y++,0,z)}return j(t)}function n(a){var b,c,d,e,g,h,j,m,n,o,t,u,y,z,A,B=[];for(u=(a=i(a)).length,b=w,c=0,g=v,h=0;h<u;++h)(t=a[h])<128&&B.push(E(t));for(d=e=B.length,e&&B.push(x);d<u;){for(j=p,h=0;h<u;++h)(t=a[h])>=b&&t<j&&(j=t);for(j-b>D((p-c)/(y=d+1))&&f("overflow"),c+=(j-b)*y,b=j,h=0;h<u;++h)if((t=a[h])<b&&++c>p&&f("overflow"),t==b){for(m=c,n=q;!(m<(o=n<=g?r:n>=g+s?s:n-g));n+=q)A=m-o,z=q-o,B.push(E(k(o+A%z,0))),m=D(A/z);B.push(E(k(m,0))),g=l(c,y,d==e),c=0,++d}++c,++b}return B.join("")}"object"==typeof b&&b&&b.nodeType,"object"==typeof a&&a&&a.nodeType;var o,p=2147483647,q=36,r=1,s=26,t=38,u=700,v=72,w=128,x="-",y=/^xn--/,z=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=q-r,D=Math.floor,E=String.fromCharCode;o={version:"1.4.1",ucs2:{decode:i,encode:j},decode:m,encode:n,toASCII:function(a){return h(a,function(a){return z.test(a)?"xn--"+n(a):a})},toUnicode:function(a){return h(a,function(a){return y.test(a)?m(a.slice(4).toLowerCase()):a})}},void 0===(e=function(){return o}.call(b,c,b,a))||(a.exports=e)}()}).call(b,c(204)(a),c(25))},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(a,b,c){a.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},function(a,b,c){b.decode=b.parse=c(207),b.encode=b.stringify=c(208)},function(a,b,c){function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}a.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},function(a,b,c){function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};a.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},function(a,b){a.exports={"pesdk.adjustments.button.reset":"editor.controls.adjustments.reset","pesdk.adjustments.text.brightness":"editor.controls.adjustments.items.brightness","pesdk.adjustments.text.clarity":"editor.controls.adjustments.items.clarity","pesdk.adjustments.text.contrast":"editor.controls.adjustments.items.contrast","pesdk.adjustments.text.exposure":"editor.controls.adjustments.items.exposure","pesdk.adjustments.text.gamma":"editor.controls.adjustments.items.gamma","pesdk.adjustments.text.highlights":"editor.controls.adjustments.items.highlights","pesdk.adjustments.text.saturation":"editor.controls.adjustments.items.saturation","pesdk.adjustments.text.shadows":"editor.controls.adjustments.items.shadows","pesdk.adjustments.title.basics":"editor.controls.adjustments.sections.basics","pesdk.adjustments.title.name":"editor.controls.adjustments.title","pesdk.adjustments.title.refinements":"editor.controls.adjustments.sections.refinements","pesdk.brush.title.hardness":"editor.controls.brush.hardness","pesdk.brush.title.name":"editor.controls.brush.title","pesdk.brush.title.settings":"editor.controls.brush.settings","pesdk.brush.title.width":"editor.controls.brush.width","pesdk.common.button.cancel":"editor.cancel","pesdk.common.text.loading":"loading.loading","pesdk.common.title.error":"errors.title","pesdk.editor.button.discardChangesWarningDiscard":"warnings.discardChanges.buttons.discard","pesdk.editor.button.discardChangesWarningKeep":"warnings.discardChanges.buttons.keep","pesdk.editor.button.export":"editor.export","pesdk.editor.button.newImageChangesLostWarningNo":"warnings.newImage_changesLost.buttons.no","pesdk.editor.button.newImageChangesLostWarningYes":"warnings.newImage_changesLost.buttons.yes","pesdk.editor.text.discardChangesWarning":"warnings.discardChanges.text","pesdk.editor.text.fontLoadingError":"errors.fontLoadingError.text","pesdk.editor.text.imageLoadingError":"errors.imageLoadingError.text","pesdk.editor.text.imageResizedWarning_maxDimensions":"warnings.imageResized_maxDimensions.text","pesdk.editor.text.imageResizedWarning_maxMegaPixels":"warnings.imageResized_maxMegaPixels.text","pesdk.editor.text.invalidFileTypeError":"errors.invalidFileType.text","pesdk.editor.text.loadingFonts":"loading.fonts","pesdk.editor.text.newImageChangesLostWarning":"warnings.newImage_changesLost.text","pesdk.editor.text.renderingError":"errors.renderingError.text","pesdk.editor.text.resizing":"loading.resizing","pesdk.editor.text.webcamUnavailableError":"errors.webcamUnavailable.text","pesdk.editor.title.discardChangesWarning":"warnings.discardChanges.title","pesdk.editor.title.fontLoadingError":"errors.fontLoadingError.title","pesdk.editor.title.imageResizedWarning_maxDimensions":"warnings.imageResized_maxDimensions.title","pesdk.editor.title.imageResizedWarning_maxMegaPixels":"warnings.imageResized_maxMegaPixels.title","pesdk.editor.title.newImageChangesLostWarning":"warnings.newImage_changesLost.title","pesdk.filter.asset.identity":"editor.controls.filter.filters.identity","pesdk.filter.asset.imgly_lut_ad1920":"editor.controls.filter.filters.imgly_lut_ad1920","pesdk.filter.asset.imgly_lut_ancient":"editor.controls.filter.filters.imgly_lut_ancient","pesdk.filter.asset.imgly_lut_bleached":"editor.controls.filter.filters.imgly_lut_bleached","pesdk.filter.asset.imgly_lut_bleachedblue":"editor.controls.filter.filters.imgly_lut_bleachedblue","pesdk.filter.asset.imgly_lut_blues":"editor.controls.filter.filters.imgly_lut_blues","pesdk.filter.asset.imgly_lut_blueshadows":"editor.controls.filter.filters.imgly_lut_blueshadows","pesdk.filter.asset.imgly_lut_breeze":"editor.controls.filter.filters.imgly_lut_breeze","pesdk.filter.asset.imgly_lut_bw":"editor.controls.filter.filters.imgly_lut_bw","pesdk.filter.asset.imgly_lut_celsius":"editor.controls.filter.filters.imgly_lut_celsius","pesdk.filter.asset.imgly_lut_chest":"editor.controls.filter.filters.imgly_lut_chest","pesdk.filter.asset.imgly_lut_classic":"editor.controls.filter.filters.imgly_lut_classic","pesdk.filter.asset.imgly_lut_colorful":"editor.controls.filter.filters.imgly_lut_colorful","pesdk.filter.asset.imgly_lut_cool":"editor.controls.filter.filters.imgly_lut_cool","pesdk.filter.asset.imgly_lut_cottoncandy":"editor.controls.filter.filters.imgly_lut_cottoncandy","pesdk.filter.asset.imgly_lut_creamy":"editor.controls.filter.filters.imgly_lut_creamy","pesdk.filter.asset.imgly_lut_eighties":"editor.controls.filter.filters.imgly_lut_eighties","pesdk.filter.asset.imgly_lut_elder":"editor.controls.filter.filters.imgly_lut_elder","pesdk.filter.asset.imgly_lut_evening":"editor.controls.filter.filters.imgly_lut_evening","pesdk.filter.asset.imgly_lut_fall":"editor.controls.filter.filters.imgly_lut_fall","pesdk.filter.asset.imgly_lut_fixie":"editor.controls.filter.filters.imgly_lut_fixie","pesdk.filter.asset.imgly_lut_food":"editor.controls.filter.filters.imgly_lut_food","pesdk.filter.asset.imgly_lut_fridge":"editor.controls.filter.filters.imgly_lut_fridge","pesdk.filter.asset.imgly_lut_front":"editor.controls.filter.filters.imgly_lut_front","pesdk.filter.asset.imgly_lut_glam":"editor.controls.filter.filters.imgly_lut_glam","pesdk.filter.asset.imgly_lut_gobblin":"editor.controls.filter.filters.imgly_lut_gobblin","pesdk.filter.asset.imgly_lut_highcarb":"editor.controls.filter.filters.imgly_lut_highcarb","pesdk.filter.asset.imgly_lut_highcontrast":"editor.controls.filter.filters.imgly_lut_highcontrast","pesdk.filter.asset.imgly_lut_k1":"editor.controls.filter.filters.imgly_lut_k1","pesdk.filter.asset.imgly_lut_k2":"editor.controls.filter.filters.imgly_lut_k2","pesdk.filter.asset.imgly_lut_k6":"editor.controls.filter.filters.imgly_lut_k6","pesdk.filter.asset.imgly_lut_kdynamic":"editor.controls.filter.filters.imgly_lut_kdynamic","pesdk.filter.asset.imgly_lut_keen":"editor.controls.filter.filters.imgly_lut_keen","pesdk.filter.asset.imgly_lut_lenin":"editor.controls.filter.filters.imgly_lut_lenin","pesdk.filter.asset.imgly_lut_litho":"editor.controls.filter.filters.imgly_lut_litho","pesdk.filter.asset.imgly_lut_lomo100":"editor.controls.filter.filters.imgly_lut_lomo100","pesdk.filter.asset.imgly_lut_lucid":"editor.controls.filter.filters.imgly_lut_lucid","pesdk.filter.asset.imgly_lut_mellow":"editor.controls.filter.filters.imgly_lut_mellow","pesdk.filter.asset.imgly_lut_neat":"editor.controls.filter.filters.imgly_lut_neat","pesdk.filter.asset.imgly_lut_nogreen":"editor.controls.filter.filters.imgly_lut_nogreen","pesdk.filter.asset.imgly_lut_orchid":"editor.controls.filter.filters.imgly_lut_orchid","pesdk.filter.asset.imgly_lut_pale":"editor.controls.filter.filters.imgly_lut_pale","pesdk.filter.asset.imgly_lut_pitched":"editor.controls.filter.filters.imgly_lut_pitched","pesdk.filter.asset.imgly_lut_plate":"editor.controls.filter.filters.imgly_lut_plate","pesdk.filter.asset.imgly_lut_pola669":"editor.controls.filter.filters.imgly_lut_pola669","pesdk.filter.asset.imgly_lut_polasx":"editor.controls.filter.filters.imgly_lut_polasx","pesdk.filter.asset.imgly_lut_pro400":"editor.controls.filter.filters.imgly_lut_pro400","pesdk.filter.asset.imgly_lut_quozi":"editor.controls.filter.filters.imgly_lut_quozi","pesdk.filter.asset.imgly_lut_sepiahigh":"editor.controls.filter.filters.imgly_lut_sepiahigh","pesdk.filter.asset.imgly_lut_settled":"editor.controls.filter.filters.imgly_lut_settled","pesdk.filter.asset.imgly_lut_seventies":"editor.controls.filter.filters.imgly_lut_seventies","pesdk.filter.asset.imgly_lut_sin":"editor.controls.filter.filters.imgly_lut_sin","pesdk.filter.asset.imgly_lut_soft":"editor.controls.filter.filters.imgly_lut_soft","pesdk.filter.asset.imgly_lut_steel":"editor.controls.filter.filters.imgly_lut_steel","pesdk.filter.asset.imgly_lut_summer":"editor.controls.filter.filters.imgly_lut_summer","pesdk.filter.asset.imgly_lut_sunset":"editor.controls.filter.filters.imgly_lut_sunset","pesdk.filter.asset.imgly_lut_tender":"editor.controls.filter.filters.imgly_lut_tender","pesdk.filter.asset.imgly_lut_texas":"editor.controls.filter.filters.imgly_lut_texas",
"pesdk.filter.asset.imgly_lut_twilight":"editor.controls.filter.filters.imgly_lut_twilight","pesdk.filter.asset.imgly_lut_winter":"editor.controls.filter.filters.imgly_lut_winter","pesdk.filter.asset.imgly_lut_x400":"editor.controls.filter.filters.imgly_lut_x400","pesdk.filter.title.name":"editor.controls.filter.title","pesdk.focus.button.gaussian":"editor.controls.focus.items.gaussian","pesdk.focus.button.linear":"editor.controls.focus.items.linear","pesdk.focus.button.mirrored":"editor.controls.focus.items.mirrored","pesdk.focus.button.none":"editor.controls.focus.items.none","pesdk.focus.button.radial":"editor.controls.focus.items.radial","pesdk.focus.title.name":"editor.controls.focus.title","pesdk.frame.asset.imgly_frame_art_decor":"editor.controls.frame.frames.imgly_frame_art_decor","pesdk.frame.asset.imgly_frame_black_passepartout":"editor.controls.frame.frames.imgly_frame_black_passepartout","pesdk.frame.asset.imgly_frame_dia":"editor.controls.frame.frames.imgly_frame_dia","pesdk.frame.asset.imgly_frame_lowpoly_shadow":"editor.controls.frame.frames.imgly_frame_lowpoly_shadow","pesdk.frame.asset.imgly_frame_wood_passepartout":"editor.controls.frame.frames.imgly_frame_wood_passepartout","pesdk.frame.button.fill":"editor.controls.frame.fill","pesdk.frame.button.replace":"editor.controls.frame.replace","pesdk.frame.title.name":"editor.controls.frame.title","pesdk.frame.title.opacity":"editor.controls.frame.opacity","pesdk.frame.title.width":"editor.controls.frame.width","pesdk.library.button.fileDropZone":"editor.controls.library.fileDropZone","pesdk.library.button.fileDropZoneHovered":"editor.controls.library.fileDropZoneHovered","pesdk.library.placeholder.search":"editor.controls.library.search","pesdk.library.text.noResults":"editor.controls.library.noResults","pesdk.library.title.name":"editor.controls.library.title","pesdk.overlay.asset.imgly_overlay_bokeh":"editor.controls.overlay.overlays.imgly_overlay_bokeh","pesdk.overlay.asset.imgly_overlay_chop":"editor.controls.overlay.overlays.imgly_overlay_chop","pesdk.overlay.asset.imgly_overlay_clouds":"editor.controls.overlay.overlays.imgly_overlay_clouds","pesdk.overlay.asset.imgly_overlay_golden":"editor.controls.overlay.overlays.imgly_overlay_golden","pesdk.overlay.asset.imgly_overlay_grain":"editor.controls.overlay.overlays.imgly_overlay_grain","pesdk.overlay.asset.imgly_overlay_hearts":"editor.controls.overlay.overlays.imgly_overlay_hearts","pesdk.overlay.asset.imgly_overlay_lightleak1":"editor.controls.overlay.overlays.imgly_overlay_lightleak1","pesdk.overlay.asset.imgly_overlay_lightleak2":"editor.controls.overlay.overlays.imgly_overlay_lightleak2","pesdk.overlay.asset.imgly_overlay_metal":"editor.controls.overlay.overlays.imgly_overlay_metal","pesdk.overlay.asset.imgly_overlay_mosaic":"editor.controls.overlay.overlays.imgly_overlay_mosaic","pesdk.overlay.asset.imgly_overlay_painting":"editor.controls.overlay.overlays.imgly_overlay_painting","pesdk.overlay.asset.imgly_overlay_paper":"editor.controls.overlay.overlays.imgly_overlay_paper","pesdk.overlay.asset.imgly_overlay_rain":"editor.controls.overlay.overlays.imgly_overlay_rain","pesdk.overlay.asset.imgly_overlay_vintage":"editor.controls.overlay.overlays.imgly_overlay_vintage","pesdk.overlay.asset.imgly_overlay_wall1":"editor.controls.overlay.overlays.imgly_overlay_wall1","pesdk.overlay.asset.imgly_overlay_wall2":"editor.controls.overlay.overlays.imgly_overlay_wall2","pesdk.overlay.asset.imgly_overlay_wood":"editor.controls.overlay.overlays.imgly_overlay_wood","pesdk.overlay.button.none":"editor.controls.overlay.overlays.none","pesdk.overlay.title.blending":"editor.controls.overlay.blendModes.blending","pesdk.overlay.title.colorBurn":"editor.controls.overlay.blendModes.colorBurn","pesdk.overlay.title.darken":"editor.controls.overlay.blendModes.darken","pesdk.overlay.title.hardLight":"editor.controls.overlay.blendModes.hardLight","pesdk.overlay.title.lighten":"editor.controls.overlay.blendModes.lighten","pesdk.overlay.title.multiply":"editor.controls.overlay.blendModes.multiply","pesdk.overlay.title.name":"editor.controls.overlay.title","pesdk.overlay.title.none":"editor.controls.overlay.blendModes.none","pesdk.overlay.title.normal":"editor.controls.overlay.blendModes.normal","pesdk.overlay.title.overlay":"editor.controls.overlay.blendModes.overlay","pesdk.overlay.title.screen":"editor.controls.overlay.blendModes.screen","pesdk.overlay.title.softLight":"editor.controls.overlay.blendModes.softLight","pesdk.sticker.asset.imgly_sticker_emoticons":"editor.controls.sticker.stickerCategories.imgly_sticker_emoticons","pesdk.sticker.asset.imgly_sticker_emoticons_alien":"editor.controls.sticker.stickers.imgly_sticker_emoticons_alien","pesdk.sticker.asset.imgly_sticker_emoticons_angel":"editor.controls.sticker.stickers.imgly_sticker_emoticons_angel","pesdk.sticker.asset.imgly_sticker_emoticons_angry":"editor.controls.sticker.stickers.imgly_sticker_emoticons_angry","pesdk.sticker.asset.imgly_sticker_emoticons_anxious":"editor.controls.sticker.stickers.imgly_sticker_emoticons_anxious","pesdk.sticker.asset.imgly_sticker_emoticons_asleep":"editor.controls.sticker.stickers.imgly_sticker_emoticons_asleep","pesdk.sticker.asset.imgly_sticker_emoticons_attention":"editor.controls.sticker.stickers.imgly_sticker_emoticons_attention","pesdk.sticker.asset.imgly_sticker_emoticons_baby_chicken":"editor.controls.sticker.stickers.imgly_sticker_emoticons_baby_chicken","pesdk.sticker.asset.imgly_sticker_emoticons_batman":"editor.controls.sticker.stickers.imgly_sticker_emoticons_batman","pesdk.sticker.asset.imgly_sticker_emoticons_beer":"editor.controls.sticker.stickers.imgly_sticker_emoticons_beer","pesdk.sticker.asset.imgly_sticker_emoticons_black":"editor.controls.sticker.stickers.imgly_sticker_emoticons_black","pesdk.sticker.asset.imgly_sticker_emoticons_blue":"editor.controls.sticker.stickers.imgly_sticker_emoticons_blue","pesdk.sticker.asset.imgly_sticker_emoticons_blush":"editor.controls.sticker.stickers.imgly_sticker_emoticons_blush","pesdk.sticker.asset.imgly_sticker_emoticons_boxer":"editor.controls.sticker.stickers.imgly_sticker_emoticons_boxer","pesdk.sticker.asset.imgly_sticker_emoticons_business":"editor.controls.sticker.stickers.imgly_sticker_emoticons_business","pesdk.sticker.asset.imgly_sticker_emoticons_chicken":"editor.controls.sticker.stickers.imgly_sticker_emoticons_chicken","pesdk.sticker.asset.imgly_sticker_emoticons_cool":"editor.controls.sticker.stickers.imgly_sticker_emoticons_cool","pesdk.sticker.asset.imgly_sticker_emoticons_cry":"editor.controls.sticker.stickers.imgly_sticker_emoticons_cry","pesdk.sticker.asset.imgly_sticker_emoticons_deceased":"editor.controls.sticker.stickers.imgly_sticker_emoticons_deceased","pesdk.sticker.asset.imgly_sticker_emoticons_devil":"editor.controls.sticker.stickers.imgly_sticker_emoticons_devil","pesdk.sticker.asset.imgly_sticker_emoticons_duckface":"editor.controls.sticker.stickers.imgly_sticker_emoticons_duckface","pesdk.sticker.asset.imgly_sticker_emoticons_furious":"editor.controls.sticker.stickers.imgly_sticker_emoticons_furious","pesdk.sticker.asset.imgly_sticker_emoticons_grin":"editor.controls.sticker.stickers.imgly_sticker_emoticons_grin","pesdk.sticker.asset.imgly_sticker_emoticons_guitar":"editor.controls.sticker.stickers.imgly_sticker_emoticons_guitar","pesdk.sticker.asset.imgly_sticker_emoticons_harry_potter":"editor.controls.sticker.stickers.imgly_sticker_emoticons_harry_potter","pesdk.sticker.asset.imgly_sticker_emoticons_hippie":"editor.controls.sticker.stickers.imgly_sticker_emoticons_hippie","pesdk.sticker.asset.imgly_sticker_emoticons_hitman":"editor.controls.sticker.stickers.imgly_sticker_emoticons_hitman","pesdk.sticker.asset.imgly_sticker_emoticons_humourous":"editor.controls.sticker.stickers.imgly_sticker_emoticons_humourous","pesdk.sticker.asset.imgly_sticker_emoticons_idea":"editor.controls.sticker.stickers.imgly_sticker_emoticons_idea","pesdk.sticker.asset.imgly_sticker_emoticons_impatient":"editor.controls.sticker.stickers.imgly_sticker_emoticons_impatient","pesdk.sticker.asset.imgly_sticker_emoticons_kiss":"editor.controls.sticker.stickers.imgly_sticker_emoticons_kiss","pesdk.sticker.asset.imgly_sticker_emoticons_kisses":"editor.controls.sticker.stickers.imgly_sticker_emoticons_kisses","pesdk.sticker.asset.imgly_sticker_emoticons_laugh":"editor.controls.sticker.stickers.imgly_sticker_emoticons_laugh","pesdk.sticker.asset.imgly_sticker_emoticons_loud_cry":"editor.controls.sticker.stickers.imgly_sticker_emoticons_loud_cry","pesdk.sticker.asset.imgly_sticker_emoticons_loving":"editor.controls.sticker.stickers.imgly_sticker_emoticons_loving","pesdk.sticker.asset.imgly_sticker_emoticons_masked":"editor.controls.sticker.stickers.imgly_sticker_emoticons_masked","pesdk.sticker.asset.imgly_sticker_emoticons_music":"editor.controls.sticker.stickers.imgly_sticker_emoticons_music","pesdk.sticker.asset.imgly_sticker_emoticons_nerd":"editor.controls.sticker.stickers.imgly_sticker_emoticons_nerd","pesdk.sticker.asset.imgly_sticker_emoticons_ninja":"editor.controls.sticker.stickers.imgly_sticker_emoticons_ninja","pesdk.sticker.asset.imgly_sticker_emoticons_not_speaking_to_you":"editor.controls.sticker.stickers.imgly_sticker_emoticons_not_speaking_to_you","pesdk.sticker.asset.imgly_sticker_emoticons_pig":"editor.controls.sticker.stickers.imgly_sticker_emoticons_pig","pesdk.sticker.asset.imgly_sticker_emoticons_pumpkin":"editor.controls.sticker.stickers.imgly_sticker_emoticons_pumpkin","pesdk.sticker.asset.imgly_sticker_emoticons_question":"editor.controls.sticker.stickers.imgly_sticker_emoticons_question","pesdk.sticker.asset.imgly_sticker_emoticons_rabbit":"editor.controls.sticker.stickers.imgly_sticker_emoticons_rabbit","pesdk.sticker.asset.imgly_sticker_emoticons_sad":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sad","pesdk.sticker.asset.imgly_sticker_emoticons_sick":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sick","pesdk.sticker.asset.imgly_sticker_emoticons_skateboard":"editor.controls.sticker.stickers.imgly_sticker_emoticons_skateboard","pesdk.sticker.asset.imgly_sticker_emoticons_skull":"editor.controls.sticker.stickers.imgly_sticker_emoticons_skull","pesdk.sticker.asset.imgly_sticker_emoticons_sleepy":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sleepy","pesdk.sticker.asset.imgly_sticker_emoticons_smile":"editor.controls.sticker.stickers.imgly_sticker_emoticons_smile","pesdk.sticker.asset.imgly_sticker_emoticons_smoking":"editor.controls.sticker.stickers.imgly_sticker_emoticons_smoking","pesdk.sticker.asset.imgly_sticker_emoticons_sobbing":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sobbing","pesdk.sticker.asset.imgly_sticker_emoticons_star":"editor.controls.sticker.stickers.imgly_sticker_emoticons_star","pesdk.sticker.asset.imgly_sticker_emoticons_steaming_furious":"editor.controls.sticker.stickers.imgly_sticker_emoticons_steaming_furious","pesdk.sticker.asset.imgly_sticker_emoticons_sunbathing":"editor.controls.sticker.stickers.imgly_sticker_emoticons_sunbathing","pesdk.sticker.asset.imgly_sticker_emoticons_tired":"editor.controls.sticker.stickers.imgly_sticker_emoticons_tired","pesdk.sticker.asset.imgly_sticker_emoticons_tongue_out_wink":"editor.controls.sticker.stickers.imgly_sticker_emoticons_tongue_out_wink","pesdk.sticker.asset.imgly_sticker_emoticons_wave":"editor.controls.sticker.stickers.imgly_sticker_emoticons_wave","pesdk.sticker.asset.imgly_sticker_emoticons_wide_grin":"editor.controls.sticker.stickers.imgly_sticker_emoticons_wide_grin","pesdk.sticker.asset.imgly_sticker_emoticons_wink":"editor.controls.sticker.stickers.imgly_sticker_emoticons_wink","pesdk.sticker.asset.imgly_sticker_emoticons_wrestler":"editor.controls.sticker.stickers.imgly_sticker_emoticons_wrestler","pesdk.sticker.asset.imgly_sticker_shapes":"editor.controls.sticker.stickerCategories.imgly_sticker_shapes","pesdk.sticker.asset.imgly_sticker_shapes_arrow_02":"editor.controls.sticker.stickers.imgly_sticker_shapes_arrow_02","pesdk.sticker.asset.imgly_sticker_shapes_arrow_03":"editor.controls.sticker.stickers.imgly_sticker_shapes_arrow_03","pesdk.sticker.asset.imgly_sticker_shapes_badge_01":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_01","pesdk.sticker.asset.imgly_sticker_shapes_badge_04":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_04","pesdk.sticker.asset.imgly_sticker_shapes_badge_06":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_06","pesdk.sticker.asset.imgly_sticker_shapes_badge_08":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_08","pesdk.sticker.asset.imgly_sticker_shapes_badge_11":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_11","pesdk.sticker.asset.imgly_sticker_shapes_badge_12":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_12","pesdk.sticker.asset.imgly_sticker_shapes_badge_13":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_13","pesdk.sticker.asset.imgly_sticker_shapes_badge_15":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_15","pesdk.sticker.asset.imgly_sticker_shapes_badge_18":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_18","pesdk.sticker.asset.imgly_sticker_shapes_badge_19":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_19","pesdk.sticker.asset.imgly_sticker_shapes_badge_20":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_20","pesdk.sticker.asset.imgly_sticker_shapes_badge_28":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_28","pesdk.sticker.asset.imgly_sticker_shapes_badge_32":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_32","pesdk.sticker.asset.imgly_sticker_shapes_badge_35":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_35","pesdk.sticker.asset.imgly_sticker_shapes_badge_36":"editor.controls.sticker.stickers.imgly_sticker_shapes_badge_36","pesdk.sticker.asset.imgly_sticker_shapes_spray_01":"editor.controls.sticker.stickers.imgly_sticker_shapes_spray_01","pesdk.sticker.asset.imgly_sticker_shapes_spray_03":"editor.controls.sticker.stickers.imgly_sticker_shapes_spray_03","pesdk.sticker.asset.imgly_sticker_shapes_spray_04":"editor.controls.sticker.stickers.imgly_sticker_shapes_spray_04","pesdk.sticker.button.fill":"editor.controls.sticker.fill","pesdk.sticker.button.new":"editor.controls.sticker.new","pesdk.sticker.button.replace":"editor.controls.sticker.replace","pesdk.sticker.text.stickerLoadingError":"errors.stickerLoadingError.text","pesdk.sticker.title.name":"editor.controls.sticker.title","pesdk.sticker.title.opacity":"editor.controls.sticker.opacity","pesdk.text.button.new":"editor.controls.text.new","pesdk.text.placeholder.defaultText":"editor.controls.text.defaultText","pesdk.text.title.background":"editor.controls.text.background","pesdk.text.title.font":"editor.controls.text.font","pesdk.text.title.line":"editor.controls.text.line","pesdk.text.title.name":"editor.controls.text.title","pesdk.text.title.size":"editor.controls.text.size","pesdk.text.title.spacing":"editor.controls.text.spacing","pesdk.textdesign.title.name":"editor.controls.textdesign.title","pesdk.transform.asset.imgly_transforms_common.imgly_transform_common_16-9":"editor.controls.transform.ratios.imgly_transforms_common.imgly_transform_common_16-9","pesdk.transform.asset.imgly_transforms_common.imgly_transform_common_4-3":"editor.controls.transform.ratios.imgly_transforms_common.imgly_transform_common_4-3","pesdk.transform.asset.imgly_transforms_common.imgly_transform_common_custom":"editor.controls.transform.ratios.imgly_transforms_common.imgly_transform_common_custom","pesdk.transform.asset.imgly_transforms_common.imgly_transform_common_square":"editor.controls.transform.ratios.imgly_transforms_common.imgly_transform_common_square","pesdk.transform.asset.imgly_transforms_common.name":"editor.controls.transform.ratios.imgly_transforms_common.name","pesdk.transform.asset.imgly_transforms_facebook.imgly_transform_facebook_ad":"editor.controls.transforms.ratios.imgly_transforms_facebook.imgly_transform_facebook_ad","pesdk.transform.asset.imgly_transforms_facebook.imgly_transform_facebook_cover":"editor.controls.transforms.ratios.imgly_transforms_facebook.imgly_transform_facebook_cover","pesdk.transform.asset.imgly_transforms_facebook.imgly_transform_facebook_post":"editor.controls.transforms.ratios.imgly_transforms_facebook.imgly_transform_facebook_post","pesdk.transform.asset.imgly_transforms_facebook.imgly_transform_facebook_profile":"editor.controls.transforms.ratios.imgly_transforms_facebook.imgly_transform_facebook_profile","pesdk.transform.asset.imgly_transforms_facebook.name":"editor.controls.transform.ratios.imgly_transforms_facebook.name","pesdk.transform.button.reset":"editor.controls.transform.reset","pesdk.transform.placeholder.height":"editor.controls.transform.dimensions.height","pesdk.transform.placeholder.width":"editor.controls.transform.dimensions.width","pesdk.transform.title.name":"editor.controls.transform.title"}},function(a,b,c){var d=c(211),e=c(212);b.a={EVENTS:d.a,DEFAULTS:e.a}},function(a,b,c){var d=c(9),e=c.n(d),f=c(75),g=(e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a})({},f.a,{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker"});b.a=g},function(a,b,c){var d=c(7),e=c.n(d),f=c(213),g=c(214),h=c(215),i=[];void 0!==e.a.Operations.SpriteOperation&&i.push(e.a.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush),b.a={TRANSFORM_RATIO_CATEGORIES:h.a,FONTS:f.a,TEXT_DESIGN_FONTS:g.a,BRUSHES:i}},function(a,b,c){b.a=[{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1919,descender:-409}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:2048,ascender:2332,descender:-583}}]},{fontFamily:"Bernier",variations:[{identifier:"imgly_font_bernier_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_bernier_regular.woff",textMetrics:{unitsPerEm:2048,ascender:2007,descender:-552}}]},{fontFamily:"Cheque",variations:[{identifier:"imgly_font_cheque_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_cheque_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-495}}]},{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Hagin",variations:[{identifier:"imgly_font_hagin_caps_thin",fontWeight:200,provider:"file",filePath:"fonts/imgly_font_hagin_caps_thin.woff",textMetrics:{unitsPerEm:2048,ascender:1964,descender:-482}}]},{fontFamily:"Intro",variations:[{identifier:"imgly_font_intro_inline",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_intro_inline.woff",textMetrics:{unitsPerEm:2048,ascender:1944,descender:-548}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:2048,ascender:2048,descender:-552}}]},{fontFamily:"Nexa",variations:[{identifier:"imgly_font_nexa_script",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_nexa_script.woff",textMetrics:{unitsPerEm:2048,ascender:1835,descender:-663}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}}]},{fontFamily:"Panton",variations:[{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_blackitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-572}},{identifier:"imgly_font_panton_light_italic_caps",fontWeight:200,fontStyle:"italic",provider:"file",filePath:"fonts/imgly_font_panton_lightitalic_caps.woff",textMetrics:{unitsPerEm:2048,ascender:1961,descender:-556}}]},{fontFamily:"Perfograma",variations:[{identifier:"imgly_font_perfograma",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_perfograma.woff",textMetrics:{unitsPerEm:2048,ascender:1982,descender:-842}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:2048,ascender:1554,descender:-663}}]}]},function(a,b,c){b.a=[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-640}}]},{fontFamily:"Gagalin",variations:[{identifier:"imgly_font_gagalin_regular",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_gagalin_regular.woff",textMetrics:{unitsPerEm:2048,ascender:1987,descender:-628}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:2048,ascender:1849,descender:-1123}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:2048,ascender:2272,descender:-686}}]},{fontFamily:"Panton Caps",variations:[{identifier:"imgly_font_panton_light_italic_caps",fontWeight:"lighter",fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_panton_light_italic_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_italic_caps",fontWeight:800,fontStyle:"italic",provider:"file",filePath:"text-design/fonts/imgly_font_panton_black_italic_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_light_caps",fontWeight:"lighter",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_panton_light_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}},{identifier:"imgly_font_panton_black_caps",fontWeight:800,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_panton_black_caps.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:940,descender:-260}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Summer Font",variations:[{identifier:"imgly_font_summer_font_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_summer_font_light.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"text-design/fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"text-design/fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:2048,ascender:1513,descender:-235}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"text-design/fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]}]},function(a,b,c){b.a=[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}]},function(a,b,c){var d=c(9),e=c.n(d),f=c(36),g=c.n(f),h=c(37),i=c.n(h),j=c(0),k=c.n(j),l=c(2),m=c.n(l),n=c(3),o=c.n(n),p=c(1),q=c.n(p),r=c(7),s=c.n(r),t=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},u="function"==typeof i.a&&"symbol"==typeof g.a?function(a){return typeof a}:function(a){return a&&"function"==typeof i.a&&a.constructor===i.a&&a!==i.a.prototype?"symbol":typeof a},v=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),k()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),w=s.a.EventEmitter,x=s.a.Log,y=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||q()(b)).call(this));return c.setMaxListeners(50),c._canBroadcast=!0,c.state=a,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=o()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(m.a?m()(a,b):a.__proto__=b)}(b,w),v(b,[{key:"set",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"object"!==(void 0===a?"undefined":u(a))&&x.info("SharedState#set expects an object as first parameter");var c=t({},this.state,a),d=t({},this.state);this.state=c,b&&this.broadcastUpdate(d,c)}},{key:"get",value:function(a){return a?this.state[a]:t({},this.state)}},{key:"getState",value:function(){return this.state}},{key:"broadcastUpdate",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._canBroadcast&&this.emit("update",a,b)}},{key:"enableBroadcast",value:function(){this._canBroadcast=!0}},{key:"disableBroadcast",value:function(){this._canBroadcast=!1}},{key:"clear",value:function(){var a=this.state;this.state={},this.broadcastUpdate(a,this.state)}}]),b}();b.a=y},function(a,b,c){c(46),c(34),a.exports=c(218)},function(a,b,c){var d=c(68),e=c(11)("iterator"),f=c(26);a.exports=c(10).isIterable=function(a){var b=Object(a);return void 0!==b[e]||"@@iterator"in b||f.hasOwnProperty(d(b))}},function(a,b,c){c(46),c(34),a.exports=c(220)},function(a,b,c){var d=c(14),e=c(69);a.exports=c(10).getIterator=function(a){var b=e(a);if("function"!=typeof b)throw TypeError(a+" is not iterable!");return d(b.call(a))}},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(6),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=c(38),r=c(224),s=c(230),t=c(266),u=c(91),v=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},y={loading:t.a,editor:s.a},z=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)))
;f._bindAll("_onLoadingDone","_onPreloaderDone","_onImageDone");var g=f.props,h=g.options,i=g.ui,j=h.editor.image;f._preloaderIsComplete=!h.preloader,h.preloader&&(f._preloader=i.getPreloader(),f._preloader.on("done",f._onPreloaderDone)),f._imageIsComplete=j.complete,j.addEventListener("load",f._onImageDone);var k=f._preloaderIsComplete&&f._imageIsComplete?s.a:t.a;return f.state={theme:f.props.ui.getTheme(),screen:k,screenOptions:{}},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,u.a),w(b,[{key:"componentDidMount",value:function(){x(b.prototype.__proto__||o()(b.prototype),"componentDidMount",this).call(this),this._preloader&&this._preloader.load()}},{key:"componentWillUnmount",value:function(){x(b.prototype.__proto__||o()(b.prototype),"componentWillUnmount",this).call(this),this._preloader&&this._preloader.off("done",this._onPreloaderDone)}},{key:"_onImageDone",value:function(){this._imageIsComplete=!0,this._onLoadingDone()}},{key:"_onPreloaderDone",value:function(){this._preloaderIsComplete=!0,this._onLoadingDone()}},{key:"_onLoadingDone",value:function(){this._preloaderIsComplete&&this._imageIsComplete&&this.setState({screen:s.a,screenOptions:{}})}},{key:"getChildContext",value:function(){return{ui:this.props.ui,options:this.props.options,mediator:this.props.mediator,globalState:this.props.globalState,appComponent:this}}},{key:"switchToScreen",value:function(a){this.setState({screen:y[a],screenOptions:{}})}},{key:"getEditor",value:function(){return this._currentScreen.getEditor()}},{key:"export",value:function(){var a;return(a=this._currentScreen).export.apply(a,arguments)}},{key:"serialize",value:function(){var a;return(a=this._currentScreen).serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return this._currentScreen.deserialize(a)}},{key:"getBounds",value:function(){return this._container.getBoundingClientRect()}},{key:"setImage",value:function(a){this.getEditor().setImage(a)}},{key:"_renderCurrentScreen",value:function(){var a=this,b=this.state,c=b.screen,d=b.screenOptions;return p.l.createElement(c,v({},d,{innerRef:function(b){a._currentScreen=b}}))}},{key:"render",value:function(){var a=this;return p.l.createElement(p.t,{theme:this.state.theme},p.l.createElement(A,{className:"photoeditorsdk-editor",innerRef:function(b){a._container=b}},p.l.createElement(r.a,{modalManager:q.a.instance}),this._renderCurrentScreen()))}}]),b}();z.childContextTypes={ui:p.k.object.isRequired,mediator:p.k.object.isRequired,options:p.k.object.isRequired,appComponent:p.k.object.isRequired,globalState:p.k.object.isRequired},z.propTypes={ui:p.k.object.isRequired,mediator:p.k.object.isRequired,globalState:p.k.object.isRequired,options:p.k.object.isRequired},b.a=z;var A=p.w.div("1fw137a","AppContainer")},function(a,b,c){c(223);var d=c(10).Object;a.exports=function(a,b){return d.getOwnPropertyDescriptor(a,b)}},function(a,b,c){var d=c(20),e=c(59).f;c(67)("getOwnPropertyDescriptor",function(){return function(a,b){return e(d(a),b)}})},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(225),p=c(226),q=c(227),r=c(228),s=c(229),t=c(50),u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},w=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._onOverlayClick=function(){f._modalManager.getModals().forEach(function(a){a.closeOnOverlayClick&&a.close()})},f._modalManager=f.props.modalManager,f._bindAll("_onModalManagerUpdate"),f.state={overlayVisible:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),u(b,[{key:"componentDidMount",value:function(){v(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._modalManager.on("update",this._onModalManagerUpdate)}},{key:"componentWillUnmount",value:function(){v(b.prototype.__proto__||m()(b.prototype),"componentWillUnmount",this).call(this),this._modalManager.off("update",this._onModalManagerUpdate)}},{key:"_onModalManagerUpdate",value:function(){var a=this._modalManager.getModals().filter(function(a){return a.visible}).filter(function(a){return!!a.overlay}).length>0;this.state.overlayVisible=a,this.forceUpdate()}},{key:"_onModalClosed",value:function(a){this._modalManager.removeModal(a)}},{key:"_renderModals",value:function(){var a=this;return this._modalManager.getModals().map(function(b){var c=void 0;switch(b.type){case"loading":c=o.a;break;case"warning":c=p.a;break;case"error":c=q.a;break;case"input":c=s.a;break;case"progress":c=r.a}return n.l.createElement(c,{modal:b,key:b.id,onClose:a._onModalClosed.bind(a,b)})})}},{key:"render",value:function(){return n.l.createElement(y,null,n.l.createElement(t.a,{active:this.state.overlayVisible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},n.l.createElement(x,{onClick:this._onOverlayClick})),n.l.createElement("div",null,this._renderModals()))}}]),b}();w.contextTypes=n.b.contextTypes,b.a=w;var x=n.w.div("ovs9m3",{visible:"zgbg08",rendered:"2jlos"},"Overlay"),y=n.w.div("8gacw5","Container")},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(4),k=c(39),l=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,k.g),b}();l.contextTypes=j.b.contextTypes,b.a=l},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(39),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._buttons=f.props.modal.data.buttons||["OK"],f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.g),n(b,[{key:"_onButtonClick",value:function(a){this.props.modal.emit("button",a),this.props.modal.close()}}]),b}();o.contextTypes=l.b.contextTypes,b.a=o},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(39),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._buttons=["Okay"],f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.g),n(b,[{key:"_onButtonClick",value:function(a){0===a&&this.props.modal.close()}}]),b}();o.contextTypes=l.b.contextTypes,b.a=o},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(39),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.g),n(b,[{key:"_getProgressBarStyle",value:function(a){return{right:100*(1-a)+"%",borderRadius:"0 0 "+(1===a?2:0)+"px 2px"}}},{key:"_renderContent",value:function(){var a=this.props.modal;return React.createElement(m.f,null,React.createElement(m.b,null,React.createElement(m.a,{src:this._getAssetPath("shared/modals/icon.png",!0)})),React.createElement(m.d,null,React.createElement(m.e,null,a.title),React.createElement(m.c,null,a.text)),React.createElement(p,{style:this._getProgressBarStyle(a.data.progress)}))}}]),b}();o.propTypes={modal:l.k.object},o.contextTypes=l.b.contextTypes,b.a=o;var p=l.w.div("1j1uq6u","ProgressBar")},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(39),p=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._onKeyPress=function(a){"Enter"===a.key?f._onAccept():f.setState(function(a){return{count:a.count+1}})},f._onAccept=function(){f.props.modal.emit("input",f._textArea.value),f.props.modal.close()},f._onCancel=function(){var a=f.props.modal;a.emit("input",a.data.text||""),a.emit("cancel"),a.close()},f._onClickOverlay=function(){f._onCancel()},f._buttons=f.props.modal.data.buttons||["OK"],f.state=p({},f.state,{count:0,large:!0}),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.g),q(b,[{key:"_renderContent",value:function(){var a=this,b=this.props.modal;return n.l.createElement(x,null,n.l.createElement(t,null,n.l.createElement(v,null,b.title),n.l.createElement(w,{autoFocus:!0,innerRef:function(b){a._textArea=b},defaultValue:b.data.text||"",onKeyPress:this._onKeyPress})),n.l.createElement(s,null,n.l.createElement(u,{onClick:this._onAccept,right:!0,src:this._getAssetPath("shared/modals/input-accept.png",!0)}),n.l.createElement(u,{onClick:this._onCancel,src:this._getAssetPath("shared/modals/input-cancel.png",!0)})))}}]),b}();r.contextTypes=n.b.contextTypes,b.a=r;var s=n.w.div("dh53lm","ButtonBar"),t=n.w.div("1uahxoo","InputContainer"),u=n.w.img("1pb8m8c",{right:"1l7kz3k"},"Image"),v=n.w.div("1lyqewl","Title"),w=n.w.textarea("93mi9g","TextArea"),x=(n.w.span("19kk1u4","LetterCount"),n.w.div("11xw2tg","Container"))},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(8),m=c.n(l),n=c(1),o=c.n(n),p=c(4),q=c(107),r=c(257),s=c(259),t=c(38),u=c(127),v=c(128),w=c(79),x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},z=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));f._bindAll("_onRenderError","_onImageResize","_startEditor","_onEditorReset");var g=f.context,h=g.ui,i=g.options,j=g.mediator;return f._editor=new q.a(h,i,j),f._editor.on("ready",f._startEditor),f._editor.on("render-error",f._onRenderError),f._editor.on("resize",f._onImageResize),f._editor.on("reset",f._onEditorReset),f._onWindowResize=p.u.debounce(f._onWindowResize.bind(f),250),f._originalToolsOption=null,f._needsForceCrop=!1,f._isReady=!1,f.state={sharedState:new p.s,controls:null,controlsOptions:{},currentControl:null},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.b),x(b,[{key:"componentDidMount",value:function(){var a=this;y(b.prototype.__proto__||o()(b.prototype),"componentDidMount",this).call(this),this.context.options.responsive&&window.addEventListener("resize",this._onWindowResize),this._editor.isReady()?!this._hasSwitchedControls&&this.switchToInitialControls():this._editor.once("ready",function(){!a._hasSwitchedControls&&a.switchToInitialControls()})}},{key:"componentWillUnmount",value:function(){y(b.prototype.__proto__||o()(b.prototype),"componentWillUnmount",this).call(this),this.context.options.responsive&&window.removeEventListener("resize",this._onWindowResize)}},{key:"_onEditorReset",value:function(){"library"!==this.state.currentControl&&this.switchToInitialControls()}},{key:"_onImageResize",value:function(){var a=this,b=t.a.instance.displayLoading(this._t("pesdk.editor.text.resizing"));this._editor.once("resized",function(c){var d=c.dimensions,e=c.reason;b.close(),a.context.options.editor.displayResizeMessage&&t.a.instance.displayWarning(a._t("pesdk.editor.title.imageResizedWarning_"+e),a._t("pesdk.editor.text.imageResizedWarning_"+e,{maxMegaPixels:a._editor.getMaxMegapixels(),width:d.x,height:d.y}))})}},{key:"_onRenderError",value:function(a){t.a.instance.displayError(this._t("pesdk.common.title.error"),this._t("pesdk.editor.text.renderingError"),!0)}},{key:"_onWindowResize",value:function(){this._emitEvent(p.d.EVENTS.WINDOW_RESIZE);var a=new p.v(this._container.offsetWidth,this._container.offsetHeight);this._emitEvent(p.d.EVENTS.EDITOR_RESIZE,a)}},{key:"switchToInitialControls",value:function(a){var b=this.context.options,c=!1;if(b.editor.forceCrop&&this._editor.controls.isEnabled("transform")&&!this._hasSwitchedControls){var d=this._editor.getInputDimensions(),e=new u.a(b.editor.controlsOptions.transform||{}),f=d.x/d.y;c=!e.hasRatioValue(f)}c?(this._needsForceCrop=!0,this.switchToForceCropControls(a)):(this._needsForceCrop=!1,this.switchToDefaultControls(a))}},{key:"switchToDefaultControls",value:function(a){var b=this.context.options,c=b.editor.defaultControl;this._originalToolsOption&&(b.editor.tools=this._originalToolsOption,this._originalToolsOption=null),this._editor.controls.isEnabled(c)||(p.h.warn("Trying to switch to default control `"+c+"` which is not available. Falling back to first available control."),c=this._editor.controls.getFirstEnabledControlName()),this.switchToControls(c,null,null,a)}},{key:"switchToForceCropControls",value:function(a){var b=this.context.options,c=b.editor.tools;this._originalToolsOption||(this._originalToolsOption=c,b.editor.tools=p.q.Array.remove(c,function(a){return"transform"!==a&&"library"!==a})),this.switchToControls("transform",{forceCrop:!0},null,a)}},{key:"switchToControls",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=this,d=arguments[2],e=arguments[3];if(this.state.currentControl===a)return e&&e();this._hasSwitchedControls=!0;var f=this.state.sharedState;if("default"===a)return this.switchToDefaultControls(e);if(!this._editor.controls.isEnabled(a))return p.h.warn("Tried to open control `"+a+"` which is not available.");var g=this._editor.controls.getAvailable()[a];if(!g&&"overview"!==a)return p.h.error("Control `"+a+"` does not exist!");var h=m.a.resolve(!0);this.state.controls&&(h=this.state.controls.onLeave()),h.then(function(h){if(h){f.disableBroadcast(),c._isReady||(c._isReady=!0,c.context.mediator.emit(p.d.EVENTS.EDITOR_READY)),f.disableBroadcast(),f.clear(),f.set(b);var i=p.q.defaults(d||c.context.options.editor.controlsOptions[g.identifier],g.defaultOptions),j=new g(c.getChildContext(),c.state.sharedState,i);j.onEnter(),f.enableBroadcast(),c.setState({controls:j,controlsOptions:i,currentControl:a},e)}})}},{key:"_startEditor",value:function(){var a=this.context.options;this._editor.start(),a.editor.forceCrop&&(this._hasSwitchedControls=!1,this.switchToInitialControls())}},{key:"getChildContext",value:function(){return{editor:this._editor,ui:this.context.ui,options:this.context.options,mediator:this.context.mediator,sharedState:this.state.sharedState,screen:this,appComponent:this.context.appComponent,globalState:this.context.globalState}}},{key:"render",value:function(){var a=this,b=this.state,c=b.controls,d=b.controlsOptions,e=void 0,f=void 0;if(c){var g=c.constructor,h=g.controlsComponent,i=g.canvasControlsComponent;e=h?p.l.createElement(h,{options:d,controls:c}):p.l.createElement("div",null),f=i?p.l.createElement(i,{options:d,controls:c}):p.l.createElement("div",null)}else e=p.l.createElement(v.a,null),f=p.l.createElement(w.a,null);return p.l.createElement(A,{innerRef:function(b){b&&(a._container=b)},className:void 0},p.l.createElement(s.a,{ref:"canvas"}),p.l.createElement(B,{innerRef:function(b){a._tableContainer=b}},p.l.createElement(r.a,{onControlSwitch:this.switchToControls.bind(this),currentControl:this.state.currentControl}),e,f))}},{key:"getEditor",value:function(){return this._editor}},{key:"export",value:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return new m.a(function(b,d){a.switchToControls("default",null,{},function(){var e;(e=a._editor).export.apply(e,c).then(b).catch(d)})})}},{key:"serialize",value:function(){var a;return(a=this._editor).serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return this._editor.deserialize(a)}}]),b}();z.contextTypes=p.b.contextTypes,z.childContextTypes={ui:p.k.object.isRequired,editor:p.k.object.isRequired,mediator:p.k.object.isRequired,options:p.k.object.isRequired,sharedState:p.k.object.isRequired,screen:p.k.object.isRequired,appComponent:p.k.object.isRequired,globalState:p.k.object.isRequired};var A=p.w.div("5x8wsv","Container"),B=p.w.div("1b28xzz","TableContainer");b.a=Object(p.A)(z)},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=c(108),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._sdk=b,this._options=c,this._download=d}return h(a,[{key:"export",value:function(){var a=this,b=this._getRenderType();return this._sdk.export(b,this._options.format,this._options.quality).then(function(c){return a._download&&a._downloadData(b,c),c})}},{key:"_downloadData",value:function(a,b){switch(a){case f.o.DATAURL:g.a.downloadDataURL(b,this._options.fileBasename);break;case f.o.MSBLOB:g.a.downloadMSBlob(b,this._options.fileBasename)}}},{key:"_getRenderType",value:function(){var a=this._options;return a.type===f.o.IMAGE&&this._download?f.u.supportsMSBlob()?f.o.MSBLOB:f.o.DATAURL:a.type}}]),a}();b.a=i},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._image=b,this._maxPixels=c,this._maxDimensions=d}return g(a,[{key:"needsResize",value:function(){var a=new f.v(this._image.width,this._image.height),b=a.x*a.y>this._maxPixels,c=null!==this._maxDimensions&&(a.x>this._maxDimensions||a.y>this._maxDimensions);return b||c}},{key:"resize",value:function(){var a=this,b=null,c=null,d=this._maxDimensions;return new f.j(function(e,g){window.setTimeout(function(){var g=new f.v(a._image.width,a._image.height).clone();if(g.x*g.y>a._maxPixels&&(g.copy(a._getDimensionsByMaxPixels()),b="maxMegaPixels"),null!==d&&(g.x>d||g.y>d)){var h=Math.min(d/g.x,d/g.y);g.multiply(h),b="maxDimensions"}g.floor(),c=a._createResizedImageCanvas(g),e({canvas:c,dimensions:g,reason:b})},1e3)})}},{key:"_createResizedImageCanvas",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,c=this._image,d=document.createElement("canvas");d.width=a.x,d.height=a.y;var e=a.clone().subtract(b).divide(2);return d.getContext("2d").drawImage(c,0,0,c.width,c.height,e.x,e.y,b.x,b.y),d}},{key:"_getDimensionsByMaxPixels",value:function(){var a=this._image,b=this._maxPixels,c=a.width/a.height,d=a.height/a.width;return new f.v(Math.sqrt(b*c),Math.sqrt(b*d)).floor()}}]),a}();b.a=h},function(a,b,c){var d=c(36),e=c.n(d),f=c(37),g=c.n(f),h=c(0),i=c.n(h),j=c(48),k=c.n(j),l=c(7),m=c.n(l),n=c(4),o="function"==typeof g.a&&"symbol"==typeof e.a?function(a){return typeof a}:function(a){return a&&"function"==typeof g.a&&a.constructor===g.a&&a!==g.a.prototype?"symbol":typeof a},p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),i()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(){function a(b,c,d){var e=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b,this._sdk=c,this._mediator=d,this._map={},this._stack=this._sdk&&this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._available={};var f=m.a.Operations;for(var g in f){var h=f[g];this._available[h.identifier]=h}b.getOptions().extensions.operations.forEach(function(a){e._available[a.identifier]=a}),this._stack&&this._fixStack()}return p(a,[{key:"exists",value:function(a){return!!this._map[a]}},{key:"add",value:function(a){var b=this,c=a.constructor.identifier;a.on("update",function(){b._mediator.emit(n.d.EVENTS.OPERATION_UPDATED,a)});var d=this._preferredOrder.indexOf(c);if(-1===d)throw new Error("EditorOperations#add: `"+c+"` does not appear in `operationsOrder`");this._stack.set(d,a),this._map[c]=a,this._mediator.emit(n.d.EVENTS.OPERATION_CREATED,a)}},{key:"remove",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c="object"===(void 0===a?"undefined":o(a))?a.constructor.identifier:a,d=this._stack.getStack();a=this.get(c),delete this._map[c];var e=d.map(function(a){return a.constructor.identifier}).indexOf(c);if(-1!==e){this._stack.removeAt(e);for(var f=e+1;f<d.length;f++){var g=d[f];g&&g.setDirty(!0)}b&&this._mediator.emit(n.d.EVENTS.OPERATION_REMOVED,a)}}},{key:"get",value:function(a){return this._map[a]}},{key:"getOrCreate",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._map[a]){var c=this._map[a];return c.set(b,!1),c}var d=this._available[a];if(void 0===d)return n.h.warn("Trying to create an operation of type `"+a+"` that is not available."),null;var e=new d(this._sdk,b);return this.add(e),e}},{key:"getStack",value:function(){return this._stack}},{key:"getSnapshot",value:function(){var a=this,b={};return k()(this._map).forEach(function(c){var d=a._map[c];b[c]=d.serializeOptions()}),b}},{key:"removeUnused",value:function(){var a=this;k()(this._map).forEach(function(b){var c=a._map[b];c.hasChanges()||a.remove(c)})}},{key:"hasChanges",value:function(a){var b=this,c=!1;return k()(this._map).forEach(function(b){a[b]||(c=!0)}),!!c||(k()(a).forEach(function(d){var e=b.get(d);e&&e.optionsEqual(a[d])||(c=!0)}),c)}},{key:"restoreSnapshot",value:function(a){var b=this;k()(a).forEach(function(c){var d=b.getOrCreate(c);d.optionsEqual(a[c])||(d.restoreSnapshot?d.restoreSnapshot(a[c]):d.set(a[c]))}),k()(this._map).forEach(function(c){a[c]||b.remove(c)})}},{key:"isAvailable",value:function(a){return!!this._available[a]}},{key:"getAvailable",value:function(){return this._available}},{key:"reset",value:function(){this._map={}}},{key:"_fixStack",value:function(){var a=this,b=this._stack.getStack().slice();this._stack.clear(),b.forEach(function(b){a.add(b)})}}]),a}();b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(7),g=c.n(f),h=c(4),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(){function a(b,c,d){var e=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b,this._sdk=c,this._mediator=d,this._options=this._editor.getOptions(),this._invalidOperationsSeen=[],this._available={};var f=g.a.UI.DesktopUI.Controls;for(var h in f){var i=f[h];this._available[i.identifier]=i}(this._options.extensions.controls||[]).forEach(function(a){e._available[a.identifier]=a})}return i(a,[{key:"getFirstEnabledControlName",value:function(){for(var a in this._available)if(this.isEnabled(a))return a;return null}},{key:"isEnabled",value:function(a){var b=this,c=this.get(a);if(!c)return h.h.info("EditorControls#isEnabled: Unknown control: "+a),!1;var d=[];return(c.requiredOperations||[]).forEach(function(a){b._editor.operations.isAvailable(a)||d.push(a)}),d.length?(-1===this._invalidOperationsSeen.indexOf(a)&&(this._invalidOperationsSeen.push(a),h.h.error("Control `"+a+"` can not be used because "+(1===d.length?"operation is":"operations are")+" missing: "+d.map(function(a){return"`"+a+"`"}).join(", "))),!1):c.isEnabled(this._editor)}},{key:"get",value:function(a){return this._available[a]}},{key:"getAvailable",value:function(){return this._available}}]),a}();b.a=j},function(a,b,c){var d=c(0),e=c.n(d),f=c(4),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b,this._sdk=c,this._mediator=d,this._options=this._editor.getOptions(),this.reset()}return g(a,[{key:"isEnabled",value:function(a){return this._features[a]&&this.isEnabledByOptions(a)}},{key:"isEnabledByOptions",value:function(a){var b=a.charAt(0).toUpperCase()+a.slice(1),c=this._options.editor["enable"+b];return void 0===c&&(c=!0),c}},{key:"enable",value:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){a._features[b]=!0}),this._mediator.emit(f.d.EVENTS.FEATURES_ENABLED,c),this._mediator.emit(f.d.EVENTS.FEATURES_UPDATED,c)}},{key:"disable",value:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){a._features[b]=!1}),this._mediator.emit(f.d.EVENTS.FEATURES_DISABLED,c),this._mediator.emit(f.d.EVENTS.FEATURES_UPDATED,c)}},{key:"reset",value:function(){this._features={drag:this._options.editor.enableDrag,zoom:this._options.editor.enableZoom,export:this._options.editor.enableExport,new:this._options.editor.enabledNew,save:this._options.editor.enableSave,load:this._options.editor.enableLoad}}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(237),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(a,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var e=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return e._editor=a,e._sdk=c,e._mediator=d,e._isDefaultZoom=!1,e._zoom=e._sdk.getZoom(),e._targetZoom=e._zoom,e._options=e._editor.getOptions(),e._zoomLevels=[1,2,3,4,5,6.25,8.33,12.5,16.66,25,33.33,50,66.66,100,200,300,400,500,600,700,800,1200,1600,3200].map(function(a){return a/100}),e._editor.on("ready",function(){e._defaultLevel=e._calculateDefaultZoomLevel()}),e}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.e),n(b,[{key:"auto",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments[2];a&&(this._defaultLevel=this._calculateDefaultZoomLevel()),this.set(this._defaultLevel,b,c)}},{key:"in",value:function(a){
var b=this._getClosestZoomLevel(this._targetZoom+.001,1);b=this._clamp(b),this.set(b,a)}},{key:"out",value:function(a){var b=this._getClosestZoomLevel(this._targetZoom-.001,-1);b=this._clamp(b),this.set(b,a)}},{key:"_clamp",value:function(a){var b=this._calculateDefaultZoomLevel(),c=Math.max(1,2*b),d=this.minimum;return Math.max(d,Math.min(c,a))}},{key:"set",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=arguments[2];this._targetZoom=a,this._mediator.emit(l.d.EVENTS.ZOOM,a),this._zoom===this._targetZoom&&(c=!0),this._transition&&(this._transition.stop(),this._transition=null);var e=function(a){b._set(a,function(){d&&d(),b._mediator.emit(l.d.EVENTS.ZOOM_DONE,b._zoom)}),b._transition=null,b._sdk.setTextureQuality(Math.min(b._zoom,1))};if(c)return e(a);this._transition=new m.a({zoom:this._zoom},{zoom:a},{duration:300,easing:"easeOutQuart",onUpdate:function(a){b._set(a.zoom)},onDone:function(a){e(a.zoom)}}),this._transition.start()}},{key:"tick",value:function(){this._transition&&this._transition.update()}},{key:"_getClosestZoomLevel",value:function(a,b){var c=void 0;return-1===b?(c=this._zoomLevels.filter(function(b){return b<a}).pop())||(c=this._zoomLevels[this._zoomLevels.length-1]):1===b&&((c=this._zoomLevels.filter(function(b){return b>a})[0])||(c=this._zoomLevels[0])),c}},{key:"undo",value:function(){this._previousZoom&&(this.set(this._previousZoom),this._previousZoom=null)}},{key:"_set",value:function(a,b){this._zoom=a,this._sdk.setZoom(this._zoom),this._mediator.emit(l.d.EVENTS.ZOOM_CHANGED,this._zoom),this.emit("set",this._zoom,b)}},{key:"_calculateDefaultZoomLevel",value:function(){var a=this._editor.getFinalDimensions(!1),b=this._editor.getCanvasDimensions();return l.q.resizeVectorToFit(a,b).divide(a).x}},{key:"getSnapshot",value:function(){return{zoom:this._targetZoom}}},{key:"restoreSnapshot",value:function(a){this.set(a.zoom,!0)}},{key:"minimum",get:function(){var a=this._editor.getFinalDimensions();return l.q.resizeVectorToFit(a,new l.v(300,300)).divide(a).x}},{key:"level",get:function(){return this._zoom}},{key:"defaultLevel",get:function(){return this._defaultLevel}},{key:"targetLevel",get:function(){return this._targetZoom}}]),b}();b.a=o},function(a,b,c){var d=c(0),e=c.n(d),f=c(7),g=(c.n(f),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),h={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return a<.5?2*a*a:(4-2*a)*a-1},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return a<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return a<.5?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return a<.5?16*a*a*a*a*a:1+16*--a*a*a*a*a}},i=function(){function a(b,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._obj=b,this._initialObj=f.Utils.clone(b),this._targetValues=c,this._options=f.Utils.defaults(d,{duration:1e3,easing:"easeOutQuad",onUpdate:function(){},onDone:function(){}}),this._startedAt=null,this._running=!1}return g(a,[{key:"start",value:function(){this._startedAt=+new Date,this._running=!0}},{key:"update",value:function(){if(this._running){var a=+new Date-this._startedAt,b=h[this._options.easing],c=Math.min(1,a/this._options.duration),d=b(c);for(var e in this._initialObj){var f=this._initialObj[e],g=this._targetValues[e];this._obj[e]=f+(g-f)*d}this._options.onUpdate(this._obj),c>=1&&(this._options.onDone(this._obj),this.stop())}}},{key:"stop",value:function(){this._running=!1}}]),a}();b.a=i},function(a,b,c){function d(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return f()(a)}var e=c(35),f=c.n(e),g=c(0),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(7),p=(c.n(o),c(4)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(a,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var e=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||n()(b)).call(this));return e._editor=a,e._sdk=c,e._mediator=d,e._undoItems=[],e._redoItems=[],e}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}(b,p.e),q(b,[{key:"hasInitialState",value:function(){return o.Utils.Array.flatten(this.getUndoItems()).length>0}},{key:"isUndoAvailable",value:function(){return o.Utils.Array.flatten(this.getUndoItems()).length>1}},{key:"isRedoAvailable",value:function(){return o.Utils.Array.flatten(this.getRedoItems()).length>0}},{key:"addSnapshot",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global",b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f={snapshot:this._editor.getSnapshot(),scope:a,identifier:c,controls:d,data:e},g=o.Utils.Array.last(this._undoItems);g&&b&&f.identifier===g.identifier&&this._undoItems.pop(),this._undoItems.push(f),this._mediator.emit(p.d.EVENTS.HISTORY_UPDATED,f.operation),this._redoItems=[]}},{key:"undo",value:function(){var a=this._undoItems,b=a.pop(),c=o.Utils.Array.last(a);c&&b&&(this._editor.restoreSnapshot(c.snapshot),this._mediator.emit(p.d.EVENTS.HISTORY_UNDO,c,b),this._redoItems.push(b),this.emit("undo"))}},{key:"redo",value:function(){var a=this._redoItems.pop();a&&(this._mediator.emit(p.d.EVENTS.HISTORY_BEFORE_REDO,a),this._editor.restoreSnapshot(a.snapshot),this._mediator.emit(p.d.EVENTS.HISTORY_REDO,a),this._undoItems.push(a),this.emit("redo"))}},{key:"remove",value:function(a){var b=a.scope,c=a.identifier,d=a.controls,e=function(a,e,f){return!(b&&b!==a.scope||c&&c!==a.identifier||d&&d!==a.controls)};this._undoItems=o.Utils.Array.remove(this._undoItems,e),this._redoItems=o.Utils.Array.remove(this._redoItems,e)}},{key:"removeLocal",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.remove({scope:"local",identifier:a,controls:b})}},{key:"removeGlobal",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.remove({scope:"global",identifier:a,controls:b})}},{key:"removeControls",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.remove({scope:b,controls:a,identifier:c})}},{key:"reset",value:function(){this._undoItems=[],this._redoItems=[]}},{key:"getUndoItems",value:function(){return[].concat(d(this._undoItems))}},{key:"getItems",value:function(){return this.getUndoItems()}},{key:"getRedoItems",value:function(){return[].concat(d(this._redoItems))}}]),b}();b.a=r},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(109),g=c(110),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b}return h(a,[{key:"serialize",value:function(){var a=new f.a(this._editor);return a.serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return new g.a(this._editor,a).deserialize()}}]),a}();b.default=i,i.version="1.0.0"},function(a,b,c){var d=function(){return this}()||Function("return this")(),e=d.regeneratorRuntime&&Object.getOwnPropertyNames(d).indexOf("regeneratorRuntime")>=0,f=e&&d.regeneratorRuntime;if(d.regeneratorRuntime=void 0,a.exports=c(241),e)d.regeneratorRuntime=f;else try{delete d.regeneratorRuntime}catch(a){d.regeneratorRuntime=void 0}},function(a,b){!function(b){function c(a,b,c,f){var g=b&&b.prototype instanceof e?b:e,h=Object.create(g.prototype),i=new m(f||[]);return h._invoke=function(a,b,c){var e=y;return function(f,g){if(e===A)throw new Error("Generator is already running");if(e===B){if("throw"===f)throw g;return o()}for(c.method=f,c.arg=g;;){var h=c.delegate;if(h){var i=j(h,c);if(i){if(i===C)continue;return i}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(e===y)throw e=B,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);e=A;var k=d(a,b,c);if("normal"===k.type){if(e=c.done?B:z,k.arg===C)continue;return{value:k.arg,done:c.done}}"throw"===k.type&&(e=B,c.method="throw",c.arg=k.arg)}}}(a,c,i),h}function d(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}function e(){}function f(){}function g(){}function h(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}function i(a){var b;this._invoke=function(c,e){function f(){return new Promise(function(b,f){!function b(c,e,f,g){var h=d(a[c],a,e);if("throw"!==h.type){var i=h.arg,j=i.value;return j&&"object"==typeof j&&r.call(j,"__await")?Promise.resolve(j.__await).then(function(a){b("next",a,f,g)},function(a){b("throw",a,f,g)}):Promise.resolve(j).then(function(a){i.value=a,f(i)},g)}g(h.arg)}(c,e,b,f)})}return b=b?b.then(f,f):f()}}function j(a,b){var c=a.iterator[b.method];if(c===p){if(b.delegate=null,"throw"===b.method){if(a.iterator.return&&(b.method="return",b.arg=p,j(a,b),"throw"===b.method))return C;b.method="throw",b.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var e=d(c,a.iterator,b.arg);if("throw"===e.type)return b.method="throw",b.arg=e.arg,b.delegate=null,C;var f=e.arg;return f?f.done?(b[a.resultName]=f.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=p),b.delegate=null,C):f:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,C)}function k(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function l(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function m(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(k,this),this.reset(!0)}function n(a){if(a){var b=a[t];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function b(){for(;++c<a.length;)if(r.call(a,c))return b.value=a[c],b.done=!1,b;return b.value=p,b.done=!0,b};return d.next=d}}return{next:o}}function o(){return{value:p,done:!0}}var p,q=Object.prototype,r=q.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},t=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",v=s.toStringTag||"@@toStringTag",w="object"==typeof a,x=b.regeneratorRuntime;if(x)w&&(a.exports=x);else{(x=b.regeneratorRuntime=w?a.exports:{}).wrap=c;var y="suspendedStart",z="suspendedYield",A="executing",B="completed",C={},D={};D[t]=function(){return this};var E=Object.getPrototypeOf,F=E&&E(E(n([])));F&&F!==q&&r.call(F,t)&&(D=F);var G=g.prototype=e.prototype=Object.create(D);f.prototype=G.constructor=g,g.constructor=f,g[v]=f.displayName="GeneratorFunction",x.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===f||"GeneratorFunction"===(b.displayName||b.name))},x.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,g):(a.__proto__=g,v in a||(a[v]="GeneratorFunction")),a.prototype=Object.create(G),a},x.awrap=function(a){return{__await:a}},h(i.prototype),i.prototype[u]=function(){return this},x.AsyncIterator=i,x.async=function(a,b,d,e){var f=new i(c(a,b,d,e));return x.isGeneratorFunction(b)?f:f.next().then(function(a){return a.done?a.value:f.next()})},h(G),G[v]="Generator",G[t]=function(){return this},G.toString=function(){return"[object Generator]"},x.keys=function(a){var b=[];for(var c in a)b.push(c);return b.reverse(),function c(){for(;b.length;){var d=b.pop();if(d in a)return c.value=d,c.done=!1,c}return c.done=!0,c}},x.values=n,m.prototype={constructor:m,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(l),!a)for(var b in this)"t"===b.charAt(0)&&r.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=p)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,d&&(c.method="next",c.arg=p),!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=r.call(e,"catchLoc"),h=r.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&r.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?(this.method="next",this.next=e.finallyLoc,C):this.complete(f)},complete:function(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),C},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),l(c),C}},catch:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if("throw"===d.type){var e=d.arg;l(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){return this.delegate={iterator:n(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=p),C}}}}(function(){return this}()||Function("return this")())},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7);c.n(j);var k=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.Configurable),b}();b.a=k,k.prototype.availableOptions={fontFamily:{type:j.OptionType.STRING,required:!0},variations:{type:j.OptionType.ARRAY,required:!0}}},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(115),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p={italic:"i"},q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.a),o(b,[{key:"load",value:function(){return this._fonts.length&&this._addStylesheetTag(),function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"load",this).call(this)}},{key:"_addStylesheetTag",value:function(){var a=this._getFamiliesString(),b=document.createElement("link");b.rel="stylesheet",b.href="https://fonts.googleapis.com/css?family="+a,document.getElementsByTagName("head")[0].appendChild(b)}},{key:"_getFamiliesString",value:function(){var a={};this._fonts.forEach(function(b){var c=b.getFontFamily(),d=b.getFontStyle(),e=b.getFontWeight();a[c]=a[c]||[],void 0!==e?a[c].push(""+e+(p[d]||"")):a[c].push(400)});var b=[];for(var c in a){var d=a[c],e=d.length?":"+d.join(","):"",f=c.replace(" ","+")+e;b.push(f)}return b.join("|")}}]),b}();b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(8),g=c.n(f),h=c(245),i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):c(106),k=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._fontVariation=b,this._defaultFontRuler=new h.a,this._customFontRuler=new h.a(this._fontVariation)}return i(a,[{key:"observe",value:function(){var a=this,b=j();return new g.a(function(c,d){var e=window.setInterval(function(){if(a._defaultFontRuler.getWidth()!==a._customFontRuler.getWidth())return window.clearInterval(e),c();if(j()-b>=5e3){var f=new Error("Failed to load font "+a._fontVariation.getFontFamily()+".");return f.font=a._fontVariation,d(f)}},50)})}},{key:"dispose",value:function(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}]),a}();b.a=k},function(a,b,c){var d=c(0),e=c.n(d),f=c(114),g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._fontVariation=b||new f.a({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}return g(a,[{key:"_createRuler",value:function(){this._ruler=document.createElement("div"),this._ruler.innerText="abcdefghijklmnopqrstuvwxzy",document.body.appendChild(this._ruler),this._setRulerStyle()}},{key:"_setRulerStyle",value:function(){this._ruler.style.cssText="\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: "+this._fontVariation.getFontStyle()+" "+this._fontVariation.getFontWeight()+" 30px "+this._fontVariation.getFontFamily()+";\n    "}},{key:"setFontVariation",value:function(a){this._fontVariation=a,this._setRulerStyle()}},{key:"getWidth",value:function(){return this._ruler?this._ruler.offsetWidth:-1}},{key:"dispose",value:function(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}]),a}();b.a=h},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(115),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),p(b,[{key:"load",value:function(){var a=this,c=[];return this._fonts.forEach(function(b){var d=a._ui.getAssetPath(b.getFilePath(),!1,!0);c.push('@font-face {\n        font-family: "'+b.getFontFamily()+"\";\n        src: url('"+d+"') format('woff');\n        font-weight: "+b.getFontWeight()+";\n        font-style: "+b.getFontStyle()+";\n      }")}),n.w.global(c.join("\n"),!0),function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"load",this).call(this)}}]),b}();b.a=q},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(116),g=c(117),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b}return h(a,[{key:"serialize",value:function(){var a=new f.a(this._editor);return a.serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return new g.a(this._editor,a).deserialize()}}]),a}();b.default=i,i.version="1.0.1"},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(77),g=c(78),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b}return h(a,[{key:"serialize",value:function(){var a=new f.a(this._editor);return a.serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return new g.a(this._editor,a).deserialize()}}]),a}();b.default=i,i.version="2.0.0"},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(250),g=c(251),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b}return h(a,[{key:"serialize",value:function(){var a=new f.a(this._editor);return a.serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return new g.a(this._editor,a).deserialize()}}]),a}();b.default=i,i.version="2.0.1"},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(77),k=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();b.a=k,k.version="2.0.0"},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(78),k=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.a),b}();b.a=k,k.version="2.0.1"},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(122),g=c(124),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b}return h(a,[{key:"serialize",value:function(){var a=new f.a(this._editor);return a.serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return new g.a(this._editor,a).deserialize()}}]),a}();b.default=i,i.version="3.0.0"},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(125),g=c(126),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b}return h(a,[{key:"serialize",value:function(){var a=new f.a(this._editor);return a.serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return new g.a(this._editor,a).deserialize()}}]),a}();b.default=i,i.version="3.1.0"},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(0),e=c.n(d),f=c(255),g=c(256),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b}return h(a,[{key:"serialize",value:function(){var a=new f.a(this._editor);return a.serialize.apply(a,arguments)}},{key:"deserialize",value:function(a){return new g.a(this._editor,a).deserialize()}}]),a}();b.default=i,i.version="3.2.0"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=(c(4),c(125)),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.a),m(b,[{key:"_serializeTextDesign",value:function(a,b){var c=b.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);c.color={rgba:c.color};var d=b.getLayout();return d&&(c.identifier=d.constructor.identifier),c.padding*=c.width,{type:"textdesign",options:c}}}]),b}();b.a=n,n.version="3.2.0"},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(126),p=c(52),q=c(40),r=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),s(b,[{key:"_deserializeTextDesign",value:function(a,b){var c=this,d=b.options,e=d.position,f=d.rotation,g=d.flipHorizontally,h=d.flipVertically,i=d.text,j=d.color,k=d.width,l=d.seed,m=d.inverted,o=d.identifier,s="padding"in d?d.padding/k:-1,t=new p.a(this._ui,this._getOptions("textdesign")),u=new q.a(this._ui,{fonts:n.d.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),v=a.constructor.TextDesignSprite.AssetManager,w=this._ui.getFontLoader(),x=new(t.getLayoutByIdentifier(o));return w.setFonts(u.getFonts()),v.setFonts(r({},v.getFonts(),u.getVariationsByIdentifier())),w.load().then(function(){var b=x.getImagePaths().map(function(a){return{path:a,fullPath:c._ui.getAssetPath(a),image:null}});return v.loadImages(b).then(function(){return x.onImagesLoaded(),a.createTextDesign({position:e,rotation:f,flipHorizontally:g,flipVertically:h,text:i,color:n.c.fromArray(j.rgba),width:k,seed:l,inverted:m,layout:x,padding:s})})})}}]),b}();b.a=t,t.version="3.2.0"},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(258),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._needsStyleFixes=!0,f._bindAll("_onMouseEnter","_onMouseLeave"),f.state={isHovering:!1},f}return function(a,b){
if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),n(b,[{key:"shouldComponentUpdate",value:function(a,b){return a.currentControl!==this.props.currentControl||b.isHovering!==this.state.isHovering}},{key:"_onItemClick",value:function(a){this.props.disabled||(this._onMouseLeave(),this.props.onControlSwitch(a))}},{key:"_onMouseEnter",value:function(){this.props.disabled||this.setState({isHovering:!0})}},{key:"_onMouseLeave",value:function(){this.props.disabled||this.setState({isHovering:!1})}},{key:"fixStyles",value:function(){if(l.u.Browser.isIElte(10)){var a=this._navigation.offsetHeight;this._gradient.style.height=a+"px"}}},{key:"_getItemCount",value:function(a){var b=this;return a.reduce(function(a,c){return Array.isArray(c)?a+b._getItemCount(c):a+1},0)}},{key:"_renderListItems",value:function(){var a=this,b=this.context.editor,c=this.state.isHovering,d=function(d,e,f){var g=b.controls.get(d),h=d===a.props.currentControl;return l.l.createElement(m.a,{key:d,title:d,showTitle:c,iconPath:a._getAssetPath(g.iconPath,!0),activeIconPath:a._getAssetPath(g.activeIconPath,!0),selected:h,onClick:a._onItemClick.bind(a,d),animationDelay:.02*e,maxAnimationDelay:.02*f,disabled:a.props.disabled})},e=[],f=this.context.options.editor.controlsOrder,g=this._getItemCount(f)-1;return f.forEach(function(a,c){if(Array.isArray(a))a.forEach(function(a){b.controls.isEnabled(a)&&e.push(d(a,e.length,g))}),c!==f.length-1&&e.length&&e.push((h="separator-"+c,l.l.createElement(m.a,{key:h,isSeparator:!0})));else{if(!b.controls.isEnabled(a))return;e.push(d(a,e.length,g))}var h}),e}},{key:"render",value:function(){var a=this,b=this.state.isHovering,c={backgroundImage:"url("+this._getAssetPath("editor/navigation/nav-gradient.png",!0)+")"};return l.l.createElement(p,{onMouseLeave:this._onMouseLeave,innerRef:function(b){a._navigation=b}},l.l.createElement(q,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,disabled:this.props.disabled},this._renderListItems()),l.l.createElement(r,{className:void 0,innerRef:function(b){a._gradient=b},style:c,visible:b}))}}]),b}();o.contextTypes=l.b.contextTypes,b.a=o;var p=l.w.div("1y776sn","NavigationContainer"),q=l.w.ul("9phbku","Navigation"),r=l.w.div("5jr86g",{visible:"1aw31yo"},"NavigationOverlay")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),m(b,[{key:"shouldComponentUpdate",value:function(a,b){return a.showTitle!==this.props.showTitle||a.selected!==this.props.selected}},{key:"render",value:function(){if(this.props.isSeparator)return l.l.createElement(q,null);var a={transitionDelay:(this.props.showTitle?this.props.animationDelay:this.props.maxAnimationDelay-this.props.animationDelay)+"s"};return l.l.createElement(p,{onClick:this.props.onClick,selected:this.props.selected,className:void 0,"data-identifier":this.props.title,disabled:this.props.disabled},l.l.createElement(s,{src:this.props.iconPath,selected:this.props.selected}),l.l.createElement(t,{src:this.props.activeIconPath,selected:this.props.selected}),l.l.createElement(u,{style:a,withTitle:this.props.showTitle},l.l.createElement(v,null,this._t("pesdk."+this.props.title+".title.name"))))}}]),b}();n.contextTypes=l.b.contextTypes,b.a=n;var o=l.w.li("175e5wy","BaseItem"),p=Object(l.w)(o)("djzsp",{selected:"b4k2au",disabled:"kcb0uq"},"NavigationItem"),q=Object(l.w)(o)("w5rgvu","SeparatorItem"),r=l.w.img("1ew58rj","Icon"),s=Object(l.w)(r)("vd96gg",{selected:"1cfz9kz"},"InactiveIcon"),t=Object(l.w)(r)("8p00lh",{selected:"zgbg08"},"ActiveIcon"),u=l.w.div("124navh",{withTitle:"1j7o6on"},"TitleContainer"),v=l.w.div("pw4had","Title")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];var g,h,i,j=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return j._bindAll("_onEditorResize"),j._events=(g={},h=n.d.EVENTS.EDITOR_RESIZE,i=j._onEditorResize,h in g?e()(g,h,{value:i,enumerable:!0,configurable:!0,writable:!0}):g[h]=i,g),j}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),o(b,[{key:"_onEditorResize",value:function(a){var b=this.context.editor;b.getSDK().resizeTo(a),b.zoom.auto(!0,!0)}},{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this);var a=this.context,c=a.editor,d=a.options,e=this._canvas.offsetWidth,f=this._canvas.offsetHeight,h=c.getSDK().getRenderer();h.setCanvas(this._canvas),h.resizeTo(new n.v(e,f));var i=d.editor.image;c.setPadding([55,30,55,315]),c.setImage(i,!1)}},{key:"render",value:function(){var a=this;return n.l.createElement(q,{innerRef:function(b){a._canvas=b}})}}]),b}();p.contextTypes=n.b.contextTypes,b.a=p;var q=n.w.canvas("8gacw5","Canvas")},function(a,b,c){var d=c(2),e=c.n(d),f=c(3),g=c.n(f),h=c(1),i=c.n(h),j=c(7);c.n(j);var k=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||i()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=g()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e.a?e()(a,b):a.__proto__=b)}(b,j.Configurable),b}();b.a=k,k.prototype.availableOptions={identifier:{type:j.OptionType.STRING,required:!0},defaultName:{type:j.OptionType.STRING,required:!0},ratios:{type:j.OptionType.ARRAY,required:!0,default:[]}}},function(a,b,c){function d(a,b,c){return b in a?f()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(0),f=c.n(e),g=c(2),h=c.n(g),i=c(3),j=c.n(i),k=c(1),l=c.n(k),m=c(8),n=c.n(m),o=c(4),p=c(38),q=c(262),r=c(263),s=c(264),t=(c(130),c(265)),u=(c.n(t),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),v=function(a){function b(){var a,c;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||l()(b)).call.apply(a,[this].concat(f)));return h._bindAll("_onUndoClick","_onExportClick","_onSaveClick","_onLoadClick","_onCloseClick","_onHistoryUpdated","_onFeaturesUpdated","_onRedoClick"),h._events=(d(c={},o.d.EVENTS.HISTORY_UPDATED,h._onHistoryUpdated),d(c,o.d.EVENTS.FEATURES_UPDATED,h._onFeaturesUpdated),c),h}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=j()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(h.a?h()(a,b):a.__proto__=b)}(b,o.b),u(b,[{key:"_onHistoryUpdated",value:function(){this.forceUpdate()}},{key:"_onFeaturesUpdated",value:function(){this.forceUpdate()}},{key:"_onUndoClick",value:function(){this.context.editor.history.undo(),this.forceUpdate()}},{key:"_onRedoClick",value:function(){this.context.editor.history.redo(),this.forceUpdate()}},{key:"_onCloseClick",value:function(){this.context.mediator.emit(o.d.EVENTS.CLOSE)}},{key:"_onExportClick",value:function(){var a=this,b=this.context,c=b.options,d=b.editor,e=b.screen,f=c.editor.export,g=p.a.instance.displayLoading(this._t("pesdk.editor.text.exporting"));e.state.controls.onBeforeExport().then(function(){return d.export(f.download).then(function(){return g.close(),e.state.controls.onAfterExport()})}).catch(function(b){return p.a.instance.displayError(a._t("errors.title"),b.message),g.close(),e.state.controls.onAfterExport()})}},{key:"_onSaveClick",value:function(){var a=this,b=this.context,c=b.options,d=b.editor,e=b.screen,f=c.editor.save,g=p.a.instance.displayLoading(this._t("pesdk.editor.text.saving"));e.state.controls.onBeforeExport().then(function(){return d.save(f.download).then(function(){return g.close(),e.state.controls.onAfterExport()}).catch(function(b){return p.a.instance.displayError(a._t("errors.title"),b.message),g.close(),e.state.controls.onAfterExport()})})}},{key:"_onLoadClick",value:function(){var a,b=this,c=this.context,d=c.editor,e=c.screen;this._loadFileInput&&(a=this._loadFileInput,new n.a(function(b,c){a?(a.addEventListener("error",function(a){c(a)}),a.addEventListener("abort",function(){b()}),a.addEventListener("change",function(a){var c=a.target.files;c.length||b(null);var d=c[0];b(d)}),a.value=null,a.click()):c(new Error("Input field not valid!"))})).then(function(a){var c=p.a.instance.displayLoading(b._t("pesdk.editor.text.loading"));e.state.controls.onBeforeExport().then(function(){return function(a){return new n.a(function(b,c){var d=new window.FileReader;d.onerror=function(a){c(a)},d.onload=function(a){b(a.target.result)},d.readAsText(a)})}(a).then(function(a){return a&&d.load(a).then(function(){return c.close(),e.state.controls.onAfterExport()}).catch(function(a){return p.a.instance.displayError(b._t("errors.title"),a.message),c.close(),e.state.controls.onAfterExport()})})})})}},{key:"_renderItems",value:function(){var a=this,b=this.context.editor,c=b.history,d=b.features,e=b.getOptions().editor.displayCloseButton,f=o.l.createElement(r.a,{disabled:!c.isUndoAvailable(),src:this._getAssetPath("editor/canvas-header/undo.png",!0),onClick:this._onUndoClick,className:void 0}),g=o.l.createElement(r.a,{disabled:!c.isRedoAvailable(),src:this._getAssetPath("editor/canvas-header/redo.png",!0),onClick:this._onRedoClick,className:void 0});return[o.l.createElement(y,{key:"left",left:!0},f,g),o.l.createElement(x,{key:"center"},d.isEnabledByOptions("zoom")&&o.l.createElement(s.a,null)),o.l.createElement(y,{key:"right",right:!0},d.isEnabled("load")&&o.l.createElement(z,{type:"file",accept:"text/json",innerRef:function(b){a._loadFileInput=b}}),d.isEnabled("load")&&o.l.createElement(q.a,{title:this._t("pesdk.editor.button.load"),onClick:this._onLoadClick,className:void 0}),d.isEnabled("save")&&o.l.createElement(q.a,{title:this._t("pesdk.editor.button.save"),onClick:this._onSaveClick,className:void 0}),d.isEnabled("export")&&o.l.createElement(q.a,{title:this._t("pesdk.editor.button.export"),onClick:this._onExportClick,className:void 0}),e&&o.l.createElement(q.a,{title:this._t("pesdk.editor.button.close"),onClick:this._onCloseClick,className:void 0}))]}},{key:"render",value:function(){return o.l.createElement(w,{className:this.props.className},this._renderItems())}}]),b}();v.contextTypes=o.b.contextTypes,b.a=v;var w=o.w.div("1vo3slj","CanvasHeaderControls"),x=o.w.div("h5xlzy","CenteredControlGroup"),y=o.w.ul("17ty59f",{left:"1elyhsq",right:"1l7kz3k"},"ControlGroup"),z=o.w.input("19u9mq5","HiddenFileInput")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(129),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"render",value:function(){return l.l.createElement(m.a,{onClick:this.props.onClick,className:this.props.className},l.l.createElement(p,{disabled:this.props.disabled},this.props.title))}}]),b}();o.contextTypes=m.a.contextTypes,b.a=o;var p=l.w.div("1d3mv64",{disabled:"1wcaxw7"},"Button");o.Button=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(129),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"render",value:function(){var a=this.props,b=a.onClick,c=a.className,d=a.disabled;return l.l.createElement(m.a,{disabled:d,onClick:d?void 0:b,className:c},l.l.createElement(p,{disabled:d,src:this.props.src}))}}]),b}();o.contextTypes=m.a.contextTypes,b.a=o;var p=l.w.img("1y2itdu",{disabled:"vxlu5c"},"Image")},function(a,b,c){function d(a,b,c){return b in a?f()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(0),f=c.n(e),g=c(6),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(4),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){var a,c;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._bindAll("_onZoomInClick","_onZoomOutClick","_onZoom","_onFeaturesUpdated"),h._events=(d(c={},o.d.EVENTS.ZOOM,h._onZoom),d(c,o.d.EVENTS.FEATURES_UPDATED,h._onFeaturesUpdated),c),h}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}(b,o.b),p(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=h()(b,c);if(void 0===e){var f=n()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||n()(b.prototype),"componentDidMount",this).call(this),this._renderZoomLevel&&this._renderZoomLevel!==this.context.editor.zoom.targetLevel&&this.forceUpdate()}},{key:"_onFeaturesUpdated",value:function(){this.forceUpdate()}},{key:"_onZoom",value:function(){this.forceUpdate()}},{key:"_onZoomInClick",value:function(){this._isZoomDisabled()||this.context.editor.zoom.in()}},{key:"_onZoomOutClick",value:function(){this._isZoomDisabled()||this.context.editor.zoom.out()}},{key:"_isZoomDisabled",value:function(){return!this.context.editor.features.isEnabled("zoom")}},{key:"render",value:function(){var a=this.context.editor,b=Math.round(100*a.zoom.targetLevel);return this._renderZoomLevel=a.zoom.targetLevel,o.l.createElement(r,{className:void 0},o.l.createElement(s,{disabled:this._isZoomDisabled(),"data-disabled":this._isZoomDisabled(),onClick:this._onZoomOutClick,className:void 0},"-"),o.l.createElement(t,null,b," %"),o.l.createElement(s,{disabled:this._isZoomDisabled(),"data-disabled":this._isZoomDisabled(),onClick:this._onZoomInClick,className:void 0},"+"))}}]),b}();q.contextTypes=o.b.contextTypes,b.a=q;var r=o.w.div("12hdgpj","ZoomControl"),s=o.w.div("eqhwwg",{disabled:"10fa721"},"Button"),t=o.w.div("64aub5","Label")},function(a,b){},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll(),f._canHideAfterLoaded=!1,f.state={startImageVisible:!0,idleImageVisible:!1,indicatorVisible:!0},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),o(b,[{key:"componentDidMount",value:function(){var a=this;p(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._imageSwitchTimeout=window.setTimeout(function(){a.setState({startImageVisible:!1,idleImageVisible:!0}),a._imageSwitchTimeout=null},1300)}},{key:"componentWillUnmount",value:function(){p(b.prototype.__proto__||m()(b.prototype),"componentWillUnmount",this).call(this),this._imageSwitchTimeout&&(window.clearTimeout(this._imageSwitchTimeout),this._imageSwitchTimeout=null)}},{key:"getChildContext",value:function(){return{ui:this.context.ui,options:this.context.options,mediator:this.context.mediator,appComponent:this.context.appComponent}}},{key:"render",value:function(){var a=this,b=this.state,c=b.startImageVisible,d=b.idleImageVisible,e=b.indicatorVisible;return n.l.createElement(r,{innerRef:function(b){a._container=b},className:void 0},n.l.createElement(s,{hidden:!e},n.l.createElement(u,{visible:c,src:this._getAssetPath("loading/start-solid.gif",!0)}),n.l.createElement(v,{visible:d,src:this._getAssetPath("loading/idle-solid.gif",!0)})))}}]),b}();q.contextTypes=n.b.contextTypes,q.childContextTypes={ui:n.k.object.isRequired,mediator:n.k.object.isRequired,options:n.k.object.isRequired,appComponent:n.k.object.isRequired};var r=n.w.div("121fa7f","Container"),s=n.w.div("110xr2i",{hidden:"qbdcep"},"ImageContainer"),t=n.w.img("1gqfg7n",{visible:"zgbg08"},"Image"),u=Object(n.w)(t)("120drhm","StartImage"),v=Object(n.w)(t)("120drhm","IdleImage");b.a=Object(n.A)(q)},function(a,b,c){b.a=function(a,b){a.global(b+" html,"+b+" body,"+b+" div,"+b+" span,"+b+" applet,"+b+" object,"+b+" iframe,"+b+" h1,"+b+" h2,"+b+" h3,"+b+" h4,"+b+" h5,"+b+" h6,"+b+" p,"+b+" blockquote,"+b+" pre,"+b+" a,"+b+" abbr,"+b+" acronym,"+b+" address,"+b+" big,"+b+" cite,"+b+" code,"+b+" del,"+b+" dfn,"+b+" em,"+b+" img,"+b+" ins,"+b+" kbd,"+b+" q,"+b+" s,"+b+" samp,"+b+" small,"+b+" strike,"+b+" strong,"+b+" sub,"+b+" sup,"+b+" tt,"+b+" var,"+b+" b,"+b+" u,"+b+" i,"+b+" center,"+b+" dl,"+b+" dt,"+b+" dd,"+b+" ol,"+b+" ul,"+b+" li,"+b+" fieldset,"+b+" form,"+b+" label,"+b+" legend,"+b+" table,"+b+" caption,"+b+" tbody,"+b+" tfoot,"+b+" thead,"+b+" tr,"+b+" th,"+b+" td,"+b+" article,"+b+" aside,"+b+" canvas,"+b+" details,"+b+" embed,"+b+" figure,"+b+" figcaption,"+b+" footer,"+b+" header,"+b+" hgroup,"+b+" menu,"+b+" nav,"+b+" output,"+b+" ruby,"+b+" section,"+b+" summary,"+b+" time,"+b+" mark,"+b+" audio,"+b+" video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}"+b+" html{line-height:1}"+b+" ol,"+b+" ul{list-style:none}"+b+" table{border-collapse:collapse;border-spacing:0}"+b+" caption,"+b+" th,"+b+" td{text-align:left;font-weight:400;vertical-align:middle}"+b+" q,"+b+" blockquote{quotes:none}"+b+" q:before,"+b+" q:after,"+b+" blockquote:before,"+b+' blockquote:after{content:"";content:none}'+b+" a img{border:none}"+b+" article,"+b+" aside,"+b+" details,"+b+" figcaption,"+b+" figure,"+b+" footer,"+b+" header,"+b+" hgroup,"+b+" main,"+b+" menu,"+b+" nav,"+b+" section,"+b+" summary{display:block}@media only screen and (min-width: 768px){"+b+"{-webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;-o-border-radius:5px;border-radius:5px}}"+b+","+b+" *{box-sizing:border-box}")}},function(a,b,c){b.a=function(a,b){a.global("\n    @-webkit-keyframes bouncingLoadingIndicator {\n      0% {\n        transform: translateY(0);\n      }\n      40% {\n        transform: translateY(10px);\n      }\n      60% {\n        transform: translateY(-5px);\n      }\n      80%{\n        transform: translateY(0);\n      }\n    }\n  ")}},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(107),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(a,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var e=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return e._ui=a,e._options=c,e._mediator=d,e._assets={},e._editor=new m.a(a,c,d,!0),e._assets=["editor/canvas-header/undo.png","editor/navigation/nav-gradient.png","editor/controls/shared/checkbox.png","editor/controls/shared/checkbox-active.png","editor/controls/shared/tiled-background.png"],e._appendControlsAssets(),e}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.e),n(b,[{key:"_appendControlsAssets",value:function(){var a=this._editor.controls.getAvailable();for(var b in a){var c=a[b];this._editor.controls.isEnabled(b)&&(this._assets=this._assets.concat(c.getPreloadAssets(this._editor)),this._assets.push(c.iconPath),this._assets.push(c.activeIconPath))}}},{key:"load",value:function(){var a=this,b=this._assets.slice(),c=b.length,d=0,e=function(){d++,a.emit("progress",d/c),d===c&&a.emit("done")},f=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"timed out";l.h.warn("Preloader",a+" "+b+"."),e()};b.forEach(function(b){var c=!0;Array.isArray(b)&&(c=b[1],b=b[0]);var d=!0;l.q.isArray(b)&&(d=b[1],b=b[0]);var g,h=a._ui.getAssetPath(b,c,!d),i=new window.Image,j=(g=h,window.setTimeout(function(){f(g)},5e3));i.addEventListener("load",function(){window.clearTimeout(j),a._assets[b]=i,e()}),i.addEventListener("error",function(){window.clearTimeout(j),f(h,"was not found")}),i.crossOrigin=l.q.getCrossOriginValue(a._options.crossOrigin),i.src=h})}},{key:"getAsset",value:function(a){return this._assets[a]}}]),b}();b.a=o},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(271),e=c(38),f=c(275),g=c(132),h=c(276),i=c(121),j=c(40),k=c(51),l=c(113),m=c(112),n=c(119),o=c(120),p=c(127),q=c(52),r=c(277),s=c(278),t=c(279),u=c(53),v=c(128),w=c(281),x=c(282),y=c(283),z=c(79),A=c(82),B=c(287),C=c(293),D=c(294),E=c(295),F=c(22),G=c(296),H=c(297),I=c(50),J=c(133);c.d(b,"Frame",function(){return i.a}),c.d(b,"SharedStateComponent",function(){return u.a}),c.d(b,"ControlsComponent",function(){return v.a}),c.d(b,"CollapseSectionComponent",function(){return w.a}),c.d(b,"ScrollableListComponent",function(){return x.a}),c.d(b,"SliderControlComponent",function(){return y.a}),c.d(b,"CanvasControlsComponent",function(){return z.a}),c.d(b,"ValueSelectionComponent",function(){return A.a}),c.d(b,"ColorSelectionComponent",function(){return B.a}),c.d(b,"ButtonComponent",function(){return C.a}),c.d(b,"DropdownComponent",function(){return D.a}),c.d(b,"TextInputComponent",function(){return E.a}),c.d(b,"DraggableComponent",function(){return F.a}),c.d(b,"InvisibleUploadComponent",function(){return G.a}),c.d(b,"CanvasOverlayControlsComponent",function(){return H.a}),c.d(b,"Transition",function(){return I.a}),c.d(b,"CheckboxComponent",function(){return J.a}),c.d(b,"Library",function(){return d}),c.d(b,"ModalManager",function(){return e.a}),c.d(b,"DelayedJobQueue",function(){return f.a}),c.d(b,"GroupedControlsStyles",function(){return g}),c.d(b,"ControlsStyles",function(){return h}),c.d(b,"FontManager",function(){return j.a}),c.d(b,"StickerManager",function(){return k.a}),c.d(b,"BrushManager",function(){return l.a}),c.d(b,"FilterManager",function(){return m.a}),c.d(b,"FrameManager",function(){return n.a}),c.d(b,"OverlayManager",function(){return o.a}),c.d(b,"TextDesignManager",function(){return q.a}),c.d(b,"TransformRatioManager",function(){return p.a}),c.d(b,"BaseControls",function(){return r.a}),c.d(b,"LoadingIndicatorComponent",function(){return s.a}),c.d(b,"SuffixedTextInputComponent",function(){return t.a})},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(272);c.d(b,"Provider",function(){return d.a});var e=c(273);c.d(b,"Category",function(){return e.a});var f=c(274);c.d(b,"Image",function(){return f.a})},function(a,b,c){var d=c(0),e=c.n(d),f=c(8),g=c.n(f),h=c(4),i=c(49),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return j(a,[{key:"_loadJSON",value:function(a){return new i.a(a).load()}},{key:"getCategories",value:function(){return h.h.warn(this.constructor.name,"`getCategories` is abstract and not implemented."),g.a.resolve([])}},{key:"searchImages",value:function(a){return h.h.warn(this.constructor.name,"`searchImages` is abstract and not implemented."),g.a.resolve([])}}]),a}();b.a=k},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._coverImage=null,f._coverImageLoaded=!1,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.p.Configurable),o(b,[{key:"loadCoverImage",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anonymous";return new k.a(function(c,d){var e=new window.Image;e.addEventListener("load",function(){a._coverImageLoaded=!0,c(e)}),e.addEventListener("error",function(){d(new Error("Failed to load image at "+a.getCoverImage()))}),e.crossOrigin=n.q.getCrossOriginValue(b),e.src=a.getCoverImage(),a._coverImage=e})}},{key:"isCoverImageLoaded",value:function(){return this._coverImage&&this._coverImageLoaded}}]),b}();b.a=p,p.prototype.availableOptions={name:{type:n.i.STRING,required:!0},coverImage:{type:n.i.STRING,required:!0}}},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._thumbImage=null,f._thumbImageLoaded=!1,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.p.Configurable),o(b,[{key:"loadThumb",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anonymous";return new k.a(function(c,d){var e=new window.Image;e.addEventListener("load",function(){
a._thumbImageLoaded=!0,c(e)}),e.addEventListener("error",function(){d(new Error("Failed to load image at "+a.getThumbUrl()))}),e.crossOrigin=n.q.getCrossOriginValue(b),e.src=a.getThumbUrl(),a._thumbImage=e})}},{key:"isThumbLoaded",value:function(){return this._thumbImage&&this._thumbImageLoaded}},{key:"getThumbImage",value:function(){return this._thumbImage}}]),b}();b.a=p,p.prototype.availableOptions={category:{type:n.i.OBJECT,required:!0},title:{type:n.i.STRING},rawUrl:{type:n.i.STRING,required:!0},thumbUrl:{type:n.i.STRING},authorName:{type:n.i.STRING},authorAvatar:{type:n.i.STRING}}},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(a,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var d=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).call(this));return d._jobs=a,d._options=l.q.defaults(c,{minDelay:400}),d._running=!1,d._currentJob=null,d._currentJobIndex=0,d._tick=d._tick.bind(d),d}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.e),m(b,[{key:"start",value:function(){this._running=!0,this._lastJobFinished=Object(l.y)(),this._tick()}},{key:"_tick",value:function(){var a=this;if(this._running){if(!this._currentJob){if(this._currentJob=this._jobs[this._currentJobIndex],!this._currentJob)return this.emit("done"),void this.stop();this._currentJob.fn().then(function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=function(){a.emit.apply(a,["job-done",a._currentJob].concat(c)),a._lastJobFinished=Object(l.y)(),a._currentJob=null};if(Object(l.y)()-a._lastJobFinished<a._options.minDelay){var f=a._options.minDelay-(Object(l.y)()-a._lastJobFinished);setTimeout(e,f)}else e()}).catch(function(b){a.emit("error",a._currentJob,b),a._currentJob=null}),this._currentJobIndex++}Object(l.z)(this._tick)}}},{key:"stop",value:function(){this._running=!1}},{key:"dispose",value:function(){this._jobs=[],this._running=!1}}]),b}();b.a=n},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0}),c.d(b,"FullContainer",function(){return e}),c.d(b,"ControlItem",function(){return f}),c.d(b,"ControlItemTextStyles",function(){return g}),c.d(b,"ControlItemTitle",function(){return h}),c.d(b,"ControlItemActiveOverlay",function(){return i}),c.d(b,"ControlItemOverlay",function(){return j}),c.d(b,"Knob",function(){return k}),c.d(b,"PlainControlItem",function(){return l}),c.d(b,"PlainControlItemBackground",function(){return m});var d=c(4),e=d.w.css("vl6nc6","FullContainer"),f=d.w.css("gxhkr8",{animated:"1cekd0y",selected:"10th7ra",visible:"qtjcwg"},"ControlItem"),g=d.w.css("1us1ll5","ControlItemTextStyles"),h=d.w.css("d17ppx",{hovered:"zgbg08"},"ControlItemTitle"),i=d.w.css("x1p1ki",{visible:"zgbg08",rendered:"2jlos"},"ControlItemActiveOverlay"),j=d.w.css("1kza12c","ControlItemOverlay"),k=d.w.css("ywjahx","Knob"),l=d.w.css("9ej9h0",{threeColumns:"14meo64",twoColumns:"4nk392",withText:"rbroui",selected:"eb0k9a"},"PlainControlItem"),m=d.w.css("1lmjuk",{selected:"q4p805"},"PlainControlItemBackground")},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(8),i=c.n(h),j=c(4),k=c(7),l=(c.n(k),c(79)),m=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(){function a(b,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.context=b,this.sharedState=c,this._options=d,this._mediator=b.mediator,this.skipHistory=!1,this._initialOptions={},this._onOperationRemoved=this._onOperationRemoved.bind(this),this._onOperationUpdated=this._onOperationUpdated.bind(this)}return n(a,[{key:"_getAssetPath",value:function(){var a;return(a=this.context.ui).getAssetPath.apply(a,arguments)}},{key:"_t",value:function(a,b){return this.context.ui.translate(a,b)}},{key:"_onOperationRemoved",value:function(a){var b=a.constructor.identifier;this.constructor.updatableOperations.indexOf(b)>=0&&(this.constructor.switchToDefaultControlsOnRemoval?(this.skipHistory=!0,this.context.screen.switchToControls("default")):(this.onOperationRemoved(a),this.updateSharedState(!0),this.context.editor.render()))}},{key:"onOperationRemoved",value:function(a){}},{key:"_onOperationUpdated",value:function(a,b){var c=a.constructor.identifier;this.constructor.updatableOperations.indexOf(c)>=0&&this.onOperationUpdated(a,b)}},{key:"updateSharedState",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.context.editor,c=this.constructor.mapOperationsToSharedState(b.operations,a,m({},this.sharedState.getState()),b);this.sharedState.set(c)}},{key:"onOperationUpdated",value:function(a){var b=this.context.editor;this.updateSharedState(!1),b.render()}},{key:"onEnter",value:function(){var a=this.context.editor.history,b=this.sharedState.get("forceCrop");a.hasInitialState()||b||a.addSnapshot("global"),this._saveOperationsOptions(),this.updateSharedState(!0),this._onEnter(),this.updateSharedState(!1),this._mediator.on(j.d.EVENTS.OPERATION_REMOVED,this._onOperationRemoved),this._mediator.on(j.d.EVENTS.OPERATION_UPDATED,this._onOperationUpdated),this._mediator.on(j.d.EVENTS.OPERATION_CREATED,this._onOperationUpdated)}},{key:"_saveOperationsOptions",value:function(){var a=this,b=this.context.editor.operations;this._initialOptions={},this.constructor.updatableOperations.forEach(function(c){var d=b.get(c);d&&(a._initialOptions[c]=d.serializeOptions())})}},{key:"_shouldAddGlobalHistorySnapshot",value:function(){var a=this,b=this.context.editor,c=b.history,d=b.operations,e=k.Utils.Array.last(c.getItems().filter(function(a){return"global"===a.scope})),f=function(a,b){return!(!a&&!b||(!a||b||!a.hasChanges())&&(a||!b)&&(!a||!b||a.optionsEqual(b)))};return this.constructor.updatableOperations.some(function(b){var c=a._initialOptions[b],g=e?e.snapshot.operations[b]:null,h=d.get(b);return f(h,c)&&f(h,g)})}},{key:"_onEnter",value:function(){}},{key:"onLeave",value:function(){var a=this;return this.onBeforeLeave().then(function(b){"boolean"==typeof b&&(b={leave:b});var c=b,d=c.leave,e=c.data;if(!d)return!1;a._mediator.off(j.d.EVENTS.OPERATION_REMOVED,a._onOperationRemoved),a._mediator.off(j.d.EVENTS.OPERATION_UPDATED,a._onOperationUpdated),a._mediator.off(j.d.EVENTS.OPERATION_CREATED,a._onOperationUpdated),a._onLeave(e||{});var f=a.context.options,g=a.context.editor,h=g.history,i=g.operations;if(a._shouldAddGlobalHistorySnapshot()){var k=a._getGlobalHistoryData?a._getGlobalHistoryData():null;a.addGlobalHistorySnapshot(void 0,!1,k)}return i.removeUnused(),"global"===f.editor.undoMode&&h.removeControls(a.constructor.identifier,"local"),"local"===f.editor.undoMode&&h.removeControls(a.constructor.identifier,"global"),!0})}},{key:"_getGlobalHistoryData",value:function(){}},{key:"_onLeave",value:function(){}},{key:"onBeforeLeave",value:function(){return this._onBeforeLeave()}},{key:"_onBeforeLeave",value:function(){return i.a.resolve(!0)}},{key:"addLocalHistorySnapshot",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.context.editor.history.addSnapshot("local",b,a,this.constructor.identifier,c)}},{key:"addGlobalHistorySnapshot",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.context.editor.history.addSnapshot("global",b,a,this.constructor.identifier,c)}},{key:"getGlobalToolState",value:function(){return this.context.globalState.get(this.constructor.identifier)}},{key:"setGlobalToolState",value:function(a){var b,c,d;this.context.globalState.set((b={},c=this.constructor.identifier,d=a,c in b?g()(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d,b))}},{key:"_onBeforeExport",value:function(){return i.a.resolve()}},{key:"_onAfterExport",value:function(){return i.a.resolve()}},{key:"onBeforeExport",value:function(){return this._onBeforeExport()}},{key:"onAfterExport",value:function(){return this._onAfterExport()}}],[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"getPreloadAssets",value:function(){return[]}},{key:"clickAtPosition",value:function(a){return!1}},{key:"isEnabled",value:function(a){var b=this.constructor.identifier;return a.isToolEnabled(b)&&a.isToolAllowed(b)}}]),a}();o.identifier=null,o.controlsComponent=null,o.canvasControlsComponent=l.a,o.defaultOptions={},o.requiredOperations=[],o.updatableOperations=[],o.switchToDefaultControlsOnRemoval=!0,b.a=o},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),m(b,[{key:"render",value:function(){var a=function(a){return{animationDelay:.1*a+"s"}};return l.l.createElement(o,{styles:this.props.styles},l.l.createElement(p,{style:a(0)}),l.l.createElement(p,{style:a(1)}),l.l.createElement(p,{style:a(2)}))}}]),b}();n.contextTypes=l.b.contextTypes,b.a=n;var o=l.w.div("eurrvc","LoadingIndicatorContainer");n.RootElement=o;var p=l.w.div("vyyzkw","Ball")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(280),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onClick"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),n(b,[{key:"shouldComponentUpdate",value:function(a,b){return this.props.value!==a.value||this.props.disabled!==a.disabled}},{key:"_onClick",value:function(){this._input.focus()}},{key:"render",value:function(){var a=this;return l.l.createElement(p,{className:this.props.className,onClick:this._onClick},l.l.createElement(r,{value:this.props.value,onLiveChange:this.props.onLiveChange,onChange:this.props.onChange,disabled:this.props.disabled,innerRef:function(b){a._input=b},name:this.props.name}),l.l.createElement(q,null,this.props.suffix))}}]),b}();o.contextTypes=l.b.contextTypes,b.a=o;var p=l.w.div("nfd1oy","Container");o.RootElement=p;var q=l.w.div("1ua5bzq","Suffix"),r=Object(l.w)(m.a)("6ekjfo","Input")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(54),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f.state.width=0,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),p(b,[{key:"_onInputChange",value:function(a){q(b.prototype.__proto__||m()(b.prototype),"_onInputChange",this).call(this,a),this._adjustWidth(a.target.value)}},{key:"shouldComponentUpdate",value:function(a,c){return q(b.prototype.__proto__||m()(b.prototype),"shouldComponentUpdate",this).call(this,a,c)||this.state.width!==c.width}},{key:"componentWillReceiveProps",value:function(a){this._adjustWidth(a.value)}},{key:"componentDidMount",value:function(){q(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._textRuler=document.createElement("div"),n.u.styleElement(this._textRuler,{position:"absolute",top:"0",left:"0",display:"inline-block",zIndex:10}),this._adjustWidth(this.props.value)}},{key:"_getInputStyle",value:function(){var a=this.state.width;return{width:a,minWidth:a}}},{key:"_adjustWidth",value:function(a){document.body.appendChild(this._textRuler);var b=n.u.getStyleObject(this._input);n.u.styleElement(this._textRuler,{font:b.font}),this._textRuler.innerText=a,this.setState({width:this._textRuler.offsetWidth}),this._textRuler.parentNode.removeChild(this._textRuler)}}]),b}();r.contextTypes=n.b.contextTypes,b.a=r,r.RootElement=Object(n.w)(o.a.RootElement)("n0hw7r","AutoSizeNumericInputComponent")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(132),n=c(50),o=c(133),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f.state={expanded:f.props.expanded||f.props.alwaysExpanded||!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),p(b,[{key:"_onClick",value:function(){var a=!this.state.expanded;this.props.alwaysExpanded||this.setState({expanded:a}),this.props.onToggle&&this.props.onToggle(a)}},{key:"componentWillReceiveProps",value:function(a){this.props.expanded!==a.expanded&&this.setState({expanded:a.expanded})}},{key:"render",value:function(){var a=this.props,b=a.alwaysExpanded,c=a.toggleable,d=a.className,e=this.state.expanded;return l.l.createElement(r,{styles:this.props.styles,className:d},l.l.createElement(t,{onClick:this._onClick.bind(this)},!b&&!c&&l.l.createElement(v,{turnUp:!e}),c&&l.l.createElement(w,{checked:e,className:void 0}),l.l.createElement(s,null,this.props.title)),l.l.createElement(n.a,{active:e,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},l.l.createElement(u,{"data-expanded":e,className:void 0},this.props.children)))}}]),b}();q.contextTypes=l.b.contextTypes,b.a=q;var r=Object(l.w)(m.ControlGroup).div("1pofx54","Section");q.RootElement=r;var s=Object(l.w)(m.ControlGroupTitle).div("1b0fixa","SectionTitle"),t=l.w.div("1b4y7iu","SectionHeader"),u=l.w.div("10cp0qa",{rendered:"2jlos",visible:"82svov"},"SectionContent"),v=l.w.div("1bagiey",{turnUp:"gucvcl"},"ArrowDown"),w=Object(l.w)(o.a)("15tfhjl","Checkbox")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(80),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),p(b,[{key:"_renderChild",value:function(a){return function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"_renderChild",this).call(this,n.l.createElement(r,{innerRef:this.props.innerListRef},a))}}]),b}();q.RootElement=o.a.RootElement,q.contextTypes=o.a.contextTypes;var r=n.w.div("1jtk1eb","ListWrapper"),s=Object(n.w)(q)("x597uk","ScrollableList");b.a=s},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(82),p=c(131),q=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),r(b,[{key:"_buildSliderProps",value:function(){var a=this.props,b=a.minValue,c=a.maxValue,d=a.middleDot,e=a.onSliderValueChange;return{minValue:b,maxValue:c,value:a.value,middleDot:d,onChange:e,disabled:a.disabled}}},{key:"_renderLeftPart",value:function(){var a=function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(this._buildSliderProps(),[]);return n.l.createElement(p.a,q({},a,{darkBackground:!0}))}}]),b}();s.contextTypes=o.a.contextTypes,b.a=s},function(a,b,c){a.exports={default:c(285),__esModule:!0}},function(a,b,c){c(286),a.exports=c(10).Number.isNaN},function(a,b,c){var d=c(12);d(d.S,"Number",{isNaN:function(a){return a!=a}})},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(288),n=c(50),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onDocumentClick","_onColorChange"),f.state={colorPickerVisible:!1,colors:f._getDefaultColors(f.props.value.clone()),selectedColorIndex:0},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),o(b,[{key:"componentWillReceiveProps",value:function(a){if(!this.state.colorPickerVisible&&!this.props.value.equals(a.value)){var b=-1;this.state.colors.forEach(function(c,d){c.equals(a.value)&&(b=d)}),-1===b?this.setState({selectedColorIndex:0,colors:this._getDefaultColors(a.value.clone())}):this.setState({selectedColorIndex:b})}}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this._onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this._onDocumentClick)}},{key:"_onDocumentClick",value:function(a){var b=this;if(this.state.colorPickerVisible){for(var c=a.target;c;c=c.parentNode)if(c===this._root)return;this.setState({colorPickerVisible:!1},function(){b.props.onColorPickerToggle&&b.props.onColorPickerToggle(!1)})}}},{key:"_onClick",value:function(a){var b=this,c={colorPickerVisible:this.state.colorPickerVisible,selectedColorIndex:a};a===this.state.selectedColorIndex?c.colorPickerVisible=!this.state.colorPickerVisible:c.colorPickerVisible=!1,this.props.onChange&&this.props.onChange(this.state.colors[a]),this.setState(c,function(){b.props.onColorPickerToggle&&b.props.onColorPickerToggle(c.colorPickerVisible)})}},{key:"_onColorChange",value:function(a){this.props.onChange&&this.props.onChange(a),this.state.colors[this.state.selectedColorIndex].copy(a),this.forceUpdate()}},{key:"_getDefaultColors",value:function(a){return[a,l.c.fromHex("6688FA"),l.c.fromHex("8767FA"),l.c.fromHex("DC67FA"),l.c.fromHex("FE68C9"),l.c.fromHex("FE6788"),l.c.fromHex("FE896B")]}},{key:"_renderColorBubbles",value:function(){var a=this,b=this._getAssetPath("editor/controls/shared/tiled-background.png",!0),c=[];return this.state.colors.forEach(function(d,e){var f=e===a.state.selectedColorIndex;c.push(l.l.createElement(r,{key:e,selected:f,className:void 0},l.l.createElement(s,null,l.l.createElement(t,{style:{backgroundImage:"url("+b+")"}}),l.l.createElement(u,{style:{backgroundColor:d.toRGBA()},onClick:a._onClick.bind(a,e),className:void 0},l.l.createElement(v,{selected:f}),l.l.createElement(v,{selected:f}),l.l.createElement(v,{selected:f}))),l.l.createElement(n.a,{active:f&&a.state.colorPickerVisible,enterProp:"rendered",enterDuration:1e3*a.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*a.context.theme.transitionDuration,leaveDuration:1e3*a.context.theme.transitionDuration},l.l.createElement(m.a,{color:d,onChange:a._onColorChange}))))}),c}},{key:"render",value:function(){var a=this;return l.l.createElement(q,{className:void 0,styles:this.props.styles,innerRef:function(b){a._root=b}},this._renderColorBubbles())}}]),b}();p.contextTypes=l.b.contextTypes,p.propTypes={colors:l.k.array,value:l.k.object.isRequired},b.a=p;var q=l.w.div("9xkrp7","ColorSelection");p.RootElement=q;var r=l.w.div("qt3fol",{selected:"18i7ofo"},"ColorSelectionBubble"),s=l.w.div("11cgycr","ColorSelectionPreview"),t=l.w.div("id1aww","ColorSelectionPreviewContent"),u=Object(l.w)(t)("nahwei","ColorSelectionBubbleContent"),v=l.w.div("11la9rb",{selected:"xfn5qu"},"Dot")},function(a,b,c){var d=c(9),e=c.n(d),f=c(104),g=c.n(f),h=c(105),i=c.n(h),j=c(0),k=c.n(j),l=c(2),m=c.n(l),n=c(3),o=c.n(n),p=c(1),q=c.n(p),r=c(4),s=c(289),t=c(290),u=c(291),v=c(134),w=c(292),x=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},y=function(){return function(a,b){if(Array.isArray(a))return a;if(g()(Object(a)))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=i()(a);!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),z=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),k()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),A=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||q()(b)).call.apply(a,[this].concat(d)));f._bindAll("_onHexValueChange","_onAlphaChange","_onHueChange","_onSaturationBrightnessChange");var g=f.props.color.clone(),h=g.toHSV(),i=y(h,3),j=i[0],k=i[1],l=i[2];return f.state={color:g,hue:j,saturation:k,brightness:l},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=o()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(m.a?m()(a,b):a.__proto__=b)}(b,r.b),z(b,[{key:"_onHexValueChange",value:function(a){if(!a.match(/^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i))return this.forceUpdate();3===a.length&&(a+=a);var b=r.c.fromHex(a),c=this.state.color;c.copy(b),this.props.onChange&&this.props.onChange(c.clone());var d=c.toHSV(),e=y(d,3),f=e[0],g=e[1],h=e[2];this.setState({hue:f,saturation:g,brightness:h})}},{key:"_onAlphaChange",value:function(a){var b=this.state.color;b.a=a,this.props.onChange&&this.props.onChange(b.clone()),this.forceUpdate()}},{key:"_onHueChange",value:function(a){var b=this.state.color,c=b.toHSV(),d=y(c,3),e=d[1],f=d[2],g=b.a;b.fromHSV(a,e,f),b.a=g,this.props.onChange&&this.props.onChange(b.clone()),this.setState({color:b,hue:a})}},{key:"_onSaturationBrightnessChange",value:function(a,b){var c=this.state.color,d=c.a;c.fromHSV(this.state.hue,a,b),c.a=d,this.props.onChange&&this.props.onChange(c.clone()),this.setState({color:c,saturation:a,brightness:b})}},{key:"_changeColorComponent",value:function(a,b){var c=this.state.color;c[a]=b/255,this.props.onChange&&this.props.onChange(c.clone());var d=c.toHSV(),e=y(d,3),f=e[0],g=e[1],h=e[2];this.setState({hue:f,saturation:g,brightness:h})}},{key:"_renderContent",value:function(){var a=this.state,b=a.hue,c=a.saturation,d=a.brightness,e=a.color,f={hue:b,saturation:c,brightness:d};return[r.l.createElement(C,{key:"arrow"}),r.l.createElement(D,{key:"colorPicker",className:void 0},r.l.createElement(E,x({},f,{onChange:this._onSaturationBrightnessChange})),r.l.createElement(F,x({},f,{onChange:this._onHueChange})),r.l.createElement(G,{value:e.a,color:e,onChange:this._onAlphaChange}),r.l.createElement(H,null,r.l.createElement(w.a,{inputLabel:"Hex",value:e.toHex().substr(1),inputClassName:void 0,onValueChange:this._onHexValueChange}),r.l.createElement(v.a,{inputLabel:"R",value:e.toRGB()[0],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"r")}),r.l.createElement(v.a,{inputLabel:"G",value:e.toRGB()[1],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"g")}),r.l.createElement(v.a,{inputLabel:"B",value:e.toRGB()[2],minValue:1,maxValue:255,inputClassName:void 0,onValueChange:this._changeColorComponent.bind(this,"b")})))]}},{key:"render",value:function(){var a=this.props,b=a.rendered,c=a.visible;return r.l.createElement(B,{rendered:b,visible:c},b&&this._renderContent())}}]),b}();A.contextTypes=r.b.contextTypes,b.a=A;var B=r.w.div("txlwuh",{rendered:"2jlos",visible:"zgbg08"},"ColorPickerContainer"),C=r.w.div("ts4br3","TopArrow"),D=r.w.div("1gzvppb","ColorPicker"),E=Object(r.w)(u.a)("120drhm","SaturationValueSlider"),F=Object(r.w)(s.a)("1cbv91b","HueSlider"),G=Object(r.w)(t.a)("tnkwnw","OpacitySlider"),H=r.w.div("142apfo","ColorValueInputs")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(22),p=c(83),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onKnobDragStart","_onKnobDrag","_setValue"),f.state={value:f.props.hue},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),q(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._renderCanvas()}},{key:"componentWillReceiveProps",value:function(a){this.setState({value:a.hue})}},{key:"_onKnobDragStart",value:function(a,b,c){this._sliderWidth=this._slider.offsetWidth,c.target===this._knob?this._initialValue=this.state.value:(this._initialValue=a.x/this._sliderWidth,this._setValue(this._initialValue))}},{key:"_onKnobDrag",value:function(a){var b=this._initialValue+a.x/this._sliderWidth;this._setValue(b)}},{key:"_setValue",value:function(a){var b=Math.min(1,Math.max(0,a));this.setState({value:b}),
this.props.onChange&&this.props.onChange(b),this.forceUpdate()}},{key:"_renderCanvas",value:function(){var a=this._canvas,b=a.getContext("2d");a.width=a.offsetWidth,a.height=a.offsetHeight;for(var c=0;c<a.width;c++){var d=c/a.width,e=n.c.fromHSV(d,1,1);b.strokeStyle=e.toRGBA(),b.beginPath(),b.moveTo(c,0),b.lineTo(c,a.height),b.stroke()}}},{key:"render",value:function(){var a=this;return n.l.createElement(o.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},n.l.createElement(s,{styles:this.props.styles,innerRef:function(b){a._slider=b},className:void 0},n.l.createElement(u,{innerRef:function(b){a._canvas=b}}),n.l.createElement(t,{style:this._getKnobStyle(),innerRef:function(b){a._knob=b},className:void 0})))}},{key:"_getKnobStyle",value:function(){return{left:(100*this.props.hue).toFixed(2)+"%"}}}]),b}();r.contextTypes=n.b.contextTypes,b.a=r;var s=Object(n.w)(p.a).div("120drhm","HueSlider");r.RootElement=s;var t=Object(n.w)(p.c).div("120drhm","Knob"),u=Object(n.w)(p.b).canvas("u98vhm","Background")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(22),n=c(83),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onKnobDragStart","_onKnobDrag","_updateBackgroundColors","_setValue"),f.state={color:f.props.color.clone(),value:f.props.value},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),o(b,[{key:"_updateBackgroundColors",value:function(){this._transparentColor=this.state.color.clone(),this._transparentColor.a=0,this._opaqueColor=this.state.color.clone(),this._opaqueColor.a=1}},{key:"componentWillReceiveProps",value:function(a){this.setState({color:a.color.clone(),value:a.value})}},{key:"_onKnobDragStart",value:function(a,b,c){this._sliderWidth=this._slider.offsetWidth,c.target===this._knob?this._initialValue=this.state.value:(this._initialValue=1-a.x/this._sliderWidth,this._setValue(this._initialValue))}},{key:"_onKnobDrag",value:function(a,b){var c=this._initialValue-a.x/this._sliderWidth;this._setValue(c)}},{key:"_setValue",value:function(a){var b=Math.min(1,Math.max(0,a));this.props.onChange&&this.props.onChange(b),this.setState({value:b}),this.forceUpdate()}},{key:"render",value:function(){var a=this;this._updateBackgroundColors();var b=this._getAssetPath("editor/controls/shared/tiled-background.png",!0);return l.l.createElement(m.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},l.l.createElement(q,{styles:this.props.styles,innerRef:function(b){a._slider=b},className:void 0},l.l.createElement(t,{style:{backgroundImage:"url("+b+")"}}),l.l.createElement(s,{style:{backgroundImage:"linear-gradient(90deg, "+this._opaqueColor.toRGBA()+" 0%, "+this._transparentColor.toRGBA()+" 100%)"}}),l.l.createElement(r,{style:this._getKnobStyle(),innerRef:function(b){a._knob=b},className:void 0})))}},{key:"_getKnobStyle",value:function(){return{left:(100*(1-this.state.value)).toFixed(2)+"%"}}}]),b}();p.contextTypes=l.b.contextTypes,b.a=p;var q=Object(l.w)(n.a).div("120drhm","OpacitySlider");p.RootElement=q;var r=Object(l.w)(n.c).div("120drhm","Knob"),s=Object(l.w)(n.b).div("120drhm","Background"),t=Object(l.w)(s)("m87q12","TiledBackground")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(22),p=c(83),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onKnobDragStart","_onKnobDrag"),f._lastHue=null,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),q(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._renderCanvas()}},{key:"componentDidUpdate",value:function(){this.props.hue!==this._lastHue&&this._renderCanvas()}},{key:"_onKnobDragStart",value:function(a,b,c){c.target===this._knob?(this._initialBrightness=this.props.brightness,this._initialSaturation=this.props.saturation):(this._initialSaturation=a.x/this._canvas.offsetWidth,this._initialBrightness=1-a.y/this._canvas.offsetHeight,this.props.onChange&&this.props.onChange(this._initialSaturation,this._initialBrightness))}},{key:"_onKnobDrag",value:function(a){if(null!=this._canvas){var b=this._canvas.offsetWidth,c=this._canvas.offsetHeight,d=this._initialSaturation+a.x/b;d=Math.max(0,Math.min(1,d));var e=this._initialBrightness+a.y/c*-1;e=Math.max(0,Math.min(1,e)),this.props.onChange&&this.props.onChange(d,e)}}},{key:"_renderCanvas",value:function(){var a=this._canvas,b=a.getContext("2d");a.width=a.offsetWidth,a.height=a.offsetHeight;for(var c=b.getImageData(0,0,a.width,a.height),d=0;d<a.height;d++)for(var e=(a.height-d)/a.height,f=0;f<a.width;f++){var g=f/a.width,h=n.c.fromHSV(this.props.hue,g,e),i=h.r,j=h.g,k=h.b,l=h.a,m=4*(d*a.width+f);c.data[m]=255*i,c.data[m+1]=255*j,c.data[m+2]=255*k,c.data[m+3]=255*l}b.putImageData(c,0,0),this._lastHue=this.props.hue}},{key:"render",value:function(){var a=this;return n.l.createElement(o.a,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},n.l.createElement(s,{styles:this.props.styles,innerRef:function(b){a._slider=b},className:void 0},n.l.createElement(u,{innerRef:function(b){a._canvas=b}}),n.l.createElement(t,{style:this._getKnobStyle(),innerRef:function(b){a._knob=b},className:void 0})))}},{key:"_getKnobStyle",value:function(){return{left:(100*this.props.saturation).toFixed(2)+"%",top:(100*(1-this.props.brightness)).toFixed(2)+"%"}}}]),b}();r.contextTypes=n.b.contextTypes,b.a=r;var s=Object(n.w)(p.a).div("1jf8fwr","SaturationValueSlider");r.RootElement=s;var t=Object(n.w)(p.c).div("icy3f1","Knob"),u=Object(n.w)(p.b).canvas("15alfoa","Background")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(134),n=c(54),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),o(b,[{key:"_onInputChange",value:function(a){var b=a.target.value;if(b.match(/^#([A-Fa-f0-9]{6})$/))return this.setState({value:this.props.value});this.props.onValueChange&&this.props.onValueChange(b),this.setState({value:b})}},{key:"_renderRightPart",value:function(){var a=this,b=[];return this.props.inputClassName&&b.push(this.props.inputClassName),l.l.createElement(q,{value:this.state.value,onLiveChange:this._onInputLiveChange,onChange:this._onInputChange,className:b.join(" "),innerRef:function(b){a._input=b},disabled:this.props.disabled})}}]),b}();p.contextTypes=m.a.contextTypes,b.a=p;var q=Object(l.w)(n.a)("t0ruqq","InputField")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),m(b,[{key:"render",value:function(){return l.l.createElement(o,{onClick:this.props.disabled?void 0:this.props.onClick,disabled:this.props.disabled,className:this.props.className},this.props.title)}}]),b}();n.contextTypes=l.b.contextTypes,b.a=n;var o=l.w.button("7lpbp3",{disabled:"1iaw3op"},"Button")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(4),o=c(81),p=c(80),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onDropdownClick","_onDocumentClick"),f.state={expanded:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.b),q(b,[{key:"componentDidMount",value:function(){r(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),document.addEventListener("click",this._onDocumentClick)}},{key:"componentWillUnmount",value:function(){r(b.prototype.__proto__||m()(b.prototype),"componentWillUnmount",this).call(this),document.removeEventListener("click",this._onDocumentClick)}},{key:"_onDocumentClick",value:function(a){if(this.state.expanded){for(var b=a.target;b;b=b.parentNode)if(b===this._root)return;this.setState({expanded:!1})}}},{key:"_onDropdownClick",value:function(){var a=this.state.expanded;this.setState({expanded:!a})}},{key:"_onItemClick",value:function(a){this.props.onChange&&this.props.onChange(a),this.setState({expanded:!1})}},{key:"_renderDropdownItems",value:function(){var a=this;return this.props.children.map(function(b){var c=n.q.extend({},b.props,{onClick:a._onItemClick.bind(a,b.props.value),selected:a.props.value===b.props.value,className:void 0});return n.l.cloneElement(b,c)})}},{key:"render",value:function(){var a=this,b=null;this.props.children.forEach(function(c){c.props.value===a.props.value&&(b=c.props.children)});var c=this.props.enableMenu;return n.l.createElement(t,{innerRef:function(b){a._root=b},className:this.props.className},n.l.createElement(u,{onClick:c?this._onDropdownClick:null,styles:this.props.styles,style:this.props.style},b,c?n.l.createElement(x,null):null),this.state.expanded&&n.l.createElement(v,{className:void 0},n.l.createElement(p.a,{direction:"vertical",noGradient:!0},n.l.createElement(w,null,this._renderDropdownItems()))))}}]),b}();s.contextTypes=n.b.contextTypes,s.propTypes={enableMenu:n.k.bool,styles:n.k.object,style:n.k.object,onChange:n.k.func},s.defaultProps={enableMenu:!0},b.a=s;var t=n.w.div("13hv8io","DropdownContainer"),u=Object(n.w)(o.a).div("13hv8io","Dropdown");s.RootElement=u;var v=n.w.div("1fqdopp","DropdownOverlay"),w=n.w.ul("zy0cu9","DropdownList"),x=n.w.div("7w2heg",{turnUp:"gucvcl"},"ArrowDown"),y=n.w.li("cibatp",{selected:"60ro2s"},"DropdownItem");s.Item=y,s.RootElement=Object(n.w)(o.a).input("120drhm","DropdownComponent")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(81),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onKeyDown","_onInputBlur","_onInputChange"),f.state={value:""},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),n(b,[{key:"shouldComponentUpdate",value:function(a,b){return this.props.value!==a.value||this.props.disabled!==a.disabled||this.state.value!==b.value}},{key:"componentWillReceiveProps",value:function(a){this.setState({value:a.value})}},{key:"_onInputChange",value:function(a){this.setState({value:a.target.value}),this.props.onLiveChange&&this.props.onLiveChange(a)}},{key:"_onInputBlur",value:function(a){this.props.onChange&&this.props.onChange(a)}},{key:"_onKeyDown",value:function(a){13!==a.keyCode&&27!==a.keyCode||this._input.blur(),this.props.onKeyDown&&this.props.onKeyDown()}},{key:"focus",value:function(){this._input.focus()}},{key:"_getInputStyle",value:function(){return{}}},{key:"render",value:function(){var a=this,b=this.constructor.RootElement;return l.l.createElement(b,{value:this.state.value,placeholder:this.props.placeholder,onChange:this._onInputChange,onBlur:this._onInputBlur,innerRef:function(b){a._input=b},onKeyDown:this._onKeyDown,name:this.props.name,styles:this.props.styles,className:this.props.className,style:this._getInputStyle(),disabled:this.props.disabled})}}]),b}();o.contextTypes=l.b.contextTypes,b.a=o,o.RootElement=Object(l.w)(m.a).input("120drhm","TextInputComponent")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=c(130),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onNewFile"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),n(b,[{key:"componentDidMount",value:function(){this._fileLoader=new m.a(this._fileInput),this._fileLoader.on("file",this._onNewFile)}},{key:"componentWillUnmount",value:function(){this._fileLoader.off("file",this._onNewFile),this._fileLoader.dispose(),this._fileLoader=null}},{key:"_onNewFile",value:function(a){this.props.onNewFile&&this.props.onNewFile(a)}},{key:"open",value:function(){this._fileLoader.open()}},{key:"render",value:function(){var a=this;return l.l.createElement(p,{type:"file",accept:"image/*",innerRef:function(b){a._fileInput=b}})}}]),b}();o.contextTypes=l.b.contextTypes,b.a=o;var p=l.w.input("19u9mq5","HiddenFileInput")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(4),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.b),m(b,[{key:"_cancelEvent",value:function(a){a.stopPropagation(),a.preventDefault()}},{key:"_onClick",value:function(a,b){b.stopPropagation(),b.preventDefault(),a(b)}},{key:"_renderControlItem",value:function(a,b){var c=this,d=this._getAssetPath("editor/controls/shared/canvas-overlay-controls/"+a+".png",!0),e=function(a){c._onClick(b,a)};return l.l.createElement(p,{style:{backgroundImage:"url("+d+")"},onClick:e,onTouchEnd:e,className:void 0,"data-identifier":a})}},{key:"render",value:function(){var a=this.props,b=a.position,c=a.isTextMaskingInverted;return l.l.createElement(o,{style:{left:b.x,top:b.y},onMouseDown:this._cancelEvent,onTouchStart:this._cancelEvent,className:void 0},this.props.takeToFront&&this._renderControlItem("to-front",this.props.onTakeToFront),this.props.maskCanvas&&this._renderControlItem(c?"text-background":"text-foreground",this.props.onMaskCanvas),this.props.flipHorizontally&&this._renderControlItem("flip-horizontal",this.props.onFlipHorizontally),this.props.duplicate&&this._renderControlItem("duplicate",this.props.onDuplicate),this.props.delete&&this._renderControlItem("delete",this.props.onDelete))}}]),b}();n.contextTypes=l.b.contextTypes,b.a=n;var o=l.w.div("1lf1r1r","CanvasOverlayControl"),p=l.w.div("1l53y3r","ControlItem")},function(a,b){a.exports={pesdk:{common:{title:{error:"Fehler"},text:{loading:"Lade..."},button:{cancel:"Abbrechen"}},editor:{button:{export:"Exportieren",save:"Speichern",load:"Laden",newImageChangesLostWarningYes:"Ja",newImageChangesLostWarningNo:"Nein",discardChangesWarningKeep:"Änderungen beibehalten",discardChangesWarningDiscard:"Änderungen verwerfen"},title:{newImageChangesLostWarning:"Neues Bild",imageResizedWarning_maxMegaPixels:"Bild verkleinert",imageResizedWarning_maxDimensions:"Bild verkleinert",fontLoadingError:"Laden von Schriftarten ist fehlgeschlagen.",discardChangesWarning:"Änderungen verwerfen?"},text:{newImageChangesLostWarning:"Alle nicht gespeicherten Änderungen gehen verloren. Fortfahren?",imageResizedWarning_maxMegaPixels:"Da dein Bild die maximale Größe von ${maxMegaPixels} Megapixeln überschreitet, wurde es auf ${width}x${height} Pixel verkleinert.",imageResizedWarning_maxDimensions:"Aufgrund von Hardware-Beschränkungen wurde das Bild auf ${width}x${height} Pixel verkleinert.",renderingError:"Beim Rendern des Bildes ist ein Fehler aufgetreten.",exporting:"Exportiere...",saving:"Speichere...",loading:"Loading...",resizing:"Bild wird bearbeitet...",loadingFonts:"Lade Schriftarten...",fontLoadingError:"Die folgenden Schriftarten konnten nicht geladen werden: ${fonts}.",webcamUnavailableError:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",invalidFileTypeError:"Der Dateityp ${fileType} wird nicht unterstützt.",imageLoadingError:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gründe haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterstützt.",discardChangesWarning:"Sind Sie sicher, dass Sie die Änderungen verwerfen wollen?"}},library:{title:{name:"Bibliothek"},button:{fileDropZone:"Datei hier hin ziehen oder klicken zum Durchsuchen.",fileDropZoneHovered:"Zum Hochladen loslassen."},placeholder:{search:"Bibliothek durchsuchen"},text:{noResults:"Keine Ergebnisse"}},transform:{title:{name:"Zuschneiden"},dimensions:{lock:"Fixiere Auflösung"},button:{reset:"Zurücksetzen"},asset:{imgly_transforms_common:{name:"Standard",asset:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch","imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:"Facebook",asset:{imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover",imgly_transform_facebook_profile:"Profile Pic"}}},placeholder:{width:"b",height:"h"}},filter:{asset:{identity:"Kein Filter",imgly_lut_celsius:"Celsius",imgly_lut_chest:"Chest",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Front",imgly_lut_k2:"K2",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Sin",imgly_lut_texas:"Texas",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"},title:{name:"Filters"}},adjustments:{button:{reset:"Zurücksetzen"},title:{name:"Korrekturen",basics:"Grundlagen",refinements:"Feinheiten"},text:{brightness:"Helligkeit",saturation:"Sättigung",contrast:"Kontrast",gamma:"Gamma",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Weiß",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:{name:"Weichzeichnen"},button:{none:"Original",radial:"Kreisförmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gaußsch"}},text:{title:{name:"Text",font:"Schriftart",size:"Größe",spacing:"Abstand",line:"Zeile",background:"Hintergrund"},placeholder:{defaultText:"Doppelklick zum Bearbeiten!"},button:{new:"Neuer Text"}},textdesign:{title:{name:"Text Design"},button:{invert:"Text als Maske",new:"Neues Text Design"}},sticker:{title:{name:"Sticker",opacity:"Transparenz"},text:{stickerLoadingError:"Laden des Stickers ${path} fehlgeschlagen."},button:{replace:"Ersetzen",new:"Neuer Sticker",fill:"Einfärben"},asset:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes:"Shapes",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"}},brush:{title:{name:"Malen",width:"Dicke",hardness:"Härte",settings:"Pinseleinstellungen"}},frame:{title:{name:"Rahmen",opacity:"Transparenz",width:"Dicke"},button:{fill:"Einfärben",replace:"Ersetzen",none:"Kein Rahmen"},asset:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black Passepartout",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood Passepartout"}},overlay:{title:{name:"Overlay",blending:"Mischung",none:"Keine",normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},button:{none:"Kein Overlay"},asset:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}}}}},function(a,b){a.exports={pesdk:{common:{title:{error:"Error"},text:{loading:"Loading..."},button:{cancel:"Cancel"}},editor:{button:{export:"Export",save:"Save",load:"Load",close:"Close",newImageChangesLostWarningYes:"Yes",newImageChangesLostWarningNo:"No",discardChangesWarningKeep:"Keep changes",discardChangesWarningDiscard:"Discard changes"},title:{newImageChangesLostWarning:"New Image",imageResizedWarning_maxMegaPixels:"Image resized",imageResizedWarning_maxDimensions:"Image resized",fontLoadingError:"Failed to load font",discardChangesWarning:"Discard changes?"},text:{newImageChangesLostWarning:"Any unsaved changes will be lost. Continue?",imageResizedWarning_maxMegaPixels:"Your image exceeds the maximum size of ${maxMegaPixels} megapixels and has therefore been resized to ${width}x${height} pixels.",imageResizedWarning_maxDimensions:"Due to hardware limitations your image has been resized to ${width}x${height} pixels.",renderingError:"An error has occurred while rendering the image.",exporting:"Exporting...",saving:"Saving...",loading:"Loading...",resizing:"Resizing...",loadingFonts:"Loading fonts...",fontLoadingError:"The following fonts could not be loaded: ${fonts}.",webcamUnavailableError:"Unable to display webcam image (Error: ${error})",invalidFileTypeError:"The file type ${fileType} is not supported.",imageLoadingError:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported.",discardChangesWarning:"You have unsaved changes. Are you sure you want to discard the changes?"}},library:{title:{name:"Library"},button:{fileDropZone:"Drag image here or click to browse for one.",fileDropZoneHovered:"Drop to upload."},placeholder:{search:"Search Library"},text:{noResults:"No results"}},transform:{title:{name:"Transform"},dimensions:{lock:"Lock Resolution"},button:{reset:"Reset Default"},asset:{imgly_transforms_common:{name:"Common Crops",asset:{imgly_transform_common_custom:"Custom",
imgly_transform_common_square:"Square","imgly_transform_common_4-3":"4:3","imgly_transform_common_16-9":"16:9"}},imgly_transforms_facebook:{name:"Facebook",asset:{imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover",imgly_transform_facebook_profile:"Profile Pic"}}},placeholder:{width:"w",height:"h"}},filter:{asset:{identity:"None",imgly_lut_celsius:"Celsius",imgly_lut_chest:"Chest",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Front",imgly_lut_k2:"K2",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Sin",imgly_lut_texas:"Texas",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Bleached",imgly_lut_bleachedblue:"Bleached Blue",imgly_lut_blues:"Blues",imgly_lut_blueshadows:"Blue Shadows",imgly_lut_breeze:"Breeze",imgly_lut_bw:"B & W",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Cool",imgly_lut_cottoncandy:"Cotton Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Eighties",imgly_lut_elder:"Elder",imgly_lut_evening:"Evening",imgly_lut_fall:"Fall",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"High Contrast",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"KDynamic",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lenin",imgly_lut_litho:"Litho",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"No Green",imgly_lut_orchid:"Orchid",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Plate",imgly_lut_pola669:"Pola 669",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia High",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Sunset",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Winter",imgly_lut_x400:"X400",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"},title:{name:"Filters"}},adjustments:{button:{reset:"Reset Default"},title:{name:"Adjust",basics:"Basics",refinements:"Refinements"},text:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:{name:"Focus"},button:{none:"None",radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"}},text:{title:{name:"Text",font:"Font",size:"Size",spacing:"Spacing",line:"Line",background:"Background"},placeholder:{defaultText:"Double-click to edit!"},button:{new:"New Text"}},textdesign:{title:{name:"Text Design"},button:{invert:"Text as mask",new:"New Text Design"}},sticker:{title:{name:"Stickers",opacity:"Opacity"},text:{stickerLoadingError:"Failed to load sticker ${path}."},button:{replace:"Replace",new:"New Sticker",fill:"Fill"},asset:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes:"Shapes",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"}},brush:{title:{name:"Brush",width:"Width",hardness:"Hardness",settings:"Brush Settings"}},frame:{title:{name:"Frames",opacity:"Opacity",width:"Width"},button:{fill:"Fill",replace:"Replace",none:"None"},asset:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black Passepartout",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood Passepartout"}},overlay:{title:{name:"Overlays",blending:"Blending",none:"None",normal:"Normal",overlay:"Overlay",hardLight:"Hard Light",softLight:"Soft Light",multiply:"Multiply",darken:"Darken",lighten:"Lighten",screen:"Screen",colorBurn:"Color Burn"},button:{none:"None"},asset:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}}}}},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(5),e=c.n(d),f=c(301),g=c(312),h=c(315),i=c(323),j=c(137),k=c(333),l=c(338),m=c(342),n=c(349),o=c(355),p=c(361),q=[f.a,g.a,h.a,i.a,j.a,k.a,l.a,m.a,n.a,o.a,p.a];e.a.AllControls=q,b.default=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=c.n(n),p=c(302),q=c(308),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.BaseControls),r(b,[{key:"shouldKeepChanges",value:function(){var a=this,b=this.context,c=b.editor,d=b.ui;return void 0===this.keepChanges&&!c.isShallow&&c.history.isUndoAvailable()?new k.a(function(b,c){n.ModalManager.instance.displayWarning(d.translate("pesdk.editor.title.discardChangesWarning"),d.translate("pesdk.editor.text.discardChangesWarning"),[d.translate("pesdk.editor.button.discardChangesWarningKeep"),d.translate("pesdk.editor.button.discardChangesWarningDiscard")],!0).on("button",function(c){var d=0===c;a.keepChanges=d,b(d)})}):k.a.resolve(this.keepChanges)}},{key:"onImage",value:function(a){var b=this;this.shouldKeepChanges().then(function(c){b._options.switchScreenOnImage?(b.context.options.editor.image=a,b.context.appComponent.switchToScreen("editor")):b.context.editor.setImage(a,!c),b.sharedState.get("webcamEnabled")&&(b.sharedState.set({webcamEnabled:!1}),b.context.options.editor.forceCrop||b.context.screen.switchToControls("default"))})}},{key:"_onEnter",value:function(){this.sharedState.set({webcamEnabled:!1})}}],[{key:"hasLibraryProvider",value:function(a){var b=a.getOptions().editor.controlsOptions;if(void 0===b.library)return!0;var c=b.library;return!!(c.provider||c.enableWebcam||c.enableUpload)}},{key:"isEnabled",value:function(a){return b.hasLibraryProvider(a)&&a.isToolEnabled("library")}}]),b}();s.clickAtPosition=n.BaseControls.clickAtPosition,s.getPreloadAssets=n.BaseControls.getPreloadAssets,s.identifier="library",s.controlsComponent=p.a,s.canvasControlsComponent=q.a,s.iconPath="editor/controls/library/icon.png",s.activeIconPath="editor/controls/library/icon-active.png",s.defaultOptions={enableWebcam:!0,enableUpload:!0,displayUploadInCanvas:!1,switchScreenOnImage:!1},b.a=s,o.a.Controls.LibraryControls=s},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(303)),p=c(305),q=c(307),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s={ROOT:0,SEARCH:1},t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d))),g=f.props.options.provider;return g&&(f._library=new g),f._bindAll("_onCategorySelect","_onImageSelect","_onSearchQueryChange","_onWebcamActivated"),f.state.currentPanel=s.ROOT,f.state.searchQuery="",f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.ControlsComponent),r(b,[{key:"_onBackButtonClick",value:function(){this.setState({currentPanel:s.ROOT,searchQuery:"",backButton:!1})}},{key:"_onCategorySelect",value:function(a){this.setState({currentPanel:s.SEARCH,searchQuery:a.getName(),backButton:!0})}},{key:"_onImageSelect",value:function(a){var b=this;this.setSharedState({webcamEnabled:!1});var c=new window.Image,d=void 0,e=setTimeout(function(){d=n.ModalManager.instance.displayLoading(b._t("pesdk.common.text.loading"))},200);c.addEventListener("load",function(){d&&d.close(),e&&(clearTimeout(e),e=null),b.props.controls.onImage(c)}),c.addEventListener("error",function(){d&&d.close(),e&&(clearTimeout(e),e=null),n.ModalManager.instance.displayError(b._t("pesdk.common.title.error"),b._t("pesdk.editor.text.imageLoadingError"))}),c.crossOrigin=this.context.editor.getCrossOrigin(),c.src=a.getRawUrl()}},{key:"_onSearchQueryChange",value:function(a){this.setState({searchQuery:a,currentPanel:s.SEARCH})}},{key:"_onWebcamActivated",value:function(a){this.setSharedState({webcamEnabled:!0})}},{key:"fixStyles",value:function(){var a=this;if(this._list)return this._list.style.height="100%",function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"fixStyles",this).call(this).then(function(){if(n.Utils.Browser.isIElte(10)){var b=a._container.offsetHeight;a._list.style.height=b+"px"}return a.refs.panel.fixStyles()})}},{key:"_renderCurrentPanel",value:function(){var a=this;switch(this.state.currentPanel){case s.ROOT:return n.React.createElement(o.a,{controls:this.props.controls,innerRef:function(b){a._list=b},library:this._library,onCategorySelect:this._onCategorySelect,onWebcamActivated:this._onWebcamActivated,options:this.props.options,key:"panel",ref:"panel"});case s.SEARCH:return n.React.createElement(p.a,{innerRef:function(b){a._list=b},library:this._library,onImageSelect:this._onImageSelect,searchQuery:this.state.searchQuery,key:"panel",ref:"panel"})}}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!1}}},{key:"_renderContent",value:function(){var a=[];return this._library&&a.push(n.React.createElement(q.a,{key:"searchHeader",onChange:this._onSearchQueryChange,searchQuery:this.state.searchQuery})),a.push(this._renderCurrentPanel()),a}}]),b}();t.contextTypes=n.ControlsComponent.contextTypes,t.propTypes=n.ControlsComponent.propTypes,t.RootElement=n.ControlsComponent.RootElement,b.a=t},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(8),m=c.n(l),n=c(1),o=c.n(n),p=c(5),q=(c.n(p),c(304)),r=c(135),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},u=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onImage"),f.state={loading:!0,categories:[]},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.BaseComponent),s(b,[{key:"fixStyles",value:function(){var a=this;return m.a.resolve().then(function(){p.Utils.Browser.isIElte(10)?Object(p.requestAnimationFrame)(function(){a._scrollbar.update()}):a._scrollbar.update()})}},{key:"componentDidMount",value:function(){t(b.prototype.__proto__||o()(b.prototype),"componentDidMount",this).call(this),this._loadCategories()}},{key:"componentWillUnmount",value:function(){t(b.prototype.__proto__||o()(b.prototype),"componentWillUnmount",this).call(this),this._loadCoverImagesQueue&&this._loadCoverImagesQueue.dispose(),this._disposed=!0}},{key:"_onCategoryClick",value:function(a){this.props.onCategorySelect&&this.props.onCategorySelect(a)}},{key:"_onImage",value:function(a){this.props.controls.onImage(a)}},{key:"_loadCoverImages",value:function(a){var b=this,c=this.context,d=c.theme,e=c.options,f=a.map(function(a){return{fn:function(){return a.loadCoverImage(e.crossOrigin)},index:a}});this._loadCoverImagesQueue=new p.DelayedJobQueue(f,{minDelay:d.listItemSlideInDelay}),this._loadCoverImagesQueue.on("job-done",function(a){b._disposed||(b.forceUpdate(),b._scrollbar.update())}),this._loadCoverImagesQueue.start()}},{key:"_loadCategories",value:function(){var a=this;return this.props.library?this.props.library.getCategories().then(function(b){a._loadCoverImages(b),a.setState({loading:!1,categories:b})}):(this.setState({loading:!1,categories:[]}),m.a.resolve())}},{key:"_renderListItems",value:function(){var a=this;return this.state.categories.map(function(b){return p.React.createElement(q.a,{key:b.getName(),category:b,visible:b.isCoverImageLoaded(),onClick:a._onCategoryClick.bind(a,b)})})}},{key:"render",value:function(){var a=this;if(this.state.loading)return p.React.createElement(p.LoadingIndicatorComponent,null);var b=this.props.options,c=b.enableUpload,d=b.displayUploadInCanvas,e=this.props.innerRef;return p.React.createElement(v,{innerRef:function(b){e&&e(b),a._wrapper=b},className:void 0},p.React.createElement(p.ScrollableListComponent,{direction:"vertical",innerRef:function(b){a._scrollbar=b}},p.React.createElement(w,null,c&&!d&&p.React.createElement(r.a,{controls:this.props.controls,onImage:this._onImage,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this.props.onWebcamActivated}),this._renderListItems())))}}]),b}();b.a=u;var v=p.adonis.div("rfecls","RootPanelWrapper"),w=p.adonis.ul("5jg0ou","CategoryList")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.ControlItem,o=l.ControlsStyles.ControlItemTitle,p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseComponent),m(b,[{key:"render",value:function(){var a=this.props,b=a.category,c=a.onClick,d=a.visible,e={backgroundImage:"url('"+b.getCoverImage()+"')"};return l.React.createElement(q,{animated:!0,style:e,visible:d,className:void 0,onClick:c},l.React.createElement(r,null,b.getName()))}}]),b}();b.a=p;var q=Object(l.adonis)(n).li("prcvvt","ListItem"),r=Object(l.adonis)(o).div("1ler8h7","ListItemTitle")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(8),m=c.n(l),n=c(1),o=c.n(n),p=c(5),q=(c.n(p),c(306)),r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f.state={loading:!0,images:[]},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.BaseComponent),r(b,[{key:"fixStyles",value:function(){var a=this;return m.a.resolve().then(function(){p.Utils.Browser.isIElte(10)?Object(p.requestAnimationFrame)(function(){a._scrollbar.update()}):a._scrollbar.update()})}},{key:"componentDidMount",value:function(){s(b.prototype.__proto__||o()(b.prototype),"componentDidMount",this).call(this),this._loadImages(this.props.searchQuery)}},{key:"componentWillReceiveProps",value:function(a){this.props.searchQuery!==a.searchQuery&&this._loadImages(a.searchQuery)}},{key:"componentWillUnmount",value:function(){s(b.prototype.__proto__||o()(b.prototype),"componentWillUnmount",this).call(this),this._loadThumbsQueue.stop(),this._loadThumbsQueue.dispose(),this._disposed=!0}},{key:"_onImageClick",value:function(a){this.props.onImageSelect&&this.props.onImageSelect(a)}},{key:"_loadThumbs",value:function(a){var b=this,c=this.context,d=c.theme,e=c.options,f=a.map(function(a){return{fn:function(){return a.loadThumb(e.crossOrigin)},index:a}});this._loadThumbsQueue=new p.DelayedJobQueue(f,{minDelay:d.listItemSlideInDelay}),this._loadThumbsQueue.on("job-done",function(a){b._disposed||(b.forceUpdate(),b._scrollbar&&b._scrollbar.update())}),this._loadThumbsQueue.start()}},{key:"_loadImages",value:function(a){var b=this;return a.trim()||this.setState({loading:!1,images:[]},function(){return b._scrollbar&&b._scrollbar.update()}),this.setState({loading:!0}),this.props.library.searchImages(a).then(function(a){b._loadThumbs(a),b.setState({loading:!1,images:a},function(){return b._scrollbar.update()})})}},{key:"_renderListItems",value:function(){var a=this,b=this.context.editor.getImage();return 0===this.state.images.length?p.React.createElement(w,null,this._t("pesdk.library.text.noResults")):this.state.images.map(function(c){return p.React.createElement(q.a,{key:c.getThumbUrl(),image:c,selected:c.getRawUrl()===(b&&b.src),visible:c.isThumbLoaded(),onClick:a._onImageClick.bind(a,c)})})}},{key:"render",value:function(){var a=this;if(this.state.loading)return p.React.createElement(p.LoadingIndicatorComponent,null);var b=this.props.innerRef;return p.React.createElement(u,{innerRef:function(c){b&&b(c),a._wrapper=c},className:void 0},p.React.createElement(p.ScrollableListComponent,{direction:"vertical",innerRef:function(b){a._scrollbar=b}},p.React.createElement(v,null,this._renderListItems())))}}]),b}();b.a=t;var u=p.adonis.div("rfecls","RootPanelWrapper"),v=p.adonis.ul("5jg0ou","ImageList"),w=p.adonis.div("6kl290","NoResultsText")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.ControlItem,o=l.ControlsStyles.ControlItemActiveOverlay,p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f.state={isPortrait:!1,hovered:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseComponent),m(b,[{key:"componentWillReceiveProps",value:function(a){if(this.props.visible!==a.visible){var b=this.props.image.getThumbImage();b.height>b.width&&this.setState({isPortrait:!0})}}},{key:"render",value:function(){var a=this,b=this.props,c=b.image,d=b.onClick,e=b.selected,f=b.visible,g={backgroundImage:"url('"+c.getThumbUrl()+"')"},h=c.getAuthorAvatar(),i=this.context.theme.transitionDuration,j=[void 0,e&&"is-selected"].filter(function(a){return a});return l.React.createElement(q,{animated:!0,style:g,selected:e,visible:f,className:j.join(" "),onClick:d,portrait:this.state.isPortrait,onMouseEnter:function(){return a.setState({hovered:!0})},onMouseLeave:function(){return a.setState({hovered:!1})}},l.React.createElement(l.Transition,{active:this.state.hovered,enterProp:"rendered",enterDuration:1e3*i,appearProp:"visible",appearDuration:1e3*i,leaveDuration:1e3*i},l.React.createElement(u,{selected:e},h&&l.React.createElement(s,{src:h}),l.React.createElement(t,null,c.getAuthorName()))),l.React.createElement(l.Transition,{active:e,enterProp:"rendered",enterDuration:1e3*i,appearProp:"visible",appearDuration:1e3*i,leaveDuration:1e3*i},l.React.createElement(r,{selected:!0})))}}]),b}();b.a=p;var q=Object(l.adonis)(n).li("1a5mxw5",{portrait:"otbyv0"},"ListItem"),r=Object(l.adonis)(o).div("120drhm","ListItemOverlay"),s=l.adonis.img("1owxkzt","AuthorAvatar"),t=l.adonis.div("1jylqsv","AuthorName"),u=l.adonis.div("mchu36",{rendered:"2jlos",visible:"1fmxelx"},"Author")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=250,o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onInputChange"),f._onDebouncedInputChange=l.Utils.debounce(f._onDebouncedInputChange,n),f.state={searchQueryInputValue:""},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseComponent),m(b,[{key:"componentWillReceiveProps",value:function(a){this.props.searchQuery!==a.searchQuery&&this.setState({searchQueryInputValue:a.searchQuery})}},{key:"componentWillUnmount",value:function(){this._disposed=!0}},{key:"_onDebouncedInputChange",value:function(a){this._disposed||this.props.onChange&&this.props.onChange(a)}},{key:"_onInputChange",value:function(a){var b=a.target.value;this.setState({searchQueryInputValue:b}),this._onDebouncedInputChange(b)}},{key:"render",value:function(){return l.React.createElement(p,{key:"header"},l.React.createElement(q,null,l.React.createElement(r,{placeholder:this._t("pesdk.library.placeholder.search"),onLiveChange:this._onInputChange,className:void 0,value:this.state.searchQueryInputValue})))}}]),b}();b.a=o;var p=l.adonis.div("1tkmkv6","Header"),q=l.adonis.div("mz0a5q","InputContainer"),r=Object(l.adonis)(l.TextInputComponent)("py3uvl","TextInput")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),c(309)),n=c(311),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onImage","_onWebcamBack","_onWebcamActivated"),f.state.displayHeader=!0,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.CanvasControlsComponent),o(b,[{key:"_onImage",value:function(a){this.props.controls.onImage(a)}},{key:"_onWebcamBack",value:function(){this.setSharedState({webcamEnabled:!1})}},{key:"_onWebcamActivated",value:function(a){this.setSharedState({webcamEnabled:!0})}},{key:"_renderControls",value:function(){var a=this.getSharedState("webcamEnabled"),b=this.props.options.displayUploadInCanvas;return a?l.React.createElement(m.a,{onImage:this._onImage,onBack:this._onWebcamBack}):b?l.React.createElement(q,null,l.React.createElement(n.a,{large:!0,controls:this.props.controls,webcamEnabled:this.props.options.enableWebcam,onWebcamActivated:this._onWebcamActivated,onImage:this._onImage})):void 0}}]),b}();p.contextTypes=l.CanvasControlsComponent.contextTypes,b.a=p;var q=l.adonis.div("1up9ikz","LibraryUploadContainer")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(7),m=(c.n(l),c(5)),n=(c.n(m),c(310)),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onWebcamReady","_onWebcamError","_onButtonClick","_onCancelClick"),f.state={webcamReady:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.BaseComponent),o(b,[{key:"_onWebcamReady",value:function(){this.props.onReady&&this.props.onReady(),this.setState({webcamReady:!0})}},{key:"_onWebcamError",value:function(a){var b=this;m.ModalManager.instance.displayError(this._t("pesdk.common.title.error"),this._t("pesdk.editor.text.webcamUnavailableError",{error:a})).on("close",function(){return b.props.onBack()})}},{key:"_onButtonClick",value:function(a){a.preventDefault(),this._takePhoto()}},{key:"_onCancelClick",value:function(a){a.preventDefault(),
this.props.onBack&&this.props.onBack()}},{key:"_takePhoto",value:function(){var a=this;this.state.webcamReady&&this._webcam.capture().then(function(b){a.props.onImage&&a.props.onImage(b)})}},{key:"render",value:function(){var a=this;return m.React.createElement(q,null,m.React.createElement(r,null,m.React.createElement(s,{onClick:this._onCancelClick},this._t("pesdk.common.button.cancel"))),m.React.createElement(t,null,m.React.createElement(u,{innerRef:function(b){a._videoContainer=b}},m.React.createElement(n.a,{flashURL:this._getAssetPath("fallback/webcam.swf"),ref:function(b){a._webcam=b},onWebcamError:this._onWebcamError,onWebcamAvailable:this._onWebcamReady}),m.React.createElement(v,{onClick:this._onButtonClick}))))}}]),b}();b.a=p;var q=m.adonis.div("154zhv1","Container"),r=m.adonis.div("4d756t","Gradient"),s=m.adonis.div("1p4kwwq","CancelButton"),t=m.adonis.div("1kcrztx","OuterVideoContainer"),u=m.adonis.div("12pjfqx","VideoContainer"),v=m.adonis.div("1fkab7z","Button")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(33),o=c.n(n),p=c(32),q=c.n(p),r=c(5),s=(c.n(r),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),t=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).call(this,a));return c._bindAll("_onLoadedMetadata"),c.state={webcamAvailable:!1,useFlashFallback:!1},c._getUserMedia=null,c._webcamStream=null,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,r.BaseComponent),s(b,[{key:"componentDidMount",value:function(){var a=this;if(this._initGetUserMedia(),this._getUserMedia)this._getUserMedia({video:{optional:[{minWidth:320},{minWidth:640},{minWidth:1024},{minWidth:1280},{minWidth:1920},{minWidth:2560}]},audio:!1}).then(function(b){a._webcamStream=b;var c=a._videoElement;"srcObject"in c?c.srcObject=b:c.src=window.URL.createObjectURL(b)}).catch(function(b){a.props.onWebcamError&&a.props.onWebcamError(b)});else{var b=!1;window.Webcam||(window.Webcam={},b=!0),window.Webcam.flashNotify=function(c,d){switch(c){case"cameraLive":a.setState({webcamAvailable:!0},function(){a.props.onWebcamAvailable&&a.props.onWebcamAvailable()}),delete window.Webcam.flashNotify,b&&delete window.Webcam;break;case"error":a.props.onWebcamError&&a.props.onWebcamError(d),delete window.Webcam.flashNotify,b&&delete window.Webcam}}}}},{key:"componentWillUnmount",value:function(){this._disposeWebcam()}},{key:"_initGetUserMedia",value:function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(this._getUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)),!this._getUserMedia){var a=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;a&&(this._getUserMedia=function(b){return new k.a(function(c,d){return a.call(navigator,b,c,d)})})}this._getUserMedia||this.setState({useFlashFallback:!0})}},{key:"_disposeWebcam",value:function(){if(this._webcamStream){var a=this._webcamStream,b=a.getTracks()[0];b?b.stop():a.stop&&a.stop()}else this._flashWebcam&&this._flashWebcam._releaseCamera()}},{key:"capture",value:function(){var a=this;return this.state.webcamAvailable?this._videoElement&&!this._flashWebcam?new k.a(function(b,c){var d=a._videoElement;if(0===d.readyState)c(new Error("Webcam video not available"));else{var e=document.createElement("canvas");e.width=d.videoWidth,e.height=d.videoHeight,e.getContext("2d").drawImage(d,0,0);var f=new window.Image;f.addEventListener("load",function(){b(f)}),f.src=e.toDataURL("image/jpeg")}}):this._flashWebcam?new k.a(function(b,c){var d=a._flashWebcam._snap(),e=new Image;e.onload=function(){b(e)},e.src="data:image/jpeg;base64,"+d}):k.a.reject(new Error("Webcam video not available")):k.a.reject(new Error("Webcam video not available"))}},{key:"_getFlashFallbackComponent",value:function(){var a=this,b=this._container,c=b.offsetWidth,d=b.offsetHeight,e=640,f=480;d>c?(e=c||640,f=.75*c):(e=4/3*d,f=d||480);var g="width="+e+"&height="+f+"&dest_width=1024&dest_height=768&jpeg_quality=100&fps=24";return q.a.createElement("object",{classID:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-shockwave-flash",width:e,height:f,ref:function(b){a._flashWebcam=b},align:"middle"},q.a.createElement("param",{name:"wmode",value:"transparent"}),q.a.createElement("param",{name:"allowScriptAccess",value:"always"}),q.a.createElement("param",{name:"allowFullScreen",value:"false"}),q.a.createElement("param",{name:"movie",value:this.props.flashURL}),q.a.createElement("param",{name:"loop",value:"false"}),q.a.createElement("param",{name:"menu",value:"false"}),q.a.createElement("param",{name:"quality",value:"best"}),q.a.createElement("param",{name:"bgcolor",value:"#ffffff"}),q.a.createElement("param",{name:"flashvars",value:g}))}},{key:"_onLoadedMetadata",value:function(){var a=this;this.setState({webcamAvailable:!0},function(){a.props.onWebcamAvailable&&a.props.onWebcamAvailable()})}},{key:"render",value:function(){var a=this,b=this.state.useFlashFallback?this._getFlashFallbackComponent():q.a.createElement(u,{autoPlay:!0,visible:this.state.webcamAvailable&&!this.state.useFlashFallback,innerRef:function(b){a._videoElement=b},onLoadedMetadata:this._onLoadedMetadata});return q.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"},ref:function(b){a._container=b}},b)}}]),b}();t.propTypes={flashURL:o.a.string,onWebcamAvailable:o.a.func,onWebcamError:o.a.func},b.a=t;var u=r.adonis.video("2iod8f",{visible:"jsuk9w"},"Video")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),c(135)),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=l.ControlsStyles.PlainControlItem,p=l.ControlsStyles.PlainControlItemBackground,q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"render",value:function(){var a={backgroundImage:"url('"+this._getAssetPath("editor/controls/library/webcam.png",!0)+"')"};return l.React.createElement(r,null,l.React.createElement(s,null,l.React.createElement(v,null,l.React.createElement(t,{onClick:this._onDropZoneClick,onDragEnter:this._onDropZoneDragEnter,onDragOver:this._onDropZoneDragOver,onDragLeave:this._onDropZoneDragLeave,onDrop:this._onDropZoneDrop,hovered:this.state.dropZoneHovered},l.React.createElement(l.InvisibleUploadComponent,{ref:"upload",onNewFile:this._onNewFile}),this.state.dropZoneHovered?this._t("pesdk.library.button.fileDropZoneHovered"):this._t("pesdk.library.button.fileDropZone"))),!this.state.dropZoneHovered&&this.props.webcamEnabled&&l.React.createElement(v,null,l.React.createElement(u,{style:a,className:void 0,onClick:this._onWebcamClick}))))}}]),b}();b.a=q;var r=Object(l.adonis)(o).div("1xesje3","Container"),s=Object(l.adonis)(p).div("z914p5","Background"),t=l.adonis.div("yw0i2r",{hovered:"1xndhux"},"DropZone"),u=l.adonis.div("1jg5y1q","WebcamButton"),v=l.adonis.div("15u7gri","Row")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=c.n(l),n=c(313),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseControls),o(b,null,[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var b=a.getOrCreate("adjustments");return{brightness:b.getBrightness(),saturation:b.getSaturation(),contrast:b.getContrast(),gamma:b.getGamma(),exposure:b.getExposure(),shadows:b.getShadows(),highlights:b.getHighlights(),clarity:b.getClarity(),whites:b.getWhites(),blacks:b.getBlacks(),temperature:b.getTemperature(),setBrightness:function(a){b.setBrightness(a)},setSaturation:function(a){b.setSaturation(a)},setContrast:function(a){b.setContrast(a)},setGamma:function(a){b.setGamma(a)},setExposure:function(a){b.setExposure(a)},setShadow:function(a){b.setShadow(a)},setHighlights:function(a){b.setHighlights(a)},setClarity:function(a){b.setClarity(a)},setWhites:function(a){b.setWhites(a)},setBlacks:function(a){b.setBlacks(a)},setTemperature:function(a){b.setTemperature(a)},reset:function(){b.resetOptions()},setOperationOptions:function(a){b.set(a)}}}},{key:"isEnabled",value:function(a){return a.isToolAllowed("adjustment")&&a.isToolEnabled("adjustments")}}]),b}();p.clickAtPosition=l.BaseControls.clickAtPosition,p.getPreloadAssets=l.BaseControls.getPreloadAssets,p.identifier="adjustments",p.controlsComponent=n.a,p.canvasControlsComponent=l.BaseControls.canvasControlsComponent,p.iconPath="editor/controls/adjustments/icon.png",p.activeIconPath="editor/controls/adjustments/icon-active.png",p.requiredOperations=["adjustments"],p.defaultOptions={availableAdjustments:null},p.updatableOperations=["adjustments"],p.switchToDefaultControlsOnRemoval=!1,p.SECTIONS=[{identifier:"basics",items:["brightness","saturation","contrast","gamma"]},{identifier:"refinements",items:["clarity","exposure","shadows","highlights","whites","blacks","temperature"]}],m.a.Controls.AdjustmentsControls=p,b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),c(314)),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=l.GroupedControlsStyles.ControlGroupList,p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onResetDefaultClick"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.ControlsComponent),n(b,[{key:"_isAdjustmentAvailable",value:function(a){var b=this.props.options.availableAdjustments;return null===b||-1!==b.indexOf(a)}},{key:"_onResetDefaultClick",value:function(){this.sharedState.reset(),this.props.controls.addLocalHistorySnapshot("reset",!0)}},{key:"_onValueChange",value:function(a,b){this.sharedState.setOperationOptions(function(a,b,c){return b in a?e()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}({},a,b)),this.props.controls.addLocalHistorySnapshot(a,!0)}},{key:"_renderAdjustmentsControls",value:function(){var a=this,b=function(b){return b.filter(function(b){return a._isAdjustmentAvailable(b)}).map(function(b){return a._makeItem(b)})};return this.props.controls.constructor.SECTIONS.filter(function(b){return b.items.filter(function(b){return a._isAdjustmentAvailable(b)}).length>0}).map(function(c){return l.React.createElement(l.CollapseSectionComponent,{key:c.identifier,title:a._t("pesdk.adjustments.title."+c.identifier),alwaysExpanded:!0},l.React.createElement(r,{className:void 0+c.identifier},b(c.items)))})}},{key:"_makeItem",value:function(a){var b=this.sharedState[a];return l.React.createElement(m.a,{item:a,value:b,onValueChange:this._onValueChange.bind(this,a),className:void 0,key:a})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var a=this;return l.React.createElement(l.ScrollableListComponent,{direction:"vertical",innerListRef:function(b){a._list=b},innerRef:function(b){a._scrollbar=b}},l.React.createElement(q,null,l.React.createElement(s,null,l.React.createElement(l.ButtonComponent,{title:this._t("pesdk.adjustments.button.reset"),className:void 0,onClick:this._onResetDefaultClick})),this._renderAdjustmentsControls()))}}]),b}();p.contextTypes=l.ControlsComponent.contextTypes,p.RootElement=l.ControlsComponent.RootElement,b.a=p;var q=Object(l.adonis)(o).ul("x32ss4","SectionList"),r=l.adonis.ul("gz4y54","SectionItemList"),s=l.adonis.div("7abnmv","BottomSection")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(7),m=c.n(l),n=c(5),o=(c.n(n),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),p=m.a.Operations.AdjustmentsOperation,q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onValueChange"),f._option=p.prototype.availableOptions[f.props.item],f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.SharedStateComponent),o(b,[{key:"shouldComponentUpdate",value:function(a){return a.value!==this.props.value}},{key:"_onValueChange",value:function(a){var b=this._option,c=b.minValue,d=b.midValue,e=b.maxValue;a=a<0?d+(d-c)*a/100:d+(e-d)*a/100,this.props.onBeforeValueChange&&this.props.onBeforeValueChange(a),this.context.editor.render(),this.setState({value:a}),this.props.onValueChange&&this.props.onValueChange(a)}},{key:"render",value:function(){var a=this._option,b=a.minValue,c=a.midValue,d=a.maxValue,e=this.props.value,f=100*(e<=c?(e-b)/(c-b)-1:(e-c)/(d-c));return e===b&&(f=-100),n.React.createElement(n.SliderControlComponent,{key:this.props.item,label:this._t("pesdk.adjustments.text."+this.props.item),minValue:-100,maxValue:100,value:parseInt(f),onSliderValueChange:this._onValueChange,onValueChange:this._onValueChange,className:this.props.className,middleDot:!0})}}]),b}();q.contextTypes=n.SharedStateComponent.contextTypes,b.a=q},function(a,b,c){var d=c(35),e=c.n(d),f=c(9),g=c.n(f),h=c(0),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(7),q=(c.n(p),c(5)),r=c.n(q),s=c(316),t=c(318),u=g.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},v=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),i()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),w=(p.Operations.SpriteOperation?p.Operations.SpriteOperation:{}).BrushSprite,x=function(a){function b(a,c,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var e=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||o()(b)).call(this,a,c,d));return e._onOperationRemoved=e._onOperationRemoved.bind(e),e}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.BaseControls),v(b,[{key:"_onEnter",value:function(){var a=this,b=this.context.editor,c=b.operations.getOrCreate("sprite"),d=c.createBrush();c.addSprite(d);var e=this.getGlobalToolState(),f=e||{brushColor:p.Color.WHITE,brushSize:.1,brushHardness:50};b.zoom.auto(!1,!1,function(){b.features.disable("zoom","drag");var c=b.getOutputDimensions(),d=Math.max(.05*c.min(),1);a._options.widthPresets&&a._options.widthPresets.length>0&&(d=a._options.sizePresets[0]),a.sharedState.set({brushSize:e?e.brushSize:Math.round(d)})}),this.sharedState.set(u({},f,{operation:c,brushSprite:d}))}},{key:"_onLeave",value:function(){var a=this.context.editor,b=a.operations.get("sprite");b&&[].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return e()(a)}(b.getSprites())).forEach(function(a){a instanceof w&&a.getPaths().length<=0&&b.removeSprite(a)}),this.saveBrushSettings(),a.features.enable("zoom","drag"),a.render()}},{key:"_onOperationRemoved",value:function(a){if(a===this.sharedState.get("operation")){var b=this.context.editor.operations.getOrCreate("sprite"),c=b.createBrush();b.addSprite(c),this.sharedState.set({operation:b,brushSprite:c})}}},{key:"saveBrushSettings",value:function(){this.setGlobalToolState({brushColor:this.sharedState.get("brushColor"),brushSize:this.sharedState.get("brushSize"),brushHardness:this.sharedState.get("brushHardness")})}}],[{key:"mapOperationsToSharedState",value:function(a){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],{operation:a.getOrCreate("sprite")}}},{key:"isEnabled",value:function(a){return a.isToolAllowed("brush")&&a.isToolEnabled("brush")}}]),b}();x.clickAtPosition=q.BaseControls.clickAtPosition,x.getPreloadAssets=q.BaseControls.getPreloadAssets,x.identifier="brush",x.controlsComponent=s.a,x.canvasControlsComponent=t.a,x.iconPath="editor/controls/brush/icon.png",x.activeIconPath="editor/controls/brush/icon-active.png",x.requiredOperations=["sprite"],x.defaultOptions={brushes:[],replaceBrushes:!1,availableBrushes:null},x.updatableOperations=["sprite"],x.switchToDefaultControlsOnRemoval=!1,r.a.Controls.BrushControls=x,b.a=x},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=n()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(l.a?l()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(6),j=c.n(i),k=c(2),l=c.n(k),m=c(3),n=c.n(m),o=c(8),p=c.n(o),q=c(1),r=c.n(q),s=c(7),t=(c.n(s),c(5)),u=(c.n(t),c(317)),v=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),w=void 0;s.Operations.SpriteOperation&&(w=s.Operations.SpriteOperation.BrushSprite.Brush);var x=t.GroupedControlsStyles.ControlGroupTitle,y=t.GroupedControlsStyles.ControlGroup,z=function(a){function b(){var a;d(this,b);for(var c=arguments.length,f=Array(c),g=0;g<c;g++)f[g]=arguments[g];var i,j,k,l=e(this,(a=b.__proto__||r()(b)).call.apply(a,[this].concat(f)));return l._bindAll("_onBrushColorChanged","_onBrushHardnessChanged","_onBrushWidthChanged","_onOperationUpdated"),l._events=(i={},j=t.Constants.EVENTS.OPERATION_UPDATED,k=l._onOperationUpdated,j in i?h()(i,j,{value:k,enumerable:!0,configurable:!0,writable:!0}):i[j]=k,i),l._initBrushManager(),l}return f(b,t.ControlsComponent),v(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=j()(b,c);if(void 0===e){var f=r()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||r()(b.prototype),"componentDidMount",this).call(this),this._onBrushSelect(this._brushManager.getBrushes()[0])}},{key:"_initBrushManager",value:function(){this._brushManager=new t.BrushManager(this.context.ui,this.props.options)}},{key:"_onBrushColorChanged",value:function(a){var b=this.getSharedState("brushInstance").clone();b.setColor(a.clone()),this.setSharedState({brushInstance:b,brushColor:a.clone()})}},{key:"_onBrushHardnessChanged",value:function(a){var b=this.getSharedState("brushInstance").clone();b.setHardness(a/100),this.setSharedState({brushInstance:b,brushHardness:Math.round(a)})}},{key:"sharedStateDidChange",value:function(a,b){a.brushSize!==b.brushSize&&this._onBrushWidthChanged(b.brushSize)}},{key:"_onBrushWidthChanged",value:function(a){var b=this.context.editor.getOutputDimensions(),c=this.getSharedState("brushInstance").clone();c.setSize(a/b.min()),this.setSharedState({brushInstance:c,brushSize:Math.round(a)})}},{key:"_onOperationUpdated",value:function(a){var b=this.context.editor;if(a===this.getSharedState("operation")){var c=this.getSharedState("brushSprite");if(c){var d=a.getSprites().filter(function(a){return a.getId()===c.getId()})[0];this.setSharedState({brushSprite:d})}b.render()}}},{key:"_onBrushSelect",value:function(a){var b=this,c=this.context.editor.getOutputDimensions(),g=this.getSharedState("brushSize")/c.min(),h=this.getSharedState("brushHardness")/100,i={size:g,color:this.getSharedState("brushColor")},j=void 0;if(a.prototype&&a.prototype instanceof w)j=new a(i);else{var k=s.Utils.extend({},a);delete k.image;var l=function(a){function b(){return d(this,b),e(this,(b.__proto__||r()(b)).apply(this,arguments))}return f(b,w),b}();l.identifier=a.identifier,j=new l(s.Utils.extend({},k,i))}j.hasOption("hardness")&&j.setHardness(h),this._loadBrush(a,j).then(function(){b.setSharedState({brushInstance:j,brush:a})})}},{key:"_loadBrush",value:function(a,b){var c=this;return new p.a(function(d,e){if(a.constructor===Object){var f=new window.Image;f.addEventListener("load",function(){b.setImage(f),d()}),f.addEventListener("error",function(){e(new Error("Failed to load image at "+f.src))}),f.crossOrigin=c.context.editor.getCrossOrigin(),f.src=c._getAssetPath(a.image)}else d()})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderBrushItems",value:function(){var a=this,b=this._brushManager.getBrushes();return b.length<=1?null:b.map(function(b){return t.React.createElement(u.a,{key:b.identifier,brush:b,selected:a.getSharedState("brush")===b,onClick:a._onBrushSelect.bind(a,b)})})}},{key:"_renderContent",value:function(){var a=this,b=this.getSharedState("brushInstance");return t.React.createElement(t.ScrollableListComponent,{direction:"vertical",innerListRef:function(b){a._list=b},innerRef:function(b){a._scrollbar=b}},t.React.createElement(B,null,t.React.createElement(C,null,this._t("pesdk.brush.title.settings")),t.React.createElement(D,null,t.React.createElement(t.ColorSelectionComponent,{value:this.getSharedState("brushColor"),onChange:this._onBrushColorChanged})),t.React.createElement(A,{label:this._t("pesdk.brush.title.width"),minValue:1,maxValue:100,value:this.getSharedState("brushSize"),onSliderValueChange:this._onBrushWidthChanged,onValueChange:this._onBrushWidthChanged,className:void 0}),t.React.createElement(A,{label:this._t("pesdk.brush.title.hardness"),minValue:0,maxValue:100,disabled:!(b&&b.hasOption("hardness")),value:this.getSharedState("brushHardness"),onSliderValueChange:this._onBrushHardnessChanged,onValueChange:this._onBrushHardnessChanged})),t.React.createElement(E,null,t.React.createElement(t.ScrollbarComponent,{direction:"vertical"},t.React.createElement(F,null,this._renderBrushItems()))))}}]),b}();z.contextTypes=t.ControlsComponent.contextTypes,z.RootElement=t.ControlsComponent.RootElement,b.a=z;var A=Object(t.adonis)(t.SliderControlComponent)("6vpx1b","SliderControl"),B=Object(t.adonis)(y).div("r92vc7","Settings"),C=Object(t.adonis)(x).div("120drhm","SettingsTitle"),D=t.adonis.div("yzsuxp","ColorSelection"),E=t.adonis.div("16dil83","Brushes"),F=t.adonis.ul("1lb1mg4","BrushList")},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=n()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(l.a?l()(a,b):a.__proto__=b)}var g=c(0),h=c.n(g),i=c(6),j=c.n(i),k=c(2),l=c.n(k),m=c(3),n=c.n(m),o=c(8),p=c.n(o),q=c(1),r=c.n(q),s=c(7),t=(c.n(s),c(5)),u=(c.n(t),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),h()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),v=t.ControlsStyles.PlainControlItemBackground,w=s.Operations.SpriteOperation,x=void 0,y=void 0;w&&(x=w.BrushSprite.Brush,y=w.BrushSprite.Path);var z=s.Math.Vector2,A=function(a){function b(){return d(this,b),e(this,(b.__proto__||r()(b)).apply(this,arguments))}return f(b,t.BaseComponent),u(b,[{key:"_loadBrush",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.brush;return new p.a(function(c,d){if(b.constructor===Object){var e=new window.Image;e.addEventListener("load",function(){a._brush.setImage(e),c()}),e.addEventListener("error",function(){d(new Error("Failed to load image at "+e.src))}),e.crossOrigin=a.context.editor.getCrossOrigin(),e.src=a._getAssetPath(b.image)}else c()})}},{key:"_drawBrush",value:function(){var a=new y(null,{brush:this._brush},this._canvas);a.addControlPoint(new z(.1,.5)),a.addControlPoint(new z(.9,.5)),a.render(new z(this._canvas.width,this._canvas.height))}},{key:"_instantiateBrush",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.brush,b={color:s.Color.WHITE,size:.25};if(a.prototype&&a.prototype instanceof x){var c=a;this._brush=new c(b)}else{var g=s.Utils.extend({},a);delete g.image;var h=function(a){function b(){return d(this,b),e(this,(b.__proto__||r()(b)).apply(this,arguments))}return f(b,x),b}();h.identifier=a.identifier,this._brush=new h(s.Utils.extend({},g,b))}}},{key:"componentDidMount",value:function(){var a=this;(function a(b,c,d){null===b&&(b=Function.prototype);var e=j()(b,c);if(void 0===e){var f=r()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0})(b.prototype.__proto__||r()(b.prototype),"componentDidMount",this).call(this),this._instantiateBrush();var c=this._canvas,d=c.offsetWidth,e=c.offsetHeight;this._canvas.width=d,this._canvas.height=e,this._loadBrush().then(function(b){a._drawBrush()})}},{key:"render",value:function(){var a=this;return t.React.createElement(B,{onClick:this.props.onClick,selected:this.props.selected,className:void 0,"data-selected":this.props.selected},t.React.createElement(C,{innerRef:function(b){a._canvas=b}}))}}]),b}();b.a=A;var B=Object(t.adonis)(v).li("8908c2",{selected:"120drhm"},"BrushListItem"),C=t.adonis.canvas("1ssoezr","Canvas")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=(c.n(o),c(55)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=(n.Operations.SpriteOperation?n.Operations.SpriteOperation:{}).BrushSprite,s=n.Math.Vector2,t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onMouseEnter","_onMouseLeave","_onMouseMove","_onDrawStart","_onDraw","_onDrawStop"),f.state=n.Utils.extend(f.state,{cursorPosition:new s(0,0),canvasClickDisabled:!0}),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.a),q(b,[{key:"_selectNextSprite",value:function(){}},{key:"_onDrawStart",value:function(a){var b=this.context.editor.getOutputDimensions();this._initialDrawPosition=a.clone();var c=this.getSharedState("brushSprite"),d=this.getSharedState("brushInstance"),e=this.getSharedState("operation");c||(c=e.createBrush(),e.addSprite(c),this.setSharedState({brushSprite:c})),this._currentPath=c.createPath(d),this._currentPath.addControlPoint(a.clone().divide(b)),this._lastDrawPosition=this._initialDrawPosition.clone(),this._lastCursorPosition=this._initialDrawPosition.clone()}},{key:"_onDraw",value:function(a,b,c){var d=this.context.editor,e=d.getOutputDimensions(),f=d.getOutputTextureDimensions(),g=this._lastCursorPosition.clone().add(c),h=d.zoom.level,i=this.getSharedState("brushSize");g.clone().subtract(this._lastDrawPosition).abs().len()/h>=i/10&&(this._currentPath.addControlPoint(g.clone().divide(e)),this.getSharedState("brushSprite").render(f),this._lastDrawPosition.copy(g)),this._lastCursorPosition.copy(g)}},{key:"_onDrawStop",value:function(){this._currentPath.setClosed(!0);var a=this.context.editor.getOutputTextureDimensions();this.getSharedState("brushSprite").render(a),this.props.controls.addLocalHistorySnapshot(),this._currentPath=null}},{key:"_onMouseEnter",value:function(){this.setState({cursorVisible:!0})}},{key:"_onMouseLeave",value:function(){this.setState({cursorVisible:!1})}},{key:"_onMouseMove",value:function(a){var b=o.Utils.getEventPosition(a),c=this._innerContainer.getBoundingClientRect();b.subtract(c.left,c.top),
this.setState({cursorPosition:b})}},{key:"_getPropsForSprite",value:function(a){var c=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"_getPropsForSprite",this).call(this,a);return a instanceof r&&(c.hideContent=!1),c}},{key:"_getCursorStyle",value:function(){return{width:this.getSharedState("brushSize")+8,height:this.getSharedState("brushSize")+8,left:this.state.cursorPosition.x,top:this.state.cursorPosition.y,marginLeft:-.5*(this.getSharedState("brushSize")+8),marginTop:-.5*(this.getSharedState("brushSize")+8)}}},{key:"_renderOverlayControls",value:function(){return o.React.createElement(o.DraggableComponent,{onStart:this._onDrawStart,onDrag:this._onDraw,onStop:this._onDrawStop},o.React.createElement(u,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseMove:this._onMouseMove,className:void 0},o.React.createElement(v,{style:this._getCursorStyle(),visible:this.state.cursorVisible})))}}]),b}();t.contextTypes=p.a.contextTypes,b.a=t;var u=o.adonis.div("1sc5z35","BrushCanvasControls"),v=o.adonis.div("y4v90o",{visible:"2jlos"},"Cursor")},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(6),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(5),q=(c.n(p),c(56)),r=c(27),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f.state={renderAsSVG:!1,svgAttributes:{}},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),t(b,[{key:"componentDidMount",value:function(){var a=this;if(function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||o()(b.prototype),"componentDidMount",this).call(this),this.props.hideContent)return null;var c=this.props.sprite;c.getImage().src.match(/\w+\.svg(?=\?|$)/i)&&"none"!==c.getTintMode()&&r.a.loadXHR(c.getImage().src,"image/svg+xml").then(function(b){for(var c=b.responseXML.documentElement.attributes,d={},e=0;e<c.length;e++){var f=c[e],g=f.name,h=f.value;"xmlns:xlink"===g&&(g="xmlnsXlink"),d[g]=h}var i=b.responseText.match(/<svg\b[^>]*>([\s\S]*?)<\/svg>/im)[1];i=i.replace(/\s+?fill=["'].*?["']/gi,""),a.setState({renderAsSVG:!0,svgContent:i,svgAttributes:d})})}},{key:"_onBeforeScale",value:function(){var a=this.props.sprite;this._initialOptions={dimensions:a.getDimensions().clone()}}},{key:"_onScale",value:function(a){var b=this.context.editor,c=this._initialOptions.dimensions;this.props.sprite.set({dimensions:c.clone().multiply(a/b.zoom.level)}),this.forceUpdate(),b.render()}},{key:"_getSpriteDimensions",value:function(){var a=this.context.editor;return this.props.sprite.getDimensions().clone().multiply(a.zoom.level)}},{key:"_getContainerStyle",value:function(){var a=this.context.editor,b=a.getOutputDimensions(),c=this.props.sprite,d=c.getPosition().clone().multiply(b),e="rotateZ("+(180*c.getRotation()/Math.PI).toFixed(2)+"deg)",f=c.getDimensions().clone().multiply(a.zoom.level);return{width:f.x,height:f.y,left:d.x,top:d.y,marginLeft:-.5*f.x,marginTop:-.5*f.y,transform:e,MozTransform:e,msTransform:e,WebkitTransform:e,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}}},{key:"_getContentStyle",value:function(){var a=this.props.sprite,b="rotateY("+(a.getFlipHorizontally()?180:0)+"deg) rotateX("+(a.getFlipVertically()?180:0)+"deg)",c={opacity:a.getAlpha(),transform:b,MozTransform:b,msTransform:b,WebkitTransform:b};return this.state.renderAsSVG&&(c.fill=a.getTintColor().toRGBA()),c}},{key:"_renderContent",value:function(){if(this.props.hideContent)return null;var a=this.props.sprite,b=this.state.svgAttributes;return this.state.renderAsSVG?React.createElement(w,s({style:this._getContentStyle(),dangerouslySetInnerHTML:{__html:this.state.svgContent}},b)):React.createElement(v,{src:a.getImage().src,style:this._getContentStyle()})}}]),b}();u.contextTypes=q.a.contextTypes,u.MIN_WIDTH=q.a.MIN_WIDTH,b.a=u;var v=p.adonis.img("1ssoezr","Image"),w=p.adonis.svg("1ssoezr","SVGImage")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=(c.n(o),c(56)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},s=n.Math.Vector2,t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._onItemTouchStart=function(){f._hasTouchStarted||(f._hasTouchStarted||(f._hasTouchStarted=!0,f._touchCount=0),f._touchTimeout=setTimeout(function(){f._hasTouchStarted=!1,f._touchCount=0},300))},f._onItemTouchEnd=function(){f._hasTouchStarted&&++f._touchCount>=2&&(clearTimeout(f._touchTimeout),f._hasTouchStarted=!1,f._touchCount=0,f.props.selected&&f.enterEditMode())},f._bindAll("_onTextChange","_onBlur","_onItemDoubleClick","_onWidthDrag","_onWidthDragStop"),f.state={editing:!1,updateBecauseIESucks:!1},f._hasTouchStarted=!1,f._touchCount=0,f._touchTimeout=null,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,p.a),q(b,[{key:"_isDraggingDisabled",value:function(){return r(b.prototype.__proto__||m()(b.prototype),"_isDraggingDisabled",this).call(this)||this.state.editing}},{key:"enterEditMode",value:function(){var a=this,b=this.context.editor,c=this.props.sprite;c.setVisible(!1),b.render(),this.setState({editing:!0},function(){c._edited||(c.setText(""),a._textField.value="",c._edited=!0,a.forceUpdate()),a._textField.focus(),a._textField.select()})}},{key:"leaveEditMode",value:function(){var a=this.context.editor;this.props.sprite.setVisible(!0),a.render(),this.setState({editing:!1})}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"_onTakeToFront",value:function(){var a;this.leaveEditMode();for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];(a=r(b.prototype.__proto__||m()(b.prototype),"_onTakeToFront",this)).call.apply(a,[this].concat(d))}},{key:"_onFlipHorizontally",value:function(){var a;this.leaveEditMode();for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];(a=r(b.prototype.__proto__||m()(b.prototype),"_onFlipHorizontally",this)).call.apply(a,[this].concat(d))}},{key:"_onDuplicate",value:function(){var a;this.leaveEditMode();for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];(a=r(b.prototype.__proto__||m()(b.prototype),"_onDuplicate",this)).call.apply(a,[this].concat(d))}},{key:"_onSpriteUpdate",value:function(a,c){var d=this;o.Utils.Browser.isIElte(10)&&c.alignment&&a.getAlignment()!==c.alignment&&this.setState({updateBecauseIESucks:!0},function(){Object(o.requestAnimationFrame)(function(){d.setState({updateBecauseIESucks:!1})})}),r(b.prototype.__proto__||m()(b.prototype),"_onSpriteUpdate",this).call(this)}},{key:"_onWidthDragStart",value:function(a,b,c){var d=this.context.editor,e=this.props.sprite,f=e.getAnchor();this._imageBoundingBox=this.props.canvasControls.getImageBoundingRect(),this._containerOffset=this.props.canvasControls.getContainerOffset();var g=this._getAbsoluteSpritePosition().add(this._imageBoundingBox.x,this._imageBoundingBox.y),h=e.getDimensions(d.getSDK(),d.getOutputDimensions()),i=new s(h.width,h.height),j=g.clone().subtract(i.clone().multiply(f)).add(i.clone().multiply(.5)).round(),k=c.clone().subtract(this._containerOffset).subtract(j);this._initialScaleSettings={maxWidth:e.getMaxWidth(),mouseDistanceFromCenter:k},this.props.onBeforeChange&&this.props.onBeforeChange(),this.props.onCanvasClickDisabled&&this.props.onCanvasClickDisabled()}},{key:"_onWidthDrag",value:function(a){var b=this.props.sprite,c=b.getRotation(),d=this._initialScaleSettings.mouseDistanceFromCenter.clone().add(a),e=Math.cos(c),f=Math.sin(c),g=Math.max(Math.abs(2*(d.x*e+d.y*f)),50)/this._imageBoundingBox.width;b.setMaxWidth(g),this.context.editor.render()}},{key:"_onWidthDragStop",value:function(){this.props.onAfterChange&&this.props.onAfterChange(),this.props.onCanvasClickEnabled&&this.props.onCanvasClickEnabled()}},{key:"_onBlur",value:function(){this.leaveEditMode();var a=this.props.sprite;a&&""===a.getText()&&(a.setText(this._t("pesdk.text.placeholder.defaultText")),a._edited=!1)}},{key:"_onTextChange",value:function(a){this.props.sprite.setText(a.target.value),this.forceUpdate()}},{key:"_onItemDoubleClick",value:function(){this.props.selected&&this.enterEditMode()}},{key:"_onBeforeScale",value:function(){var a=this.props.sprite;this._initialOptions={maxWidth:a.getMaxWidth(),fontSize:a.getFontSize()}}},{key:"_onScale",value:function(a){var b=this._initialOptions,c=b.maxWidth,d=b.fontSize,e=this.props.sprite;e.set({maxWidth:c*a,fontSize:d*a}),this.context.mediator.emit(o.Constants.EVENTS.TEXT_SCALED,e),this.forceUpdate()}},{key:"_getContainerStyle",value:function(){var a=this.context.editor,b=a.getOutputDimensions(),c=this.props.sprite,d=c.getPosition().clone().multiply(b),e="rotateZ("+(180*c.getRotation()/Math.PI).toFixed(2)+"deg)",f=c.getMaxWidth()*b.x,g=c.getDimensions(a.getSDK(),b).y;return{width:f,height:g,left:d.x,top:d.y,marginLeft:-.5*f,marginTop:-.5*g,transform:e,MozTransform:e,msTransform:e,WebkitTransform:e,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}}},{key:"_getTextStyle",value:function(){var a=this.context.editor,b=this.props.sprite,c=a.getSDK(),d=a.getOutputDimensions(),e=b.getDOMStyle(c,d),f=this._getAbsoluteSpritePosition(),g=b.getDimensions(c,d);return e.height=Math.min(g.y,d.y-f.y+g.y/2),e}},{key:"_renderControls",value:function(){var a=this,c=r(b.prototype.__proto__||m()(b.prototype),"_renderControls",this).call(this);return["left","right"].forEach(function(b){var d="width-"+b,f=function(a,b,c){return b in a?e()(a,b,{value:!0,enumerable:!0,configurable:!0,writable:!0}):a[b]=!0,a}({},b);c.push(o.React.createElement(o.DraggableComponent,{key:d,onStart:a._onWidthDragStart.bind(a,b),onDrag:a._onWidthDrag,onStop:a._onWidthDragStop},o.React.createElement(w,f)))}),c}},{key:"_getItemControlsProps",value:function(){return{onDoubleClick:this._onItemDoubleClick,onTouchStart:this._onItemTouchStart,onTouchEnd:this._onItemTouchEnd}}},{key:"_renderContent",value:function(){var a=this,b=this.props,c=b.sprite,d=b.selected,e=this.state,f=e.editing,g=e.updateBecauseIESucks,h=[];return this.props.hideContent&&!this.state.editing||h.push(o.React.createElement(u,{key:"text-field",editing:f,innerRef:function(b){a._textField=b},style:this._getTextStyle(),defaultValue:c.getText(),onBlur:this._onBlur,onChange:this._onTextChange,updateBecauseIESucks:g})),this.state.editing||h.push(o.React.createElement(v,{key:"disabled-overlay",className:void 0,selected:d})),h}}]),b}();t.contextTypes=p.a.contextTypes,t.MIN_WIDTH=100,b.a=t;var u=o.adonis.textarea("12u5t8c",{updateBecauseIESucks:"ckktkq",editing:"15kzu1c"},"TextField"),v=o.adonis.div("8gacw5","DisabledOverlay"),w=o.adonis.div("jqmmm4",{left:"tr97e1",right:"1llojum"},"WidthControl")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(56)),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),p(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this);var a=this.props.sprite.getCanvas();this._brush&&this._appendCanvas(a)}},{key:"componentWillReceiveProps",value:function(a){if(a.sprite!==this.props.sprite){var b=this.props.sprite.getCanvas();if(b.parentNode.removeChild(b),this._brush){var c=a.sprite.getCanvas();this._appendCanvas(c)}}}},{key:"_appendCanvas",value:function(a){a.style.width="100%",a.style.height="100%",this._brush.appendChild(a)}},{key:"_renderOverlayControls",value:function(){return null}},{key:"render",value:function(){var a=this;return this.props.hideContent?null:n.React.createElement(r,{innerRef:function(b){a._brush=b}})}}]),b}();b.a=q;var r=n.adonis.div("8gacw5","BrushItem")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(56),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f.CONTROLS_MARGIN=0,f._onItemDoubleClick=function(){return f.props.canvasControls.props.controls.editText()},f._onItemTouchStart=function(){f._hasTouchStarted||(f._hasTouchStarted||(f._hasTouchStarted=!0,f._touchCount=0),f._touchTimeout=setTimeout(function(){f._hasTouchStarted=!1,f._touchCount=0},300))},f._onItemTouchEnd=function(){if(f._hasTouchStarted){var a=f.props.canvasControls.props.controls;++f._touchCount>=2&&(clearTimeout(f._touchTimeout),f._hasTouchStarted=!1,f._touchCount=0,a.editText())}},f.state={},f._hasTouchStarted=!1,f._touchCount=0,f._touchTimeout=null,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.a),o(b,[{key:"_onBeforeScale",value:function(){var a=this.props.sprite;this._initialOptions={width:a.getWidth()}}},{key:"_onScale",value:function(a){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"_onScale",this).apply(this,arguments);var c=this.context.editor,d=this._initialOptions.width;this.props.sprite.set({width:d*(a/c.zoom.level)}),this.forceUpdate(),c.render()}},{key:"_getSpriteDimensions",value:function(){var a=this.context.editor;return this.props.sprite.getDimensions().clone().multiply(a.zoom.level)}},{key:"_getContainerStyle",value:function(){var a=this.context.editor,b=a.getOutputDimensions(),c=this.props.sprite,d=c.getPosition().clone().multiply(b),e="translate(-50%, -50%) rotateZ("+(180*c.getRotation()/Math.PI).toFixed(2)+"deg)",f=c.getDimensions().clone().multiply(a.zoom.level);return{width:f.x+2*this.CONTROLS_MARGIN,height:f.y+2*this.CONTROLS_MARGIN,left:d.x,top:d.y,transform:e,MozTransform:e,msTransform:e,WebkitTransform:e,transformOrigin:"50% 50%",MozTransformOrigin:"50% 50%",msTransformOrigin:"50% 50%",WebkitTransformOrigin:"50% 50%"}}},{key:"_getContentStyle",value:function(){}},{key:"_getItemControlsProps",value:function(){return{onDoubleClick:this._onItemDoubleClick,onTouchStart:this._onItemTouchStart,onTouchEnd:this._onItemTouchEnd}}},{key:"_renderContent",value:function(){return null}}]),b}();p.contextTypes=n.a.contextTypes,p.MIN_WIDTH=n.a.MIN_WIDTH,b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(7),m=(c.n(l),c(5)),n=c.n(m),o=c(324),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.BaseControls),p(b,null,[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var b=a.getOrCreate("filter");return{intensity:b?100*b.getIntensity():100,identifier:b?b.getIdentifier():null,filter:b?b.filter:null,setIntensity:function(a){b&&b.setIntensity(a/100)},setFilter:function(a){b&&b.setFilter(a)},setIdentifier:function(a){b&&b.setIdentifier(a)},setOperationOptions:function(a){b&&b.set(a)},resetToDefaultIntensity:function(a){b&&b.resetToDefaultFilterIntensity()}}}},{key:"isEnabled",value:function(a){return a.isToolEnabled("filter")&&a.isToolAllowed("filter")}},{key:"getPreloadAssets",value:function(a){var b=[],c=a.getOptions(),d=l.Utils.defaults(c.editor.controlsOptions.filter,this.defaultOptions);return new m.FilterManager(a.getUI(),d).getFiltersForCategory("all").forEach(function(a){void 0!==a.lutImage&&b.push([a.lutImage,!1])}),b}}]),b}();q.clickAtPosition=m.BaseControls.clickAtPosition,q.identifier="filter",q.controlsComponent=o.a,q.canvasControlsComponent=m.BaseControls.canvasControlsComponent,q.iconPath="editor/controls/filter/icon.png",q.activeIconPath="editor/controls/filter/icon-active.png",q.requiredOperations=["filter","transform"],q.updatableOperations=["filter"],q.switchToDefaultControlsOnRemoval=!1,q.defaultOptions={categories:[],replaceCategories:!1,availableFilters:null},n.a.Controls.FilterControls=q,b.a=q},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(8),m=c.n(l),n=c(1),o=c.n(n),p=c(7),q=c.n(p),r=c(5),s=(c.n(r),c(136)),t=c(15),u=c(325),v=c(326),w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),x=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},y=void 0;p.Operations.FilterOperation&&(y=p.Operations.FilterOperation.Filters.IdentityFilter);var z=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));f._bindAll("_onIntensityChanged","_onListScroll");var g=f.context,h=g.ui,i=g.editor,j=g.theme;return f._loadedFilters=[],f._filterPreviewRenderer=new v.a(i),f._renderQueue=new s.a(1,1/0,j.listItemSlideInDelay),f._filterManager=new r.FilterManager(h,f.props.options),f._filterPreviewQueue=[],f._filterPreviews=[],f._category="all",f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,r.ControlsComponent),w(b,[{key:"fixStyles",value:function(){var a=this;return x(b.prototype.__proto__||o()(b.prototype),"fixStyles",this).call(this).then(function(){a._onListScroll()})}},{key:"componentDidMount",value:function(){var a=this;x(b.prototype.__proto__||o()(b.prototype),"componentDidMount",this).call(this),this._filterPreviewRenderer.init(),this._renderPreviewsAnimationFrame=Object(t.b)(function(){a._renderPreviews()})}},{key:"componentWillUnmount",value:function(){x(b.prototype.__proto__||o()(b.prototype),"componentWillUnmount",this).call(this),this._renderPreviewsAnimationFrame&&Object(t.a)(this._renderPreviewsAnimationFrame),this._renderQueue.dispose(),this._filterPreviewRenderer.dispose(),this._disposed=!0,window.clearInterval(this._interval)}},{key:"_renderPreviews",value:function(){var a=this,b=this.context.editor.getSDK().getRenderer(),c=this._getVisibleFilters().filter(function(b){return-1===a._loadedFilters.indexOf(b)});b.isOfType(q.a.RendererType.WEBGL)?c.forEach(function(b){a._loadedFilters.push(b),a._renderQueue.add(function(){return a._filterManager.instantiateFilterWithIdentifier(b.identifier).then(function(c){if(!a._disposed)return a._filterPreviewRenderer.render(c).then(function(c){a._filterPreviews[b.identifier]=c,a.forceUpdate()})})})}):(this._loadedFilters=this._loadedFilters.concat(c),c.forEach(function(b){a._renderQueue.add(function(){return new m.a(function(c){a._filterPreviews[b.identifier]=a._getAssetPath("editor/controls/filter/filters/"+b.identifier+".png",!0),a.forceUpdate(),c()})})}))}},{key:"_getVisibleFilters",value:function(){for(var a=[y].concat(this._filterManager.getFiltersForCategory(this._category)),b=[],c=this._container.getBoundingClientRect(),d=0,e=a.length;d<e;d++){var f=a[d],g=this.refs["filter-"+f.identifier].container.getBoundingClientRect();if(g.top>c.bottom+c.height||g.bottom<c.top){if(b.length)break}else b.push(f)}return b}},{key:"_onListScroll",value:function(a){this._renderPreviews()}},{key:"_onItemClick",value:function(a){var b=this;this.sharedState.identifier!==a&&this._filterManager.instantiateFilterWithIdentifier(a).then(function(c){b.sharedState.setOperationOptions({filter:c,identifier:a}),b.sharedState.resetToDefaultIntensity(),b.context.editor.render()})}},{key:"_onIntensityChanged",value:function(a){this.sharedState.setIntensity(a)}},{key:"_renderListItems",value:function(){var a=this,b=this._filterManager.getFiltersForCategory(this._category),c=this.sharedState.identifier,d=this.sharedState.intensity,e=this._filterPreviews;return[y].concat(b).map(function(f,g){var h=f.identifier,i=!e[h]&&g===a._loadedFilters.length,j=h===c;return r.React.createElement(B,{key:h,"data-selected":j,"data-identifier":h,className:void 0},r.React.createElement(u.a,{ref:"filter-"+h,filter:f,identifier:h,lastChild:f===b[b.length-1],onClick:a._onItemClick.bind(a,h),selected:j,intensity:d,displaySlider:f!==y,onIntensityChanged:a._onIntensityChanged,visible:!!e[h],previewUrl:e[h]}),i&&r.React.createElement(C,null))})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var a=this;return r.React.createElement(r.ScrollableListComponent,{direction:"vertical",onScroll:this._onListScroll,innerRef:function(b){a._scrollbar=b}},r.React.createElement(A,null,this._renderListItems()))}}]),b}();z.contextTypes=r.ControlsComponent.contextTypes,z.propTypes=r.ControlsComponent.propTypes,z.RootElement=r.ControlsComponent.RootElement,b.a=z;var A=r.adonis.ul("9uviv9","List"),B=r.adonis.li("13hv8io","ListItemContainer"),C=Object(r.adonis)(r.LoadingIndicatorComponent)("11ztmqh","LoadingIndicator")},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=n.ControlsStyles.ControlItem,r=n.ControlsStyles.ControlItemActiveOverlay,s=n.ControlsStyles.ControlItemTitle,t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f.state={hovered:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.BaseComponent),p(b,[{key:"shouldComponentUpdate",value:function(a,b){return this.props.previewUrl!==a.previewUrl||this.props.selected!==a.selected||this.props.visible!==a.visible||this.state.hovered!==b.hovered||this.props.filter!==a.filter||!(this.props.intensity===a.intensity||!a.selected)}},{key:"render",value:function(){var a=this,b=this.props,c=b.lastChild,d=b.onClick,e=b.onIntensityChanged,f=b.selected,g=b.intensity,h=b.displaySlider,i=b.visible,j=b.filter,k=null;this.props.previewUrl&&(k=n.React.createElement(y,{src:this.props.previewUrl}));var l=this.context.theme.transitionDuration,m={lastChild:c,onClick:d,visible:i};return n.React.createElement(u,o({},m,{animated:!0,innerRef:function(b){a._container=b},onMouseEnter:function(){return a.setState({hovered:!0})},onMouseLeave:function(){return a.setState({hovered:!1})}}),n.React.createElement(w,{selected:f},k,n.React.createElement(n.Transition,{active:f&&h,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},f&&h&&n.React.createElement(v,null,n.React.createElement(n.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:g,onChange:e}))),n.React.createElement(x,{hovered:this.state.hovered},this._t("pesdk.filter.asset."+j.identifier)||j.defaultName),n.React.createElement(n.Transition,{active:f,enterProp:"rendered",enterDuration:1e3*l,appearProp:"visible",appearDuration:1e3*l,leaveDuration:1e3*l},n.React.createElement(z,{selected:f}))))}},{key:"container",get:function(){return this._container}}]),b}();t.contextTypes=n.BaseComponent.contextTypes,b.a=t;var u=Object(n.adonis)(q).div("120drhm",{lastChild:"229bd5"},"Item"),v=n.adonis.div("19g9ike",{visible:"zgbg08",rendered:"2jlos"},"Slider"),w=n.adonis.div("rf12k1","ItemContainer"),x=Object(n.adonis)(s).span("hpn4lp","ItemTitle"),y=n.adonis.img("3x5zfy","Preview"),z=Object(n.adonis)(r).div("120drhm","Overlay")},function(a,b,c){var d=c(0),e=c.n(d),f=c(7),g=c.n(f),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=f.Math.Vector2,j=new i(180,80),k=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this._editor=b,this._disposed=!1}return h(a,[{key:"init",value:function(){this._initSDK()}},{key:"render",value:function(a){var b=this;return this._filterOperation.setFilter(a),this._filterOperation.resetToDefaultFilterIntensity(),this._sdk.render().then(function(){return b._sdk.getCanvas().toDataURL("image/png")})}},{key:"_initSDK",value:function(){var a=this._editor.getOptions(),b=a.logLevel,c=a.debug,d=a.license,e=a.editor,f=e.smoothDownscaling,h=e.smoothUpscaling,i=e.preferredRenderer,k=this._editor.getSDK(),l={logLevel:b,debug:c,pixelRatio:1,smoothDownscaling:f,smoothUpscaling:h,transparent:!0,license:d,image:k.getImage(),exif:k.getExif(),renderMode:"export",versionCheck:!1,displayWelcomeMessage:!1};this._sdk=new g.a(i,l),this._sdk.resizeTo(j),this._filterOperation=this._sdk.createOperation("filter"),this._transformOperation=this._sdk.createOperation("transform");var m=this._calculateTransformOptions(),n=m.start,o=m.end,p=m.textureScale;this._transformOperation.set({start:n,end:o,textureScale:p}),this._sdk.render()}},{key:"_calculateTransformOptions",value:function(){var a=this._transformOperation.getInputDimensions(),b=a.x/a.y,c=new i,d=new i,e=j.x/j.y;if(b<=e){var f=1/a.y*(a.x/e);c.set(0,(1-f)/2),d.set(1,1-c.y)}else{var g=1/a.x*(e*a.y);c.set((1-g)/2,0),d.set(1-c.x,1)}var h=d.clone().subtract(c),k=a.clone().multiply(h),l=j.x/k.x;return{dimensions:j,start:c,end:d,textureScale:l}}},{key:"dispose",value:function(){this._sdk&&this._sdk.dispose()}},{key:"isDisposed",value:function(){return this._disposed}}]),a}();b.a=k},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),c(328)),n=(c(137),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)))
;return f._bindAll("_onBlurRadiusChanged"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.ControlsComponent),n(b,[{key:"_isModeAvailable",value:function(a){var b=this.props.options.availableModes;return"none"===a||null===b||-1!==b.indexOf(a)}},{key:"_onItemClick",value:function(a){!(arguments.length>1&&void 0!==arguments[1])||arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],this.sharedState.setSelectedFocus(a)}},{key:"_onBlurRadiusChanged",value:function(a){this.sharedState.setBlurRadius(a)}},{key:"_renderListItems",value:function(){var a=this,b=this.props.controls,c=this.sharedState.operationIdentifier,d=this.sharedState.selectedFocus,e=this.sharedState.blurRadius;return b.constructor.ITEMS.filter(function(b){return a._isModeAvailable(b.identifier)}).map(function(b){var f=a._getAssetPath(b.backgroundImagePath,!0),g=a._getAssetPath(b.activeBackgroundImagePath,!0),h=b.identifier===d;return l.React.createElement(m.a,{key:b.identifier,title:a._t("pesdk.focus.button."+b.identifier),selected:h,showSlider:!!c,blurRadius:e,onBlurRadiusChanged:a._onBlurRadiusChanged,backgroundImagePath:f,activeBackgroundImagePath:g,onClick:a._onItemClick.bind(a,b,!0,!1)})},this)}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var a=this;return l.React.createElement(l.ScrollableListComponent,{direction:"vertical",innerListRef:function(b){a._list=b},innerRef:function(b){a._scrollbar=b}},l.React.createElement(p,null,this._renderListItems()))}}]),b}();o.contextTypes=l.ControlsComponent.contextTypes,o.propTypes=l.ControlsComponent.propTypes,o.RootElement=l.ControlsComponent.RootElement,b.a=o;var p=l.adonis.ul("1snluvd","List")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.ControlItem,o=l.ControlsStyles.ControlItemTitle,p=l.ControlsStyles.ControlItemActiveOverlay,q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onSliderValueChanged"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.SharedStateComponent),m(b,[{key:"_onSliderValueChanged",value:function(a){var b=this.props.onBlurRadiusChanged,c=this.sharedState.inputDimensions.min();b&&b(a/c)}},{key:"_renderSlider",value:function(){var a=this.props,b=a.selected,c=a.showSlider,d=a.blurRadius;if(!b||!c)return null;var e=this.sharedState.inputDimensions,f=Math.min(180,Math.round(.1*e.min())),g=e.min();return l.React.createElement(l.SliderComponent,{minValue:0,maxValue:f,valueUnit:"",middleDot:!1,value:d*g,onChange:this._onSliderValueChanged})}},{key:"render",value:function(){var a=this.props,b=a.title,c=a.backgroundImagePath,d=a.activeBackgroundImagePath,e=a.selected,f=a.onClick,g=a.showSlider,h={backgroundImage:"url('"+(e?d:c)+"')"},i=this.context.theme.transitionDuration;return l.React.createElement(r,{selected:e,"data-selected":e,className:void 0,onClick:f,style:h},l.React.createElement(s,{selected:e,withSlider:e&&g},b),l.React.createElement(u,{visible:e&&g},this._renderSlider()),l.React.createElement(l.Transition,{active:e,enterProp:"rendered",enterDuration:1e3*i,appearProp:"visible",appearDuration:1e3*i,leaveDuration:1e3*i},l.React.createElement(t,{selected:!0})))}}]),b}();q.contextTypes=l.SharedStateComponent.contextTypes,b.a=q;var r=Object(l.adonis)(n).li("19qom6j","ListItem"),s=Object(l.adonis)(o).div("1cwztpc",{selected:"2znik8",withSlider:"fsvvyb"},"ListItemTitle"),t=Object(l.adonis)(p).div("rctda3","ListItemOverlay"),u=l.adonis.div("chwlso",{visible:"vpr3tu"},"Slider")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(7),m=(c.n(l),c(5)),n=(c.n(m),c(330)),o=c(331),p=c(332),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];var g,h,i,j=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return j._bindAll("_onZoomDone"),j._events=(g={},h=m.Constants.EVENTS.ZOOM_DONE,i=j._onZoomDone,h in g?e()(g,h,{value:i,enumerable:!0,configurable:!0,writable:!0}):g[h]=i,g),j.state=l.Utils.extend(j.state,{zoomDone:!1}),j}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.CanvasControlsComponent),q(b,[{key:"_onZoomDone",value:function(){this.setState({zoomDone:!0})}},{key:"_renderControls",value:function(){var a=void 0;switch(this.sharedState.selectedFocus){case"radial":a=n.a;break;case"linear":a=o.a;break;case"mirrored":a=p.a;break;default:return m.React.createElement("div",null)}return m.React.createElement(a,{zoomDone:this.state.zoomDone})}}]),b}();r.contextTypes=m.CanvasControlsComponent.contextTypes,b.a=r},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=(c.n(o),c(15)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=o.ControlsStyles.Knob,s=o.ControlsStyles.FullContainer,t=n.Math.Vector2,u=n.Math.Rectangle,v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];var g,h,i,j=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return j._bindAll("_onCircleDragStart","_onCircleDrag","_onKnobDragStart","_onKnobDrag","_onZoomDone"),j.state=n.Utils.extend(j.state,{circlePosition:new t,circleDimensions:new t,knobPosition:new t,visible:!1}),j._knobChangedManually=!1,j._events=(g={},h=o.Constants.EVENTS.ZOOM_DONE,i=j._onZoomDone,h in g?e()(g,h,{value:i,enumerable:!0,configurable:!0,writable:!0}):g[h]=i,g),j.props.zoomDone&&Object(p.b)(function(){j._onZoomDone()}),j}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.SharedStateComponent),q(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()}},{key:"sharedStateDidChange",value:function(a,b){this._operation&&b.operation&&this._operation!==b.operation&&this._operation.constructor===b.operation.constructor&&(b.operation.set(this._operation.serializeOptions()),this._operation=b.operation)}},{key:"_onZoomDone",value:function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()}},{key:"_onCircleDragStart",value:function(){this._initialPosition=this.sharedState.radialFocus.position.clone(),this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onCircleDrag",value:function(a){var b=this.context.editor,c=b.getOutputDimensions(),d=a.clone().divide(c),e=this._initialPosition.clone().add(d),f=this._initialKnobPosition.clone().add(a);this.sharedState.setPosition(e),this.state.knobPosition=f,b.render(),this._updatePositionsAndDimensions()}},{key:"_onKnobDragStart",value:function(a){this._knobChangedManually=!0,this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onKnobDrag",value:function(a){var b=this.context.editor,c=b.getOutputDimensions(),d=this._initialKnobPosition.clone().add(a).clamp(new t(0,0),c),e=this.sharedState.radialFocus.position.clone().multiply(c),f=d.clone().subtract(e).abs().len(),g=f/2;this.setState({knobPosition:d,circleDimensions:new t(2*f,2*f)}),this.sharedState.setOperationOptions({radius:f/c.min(),gradientRadius:g/c.min()}),b.render()}},{key:"_updatePositionsAndDimensions",value:function(){var a=this.context.editor.getOutputDimensions(),b=this.sharedState.radialFocus.position.clone().multiply(a),c=this.sharedState.radialFocus.radius*a.min(),d=2*c,e={circleDimensions:new t(d,d),circlePosition:b};this._knobChangedManually||(e.knobPosition=b.clone().add(c,0)),this.setState(e)}},{key:"_updateOnCanvasControls",value:function(){var a=this.context.editor.getSDK().getSprite().getBounds(),b=this._container.getBoundingClientRect(),c=this.context.appComponent.getBounds(),d=new u(Math.floor(a.x-(b.left-c.left)),Math.floor(a.y-(b.top-c.top)),Math.ceil(a.width)+1,Math.ceil(a.height)+1);o.Utils.styleElement(this._onCanvasControls,{left:d.x+"px",top:d.y+"px",width:d.width+"px",height:d.height+"px"}),this.forceUpdate()}},{key:"_getCircleStyles",value:function(){return{width:this.state.circleDimensions.x,height:this.state.circleDimensions.y,left:this.state.circlePosition.x,top:this.state.circlePosition.y,marginLeft:-.5*this.state.circleDimensions.x,marginTop:-.5*this.state.circleDimensions.y}}},{key:"_getKnobStyle",value:function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}}},{key:"render",value:function(){var a=this;return o.React.createElement(w,{innerRef:function(b){a._container=b}},o.React.createElement(o.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},o.React.createElement(x,{innerRef:function(b){a._onCanvasControls=b}},o.React.createElement(o.DraggableComponent,{onStart:this._onCircleDragStart,onDrag:this._onCircleDrag},o.React.createElement(z,{className:void 0,style:this._getCircleStyles()})),o.React.createElement(o.DraggableComponent,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},o.React.createElement(y,{className:void 0,style:this._getKnobStyle()})))))}}]),b}();v.contextTypes=o.SharedStateComponent.contextTypes,b.a=v;var w=Object(o.adonis)(s).div("1rineb","CanvasControls"),x=o.adonis.div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),y=Object(o.adonis)(r).div("120drhm","Knob"),z=o.adonis.div("kgwi8g","Circle")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=(c.n(o),c(15)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=o.ControlsStyles.Knob,s=o.ControlsStyles.FullContainer,t=n.Math.Vector2,u=n.Math.Rectangle,v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];var g,h,i,j=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return j._bindAll("_onKnobDragStart","_onKnobDrag","_onZoomDone"),j.state=n.Utils.extend(j.state,{visible:!1}),j._events=(g={},h=o.Constants.EVENTS.ZOOM_DONE,i=j._onZoomDone,h in g?e()(g,h,{value:i,enumerable:!0,configurable:!0,writable:!0}):g[h]=i,g),j.props.zoomDone&&Object(p.b)(function(){j._onZoomDone()}),j}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.SharedStateComponent),q(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._updateOnCanvasControls()}},{key:"sharedStateDidChange",value:function(a,b){this._operation&&b.operation&&this._operation!==b.operation&&this._operation.constructor===b.operation.constructor&&(b.operation.set(this._operation.serializeOptions()),this._operation=b.operation)}},{key:"_onZoomDone",value:function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls()}},{key:"_onKnobDragStart",value:function(a,b){this._initialPosition=this.sharedState.linearFocus["controlPoint"+a]}},{key:"_onKnobDrag",value:function(a,b){var c=this.context.editor.getSDK().getSprite().getBounds(),d=this._container.getBoundingClientRect(),e=this.context.appComponent.getBounds(),f=this._initialPosition.clone().multiply(c.width,c.height).add(b).clamp(new t(d.left-e.left-c.x,d.top-e.top-c.y),new t(d.width-(c.x-(d.left-e.left)),d.height-(c.y-(d.top-e.top)))).divide(c.width,c.height);this.sharedState["setControlPoint"+a](f)}},{key:"_updateOnCanvasControls",value:function(){var a=this.context.editor.getSDK().getSprite().getBounds(),b=this._container.getBoundingClientRect(),c=this.context.appComponent.getBounds(),d=new u(Math.floor(a.x-(b.left-c.left)),Math.floor(a.y-(b.top-c.top)),Math.ceil(a.width)+1,Math.ceil(a.height)+1);o.Utils.styleElement(this._onCanvasControls,{left:d.x+"px",top:d.y+"px",width:d.width+"px",height:d.height+"px"}),this.forceUpdate()}},{key:"_getKnobStyle",value:function(a){var b=this.context.editor,c=this.sharedState.linearFocus["controlPoint"+a],d=b.getSDK().getSprite().getBounds(),e=c.clone().multiply(d.width,d.height);return{left:e.x,top:e.y}}},{key:"_getLineStyle",value:function(){var a=this.context.editor.getSDK().getSprite().getBounds(),b=this.sharedState.linearFocus.controlPoint1.clone(),c=this.sharedState.linearFocus.controlPoint2.clone(),d={1:b.multiply(a.width,a.height),2:c.multiply(a.width,a.height)},e=d[2].clone().subtract(d[1]),f=e.len(),g=Math.atan2(e.y,e.x);return{width:f+"px",left:d[1].x+"px",top:d[1].y+"px",transform:"rotate("+g+"rad) translateY(-50%)"}}},{key:"_renderKnobs",value:function(){for(var a=[],b=1;b<=2;b++)a.push(o.React.createElement(o.DraggableComponent,{onStart:this._onKnobDragStart.bind(this,b),onDrag:this._onKnobDrag.bind(this,b),key:b},o.React.createElement(y,{style:this._getKnobStyle(b),className:void 0})));return a}},{key:"render",value:function(){var a=this;return o.React.createElement(w,{innerRef:function(b){a._container=b}},o.React.createElement(o.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},o.React.createElement(x,{innerRef:function(b){a._onCanvasControls=b}},this._renderKnobs(),o.React.createElement(z,{style:this._getLineStyle()}))))}}]),b}();v.contextTypes=o.SharedStateComponent.contextTypes,b.a=v;var w=Object(o.adonis)(s).div("1rineb","CanvasControls"),x=o.adonis.div("12e79nm",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),y=Object(o.adonis)(r).div("120drhm","Knob"),z=o.adonis.div("1rrhaqy","Line")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=(c.n(o),c(15)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=o.ControlsStyles.Knob,s=o.ControlsStyles.FullContainer,t=n.Math.Vector2,u=n.Math.Rectangle,v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];var g,h,i,j=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return j._bindAll("_onCenterDragStart","_onCenterDrag","_onKnobDragStart","_onKnobDrag","_onZoomDone"),j.state=n.Utils.extend(j.state,{areaPosition:new t,areaDimensions:new t,knobPosition:new t,visible:!1}),j._events=(g={},h=o.Constants.EVENTS.ZOOM_DONE,i=j._onZoomDone,h in g?e()(g,h,{value:i,enumerable:!0,configurable:!0,writable:!0}):g[h]=i,g),j.props.zoomDone&&Object(p.b)(function(){j._onZoomDone()}),j}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.SharedStateComponent),q(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()}},{key:"sharedStateDidChange",value:function(a,b){this._operation&&b.operation&&this._operation!==b.operation&&this._operation.constructor===b.operation.constructor&&(b.operation.set(this._operation.serializeOptions()),this._operation=b.operation)}},{key:"_onZoomDone",value:function(){this.state.visible||(this.state.visible=!0),this._updateOnCanvasControls(),this._updatePositionsAndDimensions()}},{key:"_onCenterDragStart",value:function(){this._initialStart=this.sharedState.mirroredFocus.start,this._initialEnd=this.sharedState.mirroredFocus.end,this._initialDist=this._initialEnd.clone().subtract(this._initialStart)}},{key:"_onCenterDrag",value:function(a){var b=this.context.editor.getOutputDimensions(),c=a.clone().divide(b),d=this._initialStart.clone().add(c).clamp(new t(0,0),new t(1,1).subtract(this._initialDist)),e=d.clone().add(this._initialDist);this.sharedState.setOperationOptions({start:d,end:e}),this._updatePositionsAndDimensions()}},{key:"_onKnobDragStart",value:function(a){this._initialKnobPosition=this.state.knobPosition.clone()}},{key:"_onKnobDrag",value:function(a){var b=this.context.editor.getOutputDimensions(),c=this._initialKnobPosition.clone().add(a).clamp(new t(0,0),b),d=c.clone().subtract(this.state.areaPosition),e=this.state.areaPosition.clone().add(-d.y,d.x).divide(b),f=this.state.areaPosition.clone().add(d.y,-d.x).divide(b),g=2*d.len();this.sharedState.setOperationOptions({start:e,end:f,size:g/b.min(),gradientSize:g/b.min()}),this.setState({knobPosition:c,areaDimensions:new t(this.state.areaDimensions.x,g)})}},{key:"_getAreaStyle",value:function(){var a=this.state.knobPosition.clone().subtract(this.state.areaPosition),b="rotate("+(-Math.atan2(a.x,a.y)*(180/Math.PI)).toFixed(2)+"deg)";return{width:this.state.areaDimensions.x,height:this.state.areaDimensions.y,left:this.state.areaPosition.x,top:this.state.areaPosition.y,marginLeft:-.5*this.state.areaDimensions.x,marginTop:-.5*this.state.areaDimensions.y,transform:b,MozTransform:b,msTransform:b,WebkitTransform:b}}},{key:"_getKnobStyle",value:function(){return{left:this.state.knobPosition.x,top:this.state.knobPosition.y}}},{key:"_updatePositionsAndDimensions",value:function(){var a=this.context.editor.getOutputDimensions(),b=this.sharedState.mirroredFocus,c=b.start,d=b.end,e=b.size;c=c.clone().multiply(a),d=d.clone().multiply(a),e*=a.min();var f=d.clone().subtract(c),g=c.clone().add(f.clone().divide(2)),h=new t(2*a.len(),e),i=f.len(),j=f.clone().divide(i).divide(2);this.setState({areaDimensions:h,areaPosition:g.clone(),knobPosition:g.clone().add(-e*j.y,e*j.x)})}},{key:"_updateOnCanvasControls",value:function(){var a=this.context.editor.getSDK().getSprite().getBounds(),b=this._container.getBoundingClientRect(),c=this.context.appComponent.getBounds(),d=new u(Math.floor(a.x-(b.left-c.left)),Math.floor(a.y-(b.top-c.top)),Math.ceil(a.width)+1,Math.ceil(a.height)+1);o.Utils.styleElement(this._onCanvasControls,{left:d.x+"px",top:d.y+"px",width:d.width+"px",height:d.height+"px"}),this.forceUpdate()}},{key:"render",value:function(){var a=this;return o.React.createElement(w,{innerRef:function(b){a._container=b}},o.React.createElement(o.Transition,{active:this.state.visible,enterProp:"rendered",enterDuration:1e3*this.context.theme.transitionDuration,appearProp:"visible",appearDuration:1e3*this.context.theme.transitionDuration,leaveDuration:1e3*this.context.theme.transitionDuration},o.React.createElement(x,{innerRef:function(b){a._onCanvasControls=b}},o.React.createElement(o.DraggableComponent,{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag},o.React.createElement(z,{className:void 0,style:this._getAreaStyle()})),o.React.createElement(o.DraggableComponent,{onStart:this._onKnobDragStart,onDrag:this._onKnobDrag},o.React.createElement(y,{className:void 0,style:this._getKnobStyle()})))))}}]),b}();v.contextTypes=o.SharedStateComponent.contextTypes,b.a=v;var w=Object(o.adonis)(s).div("1rineb","CanvasControls"),x=o.adonis.div("aovk7s",{rendered:"2jlos",visible:"zgbg08"},"OnCanvasControls"),y=Object(o.adonis)(r).div("120drhm","Knob"),z=o.adonis.div("36haff","Area")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=c.n(l),n=c(334),o=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseControls),o(b,[{key:"loadFrame",value:function(a){var b=this,c=this.context.editor,d=new l.Frame(this.context.ui,a),e=c.operations.getOrCreate("frame"),f=void 0,g=setTimeout(function(){f=l.ModalManager.instance.displayLoading(b._t("pesdk.common.text.loading"))},100);return d.load().then(function(){f&&f.close(),g&&(clearTimeout(g),g=null),e.setFrame(d.getFrame())})}}],[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var b=a.get("frame")||null,c=null;return b&&(c=b.getFrame()),{operation:b,frame:c,frameIdentifier:c?c.identifier:null,tintColor:b?b.getTintColor():null,removeFrame:function(){b&&a.remove(b)},setTintColor:function(a){b&&b.setTintColor(a.clone())}}}},{key:"isEnabled",value:function(a){return a.isToolAllowed("frame")&&a.isToolEnabled("frame")}}]),b}();p.clickAtPosition=l.BaseControls.clickAtPosition,p.getPreloadAssets=l.BaseControls.getPreloadAssets,p.identifier="frame",p.controlsComponent=n.a,p.canvasControlsComponent=l.BaseControls.canvasControlsComponent,p.iconPath="editor/controls/frame/icon.png",p.activeIconPath="editor/controls/frame/icon-active.png",p.requiredOperations=["frame"],p.defaultOptions={categories:[],replaceCategories:!1,availableFrames:null},p.updatableOperations=["frame"],p.switchToDefaultControlsOnRemoval=!1,m.a.Controls.FrameControls=p,b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(335)),p=c(337),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r={ROOT:1,CATEGORY:2,OPTIONS:3},s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));f._bindAll("_onFrameClick","_onReplaceClick"),f._initFrameManager(),f._needsStyleFixes=!0;var g=r.ROOT,h=f.getSharedState("operation");return h&&h.getFrame()&&(g=r.OPTIONS),f.state={currentPanel:g},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.ControlsComponent),q(b,[{key:"fixStyles",value:function(){var a=this;return this._list.style.height="100%",function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"fixStyles",this).call(this).then(function(){if(n.Utils.Browser.isIElte(10)){var b=a._container.offsetHeight;a._list.style.height=b+"px"}return a.refs.panel.fixStyles()})}},{key:"componentDidUpdate",value:function(a,b){this.state.currentPanel!==b.currentPanel&&this.fixStyles()}},{key:"_initFrameManager",value:function(){this._frameManager=new n.FrameManager(this.context.ui,this.props.options)}},{key:"sharedStateDidChange",value:function(a,b){var c=this.context.editor.operations.get("frame");return!c||c&&!c.getFrame()?this.setState({currentPanel:r.ROOT}):this.setState({currentPanel:r.OPTIONS})}},{key:"_onReplaceClick",value:function(){this.setState({currentPanel:r.ROOT})}},{key:"_onCategoryClick",value:function(a){this.setState({currentPanel:r.CATEGORY,category:a})}},{key:"_onFrameClick",value:function(a){var b=this;if(!a)return this.sharedState.removeFrame(),void this.props.controls.addLocalHistorySnapshot("frame-image",!0);this.props.controls.loadFrame(a).then(function(){b.props.controls.addLocalHistorySnapshot("frame-image",!1),b.setState({currentPanel:r.OPTIONS})})}},{key:"_renderCurrentPanel",value:function(){var a=this,b=this.props.controls;switch(this.state.currentPanel){case r.ROOT:return n.React.createElement(o.a,{innerRef:function(b){a._list=b},frameManager:this._frameManager,onFrameClick:this._onFrameClick,controls:b,ref:"panel"});case r.OPTIONS:return n.React.createElement(p.a,{innerRef:function(b){a._list=b},frameManager:this._frameManager,onReplaceClick:this._onReplaceClick,onNewFrameClick:this._onNewFrameClick,controls:b,ref:"panel"})}}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){return this._renderCurrentPanel()}}]),b}();s.contextTypes=n.ControlsComponent.contextTypes,s.RootElement=n.ControlsComponent.RootElement,b.a=s},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(15)),p=c(336),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.BaseComponent),q(b,[{key:"fixStyles",value:function(){var a=this;return k.a.resolve().then(function(){n.Utils.Browser.isIElte(10)?Object(o.b)(function(){a._scrollbar.update()}):a._scrollbar.update()})}},{key:"render",value:function(){var a=this,b=this.props,c=b.frameManager,d=b.innerRef;return n.React.createElement(s,{innerRef:function(b){d&&d(b),a._wrapper=b},className:void 0},n.React.createElement(n.ScrollableListComponent,{direction:"vertical",innerRef:function(b){a._scrollbar=b}},n.React.createElement(p.a,{frames:c.getFramesForCategory("all"),onFrameClick:this.props.onFrameClick})))}}]),b}();r.contextTypes=n.BaseComponent.contextTypes,b.a=r;var s=n.adonis.div("rfecls","Wrapper")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.PlainControlItem,o=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.SharedStateComponent),m(b,[{key:"_onFrameClick",value:function(a){this.props.onFrameClick&&this.props.onFrameClick(a)}},{key:"_renderListItems",value:function(){var a=this,b=this.props.frames,c=this.getSharedState.frameIdentifier,d=this.getSharedState("selectedSprite")
;return d&&(c=d.getIdentifier()),b.map(function(b){var d={background:"url('"+a._getAssetPath(b.thumbnail)+"') no-repeat center center",backgroundSize:"contain"};return l.React.createElement(q,{selected:b.identifier===c,key:b.identifier,onClick:a._onFrameClick.bind(a,b),className:void 0,twoColumns:!0},l.React.createElement(r,{style:d}))})}},{key:"render",value:function(){var a=this.sharedState.frame;return l.React.createElement(p,null,l.React.createElement(q,{selected:!a,onClick:this._onFrameClick.bind(this,null),className:void 0,withText:!0,twoColumns:!0},this._t("pesdk.frame.button.none")),this._renderListItems())}}]),b}();o.contextTypes=l.SharedStateComponent.contextTypes,b.a=o;var p=l.adonis.ul("18qztam","FrameList"),q=Object(l.adonis)(n).li("u8nfgk","FrameListItem"),r=l.adonis.div("7r0ke8","FrameImage")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(15)),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=n.ControlsStyles.PlainControlItemBackground,r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));f._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange","_onWidthChange");var g=f.sharedState.tintColor;return f.state={tintEnabled:!!g&&g.a>0,tintColor:g},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.SharedStateComponent),p(b,[{key:"_onTintToggle",value:function(a){var b=this.state.tintEnabled,c=this.sharedState.tintColor.clone();c.a=b?0:1,this.sharedState.setTintColor(c),this.props.controls.addLocalHistorySnapshot("frame-tint-enabled"),this.context.editor.render(),this.setState({tintEnabled:!b})}},{key:"_onTintColorChange",value:function(a){this.sharedState.setTintColor(a.clone()),this.props.controls.addLocalHistorySnapshot("frame-tint-color",!0),this.context.editor.render()}},{key:"sharedStateDidChange",value:function(){var a=this.sharedState.tintColor;this.setState({tintEnabled:!!a&&a.a>0,tintColor:a?a.clone():null})}},{key:"_onOpacityChange",value:function(a){this.getSharedState("operation").setAlpha(a/100),this.props.controls.addLocalHistorySnapshot("frame-opacity",!0),this.context.editor.render(),this.forceUpdate()}},{key:"_onWidthChange",value:function(a){var b=this.context.editor,c=this.getSharedState("operation"),d=c.getInputDimensions().min();c.setScale(a/d),this.props.controls.addLocalHistorySnapshot("frame-width",!0),b.render(),this.forceUpdate()}},{key:"fixStyles",value:function(){var a=this;return k.a.resolve().then(function(){n.Utils.Browser.isIElte(10)?Object(o.b)(function(){a._scrollbar.update()}):a._scrollbar.update()})}},{key:"render",value:function(){var a=this,b=this.props,c=b.innerRef,d=b.onReplaceClick,e=this.getSharedState("operation"),f=e.getFrame(),g=e.getInputDimensions().min(),h=f.tintable,i={background:"url('"+this._getAssetPath(f.thumbnail,!1)+"') center center / contain no-repeat"};return n.React.createElement(s,{innerRef:function(b){c&&c(b),a._wrapper=b},className:void 0},n.React.createElement(n.ScrollableListComponent,{direction:"vertical",innerRef:function(b){a._scrollbar=b}},n.React.createElement("div",null,n.React.createElement(t,null,n.React.createElement(u,null,n.React.createElement(v,null,n.React.createElement(w,{style:i,onClick:d})),n.React.createElement(x,null,n.React.createElement(y,null,this._t("pesdk.frame.asset."+f.identifier)||f.defaultName),n.React.createElement(z,{onClick:d,className:void 0},this._t("pesdk.frame.button.replace")))),n.React.createElement(n.SliderControlComponent,{minValue:0,value:Math.round(100*e.getAlpha()),maxValue:100,label:this._t("pesdk.frame.title.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0}),n.React.createElement(n.SliderControlComponent,{minValue:.05*g,value:Math.round(e.getScale()*g),maxValue:.3*g,label:this._t("pesdk.frame.title.width"),onSliderValueChange:this._onWidthChange,onValueChange:this._onWidthChange,middleDot:!1,className:void 0})),h&&n.React.createElement(n.CollapseSectionComponent,{toggleable:!0,title:this._t("pesdk.frame.button.fill"),expanded:this.state.tintEnabled,className:void 0,onToggle:this._onTintToggle},n.React.createElement(A,{value:this.state.tintColor,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))}}]),b}();r.contextTypes=n.SharedStateComponent.contextTypes,b.a=r;var s=n.adonis.div("rfecls","Wrapper"),t=n.adonis.div("1vnvjau","TopSection"),u=n.adonis.div("16woy02","Details"),v=Object(n.adonis)(q).div("6u8g0p","Thumbnail"),w=n.adonis.div("7r0ke8","ThumbnailImage"),x=n.adonis.div("1trlo6v","DetailsContainer"),y=n.adonis.div("w9mc0y","Title"),z=n.adonis.div("1rhky7p","ReplaceButton"),A=Object(n.adonis)(n.ColorSelectionComponent)("1ouwzwk","ColorSelection")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=c.n(l),n=c(339),o=c(27),p=c(84),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseControls),q(b,[{key:"loadOverlay",value:function(a){var b=this,c=this._getAssetPath(a.image),d=p.a[a.blendMode],e=void 0,f=setTimeout(function(){e=l.ModalManager.instance.displayLoading(b._t("pesdk.common.text.loading"))},100);return o.a.load(c).then(function(b){return e&&e.close(),f&&(clearTimeout(f),f=null),{identifier:a.identifier,image:b,blendMode:d,alpha:void 0===a.intensity?1:a.intensity}})}}],[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var b=a.getOrCreate("overlay");return{operation:b,identifier:b?b.getIdentifier():null,alpha:b?b.getAlpha():1,blendMode:b?b.getBlendMode():p.a.normal,removeOverlay:function(){b&&b.set({image:null,identifier:null,alpha:1})},setOverlayOptions:function(a){b&&b.set(a)},setAlpha:function(a){b&&b.setAlpha(a)},setBlendMode:function(a){b&&b.setBlendMode(a)}}}},{key:"isEnabled",value:function(a){return a.isToolAllowed("overlay")&&a.isToolEnabled("overlay")}}]),b}();r.clickAtPosition=l.BaseControls.clickAtPosition,r.getPreloadAssets=l.BaseControls.getPreloadAssets,r.identifier="overlay",r.controlsComponent=n.a,r.canvasControlsComponent=l.BaseControls.canvasControlsComponent,r.iconPath="editor/controls/overlay/icon.png",r.activeIconPath="editor/controls/overlay/icon-active.png",r.requiredOperations=["overlay"],r.defaultOptions={overlays:[],replaceOverlays:!1,availableOverlays:null},r.updatableOperations=["overlay"],r.switchToDefaultControlsOnRemoval=!1,m.a.Controls.OverlayControls=r,b.a=r},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(27)),p=c(136),q=c(340),r=(c(84),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),s=function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0},t=n.ControlsStyles.PlainControlItem,u=n.ControlsStyles.PlainControlItemBackground,v=n.ControlsStyles.ControlItemTitle,w=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d))),g=f.context,h=g.ui,i=g.theme;return f._thumbnailLoadQueue=new p.a(1,1/0,i.listItemSlideInDelay),f._thumbnailsLoaded={},f._overlayManager=new n.OverlayManager(h,f.props.options),f.state={},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.ControlsComponent),r(b,[{key:"componentDidMount",value:function(){s(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._loadThumbnails()}},{key:"componentWillUnmount",value:function(){s(b.prototype.__proto__||m()(b.prototype),"componentWillUnmount",this).call(this),this._thumbnailLoadQueue.dispose()}},{key:"_loadThumbnails",value:function(){var a=this;this._overlayManager.getOverlays().forEach(function(b){a._thumbnailLoadQueue.add(function(){return o.a.load(a._getAssetPath(b.thumbnail)).then(function(c){a._thumbnailsLoaded[b.identifier]=c,a.forceUpdate()})})})}},{key:"_onBlendModeChange",value:function(){this.props.controls.addLocalHistorySnapshot("overlay-blend-mode",!1)}},{key:"_onAlphaChange",value:function(){this.props.controls.addLocalHistorySnapshot("overlay-alpha",!0)}},{key:"_onItemClick",value:function(a){var b=this;if(!a)return this.sharedState.removeOverlay(),this.forceUpdate();a.identifier!==this.sharedState.identifier&&this.props.controls.loadOverlay(a).then(function(a){b.sharedState.setOverlayOptions(a),b.props.controls.addLocalHistorySnapshot("overlay-image",!1)})}},{key:"_renderListItems",value:function(){var a=this,b=this.sharedState.identifier;return this._overlayManager.getOverlays().map(function(c){return n.React.createElement(q.a,{key:c.identifier,overlay:c,selected:c.identifier===b,visible:!!a._thumbnailsLoaded[c.identifier],onClick:a._onItemClick.bind(a,c),onBlendModeChange:a._onBlendModeChange.bind(a),onAlphaChange:a._onAlphaChange.bind(a)})})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var a=this,b=!this.getSharedState("operation").getIdentifier();return n.React.createElement(n.ScrollableListComponent,{direction:"vertical",innerRef:function(b){a._scrollbar=b}},n.React.createElement(x,null,n.React.createElement(y,{onClick:this._onItemClick.bind(this,null)},n.React.createElement(z,{selected:b},n.React.createElement(A,null,this._t("pesdk.overlay.button.none")))),this._renderListItems()))}}]),b}();w.contextTypes=n.ControlsComponent.contextTypes,w.propTypes=n.ControlsComponent.propTypes,w.RootElement=n.ControlsComponent.RootElement,b.a=w;var x=n.adonis.ul("9uviv9","List"),y=Object(n.adonis)(t).div("1sgdmny","NoneItem"),z=Object(n.adonis)(u).div("yogtp1","NoneItemBackground"),A=Object(n.adonis)(v).span("5krmrh","ItemTitle")},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(341)),p=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=n.ControlsStyles.ControlItem,s=n.ControlsStyles.ControlItemActiveOverlay,t=n.ControlsStyles.ControlItemTitle,u=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f.state={hovered:!1},f._bindAll("_onBlendModeChange","_onAlphaChange"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.SharedStateComponent),q(b,[{key:"_onBlendModeChange",value:function(a){this.props.onBeforeBlendModeChange&&this.props.onBeforeBlendModeChange(),this.sharedState.setBlendMode(a),this.props.onBlendModeChange&&this.props.onBlendModeChange()}},{key:"_onAlphaChange",value:function(a){this.props.onBeforeAlphaChange&&this.props.onBeforeAlphaChange(),this.sharedState.setAlpha(a),this.props.onAlphaChange&&this.props.onAlphaChange()}},{key:"shouldComponentUpdate",value:function(a,b){return this.props.selected!==a.selected||this.props.visible!==a.visible||this.state.hovered!==b.hovered||this.props.overlay!==a.overlay||!(this.props.intensity===a.intensity||!a.selected)}},{key:"render",value:function(){var a=this,b=this.props,c=b.lastChild,d=b.onClick,e=b.selected,f=b.visible,g=b.overlay,h=this.sharedState.alpha,i=this.sharedState.blendMode,j={lastChild:c,onClick:d,visible:f};return j.style={backgroundImage:"url('"+this._getAssetPath(g.thumbnail)+"')"},n.React.createElement(v,p({},j,{className:void 0,animated:!0,innerRef:function(b){a._container=b},onMouseEnter:function(){return a.setState({hovered:!0})},onMouseLeave:function(){return a.setState({hovered:!1})}}),n.React.createElement(x,{selected:e},n.React.createElement(n.Transition,{active:!e},n.React.createElement(A,null,n.React.createElement(y,{hovered:this.state.hovered},this._t("pesdk.overlay.asset."+g.identifier)||g.defaultName))),n.React.createElement(n.Transition,{active:e},n.React.createElement(A,null,n.React.createElement(z,null,this._t("pesdk.overlay.title.blending")),n.React.createElement(C,{value:i,onChange:this._onBlendModeChange}),e&&n.React.createElement(w,null,n.React.createElement(n.SliderComponent,{minValue:0,maxValue:1,valueUnit:"",middleDot:!1,value:h,onChange:this._onAlphaChange})),n.React.createElement(B,{rendered:!0,visible:!0})))))}},{key:"container",get:function(){return this._container}}]),b}();u.contextTypes=n.SharedStateComponent.contextTypes,b.a=u;var v=Object(n.adonis)(r).div("193vjnw",{lastChild:"229bd5"},"Item"),w=n.adonis.div("12dmntm","Slider"),x=n.adonis.div("1m161zg","ItemContainer"),y=Object(n.adonis)(t).span("120drhm","ItemTitle"),z=Object(n.adonis)(y)("1kbikta","BlendingLabel"),A=n.adonis.div("tj7k39",{rendered:"cuo4v2",visible:"82svov"},"ItemContent"),B=Object(n.adonis)(s).div("120drhm","Overlay"),C=Object(n.adonis)(o.a)("ii685b","BlendingControl")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(48),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=(c.n(o),c(84)),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=o.ControlsStyles.ControlItemTitle,s=n.Utils.flipObject(p.a),t=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onPreviousClick","_onNextClick"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,o.BaseComponent),q(b,[{key:"_onPreviousClick",value:function(a){a.preventDefault(),a.stopPropagation();var b=k()(s),c=(b.indexOf(this.props.value.toString())+b.length-1)%b.length,d=parseInt(b[c],10);this.props.onChange&&this.props.onChange(d)}},{key:"_onNextClick",value:function(a){a.preventDefault(),a.stopPropagation();var b=k()(s),c=(b.indexOf(this.props.value.toString())+b.length+1)%b.length,d=parseInt(b[c],10);this.props.onChange&&this.props.onChange(d)}},{key:"render",value:function(){var a={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-left.png",!0)+"')"},b={backgroundImage:"url('"+this._getAssetPath("editor/controls/overlay/arrow-right.png",!0)+"')"},c=this.props.value;return o.React.createElement(u,{styles:this.props.styles},o.React.createElement(w,{onClick:this._onPreviousClick,style:a}),o.React.createElement(v,null,this._t("pesdk.overlay.title."+s[c])),o.React.createElement(w,{onClick:this._onNextClick,style:b}))}}]),b}();t.contextTypes=o.BaseComponent.contextTypes,b.a=t;var u=o.adonis.div("15zte1z","BlendingControlContainer");t.RootElement=u;var v=Object(o.adonis)(r).div("1v7ogyl","Label"),w=o.adonis.div("1v32l0l","Arrow")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=c.n(o),q=c(343),r=c(348),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=n.Math.Vector2,u=void 0;n.Operations.SpriteOperation&&(u=n.Operations.SpriteOperation.StickerSprite);var v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._updateStickerCategories=f._updateStickerCategories.bind(f),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,o.BaseControls),s(b,[{key:"createSticker",value:function(a){var b=this;return this.loadStickerImage(a).then(function(c){var d=b.context.editor.operations.getOrCreate("sprite"),e=d.getInputDimensions(!1),f=new t(c.width,c.height),g=new t(.5*e.min(),.5*e.min()),h=d.createSticker({identifier:a.identifier,image:c,position:new t(.5,.5),dimensions:n.Utils.resizeVectorToFit(f,g),rotation:0,smoothDownscaling:b._options.smoothDownscaling});return b.sharedState.set({selectedSprite:h}),d.addSprite(h),b.addLocalHistorySnapshot("sticker-creation",!1),h})}},{key:"loadStickerImage",value:function(a){var b=this;return new k.a(function(c,d){var e=a.images.mediaBase,f=o.StickerManager.getURLForSticker(a,"base"),g=b._getAssetPath(f),h=new window.Image,i=void 0,j=setTimeout(function(){i=o.ModalManager.instance.displayLoading(b._t("pesdk.common.text.loading"))},100);h.addEventListener("load",function(){i&&i.close(),j&&(clearTimeout(j),j=null),void 0!==e.width&&void 0!==e.height&&(h.width=e.width,h.height=e.height),c(h)}),h.addEventListener("error",function(){i&&i.close(),j&&(clearTimeout(j),j=null),o.ModalManager.instance.displayError(b._t("pesdk.common.title.error"),b._t("pesdk.sticker.text.stickerLoadingError",{path:h.src})),d(new Error("Loading sticker failed"))}),h.crossOrigin=b.context.editor.getCrossOrigin(),h.src=g})}},{key:"_updateStickerCategories",value:function(a){var b=this._options,c=b.categories,d=b.replaceCategories,e=b.availableStickers;a||(a=c);var f=new o.StickerManager(this.context.ui,{categories:a,replaceCategories:d,availableStickers:e});this.sharedState.set({stickerManager:f})}},{key:"_onEnter",value:function(){var a=this.context.editor;this._updateStickerCategories(),this._mediator.on(o.Constants.EVENTS.ADDED_STICKER,this._updateStickerCategories),a.zoom.auto(),a.features.disable("zoom","drag")}},{key:"_onLeave",value:function(){var a=this.context.editor;this._mediator.off(o.Constants.EVENTS.ADDED_STICKER,this._updateStickerCategories),a.features.enable("zoom","drag"),a.render()}}],[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=a.getOrCreate("sprite"),d=c.getInputDimensions(!1),e=b.selectedSprite,f=b.stickerManager;if(e&&c.getSprites().indexOf(e)<0){var g=c.getSprites().filter(function(a){return a.getId()===e.getId()})[0];g&&(e=g)}return{operation:c,inputDimensions:d,stickerManager:f,selectedSprite:e,stickerObject:e&&f?f.getStickerByIdentifier(e.getIdentifier()):null,image:e?e.getImage():null,alpha:e?100*e.getAlpha():0,tintMode:e?e.getTintMode():"",tintColor:e?e.getTintColor():null,setStickerOptions:function(a){e&&e.set(a)},setStickerImage:function(a){e&&e.setImage(a)},setAlpha:function(a){e&&e.setAlpha(a/100)},setTintMode:function(a){e&&e.setTintMode(a)},setTintColor:function(a){e&&e.setTintColor(a)}}}},{key:"clickAtPosition",value:function(a,b){var c=b.operations.get("sprite");if(!c)return!1;var d=c.getSpritesAtPosition(a,b.getOutputTextureDimensions()).filter(function(a){return a instanceof u});return!!d[0]&&{selectedSprite:d[0]}}},{key:"getPreloadAssets",value:function(a){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]}},{key:"isEnabled",value:function(a){return a.isToolAllowed("sticker")&&a.isToolEnabled("sticker")}}]),b}();v.identifier="sticker",v.controlsComponent=q.a,v.canvasControlsComponent=r.a,v.iconPath="editor/controls/sticker/icon.png",v.activeIconPath="editor/controls/sticker/icon-active.png",v.requiredOperations=["sprite"],v.defaultOptions={categories:[],replaceCategories:!1,availableStickers:null,snapRotation:90,snapRotationTolerance:5},v.updatableOperations=["sprite"],v.switchToDefaultControlsOnRemoval=!0,p.a.Controls.StickerControls=v,b.a=v},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=(c.n(o),c(344)),q=c(346),r=c(347),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=n.Math.Vector2,u={ROOT:1,CATEGORY:2,OPTIONS:3},v=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));f._bindAll("_onCategoryClick","_onStickerClick","_onBackClick","_onNewStickerClick","_onReplaceClick"),f._needsStyleFixes=!0;var g=u.ROOT;return f.sharedState.selectedSprite&&(g=u.OPTIONS),f.state.currentPanel=g,f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.ControlsComponent),s(b,[{key:"fixStyles",value:function(){var a=this;return this._list.style.height="100%",function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"fixStyles",this).call(this).then(function(){if(o.Utils.Browser.isIElte(10)){var b=a._container.offsetHeight;a._list.style.height=b+"px"}return a.refs.panel.fixStyles()})}},{key:"componentDidUpdate",value:function(a,b){this.state.currentPanel!==b.currentPanel&&this.fixStyles()}},{key:"sharedStateDidChange",value:function(a,b){a.stickerObject!==b.stickerObject&&b.selectedSprite&&b.stickerObject&&this.setState({currentPanel:u.OPTIONS})}},{key:"_onReplaceClick",value:function(){this.setState({currentPanel:u.ROOT})}},{key:"_onNewStickerClick",value:function(){this.state.currentPanel=u.ROOT,this.setSharedState({selectedSprite:null})}},{key:"_onCategoryClick",value:function(a){this.setState({currentPanel:u.CATEGORY,category:a})}},{key:"_onBackClick",value:function(){this.setState({currentPanel:u.ROOT})}},{key:"_onStickerClick",value:function(a){var b=this,c=this.sharedState.selectedSprite,d=function(){b.setState({currentPanel:u.OPTIONS})},e=this.context.editor;c?this.props.controls.loadStickerImage(a).then(function(f){var g=c.getDimensions().clone().max(),h=new t(g,g),i=new t(f.width,f.height),j={image:f,identifier:a.identifier,dimensions:n.Utils.resizeVectorToFit(i,h)};"none"!==c.getTintMode()&&c.setTintMode(a.tintMode||"none"),b.sharedState.setStickerOptions(j),b.sharedState.setStickerImage(f),b.props.controls.addLocalHistorySnapshot("sticker-image",!0),e.render(),d()}):this.props.controls.createSticker(a).then(function(a){d()})}},{key:"_renderCurrentPanel",value:function(){var a=this,b=this.props.controls,c=this.sharedState.stickerManager;switch(this.state.currentPanel){case u.ROOT:return o.React.createElement(p.a,{innerRef:function(b){a._list=b},stickerManager:c,onCategoryClick:this._onCategoryClick,onStickerClick:this._onStickerClick,controls:b,ref:"panel"});case u.CATEGORY:return o.React.createElement(q.a,{innerRef:function(b){a._list=b},category:this.state.category,stickerManager:c,onBackClick:this._onBackClick,onStickerClick:this._onStickerClick,controls:b,ref:"panel"});case u.OPTIONS:return o.React.createElement(r.a,{innerRef:function(b){a._list=b},stickerManager:c,onReplaceClick:this._onReplaceClick,onNewStickerClick:this._onNewStickerClick,controls:b,ref:"panel"})}}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){return this._renderCurrentPanel()}}]),b}();v.contextTypes=o.ControlsComponent.contextTypes,v.RootElement=o.ControlsComponent.RootElement,b.a=v},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(345)),p=c(138),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f.state={category:"all"},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.BaseComponent),q(b,[{key:"_onCategoryClick",value:function(a,b){this.props.onCategoryClick&&this.props.onCategoryClick(a)}},{key:"fixStyles",value:function(){var a=this;return k.a.resolve().then(function(){n.Utils.Browser.isIElte(10)?Object(n.requestAnimationFrame)(function(){a._scrollbar.update()}):a._scrollbar.update()})}},{key:"_renderListItems",value:function(){var a=this;return this.props.stickerManager.getCategories().map(function(b){return n.React.createElement(o.a,{key:b.identifier,category:b,onClick:a._onCategoryClick.bind(a,b)})})}},{key:"render",value:function(){var a=this,b=this.props,c=b.stickerManager,d=b.innerRef;return n.React.createElement(s,{innerRef:function(b){d&&d(b),a._wrapper=b},className:void 0},n.React.createElement(n.ScrollableListComponent,{direction:"vertical",innerRef:function(b){a._scrollbar=b}},n.React.createElement(t,null,this._renderListItems()),n.React.createElement(p.a,{stickers:c.getStickersForCategory("all"),onStickerClick:this.props.onStickerClick})))}}]),b}();r.contextTypes=n.BaseComponent.contextTypes,b.a=r;var s=n.adonis.div("rfecls","Wrapper"),t=n.adonis.ul("5jg0ou","CategoryList")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.ControlItem,o=l.ControlsStyles.ControlItemTitle,p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseComponent),m(b,[{key:"render",value:function(){var a=this.props.category,b={backgroundImage:"url('"+this._getAssetPath(a.metaData.backgroundImage)+"')"};return l.React.createElement(q,{onClick:this.props.onClick,style:b,className:void 0},l.React.createElement(s,null,this._t("pesdk.sticker.asset."+a.identifier)||a.defaultName),l.React.createElement(r,null))}}]),b}();p.contextTypes=l.BaseComponent.contextTypes,b.a=p;var q=Object(l.adonis)(n).li("1dc04zg","StickerCategoryItem"),r=l.adonis.div("1fxaw8w","Gradient"),s=Object(l.adonis)(o).div("120drhm","Title")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(138)),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=n.ControlsStyles.ControlItemTextStyles,r=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){
if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.BaseComponent),p(b,[{key:"fixStyles",value:function(){var a=this;return k.a.resolve().then(function(){n.Utils.Browser.isIElte(10)?Object(n.requestAnimationFrame)(function(){a._scrollbar.update()}):a._scrollbar.update()})}},{key:"render",value:function(){var a=this,b=this.props,c=b.stickerManager,d=b.category,e=b.onBackClick,f=b.onStickerClick,g=b.innerRef,h={backgroundImage:"url('"+this._getAssetPath(d.metaData.backgroundImage)+"')",backgroundSize:"cover"},i={backgroundImage:"url('"+this._getAssetPath("editor/controls/shared/back.png",!0)+"')"},j=c.getStickersForCategory(d.identifier);return n.React.createElement(s,{innerRef:function(a){return g&&g(a)},className:void 0},n.React.createElement(t,{style:h},n.React.createElement(u,null,n.React.createElement(w,null,this._t("pesdk.sticker.asset."+d.identifier)||d.defaultName),d.metaData.author&&n.React.createElement(x,null,n.React.createElement("span",null,"by "),d.metaData.author),n.React.createElement(y,{style:i,onClick:e.bind(this),className:void 0}))),n.React.createElement(v,{innerRef:function(b){a._wrapper=b}},n.React.createElement(n.ScrollableListComponent,{direction:"vertical",innerRef:function(b){a._scrollbar=b}},n.React.createElement(o.a,{stickers:j,onStickerClick:f}))))}}]),b}();r.contextTypes=n.BaseComponent.contextTypes,b.a=r;var s=n.adonis.div("iauaz2","StickerCategoryPanel"),t=n.adonis.div("2j8ygm","Header"),u=n.adonis.div("3wd3qf","HeaderContent"),v=n.adonis.div("zb78lb","Content"),w=Object(n.adonis)(q).div("kswtk0","Title"),x=Object(n.adonis)(q).div("1qn5s6u","Subtitle"),y=n.adonis.button("1t2nim8","BackButton")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(8),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),p=n.ControlsStyles.PlainControlItemBackground,q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onTintToggle","_onTintColorChange","_onOpacityChange"),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,n.SharedStateComponent),o(b,[{key:"_getStickerObject",value:function(){return this.sharedState.stickerObject}},{key:"_onChangedOption",value:function(a,b){a&&this.props.controls.addLocalHistorySnapshot(a,b),this.context.editor.render()}},{key:"_onOpacityChange",value:function(a){this.sharedState.setAlpha(a),this._onChangedOption("sticker-opacity",!0)}},{key:"_onTintToggle",value:function(a){var b=this._getStickerObject();this.sharedState.setTintMode(a?b.tintMode:"none"),this._onChangedOption("sticker-tint-toggle",!0)}},{key:"_onTintColorChange",value:function(a){this.sharedState.setTintColor(a.clone()),this._onChangedOption("sticker-tint",!0)}},{key:"fixStyles",value:function(){var a=this;return k.a.resolve().then(function(){n.Utils.Browser.isIElte(10)?Object(n.requestAnimationFrame)(function(){a._scrollbar.update()}):a._scrollbar.update()})}},{key:"render",value:function(){var a=this,b=this.props,c=b.innerRef,d=b.onNewStickerClick,e=b.onReplaceClick,f=this.sharedState,g=f.alpha,h=f.tintMode,i=f.tintColor,j=f.selectedSprite;if(!j)return null;var k=this._getStickerObject(),l=this.context.editor.getCrossOrigin(),m=!!k.tintMode&&"none"!==k.tintMode;return n.React.createElement(r,{innerRef:function(b){c&&c(b),a._wrapper=b},className:void 0},n.React.createElement(n.ScrollableListComponent,{direction:"vertical",innerRef:function(b){a._scrollbar=b}},n.React.createElement("div",null,n.React.createElement(s,null,n.React.createElement(n.ButtonComponent,{title:this._t("pesdk.sticker.button.new"),className:void 0,onClick:d}),n.React.createElement(t,null,n.React.createElement(u,null,n.React.createElement(v,{crossOrigin:l,onClick:e,src:j.getImage().src})),n.React.createElement(w,null,n.React.createElement(x,null,this._t("pesdk.sticker.asset."+k.identifier)||k.defaultName),n.React.createElement(y,{onClick:e,className:void 0},this._t("pesdk.sticker.button.replace")))),n.React.createElement(n.SliderControlComponent,{minValue:0,value:Math.round(g),maxValue:100,label:this._t("pesdk.sticker.title.opacity"),onSliderValueChange:this._onOpacityChange,onValueChange:this._onOpacityChange,middleDot:!1,className:void 0})),m&&n.React.createElement(n.CollapseSectionComponent,{toggleable:!0,title:this._t("pesdk.sticker.button.fill"),expanded:"none"!==h,className:void 0,onToggle:this._onTintToggle},n.React.createElement(z,{value:i,onColorPickerToggle:this.fixStyles,onChange:this._onTintColorChange})))))}}]),b}();q.contextTypes=n.SharedStateComponent.contextTypes,b.a=q;var r=n.adonis.div("rfecls","Wrapper"),s=n.adonis.div("1vnvjau","TopSection"),t=n.adonis.div("aqfteq","Details"),u=Object(n.adonis)(p).div("6u8g0p","Thumbnail"),v=n.adonis.img("zuxvzr","ThumbnailImage"),w=n.adonis.div("1trlo6v","DetailsContainer"),x=n.adonis.div("w9mc0y","Title"),y=n.adonis.div("1rhky7p","ReplaceButton"),z=Object(n.adonis)(n.ColorSelectionComponent)("1ouwzwk","ColorSelection")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(55)),p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=void 0;n.Operations.SpriteOperation&&(q=n.Operations.SpriteOperation.StickerSprite);var r=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.a),p(b,[{key:"_renderSpriteItems",value:function(a){return function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0}(b.prototype.__proto__||m()(b.prototype),"_renderSpriteItems",this).call(this,a.filter(function(a){return a instanceof q}))}},{key:"_selectNextSprite",value:function(){for(var a=this.getSharedState("operation").getSprites().slice(0).reverse(),b=void 0,c=void 0,d=0;d<a.length;d++)if((b=a[d])instanceof q){c=b;break}c||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:c})}},{key:"_createSprite",value:function(a){return this.getSharedState("operation").createSticker(a)}}]),b}();r.contextTypes=o.a.contextTypes,b.a=r},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(7),o=(c.n(n),c(5)),p=c.n(o),q=c(350),r=c(354),s=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=n.Math.Vector2,v=void 0,w=void 0;n.Operations.SpriteOperation&&(v=n.Operations.SpriteOperation.TextSprite,w=n.Operations.SpriteOperation.BrushSprite);var x=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||m()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,o.BaseControls),t(b,[{key:"createText",value:function(){var a=this.context.editor;this.saveTextSettings();var b=this.sharedState.get("operation"),c=this.sharedState.get("fontManager"),d=a.getOutputDimensions(),e=a.getSDK().getRenderer().getMaxTextureSize(),f=this.getGlobalToolState(),g=f?c.getVariationByIdentifier(f.fontIdentifier):c.getDefaultVariation(),h=b.createText(s({text:this.context.ui.translate("pesdk.text.placeholder.defaultText"),position:new u(.5,.5),maxWidth:.5,maxHeight:e?e/d.y:3,textMetrics:g.getTextMetrics(),fontIdentifier:g.getIdentifier(),fontSize:.08,fontFamily:g.getFontFamily(),fontWeight:g.getFontWeight(),fontStyle:g.getFontStyle(),color:n.Color.WHITE,alignment:"center"},f||{}));return this.sharedState.set({selectedSprite:h}),b.addSprite(h),this.addLocalHistorySnapshot(),h}},{key:"saveTextSettings",value:function(){var a=this.sharedState.get("selectedSprite");a&&this.setGlobalToolState(a.serializeOptions(["color","backgroundColor","characterSpacing","lineHeight","alignment","fontIdentifier","fontSize","fontFamily","fontWeight","fontStyle"]))}},{key:"_onEnter",value:function(){var a=this.context.editor,b=this._options,c=b.fonts,d=b.replaceFonts,e=b.availableVariations,f=new o.FontManager(this.context.ui,{fonts:c,replaceFonts:d,availableVariations:e});this.sharedState.set({fontManager:f}),a.features.disable("zoom","drag"),a.zoom.auto(),this.sharedState.get("selectedSprite")||this.createText(),a.render()}},{key:"_onLeave",value:function(){var a=this.context.editor;this.saveTextSettings(),a.features.enable("zoom","drag"),a.render()}}],[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=a.getOrCreate("sprite"),d=c.getInputDimensions(),e=b.selectedSprite;if(e&&c.getSprites().indexOf(e)<0){var f=c.getSprites().filter(function(a){return a.getId()===e.getId()})[0];f&&(e=f)}return{operation:c,selectedSprite:e,inputDimensions:d,color:e?e.getColor().clone():null,backgroundColor:e?e.getBackgroundColor().clone():null,alignment:e?e.getAlignment():null,lineHeight:e?e.getLineHeight():0,fontFamily:e?e.getFontFamily():null,setFontSize:function(a){e&&e.setFontSize(a/d.min())},setColor:function(a){e&&e.setColor(a.clone())},setBackgroundColor:function(a){e&&e.setBackgroundColor(a.clone())},setCharacterSpacing:function(a){e&&e.setCharacterSpacing(a)},setLineHeight:function(a){e&&e.setLineHeight(a)},setAlignment:function(a){e&&e.setAlignment(a)},setTextOptions:function(a){e&&e.set(a)},setVariation:function(a){e&&e.set({fontIdentifier:a.getIdentifier(),fontFamily:a.getFontFamily(),fontWeight:a.getFontWeight(),fontStyle:a.getFontStyle(),textMetrics:a.getTextMetrics()})}}}},{key:"clickAtPosition",value:function(a,b){if(!b.operations.exists("sprite"))return!1;var c=b.operations.getOrCreate("sprite").getSpritesAtPosition(a,b.getOutputTextureDimensions()).filter(function(a){return!(a instanceof w)});return!!(c.length&&c[0]instanceof v)&&{selectedSprite:c[0]}}},{key:"getPreloadAssets",value:function(a){return["editor/controls/shared/canvas-overlay-controls/to-front.png","editor/controls/shared/canvas-overlay-controls/duplicate.png","editor/controls/shared/canvas-overlay-controls/delete.png"]}},{key:"isEnabled",value:function(a){return a.isToolAllowed("text")&&a.isToolEnabled("text")}}]),b}();x.identifier="text",x.controlsComponent=q.a,x.canvasControlsComponent=r.a,x.iconPath="editor/controls/text/icon.png",x.activeIconPath="editor/controls/text/icon-active.png",x.requiredOperations=["sprite"],x.defaultOptions={fonts:[],replaceFonts:!1,availableVariations:null,snapRotation:90,snapRotationTolerance:5},x.updatableOperations=["sprite"],x.switchToDefaultControlsOnRemoval=!0,p.a.Controls.TextControls=x,b.a=x},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),c(351)),p=c(352),q=(c(353),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),r=n.GroupedControlsStyles.ControlGroupList,s=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];var g,h,i,j=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return j._bindAll("_onNewTextClick","_onFontChanged","_onFontSizeChanged","_onCharacterSpacingChanged","_onLineSpacingChanged","_onColorChanged","_onBackgroundColorChanged","_onAlignmentChanged","_onVariationChanged","_onTextScaled"),j._events=(g={},h=n.Constants.EVENTS.TEXT_SCALED,i=j._onTextScaled,h in g?e()(g,h,{value:i,enumerable:!0,configurable:!0,writable:!0}):g[h]=i,g),j._unavailableFontFamilies=[],j}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.ControlsComponent),q(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._loadFonts()}},{key:"_loadFonts",value:function(){var a=this,b=this.sharedState.fontManager,c=this.context.ui.getFontLoader();c.setFonts(b.getFonts());var d=void 0,e=window.setTimeout(function(){d=n.ModalManager.instance.displayLoading(a._t("pesdk.editor.text.loadingFonts"),!0)},200),f=this.sharedState.selectedSprite;return this._unavailableFontFamilies=[],c.load().then(function(){window.clearTimeout(e),d&&d.close(),f.emit("update"),a.context.editor.render()}).catch(function(b){window.clearTimeout(e),d&&d.close(),b.forEach(function(b){a._unavailableFontFamilies.push(b.font.getFontFamily())});var c=a._unavailableFontFamilies.join(", ");f.emit("update"),a.context.editor.render(),a.forceUpdate(),n.ModalManager.instance.displayError(a._t("pesdk.editor.title.fontLoadingError"),a._t("pesdk.editor.text.fontLoadingError",{fonts:c}))})}},{key:"_onChangedOption",value:function(a,b){a&&this.props.controls.addLocalHistorySnapshot(a,b),this.context.editor.render()}},{key:"_onNewTextClick",value:function(){this.props.controls.createText()}},{key:"_onAlignmentChanged",value:function(a){this.sharedState.setAlignment(a),this._onChangedOption("text-alignment",!0)}},{key:"_onVariationChanged",value:function(a){this.sharedState.setVariation(a),this._onChangedOption("font-family",!0)}},{key:"_onFontChanged",value:function(a){var b=a.getVariations()[0];this._onVariationChanged(b)}},{key:"_onFontSizeChanged",value:function(a){this.sharedState.setFontSize(a),this._onChangedOption("font-size",!1)}},{key:"_onColorChanged",value:function(a){this.sharedState.setColor(a),this._onChangedOption("color",!0)}},{key:"_onBackgroundColorChanged",value:function(a){this.sharedState.setBackgroundColor(a),this._onChangedOption("background-color",!0)}},{key:"_onCharacterSpacingChanged",value:function(a){this.sharedState.setCharacterSpacing(a),this._onChangedOption()}},{key:"_onLineSpacingChanged",value:function(a){this.sharedState.setLineHeight(a),this._onChangedOption("line-spacing",!0)}},{key:"_onTextScaled",value:function(){this.forceUpdate()}},{key:"_renderFontFamilyAndSizeComponent",value:function(){var a=this,b=this.sharedState,c=b.selectedSprite,d=b.inputDimensions,e=b.fontManager,f=n.Utils.toFixed(c.getFontSize()*d.min(),1),g=Math.round(d.y),h=e.getFonts().filter(function(b){return a._unavailableFontFamilies.indexOf(b.getFontFamily())<0});return n.React.createElement(o.a,{onValueChange:this._onFontSizeChanged,onFontChange:this._onFontChanged,fonts:h,dropdownValue:c.getFontFamily(),label:this._t("pesdk.text.title.font"),inputLabel:this._t("pesdk.text.title.size"),className:void 0,value:f,minValue:10,maxValue:g})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var a=this,b=this.sharedState,c=b.selectedSprite,d=b.fontManager;if(!c)return null;var e=d.getFontByFontFamily(c.getFontFamily()),f=d.getVariationByIdentifier(c.getFontIdentifier()),g=this.sharedState,h=g.color,i=g.backgroundColor,j=g.alignment,k=g.lineHeight;return n.React.createElement(n.ScrollableListComponent,{direction:"vertical",innerListRef:function(b){a._list=b},innerRef:function(b){a._scrollbar=b}},n.React.createElement(t,{className:void 0},n.React.createElement(n.ButtonComponent,{title:this._t("pesdk.text.button.new"),onClick:this._onNewTextClick,className:void 0}),n.React.createElement(v,null,this._renderFontFamilyAndSizeComponent(),n.React.createElement(p.a,{alignment:j,variations:e.getVariations(),selectedVariation:f,onAlignmentChange:this._onAlignmentChanged,onVariationChange:this._onVariationChanged})),n.React.createElement(n.ColorSelectionComponent,{value:h,onColorPickerToggle:this.fixStyles,onChange:this._onColorChanged})),n.React.createElement(u,null,n.React.createElement(n.CollapseSectionComponent,{key:"background",title:this._t("pesdk.text.title.background"),alwaysExpanded:!0,className:void 0},n.React.createElement(n.ColorSelectionComponent,{value:i,onColorPickerToggle:this.fixStyles,onChange:this._onBackgroundColorChanged})),n.React.createElement(n.CollapseSectionComponent,{key:"spacing",title:this._t("pesdk.text.title.spacing"),alwaysExpanded:!0},n.React.createElement(n.SliderControlComponent,{label:this._t("pesdk.text.title.line"),minValue:.5,maxValue:3,className:void 0,value:n.Utils.toFixed(k,1),onSliderValueChange:this._onLineSpacingChanged,onValueChange:this._onLineSpacingChanged}))))}}]),b}();s.contextTypes=n.ControlsComponent.contextTypes,s.RootElement=n.ControlsComponent.RootElement,b.a=s;var t=n.adonis.div("1vnvjau","TopSection"),u=Object(n.adonis)(r).ul("mgrj1m","SectionList"),v=n.adonis.div("tymb4t","Details")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._updateFontsMap(),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.ValueSelectionComponent),o(b,[{key:"componentWillReceiveProps",value:function(a){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentWillReceiveProps",this).call(this,a),a.fonts!==this.props.fonts&&this._updateFontsMap()}},{key:"_updateFontsMap",value:function(){var a=this;this._fontsMap={},this.props.fonts.forEach(function(b){a._fontsMap[b.getFontFamily()]=b})}},{key:"_renderLeftPart",value:function(){var a=this.sharedState.fontFamily,b=this._fontsMap[a];return n.React.createElement("div",{ref:"root",className:void 0},n.React.createElement(n.DropdownComponent,{value:b,style:{fontFamily:a},className:void 0,onChange:this.props.onFontChange},this.props.fonts.map(function(a){return n.React.createElement(n.DropdownComponent.Item,{value:a,key:a.getFontFamily(),style:{fontFamily:a.getFontFamily()}},a.getFontFamily())})))}}]),b}();p.contextTypes=n.ValueSelectionComponent.contextTypes,b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseComponent),m(b,[{key:"_onAlignmentItemClick",value:function(a){this.props.onAlignmentChange&&this.props.onAlignmentChange(a.title)}},{key:"_onStyleItemClick",value:function(a){switch(a.title){case"bold":this.props.onStyleChange&&this.props.onStyleChange("fontWeight",this.props.bold?"normal":"bold");break;case"italic":this.props.onStyleChange&&this.props.onStyleChange("fontStyle",this.props.italic?"normal":"italic")}}},{key:"_renderAligmentItems",value:function(){var a=this,b=this.props.alignment;return[{title:"left",selected:"left"===b,iconPath:"editor/controls/text/align-left.png",selectedIconPath:"editor/controls/text/align-left-selected.png"},{title:"center",selected:"center"===b,iconPath:"editor/controls/text/align-center.png",selectedIconPath:"editor/controls/text/align-center-selected.png"},{title:"right",selected:"right"===b,iconPath:"editor/controls/text/align-right.png",selectedIconPath:"editor/controls/text/align-right-selected.png"}].map(function(b){var c=a._getAssetPath(b.iconPath,!0),d=a._getAssetPath(b.selectedIconPath,!0);return l.React.createElement(q,{key:b.title,className:void 0,"data-alignment":b.title,"data-selected":b.selected,onClick:a._onAlignmentItemClick.bind(a,b)},l.React.createElement(r,{visible:!0,src:c}),l.React.createElement(r,{visible:b.selected,src:d}))},this)}},{key:"_renderStylesDropdown",value:function(){var a=this.props,b=a.variations,c=a.selectedVariation;return l.React.createElement(l.DropdownComponent,{value:c,onChange:this.props.onVariationChange,className:void 0,enableMenu:b.length>1},b.map(function(a){return l.React.createElement(l.DropdownComponent.Item,{value:a,key:a.getIdentifier(),style:{fontFamily:a.getFontFamily(),fontStyle:a.getFontStyle(),fontWeight:a.getFontWeight()}},a.getLabel())}))}},{key:"render",value:function(){return l.React.createElement(o,{className:void 0},l.React.createElement(p,null,this._renderStylesDropdown()),l.React.createElement(p,{right:!0},this._renderAligmentItems()))}}]),b}();n.contextTypes=l.BaseComponent.contextTypes,b.a=n;var o=l.adonis.div("1hzgwcr","TextControlsStyling"),p=l.adonis.div("64aub5",{right:"9ygmmm"},"Group"),q=l.adonis.div("tgbgl1",{selected:"zgbg08"},"ItemContainer"),r=l.adonis.img("7ni881",{visible:"zgbg08"},"ItemImage")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.ControlItem,o=l.ControlsStyles.ControlItemTitle;((function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onClick","_onMouseEnter","_onMouseLeave","_onIntensityChanged"),f.state={selected:!1,hovering:!1,intensity:50},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseComponent),m(b,[{key:"_onClick",value:function(){this.setState({selected:!0})}},{key:"_onMouseEnter",value:function(){this.setState({hovering:!0})}},{key:"_onMouseLeave",value:function(){this.setState({hovering:!1})}},{key:"_onIntensityChanged",value:function(a){this.setState({intensity:a})}},{key:"render",value:function(){var a=this.state,b=a.selected,c=a.hovering,d=a.intensity;return l.React.createElement(p,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick,selected:b},!(b&&c)&&l.React.createElement(q,{selected:b},this.props.title),b&&c&&l.React.createElement(r,null,l.React.createElement(l.SliderComponent,{minValue:0,maxValue:100,valueUnit:"",middleDot:!1,value:d,onChange:this._onIntensityChanged})))}}]),b})()).contextTypes=l.BaseComponent.contextTypes;var p=Object(l.adonis)(n).div("nasu8t",{selected:"120drhm"},"LegibilityPresetItem"),q=Object(l.adonis)(o).div("1hd9n2f",{selected:"186qcx6"},"Title"),r=l.adonis.div("8ekz81","Slider")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(7),m=(c.n(l),c(55)),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=void 0;l.Operations.SpriteOperation&&(o=l.Operations.SpriteOperation.TextSprite);var p=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.a),n(b,[{key:"_selectNextSprite",value:function(){for(var a=this.getSharedState("operation").getSprites().slice(0).reverse(),b=void 0,c=void 0,d=0;d<a.length;d++)if((b=a[d])instanceof o){c=b;break}c||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:c})}},{key:"_createSprite",value:function(a){return this.getSharedState("operation").createText(a)}}]),b}();p.contextTypes=m.a.contextTypes,b.a=p},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(7),m=(c.n(l),c(5)),n=c.n(m),o=c(356),p=c(358),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=l.Math.Vector2,s=new r(50,50),t=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||k()(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.BaseControls),q(b,[{key:"convertOperationOptionsToUI",value:function(a){var b=a.start,c=a.end,d=a.rotation,e=a.textureScale,f=this.sharedState.get("transformOperation"),g=f.calculateScale(d),h=f.getInputDimensions(!1),i=Math.cos(d),j=Math.sin(d),k=c.clone().subtract(b).divide(2),l=b.clone().add(k).multiply(h).subtract(h.clone().multiply(.5)),m=new r(l.x*i-l.y*j,l.x*j+l.y*i).multiply(g),n=h.clone().multiply(.5).add(m).clone().divide(h);return{start:n.clone().subtract(k.clone().multiply(g)),end:n.clone().add(k.clone().multiply(g)),rotation:d,textureScale:e}}},{key:"_onEnter",value:function(){var a=this.context.editor,b=this.sharedState.get("forceCrop"),c=a.operations.exists("transform"),d=a.operations.getOrCreate("transform");d.setEnabled(!1,!1);var e=a.operations.exists("orientation"),f=a.operations.getOrCreate("orientation"),g={end:new r(1,1),rotation:0,start:new r(0,0),textureScale:1},h=d.getInputDimensions(!1),i=(d.getNewDimensions(h),g),j=i,k=j.start,m=j.end,n=j.textureScale,o=j.rotation;if(c){k=(i=d.serializeOptions()).start,m=i.end,o=i.rotation,n=i.textureScale,delete i.enabled;var p=this.convertOperationOptionsToUI({start:k,end:m,textureScale:n,rotation:o});k=p.start,m=p.end}a.broadcastTransform(d,g),d.set(i,c);var q=f.serializeOptions();a.setSpriteScale(d.calculateScale(o)),a.setRotation(o),a.zoom.auto(!0,!1,function(){a.features.disable("zoom","drag",b?"export":void 0)},!1),this.sharedState.set({transformOperation:d,initialTransformOptions:i,newTransformOptions:{start:k,end:m,rotation:o,textureScale:n},transformOperationExistedBeforeEntering:c,orientationOperation:f,initialOrientationOptions:q,newOrientationOptions:l.Utils.cloneOptions(q),orientationOperationExistedBeforeEntering:e,start:r.fromObject(k),end:r.fromObject(m),rotation:o,orientationRotation:f.getRotation(),flipVertically:f.getFlipVertically(),flipHorizontally:f.getFlipHorizontally(),ratio:d._ratio||this.sharedState.get("ratio")||null})}},{key:"_onLeave",value:function(){var a=this.context.editor,b=this.sharedState.get("orientationOperation"),c=this.sharedState.get("forceCrop");b.optionsEqual({rotation:0,flipVertically:!1,flipHorizontally:!1})&&a.operations.remove(b,!1),
this.applyNewTransformOptions();var d=this.sharedState.get("transformOperation"),e={start:d.getStart(),end:d.getEnd(),textureScale:d.getTextureScale(),rotation:d.getRotation()},f={start:new r(0,0),end:new r(1,1),rotation:0,textureScale:1};a.broadcastTemporaryTransform(d,e),d.set(f),a.broadcastTransform(d,e),d.set(e),d.getStart().equals(f.start)&&d.getEnd().equals(f.end)&&d.getRotation()===f.rotation&&d.getTextureScale()===f.textureScale?a.operations.remove(d,!1):d.setEnabled(!0),a.setRotation(0),a.setSpriteScale(1),a.features.enable("zoom","drag",c?"export":void 0),a.zoom.auto(!0)}},{key:"_getGlobalHistoryData",value:function(){return{ratio:this.sharedState.get("ratio")}}},{key:"_onOperationRemoved",value:function(a){}},{key:"applyNewTransformOptions",value:function(){var a=this.context.editor,b=this.sharedState.get("transformOperation"),c=this.sharedState.get("newTransformOptions"),d=c.start,e=c.end,f=c.textureScale,g=c.rotation;f=this._calculateTextureScale(),d=d.clone(),e=e.clone();var h=b.calculateScale(g),i=b.getInputDimensions(!1),j=Math.cos(-g),k=Math.sin(-g),l=e.clone().subtract(d).divide(2),m=d.clone().add(l).multiply(i).subtract(i.clone().multiply(.5)),n=new r(m.x*j-m.y*k,m.x*k+m.y*j).divide(h),o=i.clone().multiply(.5).add(n).clone().divide(i),p=o.clone().subtract(l.clone().divide(h)),q=o.clone().add(l.clone().divide(h)),s={start:new r(0,0),end:new r(1,1),rotation:0,textureScale:1},t={start:p,end:q,textureScale:f,rotation:g};b.set(s),a.broadcastTemporaryTransform(b,t),b.set(t),b._ratio=this.sharedState.get("ratio"),b.setTextureScale(this._calculateTextureScale())}},{key:"_calculateTextureScale",value:function(){var a=this.sharedState.get("transformOperation"),b=this.sharedState.get("ratio");if(!b||!b.getDimensions()||!b.getLockDimensions())return 1;var c=b.getDimensions(),d=this.sharedState.get("start"),e=this.sharedState.get("end").clone().subtract(d),f=a.getInputDimensions(!1).multiply(e);return c.x/f.x}},{key:"fixTransform",value:function(a,b,c,d){var e=this.context.editor,f=this.sharedState.get("transformOperation").getInputDimensions(!1),g=this.sharedState.get("ratio"),h=g&&g.getRatio(),i=g&&g.getDimensions();(g.getForceDimensions()||g.getLockDimensions())&&(h=i.x/i.y);var j=new r;j.x="left"===c?b.x:1-a.x,j.y="top"===d?b.y:1-a.y;var k=f.clone().multiply(j),l=b.clone().subtract(a).clone().multiply(f),m=s.clone().divide(e.zoom.targetLevel),n=new r(Math.min(m.x,.1*f.x),Math.min(m.y,.1*f.y));l.x=Math.min(Math.max(n.x,l.x),k.x),"*"!==h&&(l.y=l.x/h),l.y=Math.min(Math.max(n.y,l.y),k.y),"*"!==h&&(l.x=l.y*h);var o=l.divide(f);return"top"===d?a.y=b.y-o.y:b.y=a.y+o.y,"left"===c?a.x=b.x-o.x:b.x=a.x+o.x,"*"===h&&(a.multiply(f).round().divide(f),b.multiply(f).round().divide(f)),{start:a,end:b}}}],[{key:"mapOperationsToSharedState",value:function(a){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],{transformOperation:a.get("transform"),orientationOperation:a.get("orientation")}}},{key:"getPreloadAssets",value:function(a){var b=a.getOptions(),c=l.Utils.defaults(b.editor.controlsOptions.transform,this.defaultOptions),d=["editor/controls/transform/dimensions-cross.png","editor/controls/transform/degree-slider.png","editor/controls/transform/flip.png","editor/controls/transform/lock.png","editor/controls/transform/rotate.png"];return new m.TransformRatioManager(c).getCategories().forEach(function(a){a.getRatios().forEach(function(a){var b=a.getIdentifier();d.push("editor/controls/transform/ratios/"+b+"-default.png","editor/controls/transform/ratios/"+b+"-hover.png","editor/controls/transform/ratios/"+b+"-active.png")})}),d}},{key:"isEnabled",value:function(a){return a.isToolAllowed("transform")&&a.isToolEnabled("transform")}}]),b}();t.clickAtPosition=m.BaseControls.clickAtPosition,t.identifier="transform",t.controlsComponent=p.a,t.canvasControlsComponent=o.a,t.iconPath="editor/controls/transform/icon.png",t.activeIconPath="editor/controls/transform/icon-active.png",t.requiredOperations=["transform","orientation"],t.defaultOptions={categories:[],replaceCategories:!1,availableRatios:null,enableRotation:!0,enableStraighten:!0,enableFlip:!0,enableAcceptButton:!1},t.updatableOperations=["transform","orientation"],t.switchToDefaultControlsOnRemoval=!1,n.a.Controls.TransformControls=t,b.a=t},function(a,b,c){function d(a,b,c){return b in a?f()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(0),f=c.n(e),g=c(6),h=c.n(g),i=c(2),j=c.n(i),k=c(3),l=c.n(k),m=c(1),n=c.n(m),o=c(7),p=(c.n(o),c(5)),q=(c.n(p),c(15)),r=c(357),s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=function a(b,c,d){null===b&&(b=Function.prototype);var e=h()(b,c);if(void 0===e){var f=n()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0},u=o.Math.Vector2,v=function(a){function b(){var a,c;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||n()(b)).call.apply(a,[this].concat(f)));return h._bindAll("_onZoomDone","_onCornerDrag","_onCornerDragEnd","_onCenterDragStart","_onCenterDrag","_onCenterDragEnd","_onRotationChange","_onOperationUpdated","_onOperationRemoved","_onAcceptClick","_onAcceptMouseDown"),h._events=(d(c={},p.Constants.EVENTS.OPERATION_UPDATED,h._onOperationUpdated),d(c,p.Constants.EVENTS.OPERATION_REMOVED,h._onOperationRemoved),d(c,p.Constants.EVENTS.ZOOM_DONE,h._onZoomDone),c),h.state=o.Utils.extend(h.state,{visible:!1}),h}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=l()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(j.a?j()(a,b):a.__proto__=b)}(b,p.CanvasControlsComponent),s(b,[{key:"shouldSharedComponentUpdate",value:function(a,b){return!a.start.equals(b.start)||!a.end.equals(b.end)||a.orientationRotation!==b.orientationRotation||a.ratio!==b.ratio||a.changesDone!==b.changesDone}},{key:"sharedStateDidChange",value:function(a,b){(a.ratio&&a.ratio.getRatio())!==(b.ratio&&b.ratio.getRatio())&&this._calculateRatioFraction()}},{key:"sharedComponentWillUpdate",value:function(a,b){a.orientationRotation!==b.orientationRotation&&this._updateTransformAreaStyles()}},{key:"componentDidMount",value:function(){t(b.prototype.__proto__||n()(b.prototype),"componentDidMount",this).call(this),this._updateTransformAreaStyles(),this._calculateRatioFraction(),this.forceUpdate()}},{key:"componentWillUpdate",value:function(){this._updateTransformAreaStyles()}},{key:"componentDidUpdate",value:function(){!this._transformContainerRect&&this.getSharedState("ratio")&&(this._updateTransformAreaStyles(),this.forceUpdate())}},{key:"componentWillUnmount",value:function(){t(b.prototype.__proto__||n()(b.prototype),"componentWillUnmount",this).call(this),this._zoomAFRequest&&(Object(q.a)(this._zoomAFRequest),this._zoomAFRequest=null)}},{key:"_calculateRatioFraction",value:function(){var a=this.getSharedState("ratio");a&&"*"!==a.getRatio()&&(this._ratioFraction=p.Utils.findIntegerFraction(a.getRatio()))}},{key:"_onCenterDragStart",value:function(a){var b=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),areaDimensions:this._transformContainerRect.getSize(),imageDimensions:b.getInputDimensions(!1)}}},{key:"_onCenterDrag",value:function(a){var b=this._dragOptions,c=b.initialStart,d=b.initialEnd,e=b.areaDimensions,f=b.imageDimensions,g=a.clone().divide(e),h=d.clone().subtract(c),i=new u(0,0),j=new u(1,1).subtract(h),k=c.clone().add(g).clamp(i,j),l=k.clone().add(h);k.multiply(f).floor().divide(f),l.multiply(f).floor().divide(f),this.props.controls.fixTransform(k,l,"right","bottom");var m=this.getSharedState("newTransformOptions");m.start=k,m.end=l,this.setSharedState({start:k,end:l,changesDone:this.getSharedState("changesDone")||!(c.equals(k)&&d.equals(l))})}},{key:"_onCenterDragEnd",value:function(){this._emitEvent(p.Constants.EVENTS.TRANSFORM_AFTER_EDIT)}},{key:"_onCornerDragStart",value:function(a,b,c){var d=this.getSharedState("transformOperation");this._dragOptions={initialStart:this.getSharedState("start").clone(),initialEnd:this.getSharedState("end").clone(),verticalSide:a,horizontalSide:b,areaDimensions:this._transformContainerRect.getSize(),imageDimensions:d.getInputDimensions(!1)},this._currentCorner={vertical:a,horizontal:b}}},{key:"_onCornerDrag",value:function(a){var b=this._dragOptions,c=b.initialStart,d=b.initialEnd,e=b.verticalSide,f=b.horizontalSide,g=b.areaDimensions,h=a.clone().divide(g),i=c.clone(),j=d.clone();("top"===e?i:j).y+=h.y,("left"===f?i:j).x+=h.x,this.props.controls.fixTransform(i,j,f,e);var k=this.getSharedState("newTransformOptions");k.start=i,k.end=j,this.setSharedState({start:i,end:j,changesDone:!0}),this._emitEvent(p.Constants.EVENTS.TRANSFORM_RESIZE)}},{key:"_onCornerDragEnd",value:function(){this._emitEvent(p.Constants.EVENTS.TRANSFORM_AFTER_EDIT)}},{key:"_onRotationChange",value:function(a){var b=this.getSharedState("transformOperation"),c=this.context.editor;c.setRotation(a),c.setSpriteScale(b.calculateScale(a)),this.getSharedState("newTransformOptions").rotation=a,c.render(),this.setSharedState({rotation:a,changesDone:!0})}},{key:"_onZoomDone",value:function(){var a=this;this._zoomAFRequest=Object(q.b)(function(){a._updateTransformAreaStyles(),a.state.visible=!0,a.forceUpdate(),a._zoomAFRequest=null})}},{key:"_onOperationUpdated",value:function(a){if(a===this.getSharedState("transformOperation")){var b=this.context.editor,c=b.getSDK();c.setRotation(a.getRotation()),c.setSpriteScale(a.calculateScale()),b.render(),this.setSharedState({rotation:a.getRotation()}),this.forceUpdate()}}},{key:"_onOperationRemoved",value:function(a){"transform"!==a.constructor.identifier&&"orientation"!==a.constructor.identifier||this.forceUpdate()}},{key:"_onFlipClick",value:function(a){var b=this.context.editor,c=this.getSharedState("orientationOperation"),e=a.charAt(0).toUpperCase()+a.slice(1)+"ly",f=!this.getSharedState("flip"+e);this.setSharedState(d({},"flip"+e,f)),c.flip(a);var g=this.getSharedState("newTransformOptions"),h=-1*this.getSharedState("rotation");b.setRotation(h);var i=this.getSharedState("start").clone(),j=this.getSharedState("end").clone(),k=i.clone();"horizontal"===a?(i.set(1-j.x,i.y),j.set(1-k.x,j.y)):"vertical"===a&&(i.set(i.x,1-j.y),j.set(j.x,1-k.y)),g.start=i,g.end=j,g.rotation=h,this.setSharedState({start:i,end:j,rotation:h,changesDone:!0,newTransformOptions:g}),this._emitEvent(p.Constants.EVENTS.TRANSFORM_AFTER_EDIT),this.forceUpdate(),b.broadcastFlip(a),b.render()}},{key:"_onAcceptClick",value:function(a){a.preventDefault(),a.stopPropagation(),this._emitEvent(p.Constants.EVENTS.TRANSFORM_AFTER_EDIT),this.context.screen.switchToControls("default")}},{key:"_onAcceptMouseDown",value:function(a){a.stopPropagation()}},{key:"_onRotateClick",value:function(a){var b=this,c="cw"===a?90:-90,d=this.context.editor,e=this.getSharedState("orientationOperation"),f=(e.getRotation()+c)%360;e.set({rotation:f});var g={orientationRotation:f},h=this.getSharedState("newTransformOptions"),i=this.getSharedState("ratio");if(i)if(i.getForceDimensions()||i.getLockDimensions()||"*"!==i.getRatio())this._emitEvent(p.Constants.EVENTS.TRANSFORM_REAPPLY_RATIO),this._emitEvent(p.Constants.EVENTS.TRANSFORM_RESIZE);else{var j=this.getSharedState("start").clone(),k=this.getSharedState("end").clone(),l=j.clone();"cw"===a?(j.set(1-k.y,l.x),k.set(1-l.y,k.x)):"ccw"===a&&(j.set(l.y,1-k.x),k.set(k.y,1-l.x)),g.start=j,g.end=k,h.start=j,h.end=k}this.setSharedState({changesDone:!0,newTransformOptions:h}),d.broadcastRotate(c),d.zoom.auto(!0,!0,function(){b.setSharedState(g),b._emitEvent(p.Constants.EVENTS.TRANSFORM_AFTER_EDIT)})}},{key:"_updateTransformAreaStyles",value:function(){this._transformContainerRect=this.getImageBoundingRect(),this._imageContainer&&p.Utils.styleElement(this._imageContainer,{left:this._transformContainerRect.x+"px",top:this._transformContainerRect.y+"px",width:this._transformContainerRect.width+"px",height:this._transformContainerRect.height+"px"})}},{key:"_getAreaStyles",value:function(){var a=void 0,b=void 0,c=void 0,d=void 0;this._transformContainer?(a=this._transformContainerRect.getSize(),d=this._transformContainerRect.getPosition(),b=this.getSharedState("start").clone().multiply(a),c=this.getSharedState("end").clone().multiply(a).clone().subtract(b)):(a=new u(0,0),b=new u(0,0),c=new u(0,0),d=new u(0,0));var e=this._getDimensionsStyles(c.x,c.y);return{topLeft:this._getDimensionsStyles(b.x+d.x,b.y+d.y),topCenter:this._getDimensionsStyles(c.x,b.y+d.y),centerLeft:this._getDimensionsStyles(b.x+d.x,c.y),center:{width:e.width},innerTransformContainer:e}}},{key:"_getDimensionsStyles",value:function(a,b){return{width:Math.max(1,a),height:Math.max(1,b)}}},{key:"_renderOnCanvasControls",value:function(){var a=this,b=this._getAreaStyles(),c=!this.getSharedState("ratio"),d=this.getSharedState("forceCrop"),e=this.props.options.enableAcceptButton,f={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/accept.png",!0)+"')"};return p.React.createElement(x,{innerRef:function(b){a._container=b}},p.React.createElement(B,{className:"js-imageContainer",innerRef:function(b){a._imageContainer=b}},(e||d)&&p.React.createElement(N,{className:void 0,enabled:this.getSharedState("changesDone"),onClick:this._onAcceptClick,onMouseDown:this._onAcceptMouseDown,style:f})),p.React.createElement(C,{className:void 0,visible:this.state.visible,innerRef:function(b){a._transformContainer=b}},p.React.createElement(E,null,p.React.createElement(I,{style:b.topLeft}),p.React.createElement(I,{style:b.topCenter}),p.React.createElement(I,null)),p.React.createElement(E,null,p.React.createElement(I,{style:b.centerLeft}),p.React.createElement(p.DraggableComponent,{onStart:this._onCenterDragStart,onDrag:this._onCenterDrag,onStop:this._onCenterDragEnd,disabled:c},p.React.createElement(H,{style:b.center,className:void 0,undraggable:c},!c&&[p.React.createElement(p.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"top","left"),onDrag:this._onCornerDrag,onStop:this._onCornerDragEnd,key:"topLeft"},p.React.createElement(J,{top:!0,left:!0,className:void 0})),p.React.createElement(p.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"top","right"),onDrag:this._onCornerDrag,onStop:this._onCornerDragEnd,key:"topRight"},p.React.createElement(J,{top:!0,right:!0,className:void 0})),p.React.createElement(p.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"bottom","left"),onDrag:this._onCornerDrag,onStop:this._onCornerDragEnd,key:"bottomLeft"},p.React.createElement(J,{bottom:!0,left:!0,className:void 0})),p.React.createElement(p.DraggableComponent,{onStart:this._onCornerDragStart.bind(this,"bottom","right"),onDrag:this._onCornerDrag,onStop:this._onCornerDragEnd,key:"bottomRight"},p.React.createElement(J,{bottom:!0,right:!0,className:void 0})),p.React.createElement(D,{style:b.innerTransformContainer,className:void 0,key:"inner"},p.React.createElement(E,null,p.React.createElement(G,{right:!0,bottom:!0}),p.React.createElement(G,{right:!0,bottom:!0}),p.React.createElement(G,{bottom:!0})),p.React.createElement(E,null,p.React.createElement(G,{right:!0,bottom:!0}),p.React.createElement(G,{right:!0,bottom:!0}),p.React.createElement(G,{bottom:!0})),p.React.createElement(E,null,p.React.createElement(G,{right:!0}),p.React.createElement(G,{right:!0}),p.React.createElement(G,null)))])),p.React.createElement(I,null)),p.React.createElement(E,null,p.React.createElement(I,null),p.React.createElement(I,null),p.React.createElement(I,null))))}},{key:"_renderControls",value:function(){var a={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/flip.png",!0)+"')"},b={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/rotate.png",!0)+"')"},c=this.props.options,d=c.enableRotation,e=c.enableFlip,f=c.enableStraighten;return p.React.createElement(w,{className:void 0},this._renderOnCanvasControls(),p.React.createElement(y,null,p.React.createElement(z,{className:void 0},e&&[p.React.createElement(L,{style:a,key:"flip-h",onClick:this._onFlipClick.bind(this,"horizontal"),className:void 0}),p.React.createElement(L,{vertical:!0,style:a,key:"flip-v",onClick:this._onFlipClick.bind(this,"vertical"),className:void 0})],f&&p.React.createElement(r.a,{value:this.getSharedState("rotation"),onChange:this._onRotationChange}),d&&[p.React.createElement(M,{style:b,key:"rotate-ccw",onClick:this._onRotateClick.bind(this,"ccw"),className:void 0}),p.React.createElement(M,{clockwise:!0,style:b,key:"rotate-cw",onClick:this._onRotateClick.bind(this,"cw"),className:void 0})])))}}]),b}();v.contextTypes=p.CanvasControlsComponent.contextTypes,b.a=v;var w=p.adonis.div("120drhm","CanvasControls"),x=p.adonis.div("8gacw5",{draggable:"ovipzq"},"OnCanvasControls"),y=p.adonis.div("nmw377","BottomControlsContainer"),z=p.adonis.div("1gk061a","BottomControls"),A=p.adonis.div("1v9hd4r","TransformContainer"),B=p.adonis.div("15kzu1c","ImageContainer"),C=Object(p.adonis)(A)("1kjfwvf",{visible:"zgbg08"},"OuterTransformContainer"),D=Object(p.adonis)(A)("120drhm","InnerTransformContainer"),E=p.adonis.div("15u7gri","TransformRow"),F=p.adonis.div("1q481v0","TransformCell"),G=Object(p.adonis)(F)("1qh9j3j",{top:"1mup05p",right:"12l7t8k",bottom:"1ebuiz6",left:"txqhsl"},"BorderedTransformCell"),H=Object(p.adonis)(F)("52h18o",{undraggable:"16s6vgr"},"CenterTransformCell"),I=Object(p.adonis)(F)("17b4s67","DarkTransformCell"),J=p.adonis.div("1tai30v",{top:"1stnln8",right:"1wj5vxi",bottom:"17bojqc",left:"1a9ompl"},"Dragger"),K=p.adonis.button("127b6wl","Button"),L=Object(p.adonis)(K)("120drhm",{vertical:"12fqiy2"},"FlipButton"),M=Object(p.adonis)(K)("120drhm",{clockwise:"o7ss47"},"RotateButton"),N=p.adonis.div("sbdqjz",{enabled:"ro0g1e"},"AcceptButton")},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._bindAll("_onDragStart","_onDrag","_onDragEnd"),f._width=0,f.state={value:f.props.value||0},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.BaseComponent),o(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this._degreesPerPixel=90/217}},{key:"componentWillReceiveProps",value:function(a){this.state.value!==a.value&&this.setState({value:a.value})}},{key:"_onDragStart",value:function(){this._initialDegrees=180*this.state.value/Math.PI}},{key:"_onDrag",value:function(a){var b=this._initialDegrees+a.x*this._degreesPerPixel,c=(b=Math.min(45,Math.max(b,-45)))*Math.PI/180;this.setState({value:c}),this.props.onChange&&this.props.onChange(c)}},{key:"_onDragEnd",value:function(a){this._emitEvent(n.Constants.EVENTS.TRANSFORM_AFTER_EDIT)}},{key:"_getValue",value:function(){return Math.round(180*this.state.value/Math.PI)+"°"}},{key:"_getIndicatorPosition",value:function(){var a=45*Math.PI/180;return this._width/2+this.state.value/a*(this._width/2)}},{key:"_getIndicatorStyles",value:function(){var a=45*Math.PI/180;return{left:{left:108.5+this.state.value/a*108.5},right:{right:108.5-this.state.value/a*108.5}}}},{key:"render",value:function(){var a=this._getIndicatorStyles(),b={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",!0)+"')",backgroundPosition:a.left.left-4},c={backgroundImage:"url('"+this._getAssetPath("editor/controls/transform/degree-slider.png",!0)+"')",backgroundPosition:a.left.left+35};return n.React.createElement(n.DraggableComponent,{onStart:this._onDragStart,onDrag:this._onDrag,onStop:this._onDragEnd},n.React.createElement(q,{className:void 0},n.React.createElement(r,{style:b},n.React.createElement(s,{style:a.left})),n.React.createElement(t,{className:void 0},this._getValue()),n.React.createElement(r,{style:c},n.React.createElement(s,{style:a.right}))))}}]),b}();p.contextTypes=n.BaseComponent.contextTypes,b.a=p;var q=n.adonis.div("tix0xu","Wrapper"),r=n.adonis.div("6mdana","RotationSlider"),s=n.adonis.div("nxjpo","Indicator"),t=n.adonis.div("d97kws","Value")},function(a,b,c){function d(a,b,c){return b in a?f()(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e=c(0),f=c.n(e),g=c(2),h=c.n(g),i=c(3),j=c.n(i),k=c(1),l=c.n(k),m=c(7),n=(c.n(m),c(5)),o=(c.n(n),c(359)),p=c(360),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),f()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=n.GroupedControlsStyles.ControlGroupList,s=n.GroupedControlsStyles.ControlGroup,t=n.GroupedControlsStyles.ControlGroupTitle,u=m.Math.Vector2,v=function(a){function b(){var a,c;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var e=arguments.length,f=Array(e),g=0;g<e;g++)f[g]=arguments[g];var h=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||l()(b)).call.apply(a,[this].concat(f)));return h._bindAll("_reapplyRatio","_onHistoryChange","_onResetDefaultClick","_onOperationRemoved","_onOperationUpdated","_onTransformAfterEdit"),h._events=(d(c={},n.Constants.EVENTS.TRANSFORM_REAPPLY_RATIO,h._reapplyRatio),d(c,n.Constants.EVENTS.OPERATION_REMOVED,h._onOperationRemoved),d(c,n.Constants.EVENTS.OPERATION_UPDATED,h._onOperationUpdated),d(c,n.Constants.EVENTS.HISTORY_UNDO,h._onHistoryChange),d(c,n.Constants.EVENTS.HISTORY_REDO,h._onHistoryChange),d(c,n.Constants.EVENTS.TRANSFORM_AFTER_EDIT,h._onTransformAfterEdit),c),h._transformRatioManager=new n.TransformRatioManager(h.props.options),h.state.ratio=null,h._selectInitialRatio(!1,!0),h._onTransformAfterEdit(),h}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=j()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(h.a?h()(a,b):a.__proto__=b)}(b,n.ControlsComponent),q(b,[{key:"shouldSharedComponentUpdate",value:function(a,b){return a.ratio!==b.ratio}},{key:"_onHistoryChange",value:function(a){var b=this.context.editor,c={},d=b.operations.get("transform");if(d){var e=this.getSharedState("newTransformOptions"),f=this.props.controls.convertOperationOptionsToUI(d.serializeOptions());e.start=f.start,e.end=f.end,e.rotation=f.rotation,e.textureScale=f.textureScale,c.newTransformOptions=e,c.changesDone=!0,a.data&&a.data.ratio&&(c.ratio=a.data.ratio);var g={end:new u(1,1),rotation:0,start:new u(0,0),textureScale:1};b.broadcastTransform(d,g),this.setSharedState(c),b.zoom.auto(!0,!0)}}},{key:"_onOperationUpdated",value:function(a){var b=this.context.editor;if(this.getSharedState("transformOperation")===a){var c=this.props.controls.convertOperationOptionsToUI(a.serializeOptions());this.setSharedState({rotation:c.rotation,start:c.start,end:c.end}),b.zoom.auto(!0,!0)}}},{key:"_onOperationRemoved",value:function(a){var b=this.context.editor;if(this.getSharedState("transformOperation")===a){var c=b.operations.getOrCreate("transform",{enabled:!1}),d=b.getSDK();d.setRotation(0),d.setSpriteScale(1),this.setSharedState({transformOperation:c,rotation:0}),c._ratio=null,this._selectInitialRatio(!0,!1)}if(this.getSharedState("orientationOperation")===a){var e=b.operations.getOrCreate("orientation");this.setSharedState({orientationOperation:e,rotation:0,flipVertically:!1,flipHorizontally:!1})}}},{key:"_onResetDefaultClick",value:function(){var a=this.context.editor,b=this.getSharedState("orientationOperation"),c=this.getSharedState("transformOperation");b.set({flipHorizontally:!1,flipVertically:!1,rotation:0});var d=this.getSharedState("newTransformOptions");d.start=new u(0,0),d.end=new u(1,1),d.rotation=0,c._ratio=null,this._selectInitialRatio(!0,!0),this.setSharedState({ratio:c._ratio,orientationRotation:0,rotation:0,flipVertically:!1,flipHorizontally:!1,changesDone:!0}),this._emitEvent(n.Constants.EVENTS.TRANSFORM_RESIZE),this._emitEvent(n.Constants.EVENTS.TRANSFORM_AFTER_EDIT),a.setRotation(0),a.setSpriteScale(1),a.zoom.auto(!0,!0)}},{key:"_onTransformAfterEdit",value:function(){this.props.controls.applyNewTransformOptions()}},{key:"_reapplyRatio",value:function(){var a=this.getSharedState("ratio");this._selectRatio(a)}},{key:"_selectRatio",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=this.getSharedState("transformOperation");b&&a&&this._setDefaultOptionsForRatio(a,c),d._ratio=a,this.setSharedState({ratio:a},c),c&&this.setSharedState({changesDone:!0}),this._emitEvent(n.Constants.EVENTS.TRANSFORM_RESIZE),c&&this._emitEvent(n.Constants.EVENTS.TRANSFORM_AFTER_EDIT)}},{key:"_setDefaultOptionsForRatio",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=a&&a.getRatio(),d=a&&a.getDimensions(),e=new u,f=new u;if(d&&!c&&(c=d.x/d.y),c&&"*"!==c){var g=this.getSharedState("transformOperation").getInputDimensions(!1),h=void 0,i=void 0;g.x/g.y<=c?(h=(i=g.x/c)*c,e.set((g.x-h)/2,(g.y-i)/2)):(i=(h=g.y*c)/c,e.set((g.x-h)/2,(g.y-i)/2)),f.copy(e).add(h,i),e.divide(g),f.divide(g)}else e=new u(0,0),f=new u(1,1);var j=this.getSharedState("newTransformOptions");j.start=e,j.end=f,this.setSharedState({start:e,end:f},b)}},{key:"_selectInitialRatio",value:function(){var a=this,b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=this.getSharedState("transformOperation"),e=null,f=this._transformRatioManager.getCategories().map(function(b){return a._transformRatioManager.getRatiosForCategory(b)}).reduce(function(a,b){return a.concat(b)}),g=d._ratio;if(g&&(e=g),e||(e=f.filter(function(a){return a.getSelected()}).pop()),!e){var h=d.getInputDimensions(!1),i=d.getEnd().clone().subtract(d.getStart().clone()),j=i.x*h.x/(i.y*h.y),k=function(a){return Math.floor(1e6*a)/1e6};e=f.filter(function(a){return k(j)===k(a.getRatio())}).pop()}return e?this._selectRatio(e,b,c):("*"!==(e=f[0]).getRatio()&&this.setSharedState({changesDone:!0}),this._selectRatio(e,!0,c))}},{key:"_renderSections",value:function(){var a=this,b=function(b){var c=a.getSharedState("ratio").getIdentifier();return a._transformRatioManager.getRatiosForCategory(b).map(function(d){var e=d.getIdentifier(),f=c===e;return n.React.createElement(o.a,{key:e,defaultIconPath:"editor/controls/transform/ratios/"+e+"-default.png",hoverIconPath:"editor/controls/transform/ratios/"+e+"-hover.png",activeIconPath:"editor/controls/transform/ratios/"+e+"-active.png",onClick:a._selectRatio.bind(a,d),title:a._t("pesdk.transform.asset."+b.getIdentifier()+".asset."+e)||d.getDefaultName(),identifier:e,selected:f})})};return this._transformRatioManager.getCategories().map(function(c){return a._transformRatioManager.getRatiosForCategory(c).length>0?function(c){return n.React.createElement(y,{key:c.getIdentifier()},n.React.createElement(z,null,a._t("pesdk.transform.asset."+c.getIdentifier()+".name")||c.getDefaultName()),n.React.createElement(A,null,b(c)))}(c):null})}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"_renderContent",value:function(){var a=this,b=this.context.options.editor.forceCrop,c=this.getSharedState("ratio");return[n.React.createElement(n.ScrollableListComponent,{key:"list",direction:"vertical",innerRef:function(b){a._scrollbar=b}},n.React.createElement(x,null,n.React.createElement(w,null,n.React.createElement(n.ButtonComponent,{disabled:b,title:this._t("pesdk.transform.button.reset"),className:void 0,onClick:this._onResetDefaultClick})),this._renderSections())),n.React.createElement(p.a,{key:"transformDimensions",controls:this.props.controls,disabled:!c||!!c.getForceDimensions()})]}}]),b}();v.contextTypes=n.ControlsComponent.contextTypes,v.RootElement=n.ControlsComponent.RootElement,b.a=v;var w=n.adonis.li("7abnmv","SectionListHeader"),x=Object(n.adonis)(r).ul("x32ss4","SectionList"),y=Object(n.adonis)(s).li("ber9o0","Section"),z=Object(n.adonis)(t).div("15ebqhq","SectionTitle"),A=n.adonis.ul("1klgjyq","SectionGrid")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(5),m=(c.n(l),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),n=l.ControlsStyles.PlainControlItem,o=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d)));return f.state={hovered:!1},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,l.BaseComponent),m(b,[{key:"render",value:function(){var a=this,b={backgroundImage:"url('"+this._getAssetPath(this.props.defaultIconPath,!0)+"')"},c={backgroundImage:"url('"+this._getAssetPath(this.props.hoverIconPath,!0)+"')"},d={backgroundImage:"url('"+this._getAssetPath(this.props.activeIconPath,!0)+"')"},e=this.props,f=e.selected,g=e.onClick,h=e.identifier,i=e.title,j=this.state.hovered;return l.React.createElement(p,{selected:f,onClick:g,"data-identifier":h,"data-selected":f,onMouseEnter:function(){return a.setState({hovered:!0})},onMouseLeave:function(){return a.setState({hovered:!1})},className:void 0},l.React.createElement(l.Transition,{active:!f},l.React.createElement(q,{style:b})),l.React.createElement(l.Transition,{active:!f&&j},l.React.createElement(q,{style:c})),l.React.createElement(l.Transition,{active:f},l.React.createElement(q,{style:d})),l.React.createElement(r,{selected:f},i))}}]),b}();o.contextTypes=l.BaseComponent.contextTypes,b.a=o;var p=Object(l.adonis)(n).li("71xi0n","TransformListItem"),q=l.adonis.div("u0ryhr",{
rendered:"2jlos",visible:"82svov"},"Icon"),r=l.adonis.div("jpjwq7",{selected:"zgbg08"},"Title")},function(a,b,c){var d=c(0),e=c.n(d),f=c(2),g=c.n(f),h=c(3),i=c.n(h),j=c(1),k=c.n(j),l=c(7),m=(c.n(l),c(5)),n=(c.n(m),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),o=m.GroupedControlsStyles.ControlGroupTitle,p=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||k()(b)).call.apply(a,[this].concat(d))),g=f._getTransformDimensions();return f.state={nextDimensions:g},f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=i()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(g.a?g()(a,b):a.__proto__=b)}(b,m.SharedStateComponent),n(b,[{key:"shouldSharedComponentUpdate",value:function(a,b){return!a.start.equals(b.start)||!a.end.equals(b.end)||a.ratio.equals(b.ratio)}},{key:"sharedComponentWillUpdate",value:function(a,b){b.transformOperation&&(this.state.nextDimensions=this._getTransformDimensions(),this.forceUpdate())}},{key:"_onInputLiveChange",value:function(a,b){var c=b.target.value;c.length&&!c.match(/\d+?/i)||(this.state.nextDimensions[a]=c&&parseInt(c,10)||"",this.forceUpdate())}},{key:"_onInputChange",value:function(a,b){var c=this.state.nextDimensions[a]||0,d=this.getSharedState("transformOperation").getInputDimensions(!1),e=this.getSharedState("ratio"),f=e.getRatio(),g=e.getLockDimensions(),h=e.getDimensions(),i=this.getSharedState("start"),j=this.getSharedState("end").clone().subtract(i),k=j.clone().multiply(d);k[a]=Math.min(d[a],c);var n=f;null!==n&&"*"!==n||(n=h?h.x/h.y:j.x/j.y),("*"!==f||g)&&("x"===a?k.y=k.x/n:k.x=k.y*n);var o=k.clone();(k.x>d.x||k.y>d.y)&&(o=l.Utils.resizeVectorToFit(k,d)),o.round(),g?e.setDimensions(o):this._resizeTransformTo(o);var p=this._getTransformDimensions();this.state.nextDimensions=p,this._emitEvent(m.Constants.EVENTS.TRANSFORM_RESIZE),this._emitEvent(m.Constants.EVENTS.TRANSFORM_AFTER_EDIT),this.forceUpdate()}},{key:"_onLockDimensionsChange",value:function(){var a=this.getSharedState("ratio"),b=!a.getLockDimensions();a.setLockDimensions(b),b||(this.state.nextDimensions=this._getTransformDimensions()),a.setDimensions(this.state.nextDimensions),this._emitEvent(m.Constants.EVENTS.TRANSFORM_AFTER_EDIT),this.forceUpdate()}},{key:"_getTransformDimensions",value:function(){var a=this.getSharedState("transformOperation"),b=this.getSharedState("ratio"),c=b?b.getDimensions():null,d=null;if(b&&(b.getForceDimensions()||b.getLockDimensions()))d=c.clone();else{var e=a.getInputDimensions(!1),f=this.getSharedState("start");d=this.getSharedState("end").clone().subtract(f).multiply(e).round()}return d}},{key:"_resizeTransformTo",value:function(a){var b=this.getSharedState("transformOperation").getInputDimensions(!1),c=this.getSharedState("start").clone(),d=this.getSharedState("end").clone(),e=a.divide(b);d.copy(c).add(e),d.x>1&&(c.x-=d.x-1,d.x=1),d.y>1&&(c.y-=d.y-1,d.y=1);var f=this.props.controls.fixTransform(c,d,"right","bottom"),g=f.start,h=f.end,i=this.getSharedState("newTransformOptions");return i.start=g,i.end=h,this.setSharedState({start:g,end:h}),this._emitEvent(m.Constants.EVENTS.TRANSFORM_RESIZE),this._emitEvent(m.Constants.EVENTS.TRANSFORM_AFTER_EDIT),i}},{key:"render",value:function(){var a=this.getSharedState("ratio").getLockDimensions();return m.React.createElement(s,{className:void 0},m.React.createElement(t,null,m.React.createElement(y,{className:void 0,onClick:this._onLockDimensionsChange.bind(this),checked:a}),m.React.createElement(z,null,this._t("pesdk.transform.dimensions.lock")),m.React.createElement(u,null,m.React.createElement(v,null,m.React.createElement(q,{suffix:this._t("pesdk.transform.placeholder.width"),name:"width",disabled:this.props.disabled,value:this.state.nextDimensions.x,onLiveChange:this._onInputLiveChange.bind(this,"x"),onChange:this._onInputChange.bind(this,"x")})),m.React.createElement(w,null,m.React.createElement(r,{src:this._getAssetPath("editor/controls/transform/dimensions-cross.png",!0)})),m.React.createElement(v,null,m.React.createElement(q,{suffix:this._t("pesdk.transform.placeholder.height"),name:"height",disabled:this.props.disabled,value:this.state.nextDimensions.y,onLiveChange:this._onInputLiveChange.bind(this,"y"),onChange:this._onInputChange.bind(this,"y")}))),m.React.createElement(m.Transition,{active:this.props.disabled,enterProp:"rendered",enterDuration:300,appearProp:"visible",appearDuration:300,leaveDuration:300},m.React.createElement(x,{className:void 0}))))}}]),b}();p.contextTypes=m.SharedStateComponent.contextTypes,b.a=p;var q=Object(m.adonis)(m.SuffixedTextInputComponent)("cw1txx","DimensionInput"),r=m.adonis.img("1dew3s1","Cross"),s=m.adonis.div("1yz821h","TransformDimensions"),t=m.adonis.div("1po10b5","TransformDimensionsWrapper"),u=m.adonis.div("wlk9p6","Table"),v=m.adonis.div("1q481v0","Cell"),w=Object(m.adonis)(v)("13lk3i9","CrossCell"),x=m.adonis.div("943mx5",{rendered:"2jlos",visible:"rval4i"},"LockOverlay"),y=(m.adonis.img("k1z0lp","Lock"),Object(m.adonis)(m.CheckboxComponent)("15tfhjl","Checkbox")),z=Object(m.adonis)(o).div("t3ptdc","SectionTitle")},function(a,b,c){function d(a){return function(){var b=a.apply(this,arguments);return new q.a(function(a,c){return function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}if(!g.done)return q.a.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)});a(h)}("next")})}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}var f=c(9),g=c.n(f),h=c(0),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(111),o=c.n(n),p=c(8),q=c.n(p),r=c(1),s=c.n(r),t=c(7),u=(c.n(t),c(5)),v=c.n(u),w=c(362),x=c(363),y=c(47),z=g.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},A=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),i()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),B=void 0,C=void 0;t.Operations.SpriteOperation&&(B=t.Operations.SpriteOperation.TextDesignSprite,C=B.AssetManager);var D=function(a){function b(){var a,c,d;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return c=d=e(this,(a=b.__proto__||s()(b)).call.apply(a,[this].concat(g))),d.setColor=function(a){var b=d.context.editor,c=d.sharedState.get("selectedSprite");d.sharedState.set("color",a.clone()),c?(c.setColor(a.clone()),d.addLocalHistorySnapshot("layout-color"),b.render()):d.sharedState.set({color:a.clone()})},e(d,c)}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,u.BaseControls),A(b,[{key:"_onEnter",value:function(){var a=this.context.editor,b=new u.TextDesignManager(this.context.ui,this._options),c=new u.FontManager(this.context.ui,{fonts:u.Constants.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),d=a.operations.getOrCreate("sprite");a.features.disable("zoom","drag"),a.zoom.auto(),this.sharedState.set({textDesignManager:b,fontManager:c,operation:d,color:t.Color.WHITE}),this.sharedState.get("selectedSprite")||this.createNewTextDesign().then(function(b){a.render()})}},{key:"_onLeave",value:function(){var a=this.context.editor;this.saveTextDesignSettings(),a.features.enable("zoom","drag")}},{key:"getLayoutItems",value:function(){var a=this.sharedState.get("textDesignManager");return this.constructor.TextDesignItems.filter(function(b){return a.getLayoutByIdentifier(b.identifier)})}},{key:"getText",value:function(){var a=d(o.a.mark(function a(){var b,c=this,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=u.ModalManager.instance.displayInput("Text",d),a.abrupt("return",new q.a(function(a,e){b.on("input",a),b.on("cancel",function(b){var f=c.sharedState.get("operation").getSprites().filter(function(a){return a instanceof B}).slice().reverse(),g=c.sharedState.get("selectedSprite")||f[0];if(g){var h=c.sharedState.get("selectedLayout")||g.getLayout().constructor.identifier;c.sharedState.set({selectedSprite:g,selectedLayout:h}),a(d)}else c.context.screen.switchToControls("default"),e(new Error("Input dismissed for first text design - Reset to default tool"))}),b.on("close",function(b){a(d)})}));case 2:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:"editText",value:function(){var a=d(o.a.mark(function a(){var b,c,d,e,f;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=this.sharedState.get("selectedSprite"),c=this.sharedState.get("operation"),d=this.context.editor,b){a.next=5;break}return a.abrupt("return");case 5:return e=b.getText(),a.next=8,this.getText(e);case 8:if((f=a.sent)&&""!==f.trim()){a.next=15;break}return c.removeSprite(b),b.dispose(),this.sharedState.set({selectedLayout:null,selectedSprite:null}),d.render(),a.abrupt("return");case 15:b.setText(f),this.addLocalHistorySnapshot("layout-text");case 17:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:"createNewTextDesign",value:function(){var a=d(o.a.mark(function a(){var b,c,d,e,f,g,h,i,j,k=this,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=this.sharedState.get(),c=b.textDesignManager,d=b.selectedSprite,e=b.operation,this.saveTextDesignSettings(),f=this.getGlobalToolState(),g=l?c.getLayoutByIdentifier(l):c.getDefaultLayout().layout){a.next=6;break}return a.abrupt("return",null);case 6:return h=new g,a.prev=7,i=h.getImagePaths().map(function(a){return{path:a,fullPath:k._getAssetPath(a),image:null}}),a.next=11,C.loadImages(i);case 11:h.onImagesLoaded(),a.next=18;break;case 14:return a.prev=14,a.t0=a.catch(7),y.a.error(a.t0),a.abrupt("return");case 18:return j=z({color:this.sharedState.get("color"),inverted:this.sharedState.get("textAsMask"),width:.8,layout:h},f||{}),a.next=21,this.getText();case 21:if(j.text=a.sent,j.text&&""!==j.text.trim()){a.next=24;break}return a.abrupt("return");case 24:return d=e.createTextDesign(j),e.addSprite(d),this.sharedState.set({selectedSprite:d}),this.addLocalHistorySnapshot("layout"),a.abrupt("return",d);case 29:case"end":return a.stop()}},a,this,[[7,14]])}));return function(){return a.apply(this,arguments)}}()},{key:"saveTextDesignSettings",value:function(){var a=this.sharedState.get("selectedSprite");a&&this.setGlobalToolState(a.serializeOptions(["layout","color","inverted"]))}},{key:"selectLayout",value:function(){var a=d(o.a.mark(function a(){var b,c,d,e,f,g,h,i=this,j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=this.sharedState.get(),c=b.textDesignManager,d=b.selectedSprite){a.next=3;break}return a.abrupt("return",this.createNewTextDesign(j));case 3:if(e=j?c.getLayoutByIdentifier(j):c.getDefaultLayout().layout){a.next=6;break}return a.abrupt("return",null);case 6:return f=new e,a.prev=7,g=f.getImagePaths().map(function(a){return{path:a,fullPath:i._getAssetPath(a),image:null}}),a.next=11,C.loadImages(g);case 11:f.onImagesLoaded(),a.next=18;break;case 14:return a.prev=14,a.t0=a.catch(7),y.a.error(a.t0),a.abrupt("return");case 18:return h=this.context.editor,d.seed(),d.setLayout(f),this.addLocalHistorySnapshot("layout"),h.render(),a.abrupt("return",d);case 24:case"end":return a.stop()}},a,this,[[7,14]])}));return function(){return a.apply(this,arguments)}}()},{key:"_loadFonts",value:function(){var a=d(o.a.mark(function a(){var b,c;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=this.sharedState.get("fontManager"),(c=this.context.ui.getFontLoader()).setFonts(b.getFonts()),C.setFonts(z({},C.getFonts(),b.getVariationsByIdentifier())),a.abrupt("return",c.load().catch(function(a){return a.map(function(a){return a.font.getFontFamily()})}));case 5:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}()},{key:"loadFonts",value:function(){var a=this,b=void 0,c=window.setTimeout(function(){b=u.ModalManager.instance.displayLoading(a._t("pesdk.editor.text.loadingFonts"),!0)},600);return this._loadFonts().then(function(){window.clearTimeout(c),b&&b.close()}).catch(function(d){window.clearTimeout(c),b&&b.close();var e=d.join(", ");u.ModalManager.instance.displayError(a._t("pesdk.editor.title.fontLoadingError"),a._t("pesdk.editor.text.fontLoadingError",{fonts:e}))})}}],[{key:"mapOperationsToSharedState",value:function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=a.getOrCreate("sprite"),d=b.selectedSprite;if(d&&c.getSprites().indexOf(d)<0){var e=c.getSprites().filter(function(a){return a.getId()===d.getId()})[0];e&&(d=e)}var f=d?d.getLayout():null;return{selectedSprite:d,color:d?d.getColor():t.Color.WHITE,textAsMask:!!d&&d.getInverted(),selectedLayout:f?f.constructor.identifier:null}}},{key:"clickAtPosition",value:function(a,b){var c=b.operations.get("sprite");if(!c)return!1;var d=c.getSpritesAtPosition(a,b.getOutputTextureDimensions()).filter(function(a){return a instanceof B});return!!d[0]&&{selectedSprite:d[0]}}},{key:"isEnabled",value:function(a){return a.isToolEnabled("textdesign")&&a.isToolAllowed("textdesign")}},{key:"getPreloadAssets",value:function(a){var b=[];return this.TextDesignItems.forEach(function(a){b.push(a.backgroundImagePath)}),b}}]),b}();D.identifier="textdesign",D.controlsComponent=w.a,D.canvasControlsComponent=x.a,D.iconPath="editor/controls/text-design/icon.png",D.activeIconPath="editor/controls/text-design/icon-active.png",D.requiredOperations=["sprite"],D.updatableOperations=["sprite"],D.switchToDefaultControlsOnRemoval=!0,D.defaultOptions={availableLayouts:null},D.TextDesignItems=[{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic"},{backgroundImagePath:"editor/controls/text-design/icons/imgly_text_design_icon_fat_face.png",identifier:"imgly_text_design_multiline"}],v.a.Controls.TextDesignControls=D,b.a=D},function(a,b,c){var d=c(0),e=c.n(d),f=c(6),g=c.n(f),h=c(2),i=c.n(h),j=c(3),k=c.n(j),l=c(1),m=c.n(l),n=c(5),o=(c.n(n),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),e()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}());n.GroupedControlsStyles.ControlGroupTitle;var p=n.GroupedControlsStyles.ControlGroup,q=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||m()(b)).call.apply(a,[this].concat(d)));return f._events={},f._unavailableFontFamilies=[],f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=k()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(i.a?i()(a,b):a.__proto__=b)}(b,n.ControlsComponent),o(b,[{key:"componentDidMount",value:function(){(function a(b,c,d){null===b&&(b=Function.prototype);var e=g()(b,c);if(void 0===e){var f=m()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var h=e.get;return void 0!==h?h.call(d):void 0})(b.prototype.__proto__||m()(b.prototype),"componentDidMount",this).call(this),this.props.controls.loadFonts()}},{key:"shouldSharedComponentUpdate",value:function(a,b){return!0}},{key:"_getRootProps",value:function(){return{className:void 0,withBorderTop:!0}}},{key:"onSelectLayout",value:function(a){var b=this;this.props.controls.selectLayout(a).then(function(){b.forceUpdate(),b.context.editor.render()})}},{key:"onTextDesignNewClick",value:function(){this.props.controls.createNewTextDesign()}},{key:"_renderContent",value:function(){var a=this,b=this.sharedState,c=b.color,d=b.selectedLayout,e=this.props.controls,f=e.getLayoutItems();return n.React.createElement(r,null,n.React.createElement(v,null,n.React.createElement(n.ButtonComponent,{title:this._t("pesdk.textdesign.button.new"),onClick:function(){return a.onTextDesignNewClick()},className:void 0}),n.React.createElement(x,null,n.React.createElement(n.ColorSelectionComponent,{value:c,onChange:e.setColor}))),n.React.createElement(w,null,n.React.createElement(n.ScrollbarComponent,{direction:"vertical"},n.React.createElement(t,null,f.map(function(b){return n.React.createElement(u,{key:b.identifier,className:void 0,selected:b.identifier===d,onClick:function(){return a.onSelectLayout(b.identifier)}},n.React.createElement(s,{src:b.identifier===d?a._getAssetPath("editor/controls/text-design/icons/imgly_icon_next_48pt.png",!0):a._getAssetPath(b.backgroundImagePath,!0)}))})))))}}]),b}();q.contextTypes=n.ControlsComponent.contextTypes,q.RootElement=n.ControlsComponent.RootElement,b.a=q;var r=n.adonis.div("w4knew","Container"),s=n.adonis.img("95qw31","Image"),t=n.adonis.ul("13wctlp","List"),u=n.adonis.li("18c5asb",{selected:"1eawvu9"},"ListItem"),v=Object(n.adonis)(p).div("1lqw49n","Settings"),w=Object(n.adonis)(p).div("qf5p21","SettingsBottom"),x=n.adonis.div("f045o7","ColorSelection")},function(a,b,c){var d=c(9),e=c.n(d),f=c(0),g=c.n(f),h=c(6),i=c.n(h),j=c(2),k=c.n(j),l=c(3),m=c.n(l),n=c(1),o=c.n(n),p=c(7),q=(c.n(p),c(55)),r=e.a||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},s=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),g()(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),t=void 0;p.Operations.SpriteOperation&&(t=p.Operations.SpriteOperation.TextDesignSprite);var u=function(a){function b(){var a;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(a=b.__proto__||o()(b)).call.apply(a,[this].concat(d)));return f.state=r({},f.state,{visible:!0}),f}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=m()(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(k.a?k()(a,b):a.__proto__=b)}(b,q.a),s(b,[{key:"_renderSpriteItems",value:function(a){return function a(b,c,d){null===b&&(b=Function.prototype);var e=i()(b,c);if(void 0===e){var f=o()(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0!==g?g.call(d):void 0}(b.prototype.__proto__||o()(b.prototype),"_renderSpriteItems",this).call(this,a.filter(function(a){return a instanceof t}))}},{key:"_selectNextSprite",value:function(){for(var a=this.getSharedState("operation").getSprites().slice(0).reverse(),b=void 0,c=void 0,d=0;d<a.length;d++)if((b=a[d])instanceof t){c=b;break}c||(this.props.controls.skipHistory=!0,this.context.screen.switchToControls("default")),this.setSharedState({selectedSprite:c||null})}},{key:"_createSprite",value:function(a){return this.getSharedState("operation").createTextDesign(a)}}]),b}();u.contextTypes=q.a.contextTypes,b.a=u}])});